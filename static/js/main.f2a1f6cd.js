/*! For license information please see main.f2a1f6cd.js.LICENSE.txt */
(()=>{var e={49:(e,t)=>{"use strict";var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function y(){}function x(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var b=x.prototype=new y;b.constructor=x,m(b,v.prototype),b.isPureReactComponent=!0;var _=Array.isArray,w=Object.prototype.hasOwnProperty,S={current:null},M={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,i){var r,s={},a=null,o=null;if(null!=t)for(r in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)w.call(t,r)&&!M.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(1===l)s.children=i;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===s[r]&&(s[r]=l[r]);return{$$typeof:n,type:e,key:a,ref:o,props:s,_owner:S.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function A(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function P(e,t,r,s,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case i:l=!0}}if(l)return a=a(l=e),e=""===s?"."+A(l,0):s,_(a)?(r="",null!=e&&(r=e.replace(C,"$&/")+"/"),P(a,t,r,"",(function(e){return e}))):null!=a&&(T(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,r+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(C,"$&/")+"/")+e)),t.push(a)),1;if(l=0,s=""===s?".":s+":",_(e))for(var c=0;c<e.length;c++){var u=s+A(o=e[c],c);l+=P(o,t,r,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=P(o=o.value,t,r,u=s+A(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function N(e,t,n){if(null==e)return e;var i=[],r=0;return P(e,i,"","",(function(e){return t.call(n,e,r++)})),i}function k(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},I={transition:null},L={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:I,ReactCurrentOwner:S};function j(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=r,t.Profiler=a,t.PureComponent=x,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.act=j,t.cloneElement=function(e,t,i){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=m({},e.props),s=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=S.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)w.call(t,c)&&!M.hasOwnProperty(c)&&(r[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)r.children=i;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:n,type:e.type,key:s,ref:a,props:r,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:k}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=I.transition;I.transition={};try{e()}finally{I.transition=t}},t.unstable_act=j,t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.3.1"},119:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(345)},153:(e,t)=>{"use strict";t.ConcurrentRoot=1,t.ContinuousEventPriority=4,t.DefaultEventPriority=16,t.DiscreteEventPriority=1},224:(e,t,n)=>{"use strict";e.exports=n(733)},235:(e,t,n)=>{"use strict";e.exports=n(473)},340:(e,t,n)=>{"use strict";e.exports=n(761)},345:(e,t,n)=>{"use strict";var i=n(950),r=n(340);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,n,i,r,s,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function x(e,t,n,i){var r=g.hasOwnProperty(t)?g[t]:null;(null!==r?0!==r.type:i||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,i){if(null===t||"undefined"===typeof t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,i)&&(n=null),i||null===r?function(e){return!!d.call(f,e)||!d.call(p,e)&&(h.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,i=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),C=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var I=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var L=Symbol.iterator;function j(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=L&&e[L]||e["@@iterator"])?e:null}var D,O=Object.assign;function z(e){if(void 0===D)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);D=t&&t[1]||""}return"\n"+D+e}var F=!1;function U(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var i=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){i=c}e.call(t.prototype)}else{try{throw Error()}catch(c){i=c}e()}}catch(c){if(c&&i&&"string"===typeof c.stack){for(var r=c.stack.split("\n"),s=i.stack.split("\n"),a=r.length-1,o=s.length-1;1<=a&&0<=o&&r[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(r[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||r[a]!==s[o]){var l="\n"+r[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function B(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case w:return"Portal";case E:return"Profiler";case M:return"StrictMode";case P:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case k:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return V(e(t))}catch(n){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===M?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){i=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=G(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var n=t.checked;return O({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function K(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Z(e,t){null!=(t=t.checked)&&x(e,"checked",t,!1)}function Q(e,t){Z(e,t);var n=W(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Y(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return O({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function se(e,t){var n=W(t.value),i=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=me(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}Object.keys(pe).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ve=O({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function xe(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Se=null,Me=null;function Ee(e){if(e=xr(e)){if("function"!==typeof we)throw Error(s(280));var t=e.stateNode;t&&(t=_r(t),we(e.stateNode,e.type,t))}}function Te(e){Se?Me?Me.push(e):Me=[e]:Se=e}function Ce(){if(Se){var e=Se,t=Me;if(Me=Se=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ae(e,t){return e(t)}function Pe(){}var Ne=!1;function ke(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Ae(e,t,n)}finally{Ne=!1,(null!==Se||null!==Me)&&(Pe(),Ce())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var i=_r(n);if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Ie=!1;if(u)try{var Le={};Object.defineProperty(Le,"passive",{get:function(){Ie=!0}}),window.addEventListener("test",Le,Le),window.removeEventListener("test",Le,Le)}catch(ue){Ie=!1}function je(e,t,n,i,r,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var De=!1,Oe=null,ze=!1,Fe=null,Ue={onError:function(e){De=!0,Oe=e}};function Be(e,t,n,i,r,s,a,o,l){De=!1,Oe=null,je.apply(Ue,arguments)}function Ve(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Ve(e)!==e)throw Error(s(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var a=r.alternate;if(null===a){if(null!==(i=r.return)){n=i;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===n)return We(r),e;if(a===i)return We(r),t;a=a.sibling}throw Error(s(188))}if(n.return!==i.return)n=r,i=a;else{for(var o=!1,l=r.child;l;){if(l===n){o=!0,n=r,i=a;break}if(l===i){o=!0,i=r,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,i=r;break}if(l===i){o=!0,i=a,n=r;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==i)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var Xe=r.unstable_scheduleCallback,Ye=r.unstable_cancelCallback,Je=r.unstable_shouldYield,Ke=r.unstable_requestPaint,Ze=r.unstable_now,Qe=r.unstable_getCurrentPriorityLevel,$e=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,tt=r.unstable_NormalPriority,nt=r.unstable_LowPriority,it=r.unstable_IdlePriority,rt=null,st=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,r=e.suspendedLanes,s=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~r;0!==o?i=dt(o):0!==(s&=a)&&(i=dt(s))}else 0!==(a=n&~r)?i=dt(a):0!==s&&(i=dt(s));if(0===i)return 0;if(0!==t&&t!==i&&0===(t&r)&&((r=i&-i)>=(s=t&-t)||16===r&&0!==(4194240&s)))return t;if(0!==(4&i)&&(i|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)r=1<<(n=31-at(t)),i|=e[n],t&=~r;return i}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-at(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}var xt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,wt,St,Mt,Et,Tt=!1,Ct=[],At=null,Pt=null,Nt=null,kt=new Map,Rt=new Map,It=[],Lt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jt(e,t){switch(e){case"focusin":case"focusout":At=null;break;case"dragenter":case"dragleave":Pt=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":kt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Dt(e,t,n,i,r,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},null!==t&&(null!==(t=xr(t))&&wt(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function Ot(e){var t=yr(e.target);if(null!==t){var n=Ve(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=He(n)))return e.blockedOn=t,void Et(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function zt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=xr(n))&&wt(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);be=i,n.target.dispatchEvent(i),be=null,t.shift()}return!0}function Ft(e,t,n){zt(e)&&n.delete(t)}function Ut(){Tt=!1,null!==At&&zt(At)&&(At=null),null!==Pt&&zt(Pt)&&(Pt=null),null!==Nt&&zt(Nt)&&(Nt=null),kt.forEach(Ft),Rt.forEach(Ft)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ut)))}function Vt(e){function t(t){return Bt(t,e)}if(0<Ct.length){Bt(Ct[0],e);for(var n=1;n<Ct.length;n++){var i=Ct[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==At&&Bt(At,e),null!==Pt&&Bt(Pt,e),null!==Nt&&Bt(Nt,e),kt.forEach(t),Rt.forEach(t),n=0;n<It.length;n++)(i=It[n]).blockedOn===e&&(i.blockedOn=null);for(;0<It.length&&null===(n=It[0]).blockedOn;)Ot(n),null===n.blockedOn&&It.shift()}var Ht=b.ReactCurrentBatchConfig,Wt=!0;function Gt(e,t,n,i){var r=xt,s=Ht.transition;Ht.transition=null;try{xt=1,Xt(e,t,n,i)}finally{xt=r,Ht.transition=s}}function qt(e,t,n,i){var r=xt,s=Ht.transition;Ht.transition=null;try{xt=4,Xt(e,t,n,i)}finally{xt=r,Ht.transition=s}}function Xt(e,t,n,i){if(Wt){var r=Jt(e,t,n,i);if(null===r)Wi(e,t,i,Yt,n),jt(e,i);else if(function(e,t,n,i,r){switch(t){case"focusin":return At=Dt(At,e,t,n,i,r),!0;case"dragenter":return Pt=Dt(Pt,e,t,n,i,r),!0;case"mouseover":return Nt=Dt(Nt,e,t,n,i,r),!0;case"pointerover":var s=r.pointerId;return kt.set(s,Dt(kt.get(s)||null,e,t,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Rt.set(s,Dt(Rt.get(s)||null,e,t,n,i,r)),!0}return!1}(r,e,t,n,i))i.stopPropagation();else if(jt(e,i),4&t&&-1<Lt.indexOf(e)){for(;null!==r;){var s=xr(r);if(null!==s&&_t(s),null===(s=Jt(e,t,n,i))&&Wi(e,t,i,Yt,n),s===r)break;r=s}null!==r&&i.stopPropagation()}else Wi(e,t,i,null,n)}}var Yt=null;function Jt(e,t,n,i){if(Yt=null,null!==(e=yr(e=_e(i))))if(null===(t=Ve(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function Kt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case it:return 536870912;default:return 16}default:return 16}}var Zt=null,Qt=null,$t=null;function en(){if($t)return $t;var e,t,n=Qt,i=n.length,r="value"in Zt?Zt.value:Zt.textContent,s=r.length;for(e=0;e<i&&n[e]===r[e];e++);var a=i-e;for(t=1;t<=a&&n[i-t]===r[s-t];t++);return $t=r.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,i,r,s){for(var a in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(r):r[a]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return O(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),dn=O({},cn,{view:0,detail:0}),hn=sn(dn),pn=O({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),fn=sn(pn),mn=sn(O({},pn,{dataTransfer:0})),gn=sn(O({},dn,{relatedTarget:0})),vn=sn(O({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=O({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xn=sn(yn),bn=sn(O({},cn,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function En(){return Mn}var Tn=O({},dn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=sn(Tn),An=sn(O({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=sn(O({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Nn=sn(O({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),kn=O({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=sn(kn),In=[9,13,27,32],Ln=u&&"CompositionEvent"in window,jn=null;u&&"documentMode"in document&&(jn=document.documentMode);var Dn=u&&"TextEvent"in window&&!jn,On=u&&(!Ln||jn&&8<jn&&11>=jn),zn=String.fromCharCode(32),Fn=!1;function Un(e,t){switch(e){case"keyup":return-1!==In.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Vn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function Gn(e,t,n,i){Te(i),0<(t=qi(t,"onChange")).length&&(n=new un("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var qn=null,Xn=null;function Yn(e){zi(e,0)}function Jn(e){if(X(br(e)))return e}function Kn(e,t){if("change"===e)return t}var Zn=!1;if(u){var Qn;if(u){var $n="oninput"in document;if(!$n){var ei=document.createElement("div");ei.setAttribute("oninput","return;"),$n="function"===typeof ei.oninput}Qn=$n}else Qn=!1;Zn=Qn&&(!document.documentMode||9<document.documentMode)}function ti(){qn&&(qn.detachEvent("onpropertychange",ni),Xn=qn=null)}function ni(e){if("value"===e.propertyName&&Jn(Xn)){var t=[];Gn(t,Xn,e,_e(e)),ke(Yn,t)}}function ii(e,t,n){"focusin"===e?(ti(),Xn=n,(qn=t).attachEvent("onpropertychange",ni)):"focusout"===e&&ti()}function ri(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Xn)}function si(e,t){if("click"===e)return Jn(t)}function ai(e,t){if("input"===e||"change"===e)return Jn(t)}var oi="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function li(e,t){if(oi(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!d.call(t,r)||!oi(e[r],t[r]))return!1}return!0}function ci(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ui(e,t){var n,i=ci(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=ci(i)}}function di(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?di(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hi(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=Y((e=t.contentWindow).document)}return t}function pi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fi(e){var t=hi(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&di(n.ownerDocument.documentElement,n)){if(null!==i&&pi(n))if(t=i.start,void 0===(e=i.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=void 0===i.end?s:Math.min(i.end,r),!e.extend&&s>i&&(r=i,i=s,s=r),r=ui(n,s);var a=ui(n,i);r&&a&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),s>i?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mi=u&&"documentMode"in document&&11>=document.documentMode,gi=null,vi=null,yi=null,xi=!1;function bi(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xi||null==gi||gi!==Y(i)||("selectionStart"in(i=gi)&&pi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},yi&&li(yi,i)||(yi=i,0<(i=qi(vi,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=gi)))}function _i(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wi={animationend:_i("Animation","AnimationEnd"),animationiteration:_i("Animation","AnimationIteration"),animationstart:_i("Animation","AnimationStart"),transitionend:_i("Transition","TransitionEnd")},Si={},Mi={};function Ei(e){if(Si[e])return Si[e];if(!wi[e])return e;var t,n=wi[e];for(t in n)if(n.hasOwnProperty(t)&&t in Mi)return Si[e]=n[t];return e}u&&(Mi=document.createElement("div").style,"AnimationEvent"in window||(delete wi.animationend.animation,delete wi.animationiteration.animation,delete wi.animationstart.animation),"TransitionEvent"in window||delete wi.transitionend.transition);var Ti=Ei("animationend"),Ci=Ei("animationiteration"),Ai=Ei("animationstart"),Pi=Ei("transitionend"),Ni=new Map,ki="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ri(e,t){Ni.set(e,t),l(t,[e])}for(var Ii=0;Ii<ki.length;Ii++){var Li=ki[Ii];Ri(Li.toLowerCase(),"on"+(Li[0].toUpperCase()+Li.slice(1)))}Ri(Ti,"onAnimationEnd"),Ri(Ci,"onAnimationIteration"),Ri(Ai,"onAnimationStart"),Ri("dblclick","onDoubleClick"),Ri("focusin","onFocus"),Ri("focusout","onBlur"),Ri(Pi,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ji="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Di=new Set("cancel close invalid load scroll toggle".split(" ").concat(ji));function Oi(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,i,r,a,o,l,c){if(Be.apply(this,arguments),De){if(!De)throw Error(s(198));var u=Oe;De=!1,Oe=null,ze||(ze=!0,Fe=u)}}(i,t,void 0,e),e.currentTarget=null}function zi(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var s=void 0;if(t)for(var a=i.length-1;0<=a;a--){var o=i[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&r.isPropagationStopped())break e;Oi(r,o,c),s=l}else for(a=0;a<i.length;a++){if(l=(o=i[a]).instance,c=o.currentTarget,o=o.listener,l!==s&&r.isPropagationStopped())break e;Oi(r,o,c),s=l}}}if(ze)throw e=Fe,ze=!1,Fe=null,e}function Fi(e,t){var n=t[mr];void 0===n&&(n=t[mr]=new Set);var i=e+"__bubble";n.has(i)||(Hi(t,e,2,!1),n.add(i))}function Ui(e,t,n){var i=0;t&&(i|=4),Hi(n,e,i,t)}var Bi="_reactListening"+Math.random().toString(36).slice(2);function Vi(e){if(!e[Bi]){e[Bi]=!0,a.forEach((function(t){"selectionchange"!==t&&(Di.has(t)||Ui(t,!1,e),Ui(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Bi]||(t[Bi]=!0,Ui("selectionchange",!1,t))}}function Hi(e,t,n,i){switch(Kt(t)){case 1:var r=Gt;break;case 4:r=qt;break;default:r=Xt}n=r.bind(null,t,n,e),r=void 0,!Ie||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),i?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Wi(e,t,n,i,r){var s=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var a=i.tag;if(3===a||4===a){var o=i.stateNode.containerInfo;if(o===r||8===o.nodeType&&o.parentNode===r)break;if(4===a)for(a=i.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;a=a.return}for(;null!==o;){if(null===(a=yr(o)))return;if(5===(l=a.tag)||6===l){i=s=a;continue e}o=o.parentNode}}i=i.return}ke((function(){var i=s,r=_e(n),a=[];e:{var o=Ni.get(e);if(void 0!==o){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Pn;break;case Ti:case Ci:case Ai:l=vn;break;case Pi:l=Nn;break;case"scroll":l=hn;break;case"wheel":l=Rn;break;case"copy":case"cut":case"paste":l=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=An}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var p,f=i;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==h&&(null!=(m=Re(f,h))&&u.push(Gi(f,m,p)))),d)break;f=f.return}0<u.length&&(o=new l(o,c,null,n,r),a.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!yr(c)&&!c[fr])&&(l||o)&&(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=i,null!==(c=(c=n.relatedTarget||n.toElement)?yr(c):null)&&(c!==(d=Ve(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=i),l!==c)){if(u=fn,m="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=An,m="onPointerLeave",h="onPointerEnter",f="pointer"),d=null==l?o:br(l),p=null==c?o:br(c),(o=new u(m,f+"leave",l,n,r)).target=d,o.relatedTarget=p,m=null,yr(r)===i&&((u=new u(h,f+"enter",c,n,r)).target=p,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,f=0,p=u=l;p;p=Xi(p))f++;for(p=0,m=h;m;m=Xi(m))p++;for(;0<f-p;)u=Xi(u),f--;for(;0<p-f;)h=Xi(h),p--;for(;f--;){if(u===h||null!==h&&u===h.alternate)break e;u=Xi(u),h=Xi(h)}u=null}else u=null;null!==l&&Yi(a,o,l,u,!1),null!==c&&null!==d&&Yi(a,d,c,u,!0)}if("select"===(l=(o=i?br(i):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Kn;else if(Wn(o))if(Zn)g=ai;else{g=ri;var v=ii}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=si);switch(g&&(g=g(e,i))?Gn(a,g,n,r):(v&&v(e,o,i),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&ee(o,"number",o.value)),v=i?br(i):window,e){case"focusin":(Wn(v)||"true"===v.contentEditable)&&(gi=v,vi=i,yi=null);break;case"focusout":yi=vi=gi=null;break;case"mousedown":xi=!0;break;case"contextmenu":case"mouseup":case"dragend":xi=!1,bi(a,n,r);break;case"selectionchange":if(mi)break;case"keydown":case"keyup":bi(a,n,r)}var y;if(Ln)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Vn?Un(e,n)&&(x="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(x="onCompositionStart");x&&(On&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==x?"onCompositionEnd"===x&&Vn&&(y=en()):(Qt="value"in(Zt=r)?Zt.value:Zt.textContent,Vn=!0)),0<(v=qi(i,x)).length&&(x=new bn(x,e,null,n,r),a.push({event:x,listeners:v}),y?x.data=y:null!==(y=Bn(n))&&(x.data=y))),(y=Dn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Fn=!0,zn);case"textInput":return(e=t.data)===zn&&Fn?null:e;default:return null}}(e,n):function(e,t){if(Vn)return"compositionend"===e||!Ln&&Un(e,t)?(e=en(),$t=Qt=Zt=null,Vn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return On&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(i=qi(i,"onBeforeInput")).length&&(r=new bn("onBeforeInput","beforeinput",null,n,r),a.push({event:r,listeners:i}),r.data=y))}zi(a,t)}))}function Gi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qi(e,t){for(var n=t+"Capture",i=[];null!==e;){var r=e,s=r.stateNode;5===r.tag&&null!==s&&(r=s,null!=(s=Re(e,n))&&i.unshift(Gi(e,s,r)),null!=(s=Re(e,t))&&i.push(Gi(e,s,r))),e=e.return}return i}function Xi(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yi(e,t,n,i,r){for(var s=t._reactName,a=[];null!==n&&n!==i;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===i)break;5===o.tag&&null!==c&&(o=c,r?null!=(l=Re(n,s))&&a.unshift(Gi(n,l,o)):r||null!=(l=Re(n,s))&&a.push(Gi(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Ji=/\r\n?/g,Ki=/\u0000|\uFFFD/g;function Zi(e){return("string"===typeof e?e:""+e).replace(Ji,"\n").replace(Ki,"")}function Qi(e,t,n){if(t=Zi(t),Zi(e)!==t&&n)throw Error(s(425))}function $i(){}var er=null,tr=null;function nr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ir="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,sr="function"===typeof Promise?Promise:void 0,ar="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof sr?function(e){return sr.resolve(null).then(e).catch(or)}:ir;function or(e){setTimeout((function(){throw e}))}function lr(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===i)return e.removeChild(r),void Vt(t);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=r}while(n);Vt(t)}function cr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ur(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var dr=Math.random().toString(36).slice(2),hr="__reactFiber$"+dr,pr="__reactProps$"+dr,fr="__reactContainer$"+dr,mr="__reactEvents$"+dr,gr="__reactListeners$"+dr,vr="__reactHandles$"+dr;function yr(e){var t=e[hr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fr]||n[hr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ur(e);null!==e;){if(n=e[hr])return n;e=ur(e)}return t}n=(e=n).parentNode}return null}function xr(e){return!(e=e[hr]||e[fr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function br(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function _r(e){return e[pr]||null}var wr=[],Sr=-1;function Mr(e){return{current:e}}function Er(e){0>Sr||(e.current=wr[Sr],wr[Sr]=null,Sr--)}function Tr(e,t){Sr++,wr[Sr]=e.current,e.current=t}var Cr={},Ar=Mr(Cr),Pr=Mr(!1),Nr=Cr;function kr(e,t){var n=e.type.contextTypes;if(!n)return Cr;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r,s={};for(r in n)s[r]=t[r];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Rr(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ir(){Er(Pr),Er(Ar)}function Lr(e,t,n){if(Ar.current!==Cr)throw Error(s(168));Tr(Ar,t),Tr(Pr,n)}function jr(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in t))throw Error(s(108,H(e)||"Unknown",r));return O({},n,i)}function Dr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Cr,Nr=Ar.current,Tr(Ar,e),Tr(Pr,Pr.current),!0}function Or(e,t,n){var i=e.stateNode;if(!i)throw Error(s(169));n?(e=jr(e,t,Nr),i.__reactInternalMemoizedMergedChildContext=e,Er(Pr),Er(Ar),Tr(Ar,e)):Er(Pr),Tr(Pr,n)}var zr=null,Fr=!1,Ur=!1;function Br(e){null===zr?zr=[e]:zr.push(e)}function Vr(){if(!Ur&&null!==zr){Ur=!0;var e=0,t=xt;try{var n=zr;for(xt=1;e<n.length;e++){var i=n[e];do{i=i(!0)}while(null!==i)}zr=null,Fr=!1}catch(r){throw null!==zr&&(zr=zr.slice(e+1)),Xe($e,Vr),r}finally{xt=t,Ur=!1}}return null}var Hr=[],Wr=0,Gr=null,qr=0,Xr=[],Yr=0,Jr=null,Kr=1,Zr="";function Qr(e,t){Hr[Wr++]=qr,Hr[Wr++]=Gr,Gr=e,qr=t}function $r(e,t,n){Xr[Yr++]=Kr,Xr[Yr++]=Zr,Xr[Yr++]=Jr,Jr=e;var i=Kr;e=Zr;var r=32-at(i)-1;i&=~(1<<r),n+=1;var s=32-at(t)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Kr=1<<32-at(t)+r|n<<r|i,Zr=s+e}else Kr=1<<s|n<<r|i,Zr=e}function es(e){null!==e.return&&(Qr(e,1),$r(e,1,0))}function ts(e){for(;e===Gr;)Gr=Hr[--Wr],Hr[Wr]=null,qr=Hr[--Wr],Hr[Wr]=null;for(;e===Jr;)Jr=Xr[--Yr],Xr[Yr]=null,Zr=Xr[--Yr],Xr[Yr]=null,Kr=Xr[--Yr],Xr[Yr]=null}var ns=null,is=null,rs=!1,ss=null;function as(e,t){var n=kc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function os(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,is=cr(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,is=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Jr?{id:Kr,overflow:Zr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=kc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,is=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(rs){var t=is;if(t){var n=t;if(!os(e,t)){if(ls(e))throw Error(s(418));t=cr(n.nextSibling);var i=ns;t&&os(e,t)?as(i,n):(e.flags=-4097&e.flags|2,rs=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,rs=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function ds(e){if(e!==ns)return!1;if(!rs)return us(e),rs=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!nr(e.type,e.memoizedProps)),t&&(t=is)){if(ls(e))throw hs(),Error(s(418));for(;t;)as(e,t),t=cr(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){is=cr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}is=null}}else is=ns?cr(e.stateNode.nextSibling):null;return!0}function hs(){for(var e=is;e;)e=cr(e.nextSibling)}function ps(){is=ns=null,rs=!1}function fs(e){null===ss?ss=[e]:ss.push(e)}var ms=b.ReactCurrentBatchConfig;function gs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var i=n.stateNode}if(!i)throw Error(s(147,e));var r=i,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=r.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function vs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ys(e){return(0,e._init)(e._payload)}function xs(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=Ic(e,t)).index=0,e.sibling=null,e}function a(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=2,n):i:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,i){return null===t||6!==t.tag?((t=Oc(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function c(e,t,n,i){var s=n.type;return s===S?d(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===R&&ys(s)===t.type)?((i=r(t,n.props)).ref=gs(e,t,n),i.return=e,i):((i=Lc(n.type,n.key,n.props,null,e.mode,i)).ref=gs(e,t,n),i.return=e,i)}function u(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zc(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function d(e,t,n,i,s){return null===t||7!==t.tag?((t=jc(n,e.mode,i,s)).return=e,t):((t=r(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Oc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=gs(e,null,t),n.return=e,n;case w:return(t=zc(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||j(t))return(t=jc(t,e.mode,n,null)).return=e,t;vs(e,t)}return null}function p(e,t,n,i){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:l(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===r?c(e,t,n,i):null;case w:return n.key===r?u(e,t,n,i):null;case R:return p(e,t,(r=n._init)(n._payload),i)}if(te(n)||j(n))return null!==r?null:d(e,t,n,i,null);vs(e,n)}return null}function f(e,t,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i)return l(t,e=e.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case _:return c(t,e=e.get(null===i.key?n:i.key)||null,i,r);case w:return u(t,e=e.get(null===i.key?n:i.key)||null,i,r);case R:return f(e,t,n,(0,i._init)(i._payload),r)}if(te(i)||j(i))return d(t,e=e.get(n)||null,i,r,null);vs(t,i)}return null}function m(r,s,o,l){for(var c=null,u=null,d=s,m=s=0,g=null;null!==d&&m<o.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=p(r,d,o[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(r,d),s=a(v,s,m),null===u?c=v:u.sibling=v,u=v,d=g}if(m===o.length)return n(r,d),rs&&Qr(r,m),c;if(null===d){for(;m<o.length;m++)null!==(d=h(r,o[m],l))&&(s=a(d,s,m),null===u?c=d:u.sibling=d,u=d);return rs&&Qr(r,m),c}for(d=i(r,d);m<o.length;m++)null!==(g=f(d,r,m,o[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),s=a(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return t(r,e)})),rs&&Qr(r,m),c}function g(r,o,l,c){var u=j(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var d=u=null,m=o,g=o=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var x=p(r,m,y.value,c);if(null===x){null===m&&(m=v);break}e&&m&&null===x.alternate&&t(r,m),o=a(x,o,g),null===d?u=x:d.sibling=x,d=x,m=v}if(y.done)return n(r,m),rs&&Qr(r,g),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=h(r,y.value,c))&&(o=a(y,o,g),null===d?u=y:d.sibling=y,d=y);return rs&&Qr(r,g),u}for(m=i(r,m);!y.done;g++,y=l.next())null!==(y=f(m,r,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),o=a(y,o,g),null===d?u=y:d.sibling=y,d=y);return e&&m.forEach((function(e){return t(r,e)})),rs&&Qr(r,g),u}return function e(i,s,a,l){if("object"===typeof a&&null!==a&&a.type===S&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case _:e:{for(var c=a.key,u=s;null!==u;){if(u.key===c){if((c=a.type)===S){if(7===u.tag){n(i,u.sibling),(s=r(u,a.props.children)).return=i,i=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&ys(c)===u.type){n(i,u.sibling),(s=r(u,a.props)).ref=gs(i,u,a),s.return=i,i=s;break e}n(i,u);break}t(i,u),u=u.sibling}a.type===S?((s=jc(a.props.children,i.mode,l,a.key)).return=i,i=s):((l=Lc(a.type,a.key,a.props,null,i.mode,l)).ref=gs(i,s,a),l.return=i,i=l)}return o(i);case w:e:{for(u=a.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===a.containerInfo&&s.stateNode.implementation===a.implementation){n(i,s.sibling),(s=r(s,a.children||[])).return=i,i=s;break e}n(i,s);break}t(i,s),s=s.sibling}(s=zc(a,i.mode,l)).return=i,i=s}return o(i);case R:return e(i,s,(u=a._init)(a._payload),l)}if(te(a))return m(i,s,a,l);if(j(a))return g(i,s,a,l);vs(i,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==s&&6===s.tag?(n(i,s.sibling),(s=r(s,a)).return=i,i=s):(n(i,s),(s=Oc(a,i.mode,l)).return=i,i=s),o(i)):n(i,s)}}var bs=xs(!0),_s=xs(!1),ws=Mr(null),Ss=null,Ms=null,Es=null;function Ts(){Es=Ms=Ss=null}function Cs(e){var t=ws.current;Er(ws),e._currentValue=t}function As(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Ps(e,t){Ss=e,Es=Ms=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(xo=!0),e.firstContext=null)}function Ns(e){var t=e._currentValue;if(Es!==e)if(e={context:e,memoizedValue:t,next:null},null===Ms){if(null===Ss)throw Error(s(308));Ms=e,Ss.dependencies={lanes:0,firstContext:e}}else Ms=Ms.next=e;return t}var ks=null;function Rs(e){null===ks?ks=[e]:ks.push(e)}function Is(e,t,n,i){var r=t.interleaved;return null===r?(n.next=n,Rs(t)):(n.next=r.next,r.next=n),t.interleaved=n,Ls(e,i)}function Ls(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var js=!1;function Ds(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Os(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function zs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Fs(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&Al)){var r=i.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),i.pending=t,Ls(e,n)}return null===(r=i.interleaved)?(t.next=t,Rs(i)):(t.next=r.next,r.next=t),i.interleaved=t,Ls(e,n)}function Us(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Bs(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?r=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?r=s=t:s=s.next=t}else r=s=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Vs(e,t,n,i){var r=e.updateQueue;js=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,o=r.shared.pending;if(null!==o){r.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?s=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=r.baseState;for(a=0,u=c=l=null,o=s;;){var h=o.lane,p=o.eventTime;if((i&h)===h){null!==u&&(u=u.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var f=e,m=o;switch(h=t,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){d=f.call(p,d,h);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=m.payload)?f.call(p,d,h):f)||void 0===h)break e;d=O({},d,h);break e;case 2:js=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=r.effects)?r.effects=[o]:h.push(o))}else p={eventTime:p,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,a|=h;if(null===(o=o.next)){if(null===(o=r.shared.pending))break;o=(h=o).next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}if(null===u&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,null!==(t=r.shared.interleaved)){r=t;do{a|=r.lane,r=r.next}while(r!==t)}else null===s&&(r.shared.lanes=0);Dl|=a,e.lanes=a,e.memoizedState=d}}function Hs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(s(191,r));r.call(i)}}}var Ws={},Gs=Mr(Ws),qs=Mr(Ws),Xs=Mr(Ws);function Ys(e){if(e===Ws)throw Error(s(174));return e}function Js(e,t){switch(Tr(Xs,t),Tr(qs,e),Tr(Gs,Ws),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Er(Gs),Tr(Gs,t)}function Ks(){Er(Gs),Er(qs),Er(Xs)}function Zs(e){Ys(Xs.current);var t=Ys(Gs.current),n=le(t,e.type);t!==n&&(Tr(qs,e),Tr(Gs,n))}function Qs(e){qs.current===e&&(Er(Gs),Er(qs))}var $s=Mr(0);function ea(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ta=[];function na(){for(var e=0;e<ta.length;e++)ta[e]._workInProgressVersionPrimary=null;ta.length=0}var ia=b.ReactCurrentDispatcher,ra=b.ReactCurrentBatchConfig,sa=0,aa=null,oa=null,la=null,ca=!1,ua=!1,da=0,ha=0;function pa(){throw Error(s(321))}function fa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!oi(e[n],t[n]))return!1;return!0}function ma(e,t,n,i,r,a){if(sa=a,aa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ia.current=null===e||null===e.memoizedState?Qa:$a,e=n(i,r),ua){a=0;do{if(ua=!1,da=0,25<=a)throw Error(s(301));a+=1,la=oa=null,t.updateQueue=null,ia.current=eo,e=n(i,r)}while(ua)}if(ia.current=Za,t=null!==oa&&null!==oa.next,sa=0,la=oa=aa=null,ca=!1,t)throw Error(s(300));return e}function ga(){var e=0!==da;return da=0,e}function va(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===la?aa.memoizedState=la=e:la=la.next=e,la}function ya(){if(null===oa){var e=aa.alternate;e=null!==e?e.memoizedState:null}else e=oa.next;var t=null===la?aa.memoizedState:la.next;if(null!==t)la=t,oa=e;else{if(null===e)throw Error(s(310));e={memoizedState:(oa=e).memoizedState,baseState:oa.baseState,baseQueue:oa.baseQueue,queue:oa.queue,next:null},null===la?aa.memoizedState=la=e:la=la.next=e}return la}function xa(e,t){return"function"===typeof t?t(e):t}function ba(e){var t=ya(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var i=oa,r=i.baseQueue,a=n.pending;if(null!==a){if(null!==r){var o=r.next;r.next=a.next,a.next=o}i.baseQueue=r=a,n.pending=null}if(null!==r){a=r.next,i=i.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((sa&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:e(i,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=i):c=c.next=h,aa.lanes|=d,Dl|=d}u=u.next}while(null!==u&&u!==a);null===c?o=i:c.next=l,oi(i,t.memoizedState)||(xo=!0),t.memoizedState=i,t.baseState=o,t.baseQueue=c,n.lastRenderedState=i}if(null!==(e=n.interleaved)){r=e;do{a=r.lane,aa.lanes|=a,Dl|=a,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function _a(e){var t=ya(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,a=t.memoizedState;if(null!==r){n.pending=null;var o=r=r.next;do{a=e(a,o.action),o=o.next}while(o!==r);oi(a,t.memoizedState)||(xo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,i]}function wa(){}function Sa(e,t){var n=aa,i=ya(),r=t(),a=!oi(i.memoizedState,r);if(a&&(i.memoizedState=r,xo=!0),i=i.queue,ja(Ta.bind(null,n,i,e),[e]),i.getSnapshot!==t||a||null!==la&&1&la.memoizedState.tag){if(n.flags|=2048,Na(9,Ea.bind(null,n,i,r,t),void 0,null),null===Pl)throw Error(s(349));0!==(30&sa)||Ma(n,t,r)}return r}function Ma(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ea(e,t,n,i){t.value=n,t.getSnapshot=i,Ca(t)&&Aa(e)}function Ta(e,t,n){return n((function(){Ca(t)&&Aa(e)}))}function Ca(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!oi(e,n)}catch(i){return!0}}function Aa(e){var t=Ls(e,1);null!==t&&nc(t,e,1,-1)}function Pa(e){var t=va();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:e},t.queue=e,e=e.dispatch=Xa.bind(null,aa,e),[t.memoizedState,e]}function Na(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function ka(){return ya().memoizedState}function Ra(e,t,n,i){var r=va();aa.flags|=e,r.memoizedState=Na(1|t,n,void 0,void 0===i?null:i)}function Ia(e,t,n,i){var r=ya();i=void 0===i?null:i;var s=void 0;if(null!==oa){var a=oa.memoizedState;if(s=a.destroy,null!==i&&fa(i,a.deps))return void(r.memoizedState=Na(t,n,s,i))}aa.flags|=e,r.memoizedState=Na(1|t,n,s,i)}function La(e,t){return Ra(8390656,8,e,t)}function ja(e,t){return Ia(2048,8,e,t)}function Da(e,t){return Ia(4,2,e,t)}function Oa(e,t){return Ia(4,4,e,t)}function za(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Fa(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ia(4,4,za.bind(null,t,e),n)}function Ua(){}function Ba(e,t){var n=ya();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&fa(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Va(e,t){var n=ya();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&fa(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Ha(e,t,n){return 0===(21&sa)?(e.baseState&&(e.baseState=!1,xo=!0),e.memoizedState=n):(oi(n,t)||(n=mt(),aa.lanes|=n,Dl|=n,e.baseState=!0),t)}function Wa(e,t){var n=xt;xt=0!==n&&4>n?n:4,e(!0);var i=ra.transition;ra.transition={};try{e(!1),t()}finally{xt=n,ra.transition=i}}function Ga(){return ya().memoizedState}function qa(e,t,n){var i=tc(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Ya(e))Ja(t,n);else if(null!==(n=Is(e,t,n,i))){nc(n,e,i,ec()),Ka(n,t,i)}}function Xa(e,t,n){var i=tc(e),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ya(e))Ja(t,r);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(r.hasEagerState=!0,r.eagerState=o,oi(o,a)){var l=t.interleaved;return null===l?(r.next=r,Rs(t)):(r.next=l.next,l.next=r),void(t.interleaved=r)}}catch(c){}null!==(n=Is(e,t,r,i))&&(nc(n,e,i,r=ec()),Ka(n,t,i))}}function Ya(e){var t=e.alternate;return e===aa||null!==t&&t===aa}function Ja(e,t){ua=ca=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ka(e,t,n){if(0!==(4194240&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Za={readContext:Ns,useCallback:pa,useContext:pa,useEffect:pa,useImperativeHandle:pa,useInsertionEffect:pa,useLayoutEffect:pa,useMemo:pa,useReducer:pa,useRef:pa,useState:pa,useDebugValue:pa,useDeferredValue:pa,useTransition:pa,useMutableSource:pa,useSyncExternalStore:pa,useId:pa,unstable_isNewReconciler:!1},Qa={readContext:Ns,useCallback:function(e,t){return va().memoizedState=[e,void 0===t?null:t],e},useContext:Ns,useEffect:La,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ra(4194308,4,za.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ra(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ra(4,2,e,t)},useMemo:function(e,t){var n=va();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=va();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=qa.bind(null,aa,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},va().memoizedState=e},useState:Pa,useDebugValue:Ua,useDeferredValue:function(e){return va().memoizedState=e},useTransition:function(){var e=Pa(!1),t=e[0];return e=Wa.bind(null,e[1]),va().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=aa,r=va();if(rs){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Pl)throw Error(s(349));0!==(30&sa)||Ma(i,t,n)}r.memoizedState=n;var a={value:n,getSnapshot:t};return r.queue=a,La(Ta.bind(null,i,a,e),[e]),i.flags|=2048,Na(9,Ea.bind(null,i,a,n,t),void 0,null),n},useId:function(){var e=va(),t=Pl.identifierPrefix;if(rs){var n=Zr;t=":"+t+"R"+(n=(Kr&~(1<<32-at(Kr)-1)).toString(32)+n),0<(n=da++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ha++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},$a={readContext:Ns,useCallback:Ba,useContext:Ns,useEffect:ja,useImperativeHandle:Fa,useInsertionEffect:Da,useLayoutEffect:Oa,useMemo:Va,useReducer:ba,useRef:ka,useState:function(){return ba(xa)},useDebugValue:Ua,useDeferredValue:function(e){return Ha(ya(),oa.memoizedState,e)},useTransition:function(){return[ba(xa)[0],ya().memoizedState]},useMutableSource:wa,useSyncExternalStore:Sa,useId:Ga,unstable_isNewReconciler:!1},eo={readContext:Ns,useCallback:Ba,useContext:Ns,useEffect:ja,useImperativeHandle:Fa,useInsertionEffect:Da,useLayoutEffect:Oa,useMemo:Va,useReducer:_a,useRef:ka,useState:function(){return _a(xa)},useDebugValue:Ua,useDeferredValue:function(e){var t=ya();return null===oa?t.memoizedState=e:Ha(t,oa.memoizedState,e)},useTransition:function(){return[_a(xa)[0],ya().memoizedState]},useMutableSource:wa,useSyncExternalStore:Sa,useId:Ga,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=O({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:O({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var io={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=ec(),r=tc(e),s=zs(i,r);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Fs(e,s,r))&&(nc(t,e,r,i),Us(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=ec(),r=tc(e),s=zs(i,r);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Fs(e,s,r))&&(nc(t,e,r,i),Us(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),i=tc(e),r=zs(n,i);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=Fs(e,r,i))&&(nc(t,e,i,n),Us(t,e,i))}};function ro(e,t,n,i,r,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!li(n,i)||!li(r,s))}function so(e,t,n){var i=!1,r=Cr,s=t.contextType;return"object"===typeof s&&null!==s?s=Ns(s):(r=Rr(t)?Nr:Ar.current,s=(i=null!==(i=t.contextTypes)&&void 0!==i)?kr(e,r):Cr),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=io,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=s),t}function ao(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&io.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs={},Ds(e);var s=t.contextType;"object"===typeof s&&null!==s?r.context=Ns(s):(s=Rr(t)?Nr:Ar.current,r.context=kr(e,s)),r.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(no(e,t,s,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&io.enqueueReplaceState(r,r.state,null),Vs(e,n,r,i),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",i=t;do{n+=B(i),i=i.return}while(i);var r=n}catch(s){r="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:r,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ho="function"===typeof WeakMap?WeakMap:Map;function po(e,t,n){(n=zs(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Wl||(Wl=!0,Gl=i),uo(0,t)},n}function fo(e,t,n){(n=zs(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var r=t.value;n.payload=function(){return i(r)},n.callback=function(){uo(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof i&&(null===ql?ql=new Set([this]):ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mo(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new ho;var r=new Set;i.set(t,r)}else void 0===(r=i.get(t))&&(r=new Set,i.set(t,r));r.has(n)||(r.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vo(e,t,n,i,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=zs(-1,1)).tag=2,Fs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var yo=b.ReactCurrentOwner,xo=!1;function bo(e,t,n,i){t.child=null===e?_s(t,null,n,i):bs(t,e.child,n,i)}function _o(e,t,n,i,r){n=n.render;var s=t.ref;return Ps(t,r),i=ma(e,t,n,i,s,r),n=ga(),null===e||xo?(rs&&n&&es(t),t.flags|=1,bo(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Wo(e,t,r))}function wo(e,t,n,i,r){if(null===e){var s=n.type;return"function"!==typeof s||Rc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,i,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,So(e,t,s,i,r))}if(s=e.child,0===(e.lanes&r)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:li)(a,i)&&e.ref===t.ref)return Wo(e,t,r)}return t.flags|=1,(e=Ic(s,i)).ref=t.ref,e.return=t,t.child=e}function So(e,t,n,i,r){if(null!==e){var s=e.memoizedProps;if(li(s,i)&&e.ref===t.ref){if(xo=!1,t.pendingProps=i=s,0===(e.lanes&r))return t.lanes=e.lanes,Wo(e,t,r);0!==(131072&e.flags)&&(xo=!0)}}return To(e,t,n,i,r)}function Mo(e,t,n){var i=t.pendingProps,r=i.children,s=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Tr(Il,Rl),Rl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Tr(Il,Rl),Rl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==s?s.baseLanes:n,Tr(Il,Rl),Rl|=i}else null!==s?(i=s.baseLanes|n,t.memoizedState=null):i=n,Tr(Il,Rl),Rl|=i;return bo(e,t,r,n),t.child}function Eo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function To(e,t,n,i,r){var s=Rr(n)?Nr:Ar.current;return s=kr(t,s),Ps(t,r),n=ma(e,t,n,i,s,r),i=ga(),null===e||xo?(rs&&i&&es(t),t.flags|=1,bo(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Wo(e,t,r))}function Co(e,t,n,i,r){if(Rr(n)){var s=!0;Dr(t)}else s=!1;if(Ps(t,r),null===t.stateNode)Ho(e,t),so(t,n,i),oo(t,n,i,r),i=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ns(c):c=kr(t,c=Rr(n)?Nr:Ar.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==i||l!==c)&&ao(t,a,i,c),js=!1;var h=t.memoizedState;a.state=h,Vs(t,i,a,r),l=t.memoizedState,o!==i||h!==l||Pr.current||js?("function"===typeof u&&(no(t,n,u,i),l=t.memoizedState),(o=js||ro(t,n,o,i,h,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),a.props=i,a.state=l,a.context=c,i=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),i=!1)}else{a=t.stateNode,Os(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),a.props=c,d=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ns(l):l=kr(t,l=Rr(n)?Nr:Ar.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==d||h!==l)&&ao(t,a,i,l),js=!1,h=t.memoizedState,a.state=h,Vs(t,i,a,r);var f=t.memoizedState;o!==d||h!==f||Pr.current||js?("function"===typeof p&&(no(t,n,p,i),f=t.memoizedState),(c=js||ro(t,n,c,i,h,f,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(i,f,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(i,f,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=f),a.props=i,a.state=f,a.context=l,i=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),i=!1)}return Ao(e,t,n,i,s,r)}function Ao(e,t,n,i,r,s){Eo(e,t);var a=0!==(128&t.flags);if(!i&&!a)return r&&Or(t,n,!1),Wo(e,t,s);i=t.stateNode,yo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&a?(t.child=bs(t,e.child,null,s),t.child=bs(t,null,o,s)):bo(e,t,o,s),t.memoizedState=i.state,r&&Or(t,n,!0),t.child}function Po(e){var t=e.stateNode;t.pendingContext?Lr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Lr(0,t.context,!1),Js(e,t.containerInfo)}function No(e,t,n,i,r){return ps(),fs(r),t.flags|=256,bo(e,t,n,i),t.child}var ko,Ro,Io,Lo,jo={dehydrated:null,treeContext:null,retryLane:0};function Do(e){return{baseLanes:e,cachePool:null,transitions:null}}function Oo(e,t,n){var i,r=t.pendingProps,a=$s.current,o=!1,l=0!==(128&t.flags);if((i=l)||(i=(null===e||null!==e.memoizedState)&&0!==(2&a)),i?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Tr($s,1&a),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=r.children,e=r.fallback,o?(r=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&r)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Dc(l,r,0,null),e=jc(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Do(n),t.memoizedState=jo,e):zo(t,l));if(null!==(a=e.memoizedState)&&null!==(i=a.dehydrated))return function(e,t,n,i,r,a,o){if(n)return 256&t.flags?(t.flags&=-257,Fo(e,t,o,i=co(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=i.fallback,r=t.mode,i=Dc({mode:"visible",children:i.children},r,0,null),(a=jc(a,r,o,null)).flags|=2,i.return=t,a.return=t,i.sibling=a,t.child=i,0!==(1&t.mode)&&bs(t,e.child,null,o),t.child.memoizedState=Do(o),t.memoizedState=jo,a);if(0===(1&t.mode))return Fo(e,t,o,null);if("$!"===r.data){if(i=r.nextSibling&&r.nextSibling.dataset)var l=i.dgst;return i=l,Fo(e,t,o,i=co(a=Error(s(419)),i,void 0))}if(l=0!==(o&e.childLanes),xo||l){if(null!==(i=Pl)){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(i.suspendedLanes|o))?0:r)&&r!==a.retryLane&&(a.retryLane=r,Ls(e,r),nc(i,e,r,-1))}return mc(),Fo(e,t,o,i=co(Error(s(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),r._reactRetry=t,null):(e=a.treeContext,is=cr(r.nextSibling),ns=t,rs=!0,ss=null,null!==e&&(Xr[Yr++]=Kr,Xr[Yr++]=Zr,Xr[Yr++]=Jr,Kr=e.id,Zr=e.overflow,Jr=t),t=zo(t,i.children),t.flags|=4096,t)}(e,t,l,r,i,a,n);if(o){o=r.fallback,l=t.mode,i=(a=e.child).sibling;var c={mode:"hidden",children:r.children};return 0===(1&l)&&t.child!==a?((r=t.child).childLanes=0,r.pendingProps=c,t.deletions=null):(r=Ic(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==i?o=Ic(i,o):(o=jc(o,l,n,null)).flags|=2,o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,l=null===(l=e.child.memoizedState)?Do(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=jo,r}return e=(o=e.child).sibling,r=Ic(o,{mode:"visible",children:r.children}),0===(1&t.mode)&&(r.lanes=n),r.return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function zo(e,t){return(t=Dc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Fo(e,t,n,i){return null!==i&&fs(i),bs(t,e.child,null,n),(e=zo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Uo(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),As(e.return,t,n)}function Bo(e,t,n,i,r){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function Vo(e,t,n){var i=t.pendingProps,r=i.revealOrder,s=i.tail;if(bo(e,t,i.children,n),0!==(2&(i=$s.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Uo(e,n,t);else if(19===e.tag)Uo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Tr($s,i),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===ea(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Bo(t,!1,r,n,s);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===ea(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Bo(t,!0,n,null,s);break;case"together":Bo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ho(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Dl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Ic(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ic(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Go(e,t){if(!rs)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function qo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Xo(e,t,n){var i=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qo(t),null;case 1:case 17:return Rr(t.type)&&Ir(),qo(t),null;case 3:return i=t.stateNode,Ks(),Er(Pr),Er(Ar),na(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(ds(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ac(ss),ss=null))),Ro(e,t),qo(t),null;case 5:Qs(t);var r=Ys(Xs.current);if(n=t.type,null!==e&&null!=t.stateNode)Io(e,t,n,i,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(s(166));return qo(t),null}if(e=Ys(Gs.current),ds(t)){i=t.stateNode,n=t.type;var a=t.memoizedProps;switch(i[hr]=t,i[pr]=a,e=0!==(1&t.mode),n){case"dialog":Fi("cancel",i),Fi("close",i);break;case"iframe":case"object":case"embed":Fi("load",i);break;case"video":case"audio":for(r=0;r<ji.length;r++)Fi(ji[r],i);break;case"source":Fi("error",i);break;case"img":case"image":case"link":Fi("error",i),Fi("load",i);break;case"details":Fi("toggle",i);break;case"input":K(i,a),Fi("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!a.multiple},Fi("invalid",i);break;case"textarea":re(i,a),Fi("invalid",i)}for(var l in ye(n,a),r=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?i.textContent!==c&&(!0!==a.suppressHydrationWarning&&Qi(i.textContent,c,e),r=["children",c]):"number"===typeof c&&i.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Qi(i.textContent,c,e),r=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Fi("scroll",i)}switch(n){case"input":q(i),$(i,a,!0);break;case"textarea":q(i),ae(i);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(i.onclick=$i)}i=r,t.updateQueue=i,null!==i&&(t.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof i.is?e=l.createElement(n,{is:i.is}):(e=l.createElement(n),"select"===n&&(l=e,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):e=l.createElementNS(e,n),e[hr]=t,e[pr]=i,ko(e,t,!1,!1),t.stateNode=e;e:{switch(l=xe(n,i),n){case"dialog":Fi("cancel",e),Fi("close",e),r=i;break;case"iframe":case"object":case"embed":Fi("load",e),r=i;break;case"video":case"audio":for(r=0;r<ji.length;r++)Fi(ji[r],e);r=i;break;case"source":Fi("error",e),r=i;break;case"img":case"image":case"link":Fi("error",e),Fi("load",e),r=i;break;case"details":Fi("toggle",e),r=i;break;case"input":K(e,i),r=J(e,i),Fi("invalid",e);break;case"option":default:r=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},r=O({},i,{value:void 0}),Fi("invalid",e);break;case"textarea":re(e,i),r=ie(e,i),Fi("invalid",e)}for(a in ye(n,r),c=r)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?ge(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Fi("scroll",e):null!=u&&x(e,a,u,l))}switch(n){case"input":q(e),$(e,i,!1);break;case"textarea":q(e),ae(e);break;case"option":null!=i.value&&e.setAttribute("value",""+W(i.value));break;case"select":e.multiple=!!i.multiple,null!=(a=i.value)?ne(e,!!i.multiple,a,!1):null!=i.defaultValue&&ne(e,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=$i)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return qo(t),null;case 6:if(e&&null!=t.stateNode)Lo(e,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(s(166));if(n=Ys(Xs.current),Ys(Gs.current),ds(t)){if(i=t.stateNode,n=t.memoizedProps,i[hr]=t,(a=i.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Qi(i.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qi(i.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[hr]=t,t.stateNode=i}return qo(t),null;case 13:if(Er($s),i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(rs&&null!==is&&0!==(1&t.mode)&&0===(128&t.flags))hs(),ps(),t.flags|=98560,a=!1;else if(a=ds(t),null!==i&&null!==i.dehydrated){if(null===e){if(!a)throw Error(s(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(s(317));a[hr]=t}else ps(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;qo(t),a=!1}else null!==ss&&(ac(ss),ss=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((i=null!==i)!==(null!==e&&null!==e.memoizedState)&&i&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&$s.current)?0===Ll&&(Ll=3):mc())),null!==t.updateQueue&&(t.flags|=4),qo(t),null);case 4:return Ks(),Ro(e,t),null===e&&Vi(t.stateNode.containerInfo),qo(t),null;case 10:return Cs(t.type._context),qo(t),null;case 19:if(Er($s),null===(a=t.memoizedState))return qo(t),null;if(i=0!==(128&t.flags),null===(l=a.rendering))if(i)Go(a,!1);else{if(0!==Ll||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ea(e))){for(t.flags|=128,Go(a,!1),null!==(i=l.updateQueue)&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;null!==n;)e=i,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Tr($s,1&$s.current|2),t.child}e=e.sibling}null!==a.tail&&Ze()>Vl&&(t.flags|=128,i=!0,Go(a,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=ea(l))){if(t.flags|=128,i=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Go(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!rs)return qo(t),null}else 2*Ze()-a.renderingStartTime>Vl&&1073741824!==n&&(t.flags|=128,i=!0,Go(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Ze(),t.sibling=null,n=$s.current,Tr($s,i?1&n|2:1&n),t):(qo(t),null);case 22:case 23:return dc(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!==(1&t.mode)?0!==(1073741824&Rl)&&(qo(t),6&t.subtreeFlags&&(t.flags|=8192)):qo(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Yo(e,t){switch(ts(t),t.tag){case 1:return Rr(t.type)&&Ir(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ks(),Er(Pr),Er(Ar),na(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Qs(t),null;case 13:if(Er($s),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ps()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Er($s),null;case 4:return Ks(),null;case 10:return Cs(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}ko=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ro=function(){},Io=function(e,t,n,i){var r=e.memoizedProps;if(r!==i){e=t.stateNode,Ys(Gs.current);var s,a=null;switch(n){case"input":r=J(e,r),i=J(e,i),a=[];break;case"select":r=O({},r,{value:void 0}),i=O({},i,{value:void 0}),a=[];break;case"textarea":r=ie(e,r),i=ie(e,i),a=[];break;default:"function"!==typeof r.onClick&&"function"===typeof i.onClick&&(e.onclick=$i)}for(u in ye(n,i),n=null,r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&null!=r[u])if("style"===u){var l=r[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in i){var c=i[u];if(l=null!=r?r[u]:void 0,i.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Fi("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Lo=function(e,t,n,i){n!==i&&(t.flags|=4)};var Jo=!1,Ko=!1,Zo="function"===typeof WeakSet?WeakSet:Set,Qo=null;function $o(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){Mc(e,t,i)}else n.current=null}function el(e,t,n){try{n()}catch(i){Mc(e,t,i)}}var tl=!1;function nl(e,t,n){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&e)===e){var s=r.destroy;r.destroy=void 0,void 0!==s&&el(t,n,s)}r=r.next}while(r!==i)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function rl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hr],delete t[pr],delete t[mr],delete t[gr],delete t[vr])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$i));else if(4!==i&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function hl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(rt,n)}catch(o){}switch(n.tag){case 5:Ko||$o(n,t);case 6:var i=ul,r=dl;ul=null,hl(e,t,n),dl=r,null!==(ul=i)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?lr(e.parentNode,n):1===e.nodeType&&lr(e,n),Vt(e)):lr(ul,n.stateNode));break;case 4:i=ul,r=dl,ul=n.stateNode.containerInfo,dl=!0,hl(e,t,n),ul=i,dl=r;break;case 0:case 11:case 14:case 15:if(!Ko&&(null!==(i=n.updateQueue)&&null!==(i=i.lastEffect))){r=i=i.next;do{var s=r,a=s.destroy;s=s.tag,void 0!==a&&(0!==(2&s)||0!==(4&s))&&el(n,t,a),r=r.next}while(r!==i)}hl(e,t,n);break;case 1:if(!Ko&&($o(n,t),"function"===typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(o){Mc(n,t,o)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Ko=(i=Ko)||null!==n.memoizedState,hl(e,t,n),Ko=i):hl(e,t,n);break;default:hl(e,t,n)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Zo),t.forEach((function(t){var i=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(s(160));pl(a,o,r),ul=null,dl=!1;var c=r.alternate;null!==c&&(c.return=null),r.return=null}catch(u){Mc(r,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),vl(e),4&i){try{nl(3,e,e.return),il(3,e)}catch(g){Mc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Mc(e,e.return,g)}}break;case 1:ml(t,e),vl(e),512&i&&null!==n&&$o(n,n.return);break;case 5:if(ml(t,e),vl(e),512&i&&null!==n&&$o(n,n.return),32&e.flags){var r=e.stateNode;try{he(r,"")}catch(g){Mc(e,e.return,g)}}if(4&i&&null!=(r=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&Z(r,a),xe(l,o);var u=xe(l,a);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];"style"===d?ge(r,h):"dangerouslySetInnerHTML"===d?de(r,h):"children"===d?he(r,h):x(r,d,h,u)}switch(l){case"input":Q(r,a);break;case"textarea":se(r,a);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!a.multiple;var f=a.value;null!=f?ne(r,!!a.multiple,f,!1):p!==!!a.multiple&&(null!=a.defaultValue?ne(r,!!a.multiple,a.defaultValue,!0):ne(r,!!a.multiple,a.multiple?[]:"",!1))}r[pr]=a}catch(g){Mc(e,e.return,g)}}break;case 6:if(ml(t,e),vl(e),4&i){if(null===e.stateNode)throw Error(s(162));r=e.stateNode,a=e.memoizedProps;try{r.nodeValue=a}catch(g){Mc(e,e.return,g)}}break;case 3:if(ml(t,e),vl(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(g){Mc(e,e.return,g)}break;case 4:default:ml(t,e),vl(e);break;case 13:ml(t,e),vl(e),8192&(r=e.child).flags&&(a=null!==r.memoizedState,r.stateNode.isHidden=a,!a||null!==r.alternate&&null!==r.alternate.memoizedState||(Bl=Ze())),4&i&&fl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Ko=(u=Ko)||d,ml(t,e),Ko=u):ml(t,e),vl(e),8192&i){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Qo=e,d=e.child;null!==d;){for(h=Qo=d;null!==Qo;){switch(f=(p=Qo).child,p.tag){case 0:case 11:case 14:case 15:nl(4,p,p.return);break;case 1:$o(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){i=p,n=p.return;try{t=i,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Mc(i,n,g)}}break;case 5:$o(p,p.return);break;case 22:if(null!==p.memoizedState){_l(h);continue}}null!==f?(f.return=p,Qo=f):_l(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{r=h.stateNode,u?"function"===typeof(a=r.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",o))}catch(g){Mc(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Mc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(t,e),vl(e),4&i&&fl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var i=n;break e}n=n.return}throw Error(s(160))}switch(i.tag){case 5:var r=i.stateNode;32&i.flags&&(he(r,""),i.flags&=-33),cl(e,ol(e),r);break;case 3:case 4:var a=i.stateNode.containerInfo;ll(e,ol(e),a);break;default:throw Error(s(161))}}catch(o){Mc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Qo=e,xl(e,t,n)}function xl(e,t,n){for(var i=0!==(1&e.mode);null!==Qo;){var r=Qo,s=r.child;if(22===r.tag&&i){var a=null!==r.memoizedState||Jo;if(!a){var o=r.alternate,l=null!==o&&null!==o.memoizedState||Ko;o=Jo;var c=Ko;if(Jo=a,(Ko=l)&&!c)for(Qo=r;null!==Qo;)l=(a=Qo).child,22===a.tag&&null!==a.memoizedState?wl(r):null!==l?(l.return=a,Qo=l):wl(r);for(;null!==s;)Qo=s,xl(s,t,n),s=s.sibling;Qo=r,Jo=o,Ko=c}bl(e)}else 0!==(8772&r.subtreeFlags)&&null!==s?(s.return=r,Qo=s):bl(e)}}function bl(e){for(;null!==Qo;){var t=Qo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ko||il(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!Ko)if(null===n)i.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Hs(t,a,i);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Hs(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Vt(h)}}}break;default:throw Error(s(163))}Ko||512&t.flags&&rl(t)}catch(p){Mc(t,t.return,p)}}if(t===e){Qo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Qo=n;break}Qo=t.return}}function _l(e){for(;null!==Qo;){var t=Qo;if(t===e){Qo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Qo=n;break}Qo=t.return}}function wl(e){for(;null!==Qo;){var t=Qo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){Mc(t,n,l)}break;case 1:var i=t.stateNode;if("function"===typeof i.componentDidMount){var r=t.return;try{i.componentDidMount()}catch(l){Mc(t,r,l)}}var s=t.return;try{rl(t)}catch(l){Mc(t,s,l)}break;case 5:var a=t.return;try{rl(t)}catch(l){Mc(t,a,l)}}}catch(l){Mc(t,t.return,l)}if(t===e){Qo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Qo=o;break}Qo=t.return}}var Sl,Ml=Math.ceil,El=b.ReactCurrentDispatcher,Tl=b.ReactCurrentOwner,Cl=b.ReactCurrentBatchConfig,Al=0,Pl=null,Nl=null,kl=0,Rl=0,Il=Mr(0),Ll=0,jl=null,Dl=0,Ol=0,zl=0,Fl=null,Ul=null,Bl=0,Vl=1/0,Hl=null,Wl=!1,Gl=null,ql=null,Xl=!1,Yl=null,Jl=0,Kl=0,Zl=null,Ql=-1,$l=0;function ec(){return 0!==(6&Al)?Ze():-1!==Ql?Ql:Ql=Ze()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Al)&&0!==kl?kl&-kl:null!==ms.transition?(0===$l&&($l=mt()),$l):0!==(e=xt)?e:e=void 0===(e=window.event)?16:Kt(e.type)}function nc(e,t,n,i){if(50<Kl)throw Kl=0,Zl=null,Error(s(185));vt(e,n,i),0!==(2&Al)&&e===Pl||(e===Pl&&(0===(2&Al)&&(Ol|=n),4===Ll&&oc(e,kl)),ic(e,i),1===n&&0===Al&&0===(1&t.mode)&&(Vl=Ze()+500,Fr&&Vr()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-at(s),o=1<<a,l=r[a];-1===l?0!==(o&n)&&0===(o&i)||(r[a]=pt(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var i=ht(e,e===Pl?kl:0);if(0===i)null!==n&&Ye(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&Ye(n),1===t)0===e.tag?function(e){Fr=!0,Br(e)}(lc.bind(null,e)):Br(lc.bind(null,e)),ar((function(){0===(6&Al)&&Vr()})),n=null;else{switch(bt(i)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=it}n=Pc(n,rc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rc(e,t){if(Ql=-1,$l=0,0!==(6&Al))throw Error(s(327));var n=e.callbackNode;if(wc()&&e.callbackNode!==n)return null;var i=ht(e,e===Pl?kl:0);if(0===i)return null;if(0!==(30&i)||0!==(i&e.expiredLanes)||t)t=gc(e,i);else{t=i;var r=Al;Al|=2;var a=fc();for(Pl===e&&kl===t||(Hl=null,Vl=Ze()+500,hc(e,t));;)try{yc();break}catch(l){pc(e,l)}Ts(),El.current=a,Al=r,null!==Nl?t=0:(Pl=null,kl=0,t=Ll)}if(0!==t){if(2===t&&(0!==(r=ft(e))&&(i=r,t=sc(e,r))),1===t)throw n=jl,hc(e,0),oc(e,i),ic(e,Ze()),n;if(6===t)oc(e,i);else{if(r=e.current.alternate,0===(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!oi(s(),r))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=gc(e,i))&&(0!==(a=ft(e))&&(i=a,t=sc(e,a))),1===t))throw n=jl,hc(e,0),oc(e,i),ic(e,Ze()),n;switch(e.finishedWork=r,e.finishedLanes=i,t){case 0:case 1:throw Error(s(345));case 2:case 5:_c(e,Ul,Hl);break;case 3:if(oc(e,i),(130023424&i)===i&&10<(t=Bl+500-Ze())){if(0!==ht(e,0))break;if(((r=e.suspendedLanes)&i)!==i){ec(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=ir(_c.bind(null,e,Ul,Hl),t);break}_c(e,Ul,Hl);break;case 4:if(oc(e,i),(4194240&i)===i)break;for(t=e.eventTimes,r=-1;0<i;){var o=31-at(i);a=1<<o,(o=t[o])>r&&(r=o),i&=~a}if(i=r,10<(i=(120>(i=Ze()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Ml(i/1960))-i)){e.timeoutHandle=ir(_c.bind(null,e,Ul,Hl),i);break}_c(e,Ul,Hl);break;default:throw Error(s(329))}}}return ic(e,Ze()),e.callbackNode===n?rc.bind(null,e):null}function sc(e,t){var n=Fl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Ul,Ul=n,null!==t&&ac(t)),e}function ac(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function oc(e,t){for(t&=~zl,t&=~Ol,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),i=1<<n;e[n]=-1,t&=~i}}function lc(e){if(0!==(6&Al))throw Error(s(327));wc();var t=ht(e,0);if(0===(1&t))return ic(e,Ze()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var i=ft(e);0!==i&&(t=i,n=sc(e,i))}if(1===n)throw n=jl,hc(e,0),oc(e,t),ic(e,Ze()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,Ul,Hl),ic(e,Ze()),null}function cc(e,t){var n=Al;Al|=1;try{return e(t)}finally{0===(Al=n)&&(Vl=Ze()+500,Fr&&Vr())}}function uc(e){null!==Yl&&0===Yl.tag&&0===(6&Al)&&wc();var t=Al;Al|=1;var n=Cl.transition,i=xt;try{if(Cl.transition=null,xt=1,e)return e()}finally{xt=i,Cl.transition=n,0===(6&(Al=t))&&Vr()}}function dc(){Rl=Il.current,Er(Il)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,rr(n)),null!==Nl)for(n=Nl.return;null!==n;){var i=n;switch(ts(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&Ir();break;case 3:Ks(),Er(Pr),Er(Ar),na();break;case 5:Qs(i);break;case 4:Ks();break;case 13:case 19:Er($s);break;case 10:Cs(i.type._context);break;case 22:case 23:dc()}n=n.return}if(Pl=e,Nl=e=Ic(e.current,null),kl=Rl=t,Ll=0,jl=null,zl=Ol=Dl=0,Ul=Fl=null,null!==ks){for(t=0;t<ks.length;t++)if(null!==(i=(n=ks[t]).interleaved)){n.interleaved=null;var r=i.next,s=n.pending;if(null!==s){var a=s.next;s.next=r,i.next=a}n.pending=i}ks=null}return e}function pc(e,t){for(;;){var n=Nl;try{if(Ts(),ia.current=Za,ca){for(var i=aa.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}ca=!1}if(sa=0,la=oa=aa=null,ua=!1,da=0,Tl.current=null,null===n||null===n.return){Ll=1,jl=t,Nl=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=kl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=go(o);if(null!==f){f.flags&=-257,vo(f,o,l,0,t),1&f.mode&&mo(a,u,t),c=u;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){mo(a,u,t),mc();break e}c=Error(s(426))}else if(rs&&1&l.mode){var v=go(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vo(v,o,l,0,t),fs(lo(c,l));break e}}a=c=lo(c,l),4!==Ll&&(Ll=2),null===Fl?Fl=[a]:Fl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Bs(a,po(0,c,t));break e;case 1:l=c;var y=a.type,x=a.stateNode;if(0===(128&a.flags)&&("function"===typeof y.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===ql||!ql.has(x)))){a.flags|=65536,t&=-t,a.lanes|=t,Bs(a,fo(a,l,t));break e}}a=a.return}while(null!==a)}bc(n)}catch(b){t=b,Nl===n&&null!==n&&(Nl=n=n.return);continue}break}}function fc(){var e=El.current;return El.current=Za,null===e?Za:e}function mc(){0!==Ll&&3!==Ll&&2!==Ll||(Ll=4),null===Pl||0===(268435455&Dl)&&0===(268435455&Ol)||oc(Pl,kl)}function gc(e,t){var n=Al;Al|=2;var i=fc();for(Pl===e&&kl===t||(Hl=null,hc(e,t));;)try{vc();break}catch(r){pc(e,r)}if(Ts(),Al=n,El.current=i,null!==Nl)throw Error(s(261));return Pl=null,kl=0,Ll}function vc(){for(;null!==Nl;)xc(Nl)}function yc(){for(;null!==Nl&&!Je();)xc(Nl)}function xc(e){var t=Sl(e.alternate,e,Rl);e.memoizedProps=e.pendingProps,null===t?bc(e):Nl=t,Tl.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Xo(n,t,Rl)))return void(Nl=n)}else{if(null!==(n=Yo(n,t)))return n.flags&=32767,void(Nl=n);if(null===e)return Ll=6,void(Nl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Nl=t);Nl=t=e}while(null!==t);0===Ll&&(Ll=5)}function _c(e,t,n){var i=xt,r=Cl.transition;try{Cl.transition=null,xt=1,function(e,t,n,i){do{wc()}while(null!==Yl);if(0!==(6&Al))throw Error(s(327));n=e.finishedWork;var r=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-at(n),s=1<<r;t[r]=0,i[r]=-1,e[r]=-1,n&=~s}}(e,a),e===Pl&&(Nl=Pl=null,kl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Xl||(Xl=!0,Pc(tt,(function(){return wc(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Cl.transition,Cl.transition=null;var o=xt;xt=1;var l=Al;Al|=4,Tl.current=null,function(e,t){if(er=Wt,pi(e=hi())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{n.nodeType,a.nodeType}catch(_){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==r&&3!==h.nodeType||(l=o+r),h!==a||0!==i&&3!==h.nodeType||(c=o+i),3===h.nodeType&&(o+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++u===r&&(l=o),p===a&&++d===i&&(c=o),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(tr={focusedElem:e,selectionRange:n},Wt=!1,Qo=t;null!==Qo;)if(e=(t=Qo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Qo=e;else for(;null!==Qo;){t=Qo;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,x=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(_){Mc(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Qo=e;break}Qo=t.return}m=tl,tl=!1}(e,n),gl(n,e),fi(tr),Wt=!!er,tr=er=null,e.current=n,yl(n,e,r),Ke(),Al=l,xt=o,Cl.transition=a}else e.current=n;if(Xl&&(Xl=!1,Yl=e,Jl=r),a=e.pendingLanes,0===a&&(ql=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Ze()),null!==t)for(i=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Wl)throw Wl=!1,e=Gl,Gl=null,e;0!==(1&Jl)&&0!==e.tag&&wc(),a=e.pendingLanes,0!==(1&a)?e===Zl?Kl++:(Kl=0,Zl=e):Kl=0,Vr()}(e,t,n,i)}finally{Cl.transition=r,xt=i}return null}function wc(){if(null!==Yl){var e=bt(Jl),t=Cl.transition,n=xt;try{if(Cl.transition=null,xt=16>e?16:e,null===Yl)var i=!1;else{if(e=Yl,Yl=null,Jl=0,0!==(6&Al))throw Error(s(331));var r=Al;for(Al|=4,Qo=e.current;null!==Qo;){var a=Qo,o=a.child;if(0!==(16&Qo.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Qo=u;null!==Qo;){var d=Qo;switch(d.tag){case 0:case 11:case 15:nl(8,d,a)}var h=d.child;if(null!==h)h.return=d,Qo=h;else for(;null!==Qo;){var p=(d=Qo).sibling,f=d.return;if(sl(d),d===u){Qo=null;break}if(null!==p){p.return=f,Qo=p;break}Qo=f}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Qo=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,Qo=o;else e:for(;null!==Qo;){if(0!==(2048&(a=Qo).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,Qo=y;break e}Qo=a.return}}var x=e.current;for(Qo=x;null!==Qo;){var b=(o=Qo).child;if(0!==(2064&o.subtreeFlags)&&null!==b)b.return=o,Qo=b;else e:for(o=x;null!==Qo;){if(0!==(2048&(l=Qo).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(w){Mc(l,l.return,w)}if(l===o){Qo=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,Qo=_;break e}Qo=l.return}}if(Al=r,Vr(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(rt,e)}catch(w){}i=!0}return i}finally{xt=n,Cl.transition=t}}return!1}function Sc(e,t,n){e=Fs(e,t=po(0,t=lo(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),ic(e,t))}function Mc(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===ql||!ql.has(i))){t=Fs(t,e=fo(t,e=lo(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),ic(t,e));break}}t=t.return}}function Ec(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Pl===e&&(kl&n)===n&&(4===Ll||3===Ll&&(130023424&kl)===kl&&500>Ze()-Bl?hc(e,0):zl|=n),ic(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Ls(e,t))&&(vt(e,t,n),ic(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(s(314))}null!==i&&i.delete(t),Tc(e,n)}function Pc(e,t){return Xe(e,t)}function Nc(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kc(e,t,n,i){return new Nc(e,t,n,i)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ic(e,t){var n=e.alternate;return null===n?((n=kc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,i,r,a){var o=2;if(i=e,"function"===typeof e)Rc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case S:return jc(n.children,r,a,t);case M:o=8,r|=8;break;case E:return(e=kc(12,n,t,2|r)).elementType=E,e.lanes=a,e;case P:return(e=kc(13,n,t,r)).elementType=P,e.lanes=a,e;case N:return(e=kc(19,n,t,r)).elementType=N,e.lanes=a,e;case I:return Dc(n,r,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:o=10;break e;case C:o=9;break e;case A:o=11;break e;case k:o=14;break e;case R:o=16,i=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=kc(o,n,t,r)).elementType=e,t.type=i,t.lanes=a,t}function jc(e,t,n,i){return(e=kc(7,e,i,t)).lanes=n,e}function Dc(e,t,n,i){return(e=kc(22,e,i,t)).elementType=I,e.lanes=n,e.stateNode={isHidden:!1},e}function Oc(e,t,n){return(e=kc(6,e,null,t)).lanes=n,e}function zc(e,t,n){return(t=kc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fc(e,t,n,i,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Uc(e,t,n,i,r,s,a,o,l){return e=new Fc(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=kc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ds(s),e}function Bc(e){if(!e)return Cr;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Rr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Rr(n))return jr(e,n,t)}return t}function Vc(e,t,n,i,r,s,a,o,l){return(e=Uc(n,i,!0,e,0,s,0,o,l)).context=Bc(null),n=e.current,(s=zs(i=ec(),r=tc(n))).callback=void 0!==t&&null!==t?t:null,Fs(n,s,r),e.current.lanes=r,vt(e,r,i),ic(e,i),e}function Hc(e,t,n,i){var r=t.current,s=ec(),a=tc(r);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=zs(s,a)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),null!==(e=Fs(r,t,a))&&(nc(e,r,a,s),Us(e,r,a)),a}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function qc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Pr.current)xo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return xo=!1,function(e,t,n){switch(t.tag){case 3:Po(t),ps();break;case 5:Zs(t);break;case 1:Rr(t.type)&&Dr(t);break;case 4:Js(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,r=t.memoizedProps.value;Tr(ws,i._currentValue),i._currentValue=r;break;case 13:if(null!==(i=t.memoizedState))return null!==i.dehydrated?(Tr($s,1&$s.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Oo(e,t,n):(Tr($s,1&$s.current),null!==(e=Wo(e,t,n))?e.sibling:null);Tr($s,1&$s.current);break;case 19:if(i=0!==(n&t.childLanes),0!==(128&e.flags)){if(i)return Vo(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Tr($s,$s.current),i)break;return null;case 22:case 23:return t.lanes=0,Mo(e,t,n)}return Wo(e,t,n)}(e,t,n);xo=0!==(131072&e.flags)}else xo=!1,rs&&0!==(1048576&t.flags)&&$r(t,qr,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Ho(e,t),e=t.pendingProps;var r=kr(t,Ar.current);Ps(t,n),r=ma(null,t,i,e,r,n);var a=ga();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Rr(i)?(a=!0,Dr(t)):a=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,Ds(t),r.updater=io,t.stateNode=r,r._reactInternals=t,oo(t,i,e,n),t=Ao(null,t,i,!0,a,n)):(t.tag=0,rs&&a&&es(t),bo(null,t,r,n),t=t.child),t;case 16:i=t.elementType;e:{switch(Ho(e,t),e=t.pendingProps,i=(r=i._init)(i._payload),t.type=i,r=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===k)return 14}return 2}(i),e=to(i,e),r){case 0:t=To(null,t,i,e,n);break e;case 1:t=Co(null,t,i,e,n);break e;case 11:t=_o(null,t,i,e,n);break e;case 14:t=wo(null,t,i,to(i.type,e),n);break e}throw Error(s(306,i,""))}return t;case 0:return i=t.type,r=t.pendingProps,To(e,t,i,r=t.elementType===i?r:to(i,r),n);case 1:return i=t.type,r=t.pendingProps,Co(e,t,i,r=t.elementType===i?r:to(i,r),n);case 3:e:{if(Po(t),null===e)throw Error(s(387));i=t.pendingProps,r=(a=t.memoizedState).element,Os(e,t),Vs(t,i,null,n);var o=t.memoizedState;if(i=o.element,a.isDehydrated){if(a={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=No(e,t,i,n,r=lo(Error(s(423)),t));break e}if(i!==r){t=No(e,t,i,n,r=lo(Error(s(424)),t));break e}for(is=cr(t.stateNode.containerInfo.firstChild),ns=t,rs=!0,ss=null,n=_s(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ps(),i===r){t=Wo(e,t,n);break e}bo(e,t,i,n)}t=t.child}return t;case 5:return Zs(t),null===e&&cs(t),i=t.type,r=t.pendingProps,a=null!==e?e.memoizedProps:null,o=r.children,nr(i,r)?o=null:null!==a&&nr(i,a)&&(t.flags|=32),Eo(e,t),bo(e,t,o,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Oo(e,t,n);case 4:return Js(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=bs(t,null,i,n):bo(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,_o(e,t,i,r=t.elementType===i?r:to(i,r),n);case 7:return bo(e,t,t.pendingProps,n),t.child;case 8:case 12:return bo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,r=t.pendingProps,a=t.memoizedProps,o=r.value,Tr(ws,i._currentValue),i._currentValue=o,null!==a)if(oi(a.value,o)){if(a.children===r.children&&!Pr.current){t=Wo(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===i){if(1===a.tag){(c=zs(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),As(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(s(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),As(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}bo(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=t.pendingProps.children,Ps(t,n),i=i(r=Ns(r)),t.flags|=1,bo(e,t,i,n),t.child;case 14:return r=to(i=t.type,t.pendingProps),wo(e,t,i,r=to(i.type,r),n);case 15:return So(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:to(i,r),Ho(e,t),t.tag=1,Rr(i)?(e=!0,Dr(t)):e=!1,Ps(t,n),so(t,i,r),oo(t,i,r,n),Ao(null,t,i,!0,e,n);case 19:return Vo(e,t,n);case 22:return Mo(e,t,n)}throw Error(s(156,t.tag))};var Xc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Jc(e){this._internalRoot=e}function Kc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qc(){}function $c(e,t,n,i,r){var s=n._reactRootContainer;if(s){var a=s;if("function"===typeof r){var o=r;r=function(){var e=Wc(a);o.call(e)}}Hc(t,a,e,r)}else a=function(e,t,n,i,r){if(r){if("function"===typeof i){var s=i;i=function(){var e=Wc(a);s.call(e)}}var a=Vc(t,i,e,0,null,!1,0,"",Qc);return e._reactRootContainer=a,e[fr]=a.current,Vi(8===e.nodeType?e.parentNode:e),uc(),a}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof i){var o=i;i=function(){var e=Wc(l);o.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",Qc);return e._reactRootContainer=l,e[fr]=l.current,Vi(8===e.nodeType?e.parentNode:e),uc((function(){Hc(t,l,n,i)})),l}(n,t,e,r,i);return Wc(a)}Jc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Hc(e,t,null,null)},Jc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){Hc(null,e,null,null)})),t[fr]=null}},Jc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Mt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<It.length&&0!==t&&t<It[n].priority;n++);It.splice(n,0,e),0===n&&Ot(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),ic(t,Ze()),0===(6&Al)&&(Vl=Ze()+500,Vr()))}break;case 13:uc((function(){var t=Ls(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),qc(e,1)}},wt=function(e){if(13===e.tag){var t=Ls(e,134217728);if(null!==t)nc(t,e,134217728,ec());qc(e,134217728)}},St=function(e){if(13===e.tag){var t=tc(e),n=Ls(e,t);if(null!==n)nc(n,e,t,ec());qc(e,t)}},Mt=function(){return xt},Et=function(e,t){var n=xt;try{return xt=e,t()}finally{xt=n}},we=function(e,t,n){switch(t){case"input":if(Q(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=_r(i);if(!r)throw Error(s(90));X(i),Q(i,r)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ae=cc,Pe=uc;var eu={usingClientEntryPoint:!1,Events:[xr,br,_r,Te,Ce,cc]},tu={findFiberByHostInstance:yr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{rt=iu.inject(nu),st=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Kc(t))throw Error(s(200));return function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Kc(e))throw Error(s(299));var n=!1,i="",r=Xc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=Uc(e,1,!1,null,0,n,0,i,r),e[fr]=t.current,Vi(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Zc(t))throw Error(s(200));return $c(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Kc(e))throw Error(s(405));var i=null!=n&&n.hydratedSources||null,r=!1,a="",o=Xc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Vc(t,null,e,1,null!=n?n:null,r,0,a,o),e[fr]=t.current,Vi(e),i)for(e=0;e<i.length;e++)r=(r=(n=i[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new Jc(t)},t.render=function(e,t,n){if(!Zc(t))throw Error(s(200));return $c(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Zc(e))throw Error(s(40));return!!e._reactRootContainer&&(uc((function(){$c(null,null,e,!1,(function(){e._reactRootContainer=null,e[fr]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!Zc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return $c(e,t,n,!1,i)},t.version="18.3.1-next-f1338f8080-20240426"},352:(e,t,n)=>{"use strict";var i=n(119);t.createRoot=i.createRoot,t.hydrateRoot=i.hydrateRoot},414:(e,t,n)=>{"use strict";e.exports=n(654)},473:(e,t,n)=>{e.exports=function(e){var t={},i=n(950),r=n(224),s=Object.assign;function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.suspense_list"),y=Symbol.for("react.memo"),x=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var b=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var _=Symbol.iterator;function w(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=_&&e[_]||e["@@iterator"])?e:null}function S(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case u:return"Fragment";case c:return"Portal";case h:return"Profiler";case d:return"StrictMode";case g:return"Suspense";case v:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case f:return(e.displayName||"Context")+".Consumer";case p:return(e._context.displayName||"Context")+".Provider";case m:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case y:return null!==(t=e.displayName||null)?t:S(e.type)||"Memo";case x:t=e._payload,e=e._init;try{return S(e(t))}catch(n){}}return null}function M(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return S(t);case 8:return t===d?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function E(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function T(e){if(E(e)!==e)throw Error(a(188))}function C(e){var t=e.alternate;if(!t){if(null===(t=E(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var s=r.alternate;if(null===s){if(null!==(i=r.return)){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return T(r),e;if(s===i)return T(r),t;s=s.sibling}throw Error(a(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,l=r.child;l;){if(l===n){o=!0,n=r,i=s;break}if(l===i){o=!0,i=r,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,i=r;break}if(l===i){o=!0,i=s,n=r;break}l=l.sibling}if(!o)throw Error(a(189))}}if(n.alternate!==i)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}function A(e){return null!==(e=C(e))?P(e):null}function P(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=P(e);if(null!==t)return t;e=e.sibling}return null}function N(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){if(4!==e.tag){var t=N(e);if(null!==t)return t}e=e.sibling}return null}var k,R=Array.isArray,I=e.getPublicInstance,L=e.getRootHostContext,j=e.getChildHostContext,D=e.prepareForCommit,O=e.resetAfterCommit,z=e.createInstance,F=e.appendInitialChild,U=e.finalizeInitialChildren,B=e.prepareUpdate,V=e.shouldSetTextContent,H=e.createTextInstance,W=e.scheduleTimeout,G=e.cancelTimeout,q=e.noTimeout,X=e.isPrimaryRenderer,Y=e.supportsMutation,J=e.supportsPersistence,K=e.supportsHydration,Z=e.getInstanceFromNode,Q=e.preparePortalMount,$=e.getCurrentEventPriority,ee=e.detachDeletedInstance,te=e.supportsMicrotasks,ne=e.scheduleMicrotask,ie=e.supportsTestSelectors,re=e.findFiberRoot,se=e.getBoundingRect,ae=e.getTextContent,oe=e.isHiddenSubtree,le=e.matchAccessibilityRole,ce=e.setFocusIfFocusable,ue=e.setupIntersectionObserver,de=e.appendChild,he=e.appendChildToContainer,pe=e.commitTextUpdate,fe=e.commitMount,me=e.commitUpdate,ge=e.insertBefore,ve=e.insertInContainerBefore,ye=e.removeChild,xe=e.removeChildFromContainer,be=e.resetTextContent,_e=e.hideInstance,we=e.hideTextInstance,Se=e.unhideInstance,Me=e.unhideTextInstance,Ee=e.clearContainer,Te=e.cloneInstance,Ce=e.createContainerChildSet,Ae=e.appendChildToContainerChildSet,Pe=e.finalizeContainerChildren,Ne=e.replaceContainerChildren,ke=e.cloneHiddenInstance,Re=e.cloneHiddenTextInstance,Ie=e.canHydrateInstance,Le=e.canHydrateTextInstance,je=e.canHydrateSuspenseInstance,De=e.isSuspenseInstancePending,Oe=e.isSuspenseInstanceFallback,ze=e.registerSuspenseInstanceRetry,Fe=e.getNextHydratableSibling,Ue=e.getFirstHydratableChild,Be=e.getFirstHydratableChildWithinContainer,Ve=e.getFirstHydratableChildWithinSuspenseInstance,He=e.hydrateInstance,We=e.hydrateTextInstance,Ge=e.hydrateSuspenseInstance,qe=e.getNextHydratableInstanceAfterSuspenseInstance,Xe=e.commitHydratedContainer,Ye=e.commitHydratedSuspenseInstance,Je=e.clearSuspenseBoundary,Ke=e.clearSuspenseBoundaryFromContainer,Ze=e.shouldDeleteUnhydratedTailInstances,Qe=e.didNotMatchHydratedContainerTextInstance,$e=e.didNotMatchHydratedTextInstance;function et(e){if(void 0===k)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);k=t&&t[1]||""}return"\n"+k+e}var tt=!1;function nt(e,t){if(!e||tt)return"";tt=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var i=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){i=c}e.call(t.prototype)}else{try{throw Error()}catch(c){i=c}e()}}catch(c){if(c&&i&&"string"===typeof c.stack){for(var r=c.stack.split("\n"),s=i.stack.split("\n"),a=r.length-1,o=s.length-1;1<=a&&0<=o&&r[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(r[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||r[a]!==s[o]){var l="\n"+r[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{tt=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?et(e):""}var it=Object.prototype.hasOwnProperty,rt=[],st=-1;function at(e){return{current:e}}function ot(e){0>st||(e.current=rt[st],rt[st]=null,st--)}function lt(e,t){st++,rt[st]=e.current,e.current=t}var ct={},ut=at(ct),dt=at(!1),ht=ct;function pt(e,t){var n=e.type.contextTypes;if(!n)return ct;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r,s={};for(r in n)s[r]=t[r];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function ft(e){return null!==(e=e.childContextTypes)&&void 0!==e}function mt(){ot(dt),ot(ut)}function gt(e,t,n){if(ut.current!==ct)throw Error(a(168));lt(ut,t),lt(dt,n)}function vt(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in t))throw Error(a(108,M(e)||"Unknown",r));return s({},n,i)}function yt(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ct,ht=ut.current,lt(ut,e),lt(dt,dt.current),!0}function xt(e,t,n){var i=e.stateNode;if(!i)throw Error(a(169));n?(e=vt(e,t,ht),i.__reactInternalMemoizedMergedChildContext=e,ot(dt),ot(ut),lt(ut,e)):ot(dt),lt(dt,n)}var bt=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(_t(e)/wt|0)|0},_t=Math.log,wt=Math.LN2;var St=64,Mt=4194304;function Et(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Tt(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,r=e.suspendedLanes,s=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~r;0!==o?i=Et(o):0!==(s&=a)&&(i=Et(s))}else 0!==(a=n&~r)?i=Et(a):0!==s&&(i=Et(s));if(0===i)return 0;if(0!==t&&t!==i&&0===(t&r)&&((r=i&-i)>=(s=t&-t)||16===r&&0!==(4194240&s)))return t;if(0!==(4&i)&&(i|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)r=1<<(n=31-bt(t)),i|=e[n],t&=~r;return i}function Ct(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function At(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Pt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Nt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-bt(t)]=n}function kt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-bt(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}var Rt=0;function It(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var Lt=r.unstable_scheduleCallback,jt=r.unstable_cancelCallback,Dt=r.unstable_shouldYield,Ot=r.unstable_requestPaint,zt=r.unstable_now,Ft=r.unstable_ImmediatePriority,Ut=r.unstable_UserBlockingPriority,Bt=r.unstable_NormalPriority,Vt=r.unstable_IdlePriority,Ht=null,Wt=null;var Gt="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},qt=null,Xt=!1,Yt=!1;function Jt(e){null===qt?qt=[e]:qt.push(e)}function Kt(){if(!Yt&&null!==qt){Yt=!0;var e=0,t=Rt;try{var n=qt;for(Rt=1;e<n.length;e++){var i=n[e];do{i=i(!0)}while(null!==i)}qt=null,Xt=!1}catch(r){throw null!==qt&&(qt=qt.slice(e+1)),Lt(Ft,Kt),r}finally{Rt=t,Yt=!1}}return null}var Zt=o.ReactCurrentBatchConfig;function Qt(e,t){if(Gt(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!it.call(t,r)||!Gt(e[r],t[r]))return!1}return!0}function $t(e){switch(e.tag){case 5:return et(e.type);case 16:return et("Lazy");case 13:return et("Suspense");case 19:return et("SuspenseList");case 0:case 2:case 15:return e=nt(e.type,!1);case 11:return e=nt(e.type.render,!1);case 1:return e=nt(e.type,!0);default:return""}}function en(e,t){if(e&&e.defaultProps){for(var n in t=s({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var tn=at(null),nn=null,rn=null,sn=null;function an(){sn=rn=nn=null}function on(e,t,n){X?(lt(tn,t._currentValue),t._currentValue=n):(lt(tn,t._currentValue2),t._currentValue2=n)}function ln(e){var t=tn.current;ot(tn),X?e._currentValue=t:e._currentValue2=t}function cn(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function un(e,t){nn=e,sn=rn=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Dr=!0),e.firstContext=null)}function dn(e){var t=X?e._currentValue:e._currentValue2;if(sn!==e)if(e={context:e,memoizedValue:t,next:null},null===rn){if(null===nn)throw Error(a(308));rn=e,nn.dependencies={lanes:0,firstContext:e}}else rn=rn.next=e;return t}var hn=null,pn=!1;function fn(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mn(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function gn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function vn(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,null!==Ys&&0!==(1&e.mode)&&0===(2&Xs)?(null===(e=n.interleaved)?(t.next=t,null===hn?hn=[n]:hn.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function yn(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,kt(e,n)}}function xn(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?r=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?r=s=t:s=s.next=t}else r=s=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function bn(e,t,n,i){var r=e.updateQueue;pn=!1;var a=r.firstBaseUpdate,o=r.lastBaseUpdate,l=r.shared.pending;if(null!==l){r.shared.pending=null;var c=l,u=c.next;c.next=null,null===o?a=u:o.next=u,o=c;var d=e.alternate;null!==d&&((l=(d=d.updateQueue).lastBaseUpdate)!==o&&(null===l?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(null!==a){var h=r.baseState;for(o=0,d=u=c=null,l=a;;){var p=l.lane,f=l.eventTime;if((i&p)===p){null!==d&&(d=d.next={eventTime:f,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=e,g=l;switch(p=t,f=n,g.tag){case 1:if("function"===typeof(m=g.payload)){h=m.call(f,h,p);break e}h=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(p="function"===typeof(m=g.payload)?m.call(f,h,p):m)||void 0===p)break e;h=s({},h,p);break e;case 2:pn=!0}}null!==l.callback&&0!==l.lane&&(e.flags|=64,null===(p=r.effects)?r.effects=[l]:p.push(l))}else f={eventTime:f,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===d?(u=d=f,c=h):d=d.next=f,o|=p;if(null===(l=l.next)){if(null===(l=r.shared.pending))break;l=(p=l).next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}if(null===d&&(c=h),r.baseState=c,r.firstBaseUpdate=u,r.lastBaseUpdate=d,null!==(t=r.shared.interleaved)){r=t;do{o|=r.lane,r=r.next}while(r!==t)}else null===a&&(r.shared.lanes=0);ta|=o,e.lanes=o,e.memoizedState=h}}function _n(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(a(191,r));r.call(i)}}}var wn=(new i.Component).refs;function Sn(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:s({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Mn={isMounted:function(e){return!!(e=e._reactInternals)&&E(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=ba(),r=_a(e),s=gn(i,r);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),vn(e,s),null!==(t=wa(e,r,i))&&yn(t,e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=ba(),r=_a(e),s=gn(i,r);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),vn(e,s),null!==(t=wa(e,r,i))&&yn(t,e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ba(),i=_a(e),r=gn(n,i);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),vn(e,r),null!==(t=wa(e,i,n))&&yn(t,e,i)}};function En(e,t,n,i,r,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!Qt(n,i)||!Qt(r,s))}function Tn(e,t,n){var i=!1,r=ct,s=t.contextType;return"object"===typeof s&&null!==s?s=dn(s):(r=ft(t)?ht:ut.current,s=(i=null!==(i=t.contextTypes)&&void 0!==i)?pt(e,r):ct),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Mn,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=s),t}function Cn(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Mn.enqueueReplaceState(t,t.state,null)}function An(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs=wn,fn(e);var s=t.contextType;"object"===typeof s&&null!==s?r.context=dn(s):(s=ft(t)?ht:ut.current,r.context=pt(e,s)),r.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(Sn(e,t,s,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&Mn.enqueueReplaceState(r,r.state,null),bn(e,n,r,i),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}var Pn=[],Nn=0,kn=null,Rn=0,In=[],Ln=0,jn=null,Dn=1,On="";function zn(e,t){Pn[Nn++]=Rn,Pn[Nn++]=kn,kn=e,Rn=t}function Fn(e,t,n){In[Ln++]=Dn,In[Ln++]=On,In[Ln++]=jn,jn=e;var i=Dn;e=On;var r=32-bt(i)-1;i&=~(1<<r),n+=1;var s=32-bt(t)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Dn=1<<32-bt(t)+r|n<<r|i,On=s+e}else Dn=1<<s|n<<r|i,On=e}function Un(e){null!==e.return&&(zn(e,1),Fn(e,1,0))}function Bn(e){for(;e===kn;)kn=Pn[--Nn],Pn[Nn]=null,Rn=Pn[--Nn],Pn[Nn]=null;for(;e===jn;)jn=In[--Ln],In[Ln]=null,On=In[--Ln],In[Ln]=null,Dn=In[--Ln],In[Ln]=null}var Vn=null,Hn=null,Wn=!1,Gn=!1,qn=null;function Xn(e,t){var n=Za(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function Yn(e,t){switch(e.tag){case 5:return null!==(t=Ie(t,e.type,e.pendingProps))&&(e.stateNode=t,Vn=e,Hn=Ue(t),!0);case 6:return null!==(t=Le(t,e.pendingProps))&&(e.stateNode=t,Vn=e,Hn=null,!0);case 13:if(null!==(t=je(t))){var n=null!==jn?{id:Dn,overflow:On}:null;return e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Za(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Vn=e,Hn=null,!0}return!1;default:return!1}}function Jn(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function Kn(e){if(Wn){var t=Hn;if(t){var n=t;if(!Yn(e,t)){if(Jn(e))throw Error(a(418));t=Fe(n);var i=Vn;t&&Yn(e,t)?Xn(i,n):(e.flags=-4097&e.flags|2,Wn=!1,Vn=e)}}else{if(Jn(e))throw Error(a(418));e.flags=-4097&e.flags|2,Wn=!1,Vn=e}}}function Zn(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Vn=e}function Qn(e){if(!K||e!==Vn)return!1;if(!Wn)return Zn(e),Wn=!0,!1;if(3!==e.tag&&(5!==e.tag||Ze(e.type)&&!V(e.type,e.memoizedProps))){var t=Hn;if(t){if(Jn(e)){for(e=Hn;e;)e=Fe(e);throw Error(a(418))}for(;t;)Xn(e,t),t=Fe(t)}}if(Zn(e),13===e.tag){if(!K)throw Error(a(316));if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));Hn=qe(e)}else Hn=Vn?Fe(e.stateNode):null;return!0}function $n(){K&&(Hn=Vn=null,Gn=Wn=!1)}function ei(e){null===qn?qn=[e]:qn.push(e)}function ti(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var i=n.stateNode}if(!i)throw Error(a(147,e));var r=i,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=r.refs;t===wn&&(t=r.refs={}),null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function ni(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ii(e){return(0,e._init)(e._payload)}function ri(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=$a(e,t)).index=0,e.sibling=null,e}function s(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=2,n):i:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function d(e,t,n,i){return null===t||6!==t.tag?((t=io(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function h(e,t,n,i){var s=n.type;return s===u?f(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===x&&ii(s)===t.type)?((i=r(t,n.props)).ref=ti(e,t,n),i.return=e,i):((i=eo(n.type,n.key,n.props,null,e.mode,i)).ref=ti(e,t,n),i.return=e,i)}function p(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=ro(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function f(e,t,n,i,s){return null===t||7!==t.tag?((t=to(n,e.mode,i,s)).return=e,t):((t=r(t,n)).return=e,t)}function m(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=io(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case l:return(n=eo(t.type,t.key,t.props,null,e.mode,n)).ref=ti(e,null,t),n.return=e,n;case c:return(t=ro(t,e.mode,n)).return=e,t;case x:return m(e,(0,t._init)(t._payload),n)}if(R(t)||w(t))return(t=to(t,e.mode,n,null)).return=e,t;ni(e,t)}return null}function g(e,t,n,i){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:d(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case l:return n.key===r?h(e,t,n,i):null;case c:return n.key===r?p(e,t,n,i):null;case x:return g(e,t,(r=n._init)(n._payload),i)}if(R(n)||w(n))return null!==r?null:f(e,t,n,i,null);ni(e,n)}return null}function v(e,t,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i)return d(t,e=e.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case l:return h(t,e=e.get(null===i.key?n:i.key)||null,i,r);case c:return p(t,e=e.get(null===i.key?n:i.key)||null,i,r);case x:return v(e,t,n,(0,i._init)(i._payload),r)}if(R(i)||w(i))return f(t,e=e.get(n)||null,i,r,null);ni(t,i)}return null}function y(r,a,o,l){for(var c=null,u=null,d=a,h=a=0,p=null;null!==d&&h<o.length;h++){d.index>h?(p=d,d=null):p=d.sibling;var f=g(r,d,o[h],l);if(null===f){null===d&&(d=p);break}e&&d&&null===f.alternate&&t(r,d),a=s(f,a,h),null===u?c=f:u.sibling=f,u=f,d=p}if(h===o.length)return n(r,d),Wn&&zn(r,h),c;if(null===d){for(;h<o.length;h++)null!==(d=m(r,o[h],l))&&(a=s(d,a,h),null===u?c=d:u.sibling=d,u=d);return Wn&&zn(r,h),c}for(d=i(r,d);h<o.length;h++)null!==(p=v(d,r,h,o[h],l))&&(e&&null!==p.alternate&&d.delete(null===p.key?h:p.key),a=s(p,a,h),null===u?c=p:u.sibling=p,u=p);return e&&d.forEach((function(e){return t(r,e)})),Wn&&zn(r,h),c}function b(r,o,l,c){var u=w(l);if("function"!==typeof u)throw Error(a(150));if(null==(l=u.call(l)))throw Error(a(151));for(var d=u=null,h=o,p=o=0,f=null,y=l.next();null!==h&&!y.done;p++,y=l.next()){h.index>p?(f=h,h=null):f=h.sibling;var x=g(r,h,y.value,c);if(null===x){null===h&&(h=f);break}e&&h&&null===x.alternate&&t(r,h),o=s(x,o,p),null===d?u=x:d.sibling=x,d=x,h=f}if(y.done)return n(r,h),Wn&&zn(r,p),u;if(null===h){for(;!y.done;p++,y=l.next())null!==(y=m(r,y.value,c))&&(o=s(y,o,p),null===d?u=y:d.sibling=y,d=y);return Wn&&zn(r,p),u}for(h=i(r,h);!y.done;p++,y=l.next())null!==(y=v(h,r,p,y.value,c))&&(e&&null!==y.alternate&&h.delete(null===y.key?p:y.key),o=s(y,o,p),null===d?u=y:d.sibling=y,d=y);return e&&h.forEach((function(e){return t(r,e)})),Wn&&zn(r,p),u}return function e(i,s,a,d){if("object"===typeof a&&null!==a&&a.type===u&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case l:e:{for(var h=a.key,p=s;null!==p;){if(p.key===h){if((h=a.type)===u){if(7===p.tag){n(i,p.sibling),(s=r(p,a.props.children)).return=i,i=s;break e}}else if(p.elementType===h||"object"===typeof h&&null!==h&&h.$$typeof===x&&ii(h)===p.type){n(i,p.sibling),(s=r(p,a.props)).ref=ti(i,p,a),s.return=i,i=s;break e}n(i,p);break}t(i,p),p=p.sibling}a.type===u?((s=to(a.props.children,i.mode,d,a.key)).return=i,i=s):((d=eo(a.type,a.key,a.props,null,i.mode,d)).ref=ti(i,s,a),d.return=i,i=d)}return o(i);case c:e:{for(p=a.key;null!==s;){if(s.key===p){if(4===s.tag&&s.stateNode.containerInfo===a.containerInfo&&s.stateNode.implementation===a.implementation){n(i,s.sibling),(s=r(s,a.children||[])).return=i,i=s;break e}n(i,s);break}t(i,s),s=s.sibling}(s=ro(a,i.mode,d)).return=i,i=s}return o(i);case x:return e(i,s,(p=a._init)(a._payload),d)}if(R(a))return y(i,s,a,d);if(w(a))return b(i,s,a,d);ni(i,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==s&&6===s.tag?(n(i,s.sibling),(s=r(s,a)).return=i,i=s):(n(i,s),(s=io(a,i.mode,d)).return=i,i=s),o(i)):n(i,s)}}var si=ri(!0),ai=ri(!1),oi={},li=at(oi),ci=at(oi),ui=at(oi);function di(e){if(e===oi)throw Error(a(174));return e}function hi(e,t){lt(ui,t),lt(ci,e),lt(li,oi),e=L(t),ot(li),lt(li,e)}function pi(){ot(li),ot(ci),ot(ui)}function fi(e){var t=di(ui.current),n=di(li.current);n!==(t=j(n,e.type,t))&&(lt(ci,e),lt(li,t))}function mi(e){ci.current===e&&(ot(li),ot(ci))}var gi=at(0);function vi(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||De(n)||Oe(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var yi=[];function xi(){for(var e=0;e<yi.length;e++){var t=yi[e];X?t._workInProgressVersionPrimary=null:t._workInProgressVersionSecondary=null}yi.length=0}var bi=o.ReactCurrentDispatcher,_i=o.ReactCurrentBatchConfig,wi=0,Si=null,Mi=null,Ei=null,Ti=!1,Ci=!1,Ai=0,Pi=0;function Ni(){throw Error(a(321))}function ki(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Gt(e[n],t[n]))return!1;return!0}function Ri(e,t,n,i,r,s){if(wi=s,Si=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,bi.current=null===e||null===e.memoizedState?fr:mr,e=n(i,r),Ci){s=0;do{if(Ci=!1,Ai=0,25<=s)throw Error(a(301));s+=1,Ei=Mi=null,t.updateQueue=null,bi.current=gr,e=n(i,r)}while(Ci)}if(bi.current=pr,t=null!==Mi&&null!==Mi.next,wi=0,Ei=Mi=Si=null,Ti=!1,t)throw Error(a(300));return e}function Ii(){var e=0!==Ai;return Ai=0,e}function Li(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ei?Si.memoizedState=Ei=e:Ei=Ei.next=e,Ei}function ji(){if(null===Mi){var e=Si.alternate;e=null!==e?e.memoizedState:null}else e=Mi.next;var t=null===Ei?Si.memoizedState:Ei.next;if(null!==t)Ei=t,Mi=e;else{if(null===e)throw Error(a(310));e={memoizedState:(Mi=e).memoizedState,baseState:Mi.baseState,baseQueue:Mi.baseQueue,queue:Mi.queue,next:null},null===Ei?Si.memoizedState=Ei=e:Ei=Ei.next=e}return Ei}function Di(e,t){return"function"===typeof t?t(e):t}function Oi(e){var t=ji(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var i=Mi,r=i.baseQueue,s=n.pending;if(null!==s){if(null!==r){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(null!==r){s=r.next,i=i.baseState;var l=o=null,c=null,u=s;do{var d=u.lane;if((wi&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:e(i,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=i):c=c.next=h,Si.lanes|=d,ta|=d}u=u.next}while(null!==u&&u!==s);null===c?o=i:c.next=l,Gt(i,t.memoizedState)||(Dr=!0),t.memoizedState=i,t.baseState=o,t.baseQueue=c,n.lastRenderedState=i}if(null!==(e=n.interleaved)){r=e;do{s=r.lane,Si.lanes|=s,ta|=s,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function zi(e){var t=ji(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,s=t.memoizedState;if(null!==r){n.pending=null;var o=r=r.next;do{s=e(s,o.action),o=o.next}while(o!==r);Gt(s,t.memoizedState)||(Dr=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,i]}function Fi(){}function Ui(e,t){var n=Si,i=ji(),r=t(),s=!Gt(i.memoizedState,r);if(s&&(i.memoizedState=r,Dr=!0),i=i.queue,Zi(Hi.bind(null,n,i,e),[e]),i.getSnapshot!==t||s||null!==Ei&&1&Ei.memoizedState.tag){if(n.flags|=2048,qi(9,Vi.bind(null,n,i,r,t),void 0,null),null===Ys)throw Error(a(349));0!==(30&wi)||Bi(n,t,r)}return r}function Bi(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Si.updateQueue)?(t={lastEffect:null,stores:null},Si.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Vi(e,t,n,i){t.value=n,t.getSnapshot=i,Wi(t)&&wa(e,1,-1)}function Hi(e,t,n){return n((function(){Wi(t)&&wa(e,1,-1)}))}function Wi(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Gt(e,n)}catch(i){return!0}}function Gi(e){var t=Li();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Di,lastRenderedState:e},t.queue=e,e=e.dispatch=lr.bind(null,Si,e),[t.memoizedState,e]}function qi(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=Si.updateQueue)?(t={lastEffect:null,stores:null},Si.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Xi(){return ji().memoizedState}function Yi(e,t,n,i){var r=Li();Si.flags|=e,r.memoizedState=qi(1|t,n,void 0,void 0===i?null:i)}function Ji(e,t,n,i){var r=ji();i=void 0===i?null:i;var s=void 0;if(null!==Mi){var a=Mi.memoizedState;if(s=a.destroy,null!==i&&ki(i,a.deps))return void(r.memoizedState=qi(t,n,s,i))}Si.flags|=e,r.memoizedState=qi(1|t,n,s,i)}function Ki(e,t){return Yi(8390656,8,e,t)}function Zi(e,t){return Ji(2048,8,e,t)}function Qi(e,t){return Ji(4,2,e,t)}function $i(e,t){return Ji(4,4,e,t)}function er(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function tr(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ji(4,4,er.bind(null,t,e),n)}function nr(){}function ir(e,t){var n=ji();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&ki(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function rr(e,t){var n=ji();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&ki(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function sr(e,t){var n=Rt;Rt=0!==n&&4>n?n:4,e(!0);var i=_i.transition;_i.transition={};try{e(!1),t()}finally{Rt=n,_i.transition=i}}function ar(){return ji().memoizedState}function or(e,t,n){var i=_a(e);n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},cr(e)?ur(t,n):(dr(e,t,n),null!==(e=wa(e,i,n=ba()))&&hr(e,t,i))}function lr(e,t,n){var i=_a(e),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(cr(e))ur(t,r);else{dr(e,t,r);var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(r.hasEagerState=!0,r.eagerState=o,Gt(o,a))return}catch(l){}null!==(e=wa(e,i,n=ba()))&&hr(e,t,i)}}function cr(e){var t=e.alternate;return e===Si||null!==t&&t===Si}function ur(e,t){Ci=Ti=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function dr(e,t,n){null!==Ys&&0!==(1&e.mode)&&0===(2&Xs)?(null===(e=t.interleaved)?(n.next=n,null===hn?hn=[t]:hn.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function hr(e,t,n){if(0!==(4194240&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,kt(e,n)}}var pr={readContext:dn,useCallback:Ni,useContext:Ni,useEffect:Ni,useImperativeHandle:Ni,useInsertionEffect:Ni,useLayoutEffect:Ni,useMemo:Ni,useReducer:Ni,useRef:Ni,useState:Ni,useDebugValue:Ni,useDeferredValue:Ni,useTransition:Ni,useMutableSource:Ni,useSyncExternalStore:Ni,useId:Ni,unstable_isNewReconciler:!1},fr={readContext:dn,useCallback:function(e,t){return Li().memoizedState=[e,void 0===t?null:t],e},useContext:dn,useEffect:Ki,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Yi(4194308,4,er.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Yi(4194308,4,e,t)},useInsertionEffect:function(e,t){return Yi(4,2,e,t)},useMemo:function(e,t){var n=Li();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=Li();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=or.bind(null,Si,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},Li().memoizedState=e},useState:Gi,useDebugValue:nr,useDeferredValue:function(e){var t=Gi(e),n=t[0],i=t[1];return Ki((function(){var t=_i.transition;_i.transition={};try{i(e)}finally{_i.transition=t}}),[e]),n},useTransition:function(){var e=Gi(!1),t=e[0];return e=sr.bind(null,e[1]),Li().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=Si,r=Li();if(Wn){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ys)throw Error(a(349));0!==(30&wi)||Bi(i,t,n)}r.memoizedState=n;var s={value:n,getSnapshot:t};return r.queue=s,Ki(Hi.bind(null,i,s,e),[e]),i.flags|=2048,qi(9,Vi.bind(null,i,s,n,t),void 0,null),n},useId:function(){var e=Li(),t=Ys.identifierPrefix;if(Wn){var n=On;t=":"+t+"R"+(n=(Dn&~(1<<32-bt(Dn)-1)).toString(32)+n),0<(n=Ai++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=Pi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},mr={readContext:dn,useCallback:ir,useContext:dn,useEffect:Zi,useImperativeHandle:tr,useInsertionEffect:Qi,useLayoutEffect:$i,useMemo:rr,useReducer:Oi,useRef:Xi,useState:function(){return Oi(Di)},useDebugValue:nr,useDeferredValue:function(e){var t=Oi(Di),n=t[0],i=t[1];return Zi((function(){var t=_i.transition;_i.transition={};try{i(e)}finally{_i.transition=t}}),[e]),n},useTransition:function(){return[Oi(Di)[0],ji().memoizedState]},useMutableSource:Fi,useSyncExternalStore:Ui,useId:ar,unstable_isNewReconciler:!1},gr={readContext:dn,useCallback:ir,useContext:dn,useEffect:Zi,useImperativeHandle:tr,useInsertionEffect:Qi,useLayoutEffect:$i,useMemo:rr,useReducer:zi,useRef:Xi,useState:function(){return zi(Di)},useDebugValue:nr,useDeferredValue:function(e){var t=zi(Di),n=t[0],i=t[1];return Zi((function(){var t=_i.transition;_i.transition={};try{i(e)}finally{_i.transition=t}}),[e]),n},useTransition:function(){return[zi(Di)[0],ji().memoizedState]},useMutableSource:Fi,useSyncExternalStore:Ui,useId:ar,unstable_isNewReconciler:!1};function vr(e,t){try{var n="",i=t;do{n+=$t(i),i=i.return}while(i);var r=n}catch(s){r="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:r}}function yr(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var xr,br,_r,wr,Sr="function"===typeof WeakMap?WeakMap:Map;function Mr(e,t,n){(n=gn(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){ua||(ua=!0,da=i),yr(0,t)},n}function Er(e,t,n){(n=gn(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var r=t.value;n.payload=function(){return i(r)},n.callback=function(){yr(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){yr(0,t),"function"!==typeof i&&(null===ha?ha=new Set([this]):ha.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function Tr(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new Sr;var r=new Set;i.set(t,r)}else void 0===(r=i.get(t))&&(r=new Set,i.set(t,r));r.has(n)||(r.add(n),e=Ga.bind(null,e,t,n),t.then(e,e))}function Cr(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function Ar(e,t,n,i,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=gn(-1,1)).tag=2,vn(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}function Pr(e){e.flags|=4}function Nr(e,t){if(null!==e&&e.child===t.child)return!0;if(0!==(16&t.flags))return!1;for(e=t.child;null!==e;){if(0!==(12854&e.flags)||0!==(12854&e.subtreeFlags))return!1;e=e.sibling}return!0}if(Y)xr=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)F(e,n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},br=function(){},_r=function(e,t,n,i,r){if((e=e.memoizedProps)!==i){var s=t.stateNode,a=di(li.current);n=B(s,n,e,i,r,a),(t.updateQueue=n)&&Pr(t)}},wr=function(e,t,n,i){n!==i&&Pr(t)};else if(J){xr=function(e,t,n,i){for(var r=t.child;null!==r;){if(5===r.tag){var s=r.stateNode;n&&i&&(s=ke(s,r.type,r.memoizedProps,r)),F(e,s)}else if(6===r.tag)s=r.stateNode,n&&i&&(s=Re(s,r.memoizedProps,r)),F(e,s);else if(4!==r.tag)if(22===r.tag&&null!==r.memoizedState)null!==(s=r.child)&&(s.return=r),xr(e,r,!0,!0);else if(null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};var kr=function(e,t,n,i){for(var r=t.child;null!==r;){if(5===r.tag){var s=r.stateNode;n&&i&&(s=ke(s,r.type,r.memoizedProps,r)),Ae(e,s)}else if(6===r.tag)s=r.stateNode,n&&i&&(s=Re(s,r.memoizedProps,r)),Ae(e,s);else if(4!==r.tag)if(22===r.tag&&null!==r.memoizedState)null!==(s=r.child)&&(s.return=r),kr(e,r,!0,!0);else if(null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};br=function(e,t){var n=t.stateNode;if(!Nr(e,t)){e=n.containerInfo;var i=Ce(e);kr(i,t,!1,!1),n.pendingChildren=i,Pr(t),Pe(e,i)}},_r=function(e,t,n,i,r){var s=e.stateNode,a=e.memoizedProps;if((e=Nr(e,t))&&a===i)t.stateNode=s;else{var o=t.stateNode,l=di(li.current),c=null;a!==i&&(c=B(o,n,a,i,r,l)),e&&null===c?t.stateNode=s:(s=Te(s,c,n,a,i,t,e,o),U(s,n,i,r,l)&&Pr(t),t.stateNode=s,e?Pr(t):xr(s,t,!1,!1))}},wr=function(e,t,n,i){n!==i?(e=di(ui.current),n=di(li.current),t.stateNode=H(i,e,n,t),Pr(t)):t.stateNode=e.stateNode}}else br=function(){},_r=function(){},wr=function(){};function Rr(e,t){if(!Wn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Ir(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Lr(e,t,n){var i=t.pendingProps;switch(Bn(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ir(t),null;case 1:case 17:return ft(t.type)&&mt(),Ir(t),null;case 3:return i=t.stateNode,pi(),ot(dt),ot(ut),xi(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(Qn(t)?Pr(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==qn&&(Ca(qn),qn=null))),br(e,t),Ir(t),null;case 5:mi(t),n=di(ui.current);var r=t.type;if(null!==e&&null!=t.stateNode)_r(e,t,r,i,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(a(166));return Ir(t),null}if(e=di(li.current),Qn(t)){if(!K)throw Error(a(175));e=He(t.stateNode,t.type,t.memoizedProps,n,e,t,!Gn),t.updateQueue=e,null!==e&&Pr(t)}else{var s=z(r,i,n,e,t);xr(s,t,!1,!1),t.stateNode=s,U(s,r,i,n,e)&&Pr(t)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ir(t),null;case 6:if(e&&null!=t.stateNode)wr(e,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(a(166));if(e=di(ui.current),n=di(li.current),Qn(t)){if(!K)throw Error(a(176));if(e=t.stateNode,i=t.memoizedProps,(n=We(e,i,t,!Gn))&&null!==(r=Vn))switch(s=0!==(1&r.mode),r.tag){case 3:Qe(r.stateNode.containerInfo,e,i,s);break;case 5:$e(r.type,r.memoizedProps,r.stateNode,e,i,s)}n&&Pr(t)}else t.stateNode=H(i,e,n,t)}return Ir(t),null;case 13:if(ot(gi),i=t.memoizedState,Wn&&null!==Hn&&0!==(1&t.mode)&&0===(128&t.flags)){for(e=Hn;e;)e=Fe(e);return $n(),t.flags|=98560,t}if(null!==i&&null!==i.dehydrated){if(i=Qn(t),null===e){if(!i)throw Error(a(318));if(!K)throw Error(a(344));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(a(317));Ge(e,t)}else $n(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return Ir(t),null}return null!==qn&&(Ca(qn),qn=null),0!==(128&t.flags)?(t.lanes=n,t):(i=null!==i,n=!1,null===e?Qn(t):n=null!==e.memoizedState,i&&!n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&gi.current)?0===$s&&($s=3):ja())),null!==t.updateQueue&&(t.flags|=4),Ir(t),null);case 4:return pi(),br(e,t),null===e&&Q(t.stateNode.containerInfo),Ir(t),null;case 10:return ln(t.type._context),Ir(t),null;case 19:if(ot(gi),null===(r=t.memoizedState))return Ir(t),null;if(i=0!==(128&t.flags),null===(s=r.rendering))if(i)Rr(r,!1);else{if(0!==$s||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=vi(e))){for(t.flags|=128,Rr(r,!1),null!==(e=s.updateQueue)&&(t.updateQueue=e,t.flags|=4),t.subtreeFlags=0,e=n,i=t.child;null!==i;)r=e,(n=i).flags&=14680066,null===(s=n.alternate)?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=s.childLanes,n.lanes=s.lanes,n.child=s.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=s.memoizedProps,n.memoizedState=s.memoizedState,n.updateQueue=s.updateQueue,n.type=s.type,r=s.dependencies,n.dependencies=null===r?null:{lanes:r.lanes,firstContext:r.firstContext}),i=i.sibling;return lt(gi,1&gi.current|2),t.child}e=e.sibling}null!==r.tail&&zt()>oa&&(t.flags|=128,i=!0,Rr(r,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=vi(s))){if(t.flags|=128,i=!0,null!==(e=e.updateQueue)&&(t.updateQueue=e,t.flags|=4),Rr(r,!0),null===r.tail&&"hidden"===r.tailMode&&!s.alternate&&!Wn)return Ir(t),null}else 2*zt()-r.renderingStartTime>oa&&1073741824!==n&&(t.flags|=128,i=!0,Rr(r,!1),t.lanes=4194304);r.isBackwards?(s.sibling=t.child,t.child=s):(null!==(e=r.last)?e.sibling=s:t.child=s,r.last=s)}return null!==r.tail?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=zt(),t.sibling=null,e=gi.current,lt(gi,i?1&e|2:1&e),t):(Ir(t),null);case 22:case 23:return ka(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!==(1&t.mode)?0!==(1073741824&Zs)&&(Ir(t),Y&&6&t.subtreeFlags&&(t.flags|=8192)):Ir(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}var jr=o.ReactCurrentOwner,Dr=!1;function Or(e,t,n,i){t.child=null===e?ai(t,null,n,i):si(t,e.child,n,i)}function zr(e,t,n,i,r){n=n.render;var s=t.ref;return un(t,r),i=Ri(e,t,n,i,s,r),n=Ii(),null===e||Dr?(Wn&&n&&Un(t),t.flags|=1,Or(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,rs(e,t,r))}function Fr(e,t,n,i,r){if(null===e){var s=n.type;return"function"!==typeof s||Qa(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=eo(n.type,null,i,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ur(e,t,s,i,r))}if(s=e.child,0===(e.lanes&r)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:Qt)(a,i)&&e.ref===t.ref)return rs(e,t,r)}return t.flags|=1,(e=$a(s,i)).ref=t.ref,e.return=t,t.child=e}function Ur(e,t,n,i,r){if(null!==e&&Qt(e.memoizedProps,i)&&e.ref===t.ref){if(Dr=!1,0===(e.lanes&r))return t.lanes=e.lanes,rs(e,t,r);0!==(131072&e.flags)&&(Dr=!0)}return Hr(e,t,n,i,r)}function Br(e,t,n){var i=t.pendingProps,r=i.children,s=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null},lt(Qs,Zs),Zs|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null},t.updateQueue=null,lt(Qs,Zs),Zs|=e,null;t.memoizedState={baseLanes:0,cachePool:null},i=null!==s?s.baseLanes:n,lt(Qs,Zs),Zs|=i}else null!==s?(i=s.baseLanes|n,t.memoizedState=null):i=n,lt(Qs,Zs),Zs|=i;return Or(e,t,r,n),t.child}function Vr(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Hr(e,t,n,i,r){var s=ft(n)?ht:ut.current;return s=pt(t,s),un(t,r),n=Ri(e,t,n,i,s,r),i=Ii(),null===e||Dr?(Wn&&i&&Un(t),t.flags|=1,Or(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,rs(e,t,r))}function Wr(e,t,n,i,r){if(ft(n)){var s=!0;yt(t)}else s=!1;if(un(t,r),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),Tn(t,n,i),An(t,n,i,r),i=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=dn(c):c=pt(t,c=ft(n)?ht:ut.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==i||l!==c)&&Cn(t,a,i,c),pn=!1;var h=t.memoizedState;a.state=h,bn(t,i,a,r),l=t.memoizedState,o!==i||h!==l||dt.current||pn?("function"===typeof u&&(Sn(t,n,u,i),l=t.memoizedState),(o=pn||En(t,n,o,i,h,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),a.props=i,a.state=l,a.context=c,i=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),i=!1)}else{a=t.stateNode,mn(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:en(t.type,o),a.props=c,d=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=dn(l):l=pt(t,l=ft(n)?ht:ut.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==d||h!==l)&&Cn(t,a,i,l),pn=!1,h=t.memoizedState,a.state=h,bn(t,i,a,r);var f=t.memoizedState;o!==d||h!==f||dt.current||pn?("function"===typeof p&&(Sn(t,n,p,i),f=t.memoizedState),(c=pn||En(t,n,c,i,h,f,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(i,f,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(i,f,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=f),a.props=i,a.state=f,a.context=l,i=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),i=!1)}return Gr(e,t,n,i,s,r)}function Gr(e,t,n,i,r,s){Vr(e,t);var a=0!==(128&t.flags);if(!i&&!a)return r&&xt(t,n,!1),rs(e,t,s);i=t.stateNode,jr.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&a?(t.child=si(t,e.child,null,s),t.child=si(t,null,o,s)):Or(e,t,o,s),t.memoizedState=i.state,r&&xt(t,n,!0),t.child}function qr(e){var t=e.stateNode;t.pendingContext?gt(0,t.pendingContext,t.pendingContext!==t.context):t.context&&gt(0,t.context,!1),hi(e,t.containerInfo)}function Xr(e,t,n,i,r){return $n(),ei(r),t.flags|=256,Or(e,t,n,i),t.child}var Yr={dehydrated:null,treeContext:null,retryLane:0};function Jr(e){return{baseLanes:e,cachePool:null}}function Kr(e,t,n){var i,r=t.pendingProps,s=gi.current,o=!1,l=0!==(128&t.flags);if((i=l)||(i=(null===e||null!==e.memoizedState)&&0!==(2&s)),i?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),lt(gi,1&s),null===e)return Kn(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:Oe(e)?t.lanes=8:t.lanes=1073741824,null):(s=r.children,e=r.fallback,o?(r=t.mode,o=t.child,s={mode:"hidden",children:s},0===(1&r)&&null!==o?(o.childLanes=0,o.pendingProps=s):o=no(s,r,0,null),e=to(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Jr(n),t.memoizedState=Yr,e):Zr(t,s));if(null!==(s=e.memoizedState)){if(null!==(i=s.dehydrated)){if(l)return 256&t.flags?(t.flags&=-257,es(e,t,n,Error(a(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,s=t.mode,r=no({mode:"visible",children:r.children},s,0,null),(o=to(o,s,n,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&si(t,e.child,null,n),t.child.memoizedState=Jr(n),t.memoizedState=Yr,o);if(0===(1&t.mode))t=es(e,t,n,null);else if(Oe(i))t=es(e,t,n,Error(a(419)));else if(r=0!==(n&e.childLanes),Dr||r){if(null!==(r=Ys)){switch(n&-n){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}0!==(r=0!==(o&(r.suspendedLanes|n))?0:o)&&r!==s.retryLane&&(s.retryLane=r,wa(e,r,-1))}ja(),t=es(e,t,n,Error(a(421)))}else De(i)?(t.flags|=128,t.child=e.child,t=Xa.bind(null,e),ze(i,t),t=null):(n=s.treeContext,K&&(Hn=Ve(i),Vn=t,Wn=!0,qn=null,Gn=!1,null!==n&&(In[Ln++]=Dn,In[Ln++]=On,In[Ln++]=jn,Dn=n.id,On=n.overflow,jn=t)),(t=Zr(t,t.pendingProps.children)).flags|=4096);return t}return o?(r=$r(e,t,r.children,r.fallback,n),o=t.child,s=e.child.memoizedState,o.memoizedState=null===s?Jr(n):{baseLanes:s.baseLanes|n,cachePool:null},o.childLanes=e.childLanes&~n,t.memoizedState=Yr,r):(n=Qr(e,t,r.children,n),t.memoizedState=null,n)}return o?(r=$r(e,t,r.children,r.fallback,n),o=t.child,s=e.child.memoizedState,o.memoizedState=null===s?Jr(n):{baseLanes:s.baseLanes|n,cachePool:null},o.childLanes=e.childLanes&~n,t.memoizedState=Yr,r):(n=Qr(e,t,r.children,n),t.memoizedState=null,n)}function Zr(e,t){return(t=no({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Qr(e,t,n,i){var r=e.child;return e=r.sibling,n=$a(r,{mode:"visible",children:n}),0===(1&t.mode)&&(n.lanes=i),n.return=t,n.sibling=null,null!==e&&(null===(i=t.deletions)?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=n}function $r(e,t,n,i,r){var s=t.mode,a=(e=e.child).sibling,o={mode:"hidden",children:n};return 0===(1&s)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=o,t.deletions=null):(n=$a(e,o)).subtreeFlags=14680064&e.subtreeFlags,null!==a?i=$a(a,i):(i=to(i,s,r,null)).flags|=2,i.return=t,n.return=t,n.sibling=i,t.child=n,i}function es(e,t,n,i){return null!==i&&ei(i),si(t,e.child,null,n),(e=Zr(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ts(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),cn(e.return,t,n)}function ns(e,t,n,i,r){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function is(e,t,n){var i=t.pendingProps,r=i.revealOrder,s=i.tail;if(Or(e,t,i.children,n),0!==(2&(i=gi.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ts(e,n,t);else if(19===e.tag)ts(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(lt(gi,i),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===vi(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),ns(t,!1,r,n,s);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===vi(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}ns(t,!0,n,null,s);break;case"together":ns(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function rs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),ta|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=$a(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=$a(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function ss(e,t){switch(Bn(t),t.tag){case 1:return ft(t.type)&&mt(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return pi(),ot(dt),ot(ut),xi(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return mi(t),null;case 13:if(ot(gi),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));$n()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return ot(gi),null;case 4:return pi(),null;case 10:return ln(t.type._context),null;case 22:case 23:return ka(),null;default:return null}}var as=!1,os=!1,ls="function"===typeof WeakSet?WeakSet:Set,cs=null;function us(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){Wa(e,t,i)}else n.current=null}function ds(e,t,n){try{n()}catch(i){Wa(e,t,i)}}var hs=!1;function ps(e,t,n){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&e)===e){var s=r.destroy;r.destroy=void 0,void 0!==s&&ds(t,n,s)}r=r.next}while(r!==i)}}function fs(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function ms(e){var t=e.ref;if(null!==t){var n=e.stateNode;if(5===e.tag)e=I(n);else e=n;"function"===typeof t?t(e):t.current=e}}function gs(e,t,n){if(Wt&&"function"===typeof Wt.onCommitFiberUnmount)try{Wt.onCommitFiberUnmount(Ht,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var i=e=e.next;do{var r=i,s=r.destroy;r=r.tag,void 0!==s&&(0!==(2&r)||0!==(4&r))&&ds(t,n,s),i=i.next}while(i!==e)}break;case 1:if(us(t,n),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){Wa(t,n,a)}break;case 5:us(t,n);break;case 4:Y?Ms(e,t,n):J&&J&&(t=t.stateNode.containerInfo,n=Ce(t),Ne(t,n))}}function vs(e,t,n){for(var i=t;;)if(gs(e,i,n),null===i.child||Y&&4===i.tag){if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}else i.child.return=i,i=i.child}function ys(e){var t=e.alternate;null!==t&&(e.alternate=null,ys(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&ee(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function xs(e){return 5===e.tag||3===e.tag||4===e.tag}function bs(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||xs(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function _s(e){if(Y){e:{for(var t=e.return;null!==t;){if(xs(t))break e;t=t.return}throw Error(a(160))}var n=t;switch(n.tag){case 5:t=n.stateNode,32&n.flags&&(be(t),n.flags&=-33),Ss(e,n=bs(e),t);break;case 3:case 4:t=n.stateNode.containerInfo,ws(e,n=bs(e),t);break;default:throw Error(a(161))}}}function ws(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?ve(n,e,t):he(n,e);else if(4!==i&&null!==(e=e.child))for(ws(e,t,n),e=e.sibling;null!==e;)ws(e,t,n),e=e.sibling}function Ss(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?ge(n,e,t):de(n,e);else if(4!==i&&null!==(e=e.child))for(Ss(e,t,n),e=e.sibling;null!==e;)Ss(e,t,n),e=e.sibling}function Ms(e,t,n){for(var i,r,s=t,o=!1;;){if(!o){o=s.return;e:for(;;){if(null===o)throw Error(a(160));switch(i=o.stateNode,o.tag){case 5:r=!1;break e;case 3:case 4:i=i.containerInfo,r=!0;break e}o=o.return}o=!0}if(5===s.tag||6===s.tag)vs(e,s,n),r?xe(i,s.stateNode):ye(i,s.stateNode);else if(18===s.tag)r?Ke(i,s.stateNode):Je(i,s.stateNode);else if(4===s.tag){if(null!==s.child){i=s.stateNode.containerInfo,r=!0,s.child.return=s,s=s.child;continue}}else if(gs(e,s,n),null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break;for(;null===s.sibling;){if(null===s.return||s.return===t)return;4===(s=s.return).tag&&(o=!1)}s.sibling.return=s.return,s=s.sibling}}function Es(e,t){if(Y){switch(t.tag){case 0:case 11:case 14:case 15:return ps(3,t,t.return),fs(3,t),void ps(5,t,t.return);case 1:case 12:case 17:return;case 5:var n=t.stateNode;if(null!=n){var i=t.memoizedProps;e=null!==e?e.memoizedProps:i;var r=t.type,s=t.updateQueue;t.updateQueue=null,null!==s&&me(n,s,r,e,i,t)}return;case 6:if(null===t.stateNode)throw Error(a(162));return n=t.memoizedProps,void pe(t.stateNode,null!==e?e.memoizedProps:n,n);case 3:return void(K&&null!==e&&e.memoizedState.isDehydrated&&Xe(t.stateNode.containerInfo));case 13:case 19:return void Ts(t)}throw Error(a(163))}switch(t.tag){case 0:case 11:case 14:case 15:return ps(3,t,t.return),fs(3,t),void ps(5,t,t.return);case 12:case 22:case 23:return;case 13:case 19:return void Ts(t);case 3:K&&null!==e&&e.memoizedState.isDehydrated&&Xe(t.stateNode.containerInfo)}e:if(J){switch(t.tag){case 1:case 5:case 6:break e;case 3:case 4:t=t.stateNode,Ne(t.containerInfo,t.pendingChildren);break e}throw Error(a(163))}}function Ts(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ls),t.forEach((function(t){var i=Ya.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))}))}}function Cs(e,t,n){cs=e,As(e,t,n)}function As(e,t,n){for(var i=0!==(1&e.mode);null!==cs;){var r=cs,s=r.child;if(22===r.tag&&i){var a=null!==r.memoizedState||as;if(!a){var o=r.alternate,l=null!==o&&null!==o.memoizedState||os;o=as;var c=os;if(as=a,(os=l)&&!c)for(cs=r;null!==cs;)l=(a=cs).child,22===a.tag&&null!==a.memoizedState?ks(r):null!==l?(l.return=a,cs=l):ks(r);for(;null!==s;)cs=s,As(s,t,n),s=s.sibling;cs=r,as=o,os=c}Ps(e)}else 0!==(8772&r.subtreeFlags)&&null!==s?(s.return=r,cs=s):Ps(e)}}function Ps(e){for(;null!==cs;){var t=cs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:os||fs(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!os)if(null===n)i.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:en(t.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&_n(t,s,i);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:n=I(t.child.stateNode);break;case 1:n=t.child.stateNode}_n(t,o,n)}break;case 5:var l=t.stateNode;null===n&&4&t.flags&&fe(l,t.type,t.memoizedProps,t);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(K&&null===t.memoizedState){var c=t.alternate;if(null!==c){var u=c.memoizedState;if(null!==u){var d=u.dehydrated;null!==d&&Ye(d)}}}break;default:throw Error(a(163))}os||512&t.flags&&ms(t)}catch(h){Wa(t,t.return,h)}}if(t===e){cs=null;break}if(null!==(n=t.sibling)){n.return=t.return,cs=n;break}cs=t.return}}function Ns(e){for(;null!==cs;){var t=cs;if(t===e){cs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,cs=n;break}cs=t.return}}function ks(e){for(;null!==cs;){var t=cs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{fs(4,t)}catch(l){Wa(t,n,l)}break;case 1:var i=t.stateNode;if("function"===typeof i.componentDidMount){var r=t.return;try{i.componentDidMount()}catch(l){Wa(t,r,l)}}var s=t.return;try{ms(t)}catch(l){Wa(t,s,l)}break;case 5:var a=t.return;try{ms(t)}catch(l){Wa(t,a,l)}}}catch(l){Wa(t,t.return,l)}if(t===e){cs=null;break}var o=t.sibling;if(null!==o){o.return=t.return,cs=o;break}cs=t.return}}var Rs=0,Is=1,Ls=2,js=3,Ds=4;if("function"===typeof Symbol&&Symbol.for){var Os=Symbol.for;Rs=Os("selector.component"),Is=Os("selector.has_pseudo_class"),Ls=Os("selector.role"),js=Os("selector.test_id"),Ds=Os("selector.text")}function zs(e){var t=Z(e);if(null!=t){if("string"!==typeof t.memoizedProps["data-testname"])throw Error(a(364));return t}if(null===(e=re(e)))throw Error(a(362));return e.stateNode.current}function Fs(e,t){switch(t.$$typeof){case Rs:if(e.type===t.value)return!0;break;case Is:e:{t=t.value,e=[e,0];for(var n=0;n<e.length;){var i=e[n++],r=e[n++],s=t[r];if(5!==i.tag||!oe(i)){for(;null!=s&&Fs(i,s);)s=t[++r];if(r===t.length){t=!0;break e}for(i=i.child;null!==i;)e.push(i,r),i=i.sibling}}t=!1}return t;case Ls:if(5===e.tag&&le(e.stateNode,t.value))return!0;break;case Ds:if((5===e.tag||6===e.tag)&&(null!==(e=ae(e))&&0<=e.indexOf(t.value)))return!0;break;case js:if(5===e.tag&&("string"===typeof(e=e.memoizedProps["data-testname"])&&e.toLowerCase()===t.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function Us(e){switch(e.$$typeof){case Rs:return"<"+(S(e.value)||"Unknown")+">";case Is:return":has("+(Us(e)||"")+")";case Ls:return'[role="'+e.value+'"]';case Ds:return'"'+e.value+'"';case js:return'[data-testname="'+e.value+'"]';default:throw Error(a(365))}}function Bs(e,t){var n=[];e=[e,0];for(var i=0;i<e.length;){var r=e[i++],s=e[i++],a=t[s];if(5!==r.tag||!oe(r)){for(;null!=a&&Fs(r,a);)a=t[++s];if(s===t.length)n.push(r);else for(r=r.child;null!==r;)e.push(r,s),r=r.sibling}}return n}function Vs(e,t){if(!ie)throw Error(a(363));e=Bs(e=zs(e),t),t=[],e=Array.from(e);for(var n=0;n<e.length;){var i=e[n++];if(5===i.tag)oe(i)||t.push(i.stateNode);else for(i=i.child;null!==i;)e.push(i),i=i.sibling}return t}var Hs=Math.ceil,Ws=o.ReactCurrentDispatcher,Gs=o.ReactCurrentOwner,qs=o.ReactCurrentBatchConfig,Xs=0,Ys=null,Js=null,Ks=0,Zs=0,Qs=at(0),$s=0,ea=null,ta=0,na=0,ia=0,ra=null,sa=null,aa=0,oa=1/0;function la(){oa=zt()+500}var ca,ua=!1,da=null,ha=null,pa=!1,fa=null,ma=0,ga=0,va=null,ya=-1,xa=0;function ba(){return 0!==(6&Xs)?zt():-1!==ya?ya:ya=zt()}function _a(e){return 0===(1&e.mode)?1:0!==(2&Xs)&&0!==Ks?Ks&-Ks:null!==Zt.transition?(0===xa&&(e=St,0===(4194240&(St<<=1))&&(St=64),xa=e),xa):0!==(e=Rt)?e:$()}function wa(e,t,n){if(50<ga)throw ga=0,va=null,Error(a(185));var i=Sa(e,t);return null===i?null:(Nt(i,t,n),0!==(2&Xs)&&i===Ys||(i===Ys&&(0===(2&Xs)&&(na|=t),4===$s&&Aa(i,Ks)),Ma(i,n),1===t&&0===Xs&&0===(1&e.mode)&&(la(),Xt&&Kt())),i)}function Sa(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function Ma(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-bt(s),o=1<<a,l=r[a];-1===l?0!==(o&n)&&0===(o&i)||(r[a]=Ct(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var i=Tt(e,e===Ys?Ks:0);if(0===i)null!==n&&jt(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&jt(n),1===t)0===e.tag?function(e){Xt=!0,Jt(e)}(Pa.bind(null,e)):Jt(Pa.bind(null,e)),te?ne((function(){0===Xs&&Kt()})):Lt(Ft,Kt),n=null;else{switch(It(i)){case 1:n=Ft;break;case 4:n=Ut;break;case 16:default:n=Bt;break;case 536870912:n=Vt}n=Ja(n,Ea.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Ea(e,t){if(ya=-1,xa=0,0!==(6&Xs))throw Error(a(327));var n=e.callbackNode;if(Va()&&e.callbackNode!==n)return null;var i=Tt(e,e===Ys?Ks:0);if(0===i)return null;if(0!==(30&i)||0!==(i&e.expiredLanes)||t)t=Da(e,i);else{t=i;var r=Xs;Xs|=2;var s=La();for(Ys===e&&Ks===t||(la(),Ra(e,t));;)try{za();break}catch(l){Ia(e,l)}an(),Ws.current=s,Xs=r,null!==Js?t=0:(Ys=null,Ks=0,t=$s)}if(0!==t){if(2===t&&(0!==(r=At(e))&&(i=r,t=Ta(e,r))),1===t)throw n=ea,Ra(e,0),Aa(e,i),Ma(e,zt()),n;if(6===t)Aa(e,i);else{if(r=e.current.alternate,0===(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Gt(s(),r))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=Da(e,i))&&(0!==(s=At(e))&&(i=s,t=Ta(e,s))),1===t))throw n=ea,Ra(e,0),Aa(e,i),Ma(e,zt()),n;switch(e.finishedWork=r,e.finishedLanes=i,t){case 0:case 1:throw Error(a(345));case 2:case 5:Ba(e,sa);break;case 3:if(Aa(e,i),(130023424&i)===i&&10<(t=aa+500-zt())){if(0!==Tt(e,0))break;if(((r=e.suspendedLanes)&i)!==i){ba(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=W(Ba.bind(null,e,sa),t);break}Ba(e,sa);break;case 4:if(Aa(e,i),(4194240&i)===i)break;for(t=e.eventTimes,r=-1;0<i;){var o=31-bt(i);s=1<<o,(o=t[o])>r&&(r=o),i&=~s}if(i=r,10<(i=(120>(i=zt()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Hs(i/1960))-i)){e.timeoutHandle=W(Ba.bind(null,e,sa),i);break}Ba(e,sa);break;default:throw Error(a(329))}}}return Ma(e,zt()),e.callbackNode===n?Ea.bind(null,e):null}function Ta(e,t){var n=ra;return e.current.memoizedState.isDehydrated&&(Ra(e,t).flags|=256),2!==(e=Da(e,t))&&(t=sa,sa=n,null!==t&&Ca(t)),e}function Ca(e){null===sa?sa=e:sa.push.apply(sa,e)}function Aa(e,t){for(t&=~ia,t&=~na,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-bt(t),i=1<<n;e[n]=-1,t&=~i}}function Pa(e){if(0!==(6&Xs))throw Error(a(327));Va();var t=Tt(e,0);if(0===(1&t))return Ma(e,zt()),null;var n=Da(e,t);if(0!==e.tag&&2===n){var i=At(e);0!==i&&(t=i,n=Ta(e,i))}if(1===n)throw n=ea,Ra(e,0),Aa(e,t),Ma(e,zt()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ba(e,sa),Ma(e,zt()),null}function Na(e){null!==fa&&0===fa.tag&&0===(6&Xs)&&Va();var t=Xs;Xs|=1;var n=qs.transition,i=Rt;try{if(qs.transition=null,Rt=1,e)return e()}finally{Rt=i,qs.transition=n,0===(6&(Xs=t))&&Kt()}}function ka(){Zs=Qs.current,ot(Qs)}function Ra(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==q&&(e.timeoutHandle=q,G(n)),null!==Js)for(n=Js.return;null!==n;){var i=n;switch(Bn(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&mt();break;case 3:pi(),ot(dt),ot(ut),xi();break;case 5:mi(i);break;case 4:pi();break;case 13:case 19:ot(gi);break;case 10:ln(i.type._context);break;case 22:case 23:ka()}n=n.return}if(Ys=e,Js=e=$a(e.current,null),Ks=Zs=t,$s=0,ea=null,ia=na=ta=0,sa=ra=null,null!==hn){for(t=0;t<hn.length;t++)if(null!==(i=(n=hn[t]).interleaved)){n.interleaved=null;var r=i.next,s=n.pending;if(null!==s){var a=s.next;s.next=r,i.next=a}n.pending=i}hn=null}return e}function Ia(e,t){for(;;){var n=Js;try{if(an(),bi.current=pr,Ti){for(var i=Si.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}Ti=!1}if(wi=0,Ei=Mi=Si=null,Ci=!1,Ai=0,Gs.current=null,null===n||null===n.return){$s=1,ea=t,Js=null;break}e:{var s=e,o=n.return,l=n,c=t;if(t=Ks,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=Cr(o);if(null!==f){f.flags&=-257,Ar(f,o,l,0,t),1&f.mode&&Tr(s,u,t),c=u;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){Tr(s,u,t),ja();break e}c=Error(a(426))}else if(Wn&&1&l.mode){var v=Cr(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),Ar(v,o,l,0,t),ei(c);break e}}s=c,4!==$s&&($s=2),null===ra?ra=[s]:ra.push(s),c=vr(c,l),l=o;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t,xn(l,Mr(0,c,t));break e;case 1:s=c;var y=l.type,x=l.stateNode;if(0===(128&l.flags)&&("function"===typeof y.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===ha||!ha.has(x)))){l.flags|=65536,t&=-t,l.lanes|=t,xn(l,Er(l,s,t));break e}}l=l.return}while(null!==l)}Ua(n)}catch(b){t=b,Js===n&&null!==n&&(Js=n=n.return);continue}break}}function La(){var e=Ws.current;return Ws.current=pr,null===e?pr:e}function ja(){0!==$s&&3!==$s&&2!==$s||($s=4),null===Ys||0===(268435455&ta)&&0===(268435455&na)||Aa(Ys,Ks)}function Da(e,t){var n=Xs;Xs|=2;var i=La();for(Ys===e&&Ks===t||Ra(e,t);;)try{Oa();break}catch(r){Ia(e,r)}if(an(),Xs=n,Ws.current=i,null!==Js)throw Error(a(261));return Ys=null,Ks=0,$s}function Oa(){for(;null!==Js;)Fa(Js)}function za(){for(;null!==Js&&!Dt();)Fa(Js)}function Fa(e){var t=ca(e.alternate,e,Zs);e.memoizedProps=e.pendingProps,null===t?Ua(e):Js=t,Gs.current=null}function Ua(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Lr(n,t,Zs)))return void(Js=n)}else{if(null!==(n=ss(n,t)))return n.flags&=32767,void(Js=n);if(null===e)return $s=6,void(Js=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Js=t);Js=t=e}while(null!==t);0===$s&&($s=5)}function Ba(e,t){var n=Rt,i=qs.transition;try{qs.transition=null,Rt=1,function(e,t,n){do{Va()}while(null!==fa);if(0!==(6&Xs))throw Error(a(327));var i=e.finishedWork,r=e.finishedLanes;if(null===i)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var s=i.lanes|i.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-bt(n),s=1<<r;t[r]=0,i[r]=-1,e[r]=-1,n&=~s}}(e,s),e===Ys&&(Js=Ys=null,Ks=0),0===(2064&i.subtreeFlags)&&0===(2064&i.flags)||pa||(pa=!0,Ja(Bt,(function(){return Va(),null}))),s=0!==(15990&i.flags),0!==(15990&i.subtreeFlags)||s){s=qs.transition,qs.transition=null;var o=Rt;Rt=1;var l=Xs;Xs|=4,Gs.current=null,function(e,t){for(D(e.containerInfo),cs=t;null!==cs;)if(t=(e=cs).child,0!==(1028&e.subtreeFlags)&&null!==t)t.return=e,cs=t;else for(;null!==cs;){e=cs;try{var n=e.alternate;if(0!==(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==n){var i=n.memoizedProps,r=n.memoizedState,s=e.stateNode,o=s.getSnapshotBeforeUpdate(e.elementType===e.type?i:en(e.type,i),r);s.__reactInternalSnapshotBeforeUpdate=o}break;case 3:Y&&Ee(e.stateNode.containerInfo);break;default:throw Error(a(163))}}catch(l){Wa(e,e.return,l)}if(null!==(t=e.sibling)){t.return=e.return,cs=t;break}cs=e.return}n=hs,hs=!1}(e,i),function(e,t){for(cs=t;null!==cs;){var n=(t=cs).deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var s=e;Y?Ms(s,r,t):vs(s,r,t);var a=r.alternate;null!==a&&(a.return=null),r.return=null}catch(_){Wa(r,t,_)}}if(n=t.child,0!==(12854&t.subtreeFlags)&&null!==n)n.return=t,cs=n;else for(;null!==cs;){t=cs;try{var o=t.flags;if(32&o&&Y&&be(t.stateNode),512&o){var l=t.alternate;if(null!==l){var c=l.ref;null!==c&&("function"===typeof c?c(null):c.current=null)}}if(8192&o)switch(t.tag){case 13:if(null!==t.memoizedState){var u=t.alternate;null!==u&&null!==u.memoizedState||(aa=zt())}break;case 22:var d=null!==t.memoizedState,h=t.alternate,p=null!==h&&null!==h.memoizedState;if(n=t,Y)e:if(i=n,r=d,s=null,Y)for(var f=i;;){if(5===f.tag){if(null===s){s=f;var m=f.stateNode;r?_e(m):Se(f.stateNode,f.memoizedProps)}}else if(6===f.tag){if(null===s){var g=f.stateNode;r?we(g):Me(g,f.memoizedProps)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===i)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===i)break;for(;null===f.sibling;){if(null===f.return||f.return===i)break e;s===f&&(s=null),f=f.return}s===f&&(s=null),f.sibling.return=f.return,f=f.sibling}if(d&&!p&&0!==(1&n.mode)){cs=n;for(var v=n.child;null!==v;){for(n=cs=v;null!==cs;){var y=(i=cs).child;switch(i.tag){case 0:case 11:case 14:case 15:ps(4,i,i.return);break;case 1:us(i,i.return);var x=i.stateNode;if("function"===typeof x.componentWillUnmount){var b=i.return;try{x.props=i.memoizedProps,x.state=i.memoizedState,x.componentWillUnmount()}catch(_){Wa(i,b,_)}}break;case 5:us(i,i.return);break;case 22:if(null!==i.memoizedState){Ns(n);continue}}null!==y?(y.return=i,cs=y):Ns(n)}v=v.sibling}}}switch(4102&o){case 2:_s(t),t.flags&=-3;break;case 6:_s(t),t.flags&=-3,Es(t.alternate,t);break;case 4096:t.flags&=-4097;break;case 4100:t.flags&=-4097,Es(t.alternate,t);break;case 4:Es(t.alternate,t)}}catch(_){Wa(t,t.return,_)}if(null!==(n=t.sibling)){n.return=t.return,cs=n;break}cs=t.return}}}(e,i),O(e.containerInfo),e.current=i,Cs(i,e,r),Ot(),Xs=l,Rt=o,qs.transition=s}else e.current=i;if(pa&&(pa=!1,fa=e,ma=r),s=e.pendingLanes,0===s&&(ha=null),function(e){if(Wt&&"function"===typeof Wt.onCommitFiberRoot)try{Wt.onCommitFiberRoot(Ht,e,void 0,128===(128&e.current.flags))}catch(t){}}(i.stateNode),Ma(e,zt()),null!==t)for(n=e.onRecoverableError,i=0;i<t.length;i++)n(t[i]);if(ua)throw ua=!1,e=da,da=null,e;0!==(1&ma)&&0!==e.tag&&Va(),s=e.pendingLanes,0!==(1&s)?e===va?ga++:(ga=0,va=e):ga=0,Kt()}(e,t,n)}finally{qs.transition=i,Rt=n}return null}function Va(){if(null!==fa){var e=It(ma),t=qs.transition,n=Rt;try{if(qs.transition=null,Rt=16>e?16:e,null===fa)var i=!1;else{if(e=fa,fa=null,ma=0,0!==(6&Xs))throw Error(a(331));var r=Xs;for(Xs|=4,cs=e.current;null!==cs;){var s=cs,o=s.child;if(0!==(16&cs.flags)){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(cs=u;null!==cs;){var d=cs;switch(d.tag){case 0:case 11:case 15:ps(8,d,s)}var h=d.child;if(null!==h)h.return=d,cs=h;else for(;null!==cs;){var p=(d=cs).sibling,f=d.return;if(ys(d),d===u){cs=null;break}if(null!==p){p.return=f,cs=p;break}cs=f}}}var m=s.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}cs=s}}if(0!==(2064&s.subtreeFlags)&&null!==o)o.return=s,cs=o;else e:for(;null!==cs;){if(0!==(2048&(s=cs).flags))switch(s.tag){case 0:case 11:case 15:ps(9,s,s.return)}var y=s.sibling;if(null!==y){y.return=s.return,cs=y;break e}cs=s.return}}var x=e.current;for(cs=x;null!==cs;){var b=(o=cs).child;if(0!==(2064&o.subtreeFlags)&&null!==b)b.return=o,cs=b;else e:for(o=x;null!==cs;){if(0!==(2048&(l=cs).flags))try{switch(l.tag){case 0:case 11:case 15:fs(9,l)}}catch(w){Wa(l,l.return,w)}if(l===o){cs=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,cs=_;break e}cs=l.return}}if(Xs=r,Kt(),Wt&&"function"===typeof Wt.onPostCommitFiberRoot)try{Wt.onPostCommitFiberRoot(Ht,e)}catch(w){}i=!0}return i}finally{Rt=n,qs.transition=t}}return!1}function Ha(e,t,n){vn(e,t=Mr(0,t=vr(n,t),1)),t=ba(),null!==(e=Sa(e,1))&&(Nt(e,1,t),Ma(e,t))}function Wa(e,t,n){if(3===e.tag)Ha(e,e,n);else for(;null!==t;){if(3===t.tag){Ha(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===ha||!ha.has(i))){vn(t,e=Er(t,e=vr(n,e),1)),e=ba(),null!==(t=Sa(t,1))&&(Nt(t,1,e),Ma(t,e));break}}t=t.return}}function Ga(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=ba(),e.pingedLanes|=e.suspendedLanes&n,Ys===e&&(Ks&n)===n&&(4===$s||3===$s&&(130023424&Ks)===Ks&&500>zt()-aa?Ra(e,0):ia|=n),Ma(e,t)}function qa(e,t){0===t&&(0===(1&e.mode)?t=1:(t=Mt,0===(130023424&(Mt<<=1))&&(Mt=4194304)));var n=ba();null!==(e=Sa(e,t))&&(Nt(e,t,n),Ma(e,n))}function Xa(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),qa(e,n)}function Ya(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(a(314))}null!==i&&i.delete(t),qa(e,n)}function Ja(e,t){return Lt(e,t)}function Ka(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Za(e,t,n,i){return new Ka(e,t,n,i)}function Qa(e){return!(!(e=e.prototype)||!e.isReactComponent)}function $a(e,t){var n=e.alternate;return null===n?((n=Za(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function eo(e,t,n,i,r,s){var o=2;if(i=e,"function"===typeof e)Qa(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case u:return to(n.children,r,s,t);case d:o=8,r|=8;break;case h:return(e=Za(12,n,t,2|r)).elementType=h,e.lanes=s,e;case g:return(e=Za(13,n,t,r)).elementType=g,e.lanes=s,e;case v:return(e=Za(19,n,t,r)).elementType=v,e.lanes=s,e;case b:return no(n,r,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case p:o=10;break e;case f:o=9;break e;case m:o=11;break e;case y:o=14;break e;case x:o=16,i=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Za(o,n,t,r)).elementType=e,t.type=i,t.lanes=s,t}function to(e,t,n,i){return(e=Za(7,e,i,t)).lanes=n,e}function no(e,t,n,i){return(e=Za(22,e,i,t)).elementType=b,e.lanes=n,e.stateNode={},e}function io(e,t,n){return(e=Za(6,e,null,t)).lanes=n,e}function ro(e,t,n){return(t=Za(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function so(e,t,n,i,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=q,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Pt(0),this.expirationTimes=Pt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pt(0),this.identifierPrefix=i,this.onRecoverableError=r,K&&(this.mutableSourceEagerHydrationData=null)}function ao(e,t,n,i,r,s,a,o,l){return e=new so(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Za(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null},fn(s),e}function oo(e){if(!e)return ct;e:{if(E(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ft(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(ft(n))return vt(e,n,t)}return t}function lo(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return null===(e=A(t))?null:e.stateNode}function co(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function uo(e,t){co(e,t),(e=e.alternate)&&co(e,t)}function ho(e){return null===(e=A(e))?null:e.stateNode}function po(){return null}return ca=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||dt.current)Dr=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return Dr=!1,function(e,t,n){switch(t.tag){case 3:qr(t),$n();break;case 5:fi(t);break;case 1:ft(t.type)&&yt(t);break;case 4:hi(t,t.stateNode.containerInfo);break;case 10:on(0,t.type._context,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(null!==i)return null!==i.dehydrated?(lt(gi,1&gi.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Kr(e,t,n):(lt(gi,1&gi.current),null!==(e=rs(e,t,n))?e.sibling:null);lt(gi,1&gi.current);break;case 19:if(i=0!==(n&t.childLanes),0!==(128&e.flags)){if(i)return is(e,t,n);t.flags|=128}var r=t.memoizedState;if(null!==r&&(r.rendering=null,r.tail=null,r.lastEffect=null),lt(gi,gi.current),i)break;return null;case 22:case 23:return t.lanes=0,Br(e,t,n)}return rs(e,t,n)}(e,t,n);Dr=0!==(131072&e.flags)}else Dr=!1,Wn&&0!==(1048576&t.flags)&&Fn(t,Rn,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var r=pt(t,ut.current);un(t,n),r=Ri(null,t,i,e,r,n);var s=Ii();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ft(i)?(s=!0,yt(t)):s=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,fn(t),r.updater=Mn,t.stateNode=r,r._reactInternals=t,An(t,i,e,n),t=Gr(null,t,i,!0,s,n)):(t.tag=0,Wn&&s&&Un(t),Or(null,t,r,n),t=t.child),t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(r=i._init)(i._payload),t.type=i,r=t.tag=function(e){if("function"===typeof e)return Qa(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===m)return 11;if(e===y)return 14}return 2}(i),e=en(i,e),r){case 0:t=Hr(null,t,i,e,n);break e;case 1:t=Wr(null,t,i,e,n);break e;case 11:t=zr(null,t,i,e,n);break e;case 14:t=Fr(null,t,i,en(i.type,e),n);break e}throw Error(a(306,i,""))}return t;case 0:return i=t.type,r=t.pendingProps,Hr(e,t,i,r=t.elementType===i?r:en(i,r),n);case 1:return i=t.type,r=t.pendingProps,Wr(e,t,i,r=t.elementType===i?r:en(i,r),n);case 3:e:{if(qr(t),null===e)throw Error(a(387));i=t.pendingProps,r=(s=t.memoizedState).element,mn(e,t),bn(t,i,null,n);var o=t.memoizedState;if(i=o.element,K&&s.isDehydrated){if(s={element:i,isDehydrated:!1,cache:o.cache,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Xr(e,t,i,n,r=Error(a(423)));break e}if(i!==r){t=Xr(e,t,i,n,r=Error(a(424)));break e}for(K&&(Hn=Be(t.stateNode.containerInfo),Vn=t,Wn=!0,qn=null,Gn=!1),n=ai(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if($n(),i===r){t=rs(e,t,n);break e}Or(e,t,i,n)}t=t.child}return t;case 5:return fi(t),null===e&&Kn(t),i=t.type,r=t.pendingProps,s=null!==e?e.memoizedProps:null,o=r.children,V(i,r)?o=null:null!==s&&V(i,s)&&(t.flags|=32),Vr(e,t),Or(e,t,o,n),t.child;case 6:return null===e&&Kn(t),null;case 13:return Kr(e,t,n);case 4:return hi(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=si(t,null,i,n):Or(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,zr(e,t,i,r=t.elementType===i?r:en(i,r),n);case 7:return Or(e,t,t.pendingProps,n),t.child;case 8:case 12:return Or(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,r=t.pendingProps,s=t.memoizedProps,on(0,i,o=r.value),null!==s)if(Gt(s.value,o)){if(s.children===r.children&&!dt.current){t=rs(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){o=s.child;for(var c=l.firstContext;null!==c;){if(c.context===i){if(1===s.tag){(c=gn(-1,n&-n)).tag=2;var u=s.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),cn(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===s.tag)o=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(o=s.return))throw Error(a(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),cn(o,n,t),o=s.sibling}else o=s.child;if(null!==o)o.return=s;else for(o=s;null!==o;){if(o===t){o=null;break}if(null!==(s=o.sibling)){s.return=o.return,o=s;break}o=o.return}s=o}Or(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=t.pendingProps.children,un(t,n),i=i(r=dn(r)),t.flags|=1,Or(e,t,i,n),t.child;case 14:return r=en(i=t.type,t.pendingProps),Fr(e,t,i,r=en(i.type,r),n);case 15:return Ur(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:en(i,r),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,ft(i)?(e=!0,yt(t)):e=!1,un(t,n),Tn(t,i,r),An(t,i,r,n),Gr(null,t,i,!0,e,n);case 19:return is(e,t,n);case 22:return Br(e,t,n)}throw Error(a(156,t.tag))},t.attemptContinuousHydration=function(e){13===e.tag&&(wa(e,134217728,ba()),uo(e,134217728))},t.attemptHydrationAtCurrentPriority=function(e){if(13===e.tag){var t=ba(),n=_a(e);wa(e,n,t),uo(e,n)}},t.attemptSynchronousHydration=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Et(t.pendingLanes);0!==n&&(kt(t,1|n),Ma(t,zt()),0===(6&Xs)&&(la(),Kt()))}break;case 13:var i=ba();Na((function(){return wa(e,1,i)})),uo(e,1)}},t.batchedUpdates=function(e,t){var n=Xs;Xs|=1;try{return e(t)}finally{0===(Xs=n)&&(la(),Xt&&Kt())}},t.createComponentSelector=function(e){return{$$typeof:Rs,value:e}},t.createContainer=function(e,t,n,i,r,s,a){return ao(e,t,!1,null,0,i,0,s,a)},t.createHasPseudoClassSelector=function(e){return{$$typeof:Is,value:e}},t.createHydrationContainer=function(e,t,n,i,r,s,a,o,l){return(e=ao(n,i,!0,e,0,s,0,o,l)).context=oo(null),n=e.current,(s=gn(i=ba(),r=_a(n))).callback=void 0!==t&&null!==t?t:null,vn(n,s),e.current.lanes=r,Nt(e,r,i),Ma(e,i),e},t.createPortal=function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:c,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}},t.createRoleSelector=function(e){return{$$typeof:Ls,value:e}},t.createTestNameSelector=function(e){return{$$typeof:js,value:e}},t.createTextSelector=function(e){return{$$typeof:Ds,value:e}},t.deferredUpdates=function(e){var t=Rt,n=qs.transition;try{return qs.transition=null,Rt=16,e()}finally{Rt=t,qs.transition=n}},t.discreteUpdates=function(e,t,n,i,r){var s=Rt,a=qs.transition;try{return qs.transition=null,Rt=1,e(t,n,i,r)}finally{Rt=s,qs.transition=a,0===Xs&&la()}},t.findAllNodes=Vs,t.findBoundingRects=function(e,t){if(!ie)throw Error(a(363));t=Vs(e,t),e=[];for(var n=0;n<t.length;n++)e.push(se(t[n]));for(t=e.length-1;0<t;t--)for(var i=(n=e[t]).x,r=i+n.width,s=n.y,o=s+n.height,l=t-1;0<=l;l--)if(t!==l){var c=e[l],u=c.x,d=u+c.width,h=c.y,p=h+c.height;if(i>=u&&s>=h&&r<=d&&o<=p){e.splice(t,1);break}if(!(i!==u||n.width!==c.width||p<s||h>o)){h>s&&(c.height+=h-s,c.y=s),p<o&&(c.height=o-h),e.splice(t,1);break}if(!(s!==h||n.height!==c.height||d<i||u>r)){u>i&&(c.width+=u-i,c.x=i),d<r&&(c.width=r-u),e.splice(t,1);break}}return e},t.findHostInstance=lo,t.findHostInstanceWithNoPortals=function(e){return null===(e=null!==(e=C(e))?N(e):null)?null:e.stateNode},t.findHostInstanceWithWarning=function(e){return lo(e)},t.flushControlled=function(e){var t=Xs;Xs|=1;var n=qs.transition,i=Rt;try{qs.transition=null,Rt=1,e()}finally{Rt=i,qs.transition=n,0===(Xs=t)&&(la(),Kt())}},t.flushPassiveEffects=Va,t.flushSync=Na,t.focusWithin=function(e,t){if(!ie)throw Error(a(363));for(t=Bs(e=zs(e),t),t=Array.from(t),e=0;e<t.length;){var n=t[e++];if(!oe(n)){if(5===n.tag&&ce(n.stateNode))return!0;for(n=n.child;null!==n;)t.push(n),n=n.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Rt},t.getFindAllNodesFailureDescription=function(e,t){if(!ie)throw Error(a(363));var n=0,i=[];e=[zs(e),0];for(var r=0;r<e.length;){var s=e[r++],o=e[r++],l=t[o];if((5!==s.tag||!oe(s))&&(Fs(s,l)&&(i.push(Us(l)),++o>n&&(n=o)),o<t.length))for(s=s.child;null!==s;)e.push(s,o),s=s.sibling}if(n<t.length){for(e=[];n<t.length;n++)e.push(Us(t[n]));return"findAllNodes was able to match part of the selector:\n  "+i.join(" > ")+"\n\nNo matching component was found for:\n  "+e.join(" > ")}return null},t.getPublicRootInstance=function(e){return(e=e.current).child?5===e.child.tag?I(e.child.stateNode):e.child.stateNode:null},t.injectIntoDevTools=function(e){if(e={bundleType:e.bundleType,version:e.version,rendererPackageName:e.rendererPackageName,rendererConfig:e.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:ho,findFiberByHostInstance:e.findFiberByHostInstance||po,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},"undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)e=!1;else{var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)e=!0;else{try{Ht=t.inject(e),Wt=t}catch(n){}e=!!t.checkDCE}}return e},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(e,t,n,i){if(!ie)throw Error(a(363));e=Vs(e,t);var r=ue(e,n,i).disconnect;return{disconnect:function(){r()}}},t.registerMutableSourceForHydration=function(e,t){var n=t._getVersion;n=n(t._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[t,n]:e.mutableSourceEagerHydrationData.push(t,n)},t.runWithPriority=function(e,t){var n=Rt;try{return Rt=e,t()}finally{Rt=n}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(e,t,n,i){var r=t.current,s=ba(),a=_a(r);return n=oo(n),null===t.context?t.context=n:t.pendingContext=n,(t=gn(s,a)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),vn(r,t),null!==(e=wa(r,a,s))&&yn(e,r,a),a},t}},654:(e,t,n)=>{"use strict";var i=n(950),r=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var i,s={},c=null,u=null;for(i in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,i)&&!l.hasOwnProperty(i)&&(s[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===s[i]&&(s[i]=t[i]);return{$$typeof:r,type:e,key:c,ref:u,props:s,_owner:o.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},733:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,r=e[i];if(!(0<s(r,t)))break e;e[i]=t,e[n]=r,n=i}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length,a=r>>>1;i<a;){var o=2*(i+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,n))c<r&&0>s(u,l)?(e[i]=u,e[c]=n,i=c):(e[i]=l,e[o]=n,i=o);else{if(!(c<r&&0>s(u,n)))break e;e[i]=u,e[c]=n,i=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,p=3,f=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=i(u);null!==t;){if(null===t.callback)r(u);else{if(!(t.startTime<=e))break;r(u),t.sortIndex=t.expirationTime,n(c,t)}t=i(u)}}function _(e){if(g=!1,b(e),!m)if(null!==i(c))m=!0,I(w);else{var t=i(u);null!==t&&L(_,t.startTime-e)}}function w(e,n){m=!1,g&&(g=!1,y(T),T=-1),f=!0;var s=p;try{for(b(n),h=i(c);null!==h&&(!(h.expirationTime>n)||e&&!P());){var a=h.callback;if("function"===typeof a){h.callback=null,p=h.priorityLevel;var o=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===i(c)&&r(c),b(n)}else r(c);h=i(c)}if(null!==h)var l=!0;else{var d=i(u);null!==d&&L(_,d.startTime-n),l=!1}return l}finally{h=null,p=s,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,M=!1,E=null,T=-1,C=5,A=-1;function P(){return!(t.unstable_now()-A<C)}function N(){if(null!==E){var e=t.unstable_now();A=e;var n=!0;try{n=E(!0,e)}finally{n?S():(M=!1,E=null)}}else M=!1}if("function"===typeof x)S=function(){x(N)};else if("undefined"!==typeof MessageChannel){var k=new MessageChannel,R=k.port2;k.port1.onmessage=N,S=function(){R.postMessage(null)}}else S=function(){v(N,0)};function I(e){E=e,M||(M=!0,S())}function L(e,n){T=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,I(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return i(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,r,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:r,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,n(u,e),null===i(c)&&e===i(u)&&(g?(y(T),T=-1):g=!0,L(_,s-a))):(e.sortIndex=o,n(c,e),m||f||(m=!0,I(w))),e},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},761:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,r=e[i];if(!(0<s(r,t)))break e;e[i]=t,e[n]=r,n=i}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length,a=r>>>1;i<a;){var o=2*(i+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,n))c<r&&0>s(u,l)?(e[i]=u,e[c]=n,i=c):(e[i]=l,e[o]=n,i=o);else{if(!(c<r&&0>s(u,n)))break e;e[i]=u,e[c]=n,i=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,p=3,f=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=i(u);null!==t;){if(null===t.callback)r(u);else{if(!(t.startTime<=e))break;r(u),t.sortIndex=t.expirationTime,n(c,t)}t=i(u)}}function _(e){if(g=!1,b(e),!m)if(null!==i(c))m=!0,I(w);else{var t=i(u);null!==t&&L(_,t.startTime-e)}}function w(e,n){m=!1,g&&(g=!1,y(T),T=-1),f=!0;var s=p;try{for(b(n),h=i(c);null!==h&&(!(h.expirationTime>n)||e&&!P());){var a=h.callback;if("function"===typeof a){h.callback=null,p=h.priorityLevel;var o=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===i(c)&&r(c),b(n)}else r(c);h=i(c)}if(null!==h)var l=!0;else{var d=i(u);null!==d&&L(_,d.startTime-n),l=!1}return l}finally{h=null,p=s,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,M=!1,E=null,T=-1,C=5,A=-1;function P(){return!(t.unstable_now()-A<C)}function N(){if(null!==E){var e=t.unstable_now();A=e;var n=!0;try{n=E(!0,e)}finally{n?S():(M=!1,E=null)}}else M=!1}if("function"===typeof x)S=function(){x(N)};else if("undefined"!==typeof MessageChannel){var k=new MessageChannel,R=k.port2;k.port1.onmessage=N,S=function(){R.postMessage(null)}}else S=function(){v(N,0)};function I(e){E=e,M||(M=!0,S())}function L(e,n){T=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,I(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return i(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,r,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:r,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,n(u,e),null===i(c)&&e===i(u)&&(g?(y(T),T=-1):g=!0,L(_,s-a))):(e.sortIndex=o,n(c,e),m||f||(m=!0,I(w))),e},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},773:(e,t,n)=>{"use strict";e.exports=n(850)},850:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,r=e[i];if(!(0<s(r,t)))break e;e[i]=t,e[n]=r,n=i}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length,a=r>>>1;i<a;){var o=2*(i+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,n))c<r&&0>s(u,l)?(e[i]=u,e[c]=n,i=c):(e[i]=l,e[o]=n,i=o);else{if(!(c<r&&0>s(u,n)))break e;e[i]=u,e[c]=n,i=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,p=3,f=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=i(u);null!==t;){if(null===t.callback)r(u);else{if(!(t.startTime<=e))break;r(u),t.sortIndex=t.expirationTime,n(c,t)}t=i(u)}}function _(e){if(g=!1,b(e),!m)if(null!==i(c))m=!0,I(w);else{var t=i(u);null!==t&&L(_,t.startTime-e)}}function w(e,n){m=!1,g&&(g=!1,y(T),T=-1),f=!0;var s=p;try{for(b(n),h=i(c);null!==h&&(!(h.expirationTime>n)||e&&!P());){var a=h.callback;if("function"===typeof a){h.callback=null,p=h.priorityLevel;var o=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===i(c)&&r(c),b(n)}else r(c);h=i(c)}if(null!==h)var l=!0;else{var d=i(u);null!==d&&L(_,d.startTime-n),l=!1}return l}finally{h=null,p=s,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,M=!1,E=null,T=-1,C=5,A=-1;function P(){return!(t.unstable_now()-A<C)}function N(){if(null!==E){var e=t.unstable_now();A=e;var n=!0;try{n=E(!0,e)}finally{n?S():(M=!1,E=null)}}else M=!1}if("function"===typeof x)S=function(){x(N)};else if("undefined"!==typeof MessageChannel){var k=new MessageChannel,R=k.port2;k.port1.onmessage=N,S=function(){R.postMessage(null)}}else S=function(){v(N,0)};function I(e){E=e,M||(M=!0,S())}function L(e,n){T=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,I(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return i(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,r,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:r,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,n(u,e),null===i(c)&&e===i(u)&&(g?(y(T),T=-1):g=!0,L(_,s-a))):(e.sortIndex=o,n(c,e),m||f||(m=!0,I(w))),e},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},878:(e,t,n)=>{"use strict";e.exports=n(153)},950:(e,t,n)=>{"use strict";e.exports=n(49)}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={exports:{}};return e[i](s,s.exports,n),s.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(i,r){if(1&r&&(i=this(i)),8&r)return i;if("object"===typeof i&&i){if(4&r&&i.__esModule)return i;if(16&r&&"function"===typeof i.then)return i}var s=Object.create(null);n.r(s);var a={};e=e||[null,t({}),t([]),t(t)];for(var o=2&r&&i;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((e=>a[e]=()=>i[e]));return a.default=()=>i,n.d(s,a),s}})(),n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,i)=>(n.f[i](e,t),t)),[])),n.u=e=>"static/js/"+e+".8ac086ca.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="frontend:";n.l=(i,r,s,a)=>{if(e[i])e[i].push(r);else{var o,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==i||d.getAttribute("data-webpack")==t+s){o=d;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+s),o.src=i),e[i]=[r];var h=(t,n)=>{o.onerror=o.onload=null,clearTimeout(p);var r=e[i];if(delete e[i],o.parentNode&&o.parentNode.removeChild(o),r&&r.forEach((e=>e(n))),t)return t(n)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={792:0};n.f.j=(t,i)=>{var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)i.push(r[2]);else{var s=new Promise(((n,i)=>r=e[t]=[n,i]));i.push(r[2]=s);var a=n.p+n.u(t),o=new Error;n.l(a,(i=>{if(n.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var s=i&&("load"===i.type?"missing":i.type),a=i&&i.target&&i.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+a+")",o.name="ChunkLoadError",o.type=s,o.request=a,r[1](o)}}),"chunk-"+t,t)}};var t=(t,i)=>{var r,s,a=i[0],o=i[1],l=i[2],c=0;if(a.some((t=>0!==e[t]))){for(r in o)n.o(o,r)&&(n.m[r]=o[r]);if(l)l(n)}for(t&&t(i);c<a.length;c++)s=a[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},i=self.webpackChunkfrontend=self.webpackChunkfrontend||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{hasBrowserEnv:()=>Jt,hasStandardBrowserEnv:()=>Zt,hasStandardBrowserWebWorkerEnv:()=>Qt,navigator:()=>Kt,origin:()=>$t});var t={};n.r(t),n.d(t,{ACESFilmicToneMapping:()=>Vr,AddEquation:()=>dr,AddOperation:()=>Or,AdditiveAnimationBlendMode:()=>va,AdditiveBlending:()=>or,AlphaFormat:()=>bs,AlwaysDepth:()=>Ar,AlwaysStencilFunc:()=>qa,AmbientLight:()=>Vg,AmbientLightProbe:()=>sv,AnimationClip:()=>hg,AnimationLoader:()=>_g,AnimationMixer:()=>jv,AnimationObjectGroup:()=>Rv,AnimationUtils:()=>$m,ArcCurve:()=>gf,ArrayCamera:()=>Gh,ArrowHelper:()=>Ty,Audio:()=>vv,AudioAnalyser:()=>Sv,AudioContext:()=>nv,AudioListener:()=>gv,AudioLoader:()=>iv,AxesHelper:()=>Cy,BackSide:()=>nr,BasicDepthPacking:()=>Sa,BasicShadowMap:()=>Zi,Bone:()=>Rp,BooleanKeyframeTrack:()=>sg,Box2:()=>Xv,Box3:()=>$o,Box3Helper:()=>_y,BoxBufferGeometry:()=>Ry,BoxGeometry:()=>tu,BoxHelper:()=>by,BufferAttribute:()=>bc,BufferGeometry:()=>zc,BufferGeometryLoader:()=>Jg,ByteType:()=>us,Cache:()=>fg,Camera:()=>ou,CameraHelper:()=>vy,CanvasTexture:()=>pf,CapsuleBufferGeometry:()=>Iy,CapsuleGeometry:()=>Of,CatmullRomCurve3:()=>wf,CineonToneMapping:()=>Br,CircleBufferGeometry:()=>Ly,CircleGeometry:()=>zf,ClampToEdgeWrapping:()=>Zr,Clock:()=>uv,Color:()=>mc,ColorKeyframeTrack:()=>ag,ColorManagement:()=>Fo,CompressedArrayTexture:()=>hf,CompressedTexture:()=>df,CompressedTextureLoader:()=>wg,ConeBufferGeometry:()=>jy,ConeGeometry:()=>Uf,CubeCamera:()=>uu,CubeReflectionMapping:()=>Gr,CubeRefractionMapping:()=>qr,CubeTexture:()=>du,CubeTextureLoader:()=>Mg,CubeUVReflectionMapping:()=>Jr,CubicBezierCurve:()=>Tf,CubicBezierCurve3:()=>Cf,CubicInterpolant:()=>tg,CullFaceBack:()=>Yi,CullFaceFront:()=>Ji,CullFaceFrontBack:()=>Ki,CullFaceNone:()=>Xi,Curve:()=>ff,CurvePath:()=>Lf,CustomBlending:()=>ur,CustomToneMapping:()=>Hr,CylinderBufferGeometry:()=>Dy,CylinderGeometry:()=>Ff,Cylindrical:()=>Gv,Data3DTexture:()=>Ko,DataArrayTexture:()=>Yo,DataTexture:()=>Ip,DataTextureLoader:()=>Eg,DataUtils:()=>ky,DecrementStencilOp:()=>ja,DecrementWrapStencilOp:()=>Oa,DefaultLoadingManager:()=>gg,DepthFormat:()=>Ms,DepthStencilFormat:()=>Es,DepthTexture:()=>Jh,DirectionalLight:()=>Bg,DirectionalLightHelper:()=>fy,DiscreteInterpolant:()=>ig,DisplayP3ColorSpace:()=>Na,DodecahedronBufferGeometry:()=>Oy,DodecahedronGeometry:()=>Vf,DoubleSide:()=>ir,DstAlphaFactor:()=>wr,DstColorFactor:()=>Mr,DynamicCopyUsage:()=>eo,DynamicDrawUsage:()=>Ya,DynamicReadUsage:()=>Za,EdgesGeometry:()=>Xf,EllipseCurve:()=>mf,EqualDepth:()=>kr,EqualStencilFunc:()=>Ba,EquirectangularReflectionMapping:()=>Xr,EquirectangularRefractionMapping:()=>Yr,Euler:()=>Dl,EventDispatcher:()=>so,ExtrudeBufferGeometry:()=>zy,ExtrudeGeometry:()=>Sm,FileLoader:()=>bg,Float16BufferAttribute:()=>Ac,Float32BufferAttribute:()=>Pc,Float64BufferAttribute:()=>Nc,FloatType:()=>ms,Fog:()=>np,FogExp2:()=>tp,FramebufferTexture:()=>uf,FrontSide:()=>tr,Frustum:()=>xu,GLBufferAttribute:()=>Uv,GLSL1:()=>no,GLSL3:()=>io,GreaterDepth:()=>Ir,GreaterEqualDepth:()=>Rr,GreaterEqualStencilFunc:()=>Ga,GreaterStencilFunc:()=>Ha,GridHelper:()=>cy,Group:()=>qh,HalfFloatType:()=>gs,HemisphereLight:()=>Ag,HemisphereLightHelper:()=>ly,HemisphereLightProbe:()=>rv,IcosahedronBufferGeometry:()=>Fy,IcosahedronGeometry:()=>Em,ImageBitmapLoader:()=>ev,ImageLoader:()=>Sg,ImageUtils:()=>Bo,IncrementStencilOp:()=>La,IncrementWrapStencilOp:()=>Da,InstancedBufferAttribute:()=>Op,InstancedBufferGeometry:()=>Yg,InstancedInterleavedBuffer:()=>Fv,InstancedMesh:()=>Hp,Int16BufferAttribute:()=>Mc,Int32BufferAttribute:()=>Tc,Int8BufferAttribute:()=>_c,IntType:()=>ps,InterleavedBuffer:()=>rp,InterleavedBufferAttribute:()=>ap,Interpolant:()=>eg,InterpolateDiscrete:()=>ua,InterpolateLinear:()=>da,InterpolateSmooth:()=>ha,InvertStencilOp:()=>za,KeepStencilOp:()=>Ra,KeyframeTrack:()=>rg,LOD:()=>Ep,LatheBufferGeometry:()=>Uy,LatheGeometry:()=>Df,Layers:()=>Ol,LessDepth:()=>Pr,LessEqualDepth:()=>Nr,LessEqualStencilFunc:()=>Va,LessStencilFunc:()=>Ua,Light:()=>Cg,LightProbe:()=>Gg,Line:()=>Kp,Line3:()=>Kv,LineBasicMaterial:()=>Wp,LineCurve:()=>Af,LineCurve3:()=>Pf,LineDashedMaterial:()=>qm,LineLoop:()=>ef,LineSegments:()=>$p,LinearEncoding:()=>_a,LinearFilter:()=>rs,LinearInterpolant:()=>ng,LinearMipMapLinearFilter:()=>ls,LinearMipMapNearestFilter:()=>as,LinearMipmapLinearFilter:()=>os,LinearMipmapNearestFilter:()=>ss,LinearSRGBColorSpace:()=>Pa,LinearToneMapping:()=>Fr,Loader:()=>vg,LoaderUtils:()=>Xg,LoadingManager:()=>mg,LoopOnce:()=>oa,LoopPingPong:()=>ca,LoopRepeat:()=>la,LuminanceAlphaFormat:()=>Ss,LuminanceFormat:()=>ws,MOUSE:()=>Gi,Material:()=>uc,MaterialLoader:()=>qg,MathUtils:()=>bo,Matrix3:()=>wo,Matrix4:()=>Tl,MaxEquation:()=>mr,Mesh:()=>$c,MeshBasicMaterial:()=>vc,MeshDepthMaterial:()=>Oh,MeshDistanceMaterial:()=>zh,MeshLambertMaterial:()=>Wm,MeshMatcapMaterial:()=>Gm,MeshNormalMaterial:()=>Hm,MeshPhongMaterial:()=>Bm,MeshPhysicalMaterial:()=>Um,MeshStandardMaterial:()=>Fm,MeshToonMaterial:()=>Vm,MinEquation:()=>fr,MirroredRepeatWrapping:()=>Qr,MixOperation:()=>Dr,MultiplyBlending:()=>cr,MultiplyOperation:()=>jr,NearestFilter:()=>$r,NearestMipMapLinearFilter:()=>is,NearestMipMapNearestFilter:()=>ts,NearestMipmapLinearFilter:()=>ns,NearestMipmapNearestFilter:()=>es,NeverDepth:()=>Cr,NeverStencilFunc:()=>Fa,NoBlending:()=>sr,NoColorSpace:()=>Ca,NoToneMapping:()=>zr,NormalAnimationBlendMode:()=>ga,NormalBlending:()=>ar,NotEqualDepth:()=>Lr,NotEqualStencilFunc:()=>Wa,NumberKeyframeTrack:()=>og,Object3D:()=>Zl,ObjectLoader:()=>Kg,ObjectSpaceNormalMap:()=>Ta,OctahedronBufferGeometry:()=>By,OctahedronGeometry:()=>Tm,OneFactor:()=>vr,OneMinusDstAlphaFactor:()=>Sr,OneMinusDstColorFactor:()=>Er,OneMinusSrcAlphaFactor:()=>_r,OneMinusSrcColorFactor:()=>xr,OrthographicCamera:()=>Iu,PCFShadowMap:()=>Qi,PCFSoftShadowMap:()=>$i,PMREMGenerator:()=>Vu,Path:()=>jf,PerspectiveCamera:()=>lu,Plane:()=>gu,PlaneBufferGeometry:()=>Vy,PlaneGeometry:()=>wu,PlaneHelper:()=>wy,PointLight:()=>Fg,PointLightHelper:()=>ry,Points:()=>of,PointsMaterial:()=>tf,PolarGridHelper:()=>uy,PolyhedronBufferGeometry:()=>Hy,PolyhedronGeometry:()=>Bf,PositionalAudio:()=>wv,PropertyBinding:()=>kv,PropertyMixer:()=>Mv,QuadraticBezierCurve:()=>Nf,QuadraticBezierCurve3:()=>kf,Quaternion:()=>Ao,QuaternionKeyframeTrack:()=>cg,QuaternionLinearInterpolant:()=>lg,RED_GREEN_RGTC2_Format:()=>sa,RED_RGTC1_Format:()=>ia,REVISION:()=>Wi,RGBADepthPacking:()=>Ma,RGBAFormat:()=>_s,RGBAIntegerFormat:()=>Ns,RGBA_ASTC_10x10_Format:()=>$s,RGBA_ASTC_10x5_Format:()=>Ks,RGBA_ASTC_10x6_Format:()=>Zs,RGBA_ASTC_10x8_Format:()=>Qs,RGBA_ASTC_12x10_Format:()=>ea,RGBA_ASTC_12x12_Format:()=>ta,RGBA_ASTC_4x4_Format:()=>Vs,RGBA_ASTC_5x4_Format:()=>Hs,RGBA_ASTC_5x5_Format:()=>Ws,RGBA_ASTC_6x5_Format:()=>Gs,RGBA_ASTC_6x6_Format:()=>qs,RGBA_ASTC_8x5_Format:()=>Xs,RGBA_ASTC_8x6_Format:()=>Ys,RGBA_ASTC_8x8_Format:()=>Js,RGBA_BPTC_Format:()=>na,RGBA_ETC2_EAC_Format:()=>Bs,RGBA_PVRTC_2BPPV1_Format:()=>zs,RGBA_PVRTC_4BPPV1_Format:()=>Os,RGBA_S3TC_DXT1_Format:()=>Rs,RGBA_S3TC_DXT3_Format:()=>Is,RGBA_S3TC_DXT5_Format:()=>Ls,RGB_ETC1_Format:()=>Fs,RGB_ETC2_Format:()=>Us,RGB_PVRTC_2BPPV1_Format:()=>Ds,RGB_PVRTC_4BPPV1_Format:()=>js,RGB_S3TC_DXT1_Format:()=>ks,RGFormat:()=>As,RGIntegerFormat:()=>Ps,RawShaderMaterial:()=>zm,Ray:()=>El,Raycaster:()=>Bv,RectAreaLight:()=>Hg,RedFormat:()=>Ts,RedIntegerFormat:()=>Cs,ReinhardToneMapping:()=>Ur,RepeatWrapping:()=>Kr,ReplaceStencilOp:()=>Ia,ReverseSubtractEquation:()=>pr,RingBufferGeometry:()=>Wy,RingGeometry:()=>Cm,SIGNED_RED_GREEN_RGTC2_Format:()=>aa,SIGNED_RED_RGTC1_Format:()=>ra,SRGBColorSpace:()=>Aa,Scene:()=>ip,ShaderChunk:()=>Su,ShaderLib:()=>Eu,ShaderMaterial:()=>au,ShadowMaterial:()=>Om,Shape:()=>Yf,ShapeBufferGeometry:()=>Gy,ShapeGeometry:()=>Am,ShapePath:()=>Ay,ShapeUtils:()=>bm,ShortType:()=>ds,Skeleton:()=>Dp,SkeletonHelper:()=>ny,SkinnedMesh:()=>kp,Source:()=>Vo,Sphere:()=>vl,SphereBufferGeometry:()=>qy,SphereGeometry:()=>Pm,Spherical:()=>Wv,SphericalHarmonics3:()=>Wg,SplineCurve:()=>Rf,SpotLight:()=>Lg,SpotLightHelper:()=>Qv,Sprite:()=>_p,SpriteMaterial:()=>op,SrcAlphaFactor:()=>br,SrcAlphaSaturateFactor:()=>Tr,SrcColorFactor:()=>yr,StaticCopyUsage:()=>$a,StaticDrawUsage:()=>Xa,StaticReadUsage:()=>Ka,StereoCamera:()=>cv,StreamCopyUsage:()=>to,StreamDrawUsage:()=>Ja,StreamReadUsage:()=>Qa,StringKeyframeTrack:()=>ug,SubtractEquation:()=>hr,SubtractiveBlending:()=>lr,TOUCH:()=>qi,TangentSpaceNormalMap:()=>Ea,TetrahedronBufferGeometry:()=>Xy,TetrahedronGeometry:()=>Nm,Texture:()=>Go,TextureLoader:()=>Tg,TorusBufferGeometry:()=>Yy,TorusGeometry:()=>km,TorusKnotBufferGeometry:()=>Jy,TorusKnotGeometry:()=>Rm,Triangle:()=>lc,TriangleFanDrawMode:()=>ba,TriangleStripDrawMode:()=>xa,TrianglesDrawMode:()=>ya,TubeBufferGeometry:()=>Ky,TubeGeometry:()=>Im,TwoPassDoubleSide:()=>rr,UVMapping:()=>Wr,Uint16BufferAttribute:()=>Ec,Uint32BufferAttribute:()=>Cc,Uint8BufferAttribute:()=>wc,Uint8ClampedBufferAttribute:()=>Sc,Uniform:()=>Dv,UniformsGroup:()=>zv,UniformsLib:()=>Mu,UniformsUtils:()=>su,UnsignedByteType:()=>cs,UnsignedInt248Type:()=>xs,UnsignedIntType:()=>fs,UnsignedShort4444Type:()=>vs,UnsignedShort5551Type:()=>ys,UnsignedShortType:()=>hs,VSMShadowMap:()=>er,Vector2:()=>_o,Vector3:()=>Po,Vector4:()=>qo,VectorKeyframeTrack:()=>dg,VideoTexture:()=>cf,WebGL1Renderer:()=>ep,WebGL3DRenderTarget:()=>Zo,WebGLArrayRenderTarget:()=>Jo,WebGLCubeRenderTarget:()=>hu,WebGLMultipleRenderTargets:()=>Qo,WebGLRenderTarget:()=>Xo,WebGLRenderer:()=>$h,WebGLUtils:()=>Wh,WireframeGeometry:()=>Lm,WrapAroundEnding:()=>ma,ZeroCurvatureEnding:()=>pa,ZeroFactor:()=>gr,ZeroSlopeEnding:()=>fa,ZeroStencilOp:()=>ka,_SRGBAFormat:()=>ro,sRGBEncoding:()=>wa});var i,r=n(950),s=n.t(r,2),a=n(352),o=n(119),l=n.t(o,2);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},c.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(i||(i={}));const u="popstate";function d(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function h(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function p(e,t){return{usr:e.state,key:e.key,idx:t}}function f(e,t,n,i){return void 0===n&&(n=null),c({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?g(t):t,{state:n,key:t&&t.key||i||Math.random().toString(36).substr(2,8)})}function m(e){let{pathname:t="/",search:n="",hash:i=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),i&&"#"!==i&&(t+="#"===i.charAt(0)?i:"#"+i),t}function g(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function v(e,t,n,r){void 0===r&&(r={});let{window:s=document.defaultView,v5Compat:a=!1}=r,o=s.history,l=i.Pop,h=null,g=v();function v(){return(o.state||{idx:null}).idx}function y(){l=i.Pop;let e=v(),t=null==e?null:e-g;g=e,h&&h({action:l,location:b.location,delta:t})}function x(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:m(e);return n=n.replace(/ $/,"%20"),d(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,o.replaceState(c({},o.state,{idx:g}),""));let b={get action(){return l},get location(){return e(s,o)},listen(e){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener(u,y),h=e,()=>{s.removeEventListener(u,y),h=null}},createHref:e=>t(s,e),createURL:x,encodeLocation(e){let t=x(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=i.Push;let r=f(b.location,e,t);n&&n(r,e),g=v()+1;let c=p(r,g),u=b.createHref(r);try{o.pushState(c,"",u)}catch(Ib){if(Ib instanceof DOMException&&"DataCloneError"===Ib.name)throw Ib;s.location.assign(u)}a&&h&&h({action:l,location:b.location,delta:1})},replace:function(e,t){l=i.Replace;let r=f(b.location,e,t);n&&n(r,e),g=v();let s=p(r,g),c=b.createHref(r);o.replaceState(s,"",c),a&&h&&h({action:l,location:b.location,delta:0})},go:e=>o.go(e)};return b}var y;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(y||(y={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function x(e,t,n){return void 0===n&&(n="/"),b(e,t,n,!1)}function b(e,t,n,i){let r=L(("string"===typeof t?g(t):t).pathname||"/",n);if(null==r)return null;let s=_(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(s);let a=null;for(let o=0;null==a&&o<s.length;++o){let e=I(r);a=k(s[o],e,i)}return a}function _(e,t,n,i){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===i&&(i="");let r=(e,r,s)=>{let a={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:r,route:e};a.relativePath.startsWith("/")&&(d(a.relativePath.startsWith(i),'Absolute route path "'+a.relativePath+'" nested under path "'+i+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(i.length));let o=F([i,a.relativePath]),l=n.concat(a);e.children&&e.children.length>0&&(d(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),_(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:N(o,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let i of w(e.path))r(e,t,i);else r(e,t)})),t}function w(e){let t=e.split("/");if(0===t.length)return[];let[n,...i]=t,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===i.length)return r?[s,""]:[s];let a=w(i.join("/")),o=[];return o.push(...a.map((e=>""===e?s:[s,e].join("/")))),r&&o.push(...a),o.map((t=>e.startsWith("/")&&""===t?"/":t))}const S=/^:[\w-]+$/,M=3,E=2,T=1,C=10,A=-2,P=e=>"*"===e;function N(e,t){let n=e.split("/"),i=n.length;return n.some(P)&&(i+=A),t&&(i+=E),n.filter((e=>!P(e))).reduce(((e,t)=>e+(S.test(t)?M:""===t?T:C)),i)}function k(e,t,n){void 0===n&&(n=!1);let{routesMeta:i}=e,r={},s="/",a=[];for(let o=0;o<i.length;++o){let e=i[o],l=o===i.length-1,c="/"===s?t:t.slice(s.length)||"/",u=R({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!i[i.length-1].route.index&&(u=R({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(r,u.params),a.push({params:r,pathname:F([s,u.pathname]),pathnameBase:U(F([s,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(s=F([s,u.pathnameBase]))}return a}function R(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);h("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let i=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(i.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(i.push({paramName:"*"}),r+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":""!==e&&"/"!==e&&(r+="(?:(?=\\/|$))");let s=new RegExp(r,t?void 0:"i");return[s,i]}(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let s=r[0],a=s.replace(/(.)\/+$/,"$1"),o=r.slice(1),l=i.reduce(((e,t,n)=>{let{paramName:i,isOptional:r}=t;if("*"===i){let e=o[n]||"";a=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[i]=r&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{});return{params:l,pathname:s,pathnameBase:a,pattern:e}}function I(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(Ib){return h(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+Ib+")."),e}}function L(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&"/"!==i?null:e.slice(n)||"/"}function j(e,t,n,i){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function D(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function O(e,t){let n=D(e);return t?n.map(((e,t)=>t===n.length-1?e.pathname:e.pathnameBase)):n.map((e=>e.pathnameBase))}function z(e,t,n,i){let r;void 0===i&&(i=!1),"string"===typeof e?r=g(e):(r=c({},e),d(!r.pathname||!r.pathname.includes("?"),j("?","pathname","search",r)),d(!r.pathname||!r.pathname.includes("#"),j("#","pathname","hash",r)),d(!r.search||!r.search.includes("#"),j("#","search","hash",r)));let s,a=""===e||""===r.pathname,o=a?"/":r.pathname;if(null==o)s=n;else{let e=t.length-1;if(!i&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:i="",hash:r=""}="string"===typeof e?g(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:B(i),hash:V(r)}}(r,s),u=o&&"/"!==o&&o.endsWith("/"),h=(a||"."===o)&&n.endsWith("/");return l.pathname.endsWith("/")||!u&&!h||(l.pathname+="/"),l}const F=e=>e.join("/").replace(/\/\/+/g,"/"),U=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),B=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",V=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function H(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const W=["post","put","patch","delete"],G=(new Set(W),["get",...W]);new Set(G),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function q(){return q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},q.apply(this,arguments)}const X=r.createContext(null);const Y=r.createContext(null);const J=r.createContext(null);const K=r.createContext(null);const Z=r.createContext({outlet:null,matches:[],isDataRoute:!1});const Q=r.createContext(null);function $(){return null!=r.useContext(K)}function ee(){return $()||d(!1),r.useContext(K).location}function te(e){r.useContext(J).static||r.useLayoutEffect(e)}function ne(){let{isDataRoute:e}=r.useContext(Z);return e?function(){let{router:e}=pe(de.UseNavigateStable),t=me(he.UseNavigateStable),n=r.useRef(!1);te((()=>{n.current=!0}));let i=r.useCallback((function(i,r){void 0===r&&(r={}),n.current&&("number"===typeof i?e.navigate(i):e.navigate(i,q({fromRouteId:t},r)))}),[e,t]);return i}():function(){$()||d(!1);let e=r.useContext(X),{basename:t,future:n,navigator:i}=r.useContext(J),{matches:s}=r.useContext(Z),{pathname:a}=ee(),o=JSON.stringify(O(s,n.v7_relativeSplatPath)),l=r.useRef(!1);te((()=>{l.current=!0}));let c=r.useCallback((function(n,r){if(void 0===r&&(r={}),!l.current)return;if("number"===typeof n)return void i.go(n);let s=z(n,JSON.parse(o),a,"path"===r.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:F([t,s.pathname])),(r.replace?i.replace:i.push)(s,r.state,r)}),[t,i,o,a,e]);return c}()}const ie=r.createContext(null);function re(e,t){let{relative:n}=void 0===t?{}:t,{future:i}=r.useContext(J),{matches:s}=r.useContext(Z),{pathname:a}=ee(),o=JSON.stringify(O(s,i.v7_relativeSplatPath));return r.useMemo((()=>z(e,JSON.parse(o),a,"path"===n)),[e,o,a,n])}function se(e,t,n,s){$()||d(!1);let{navigator:a}=r.useContext(J),{matches:o}=r.useContext(Z),l=o[o.length-1],c=l?l.params:{},u=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let h,p=ee();if(t){var f;let e="string"===typeof t?g(t):t;"/"===u||(null==(f=e.pathname)?void 0:f.startsWith(u))||d(!1),h=e}else h=p;let m=h.pathname||"/",v=m;if("/"!==u){let e=u.replace(/^\//,"").split("/");v="/"+m.replace(/^\//,"").split("/").slice(e.length).join("/")}let y=x(e,{pathname:v});let b=ue(y&&y.map((e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:F([u,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:F([u,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),o,n,s);return t&&b?r.createElement(K.Provider,{value:{location:q({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:i.Pop}},b):b}function ae(){let e=function(){var e;let t=r.useContext(Q),n=fe(he.UseRouteError),i=me(he.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=H(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:s},n):null,null)}const oe=r.createElement(ae,null);class le extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?r.createElement(Z.Provider,{value:this.props.routeContext},r.createElement(Q.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ce(e){let{routeContext:t,match:n,children:i}=e,s=r.useContext(X);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(Z.Provider,{value:t},i)}function ue(e,t,n,i){var s;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===i&&(i=null),null==e){var a;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(a=i)&&a.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let o=e,l=null==(s=n)?void 0:s.errors;if(null!=l){let e=o.findIndex((e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id])));e>=0||d(!1),o=o.slice(0,Math.min(o.length,e+1))}let c=!1,u=-1;if(n&&i&&i.v7_partialHydration)for(let r=0;r<o.length;r++){let e=o[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=r),e.route.id){let{loaderData:t,errors:i}=n,r=e.route.loader&&void 0===t[e.route.id]&&(!i||void 0===i[e.route.id]);if(e.route.lazy||r){c=!0,o=u>=0?o.slice(0,u+1):[o[0]];break}}}return o.reduceRight(((e,i,s)=>{let a,d=!1,h=null,p=null;var f;n&&(a=l&&i.route.id?l[i.route.id]:void 0,h=i.route.errorElement||oe,c&&(u<0&&0===s?(f="route-fallback",!1||ge[f]||(ge[f]=!0),d=!0,p=null):u===s&&(d=!0,p=i.route.hydrateFallbackElement||null)));let m=t.concat(o.slice(0,s+1)),g=()=>{let t;return t=a?h:d?p:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:e,r.createElement(ce,{match:i,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===s)?r.createElement(le,{location:n.location,revalidation:n.revalidation,component:h,error:a,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var de=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(de||{}),he=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(he||{});function pe(e){let t=r.useContext(X);return t||d(!1),t}function fe(e){let t=r.useContext(Y);return t||d(!1),t}function me(e){let t=function(){let e=r.useContext(Z);return e||d(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||d(!1),n.route.id}const ge={};const ve={};const ye=(e,t,n)=>{var i;ve[i="\u26a0\ufe0f React Router Future Flag Warning: "+t+". You can use the `"+e+"` future flag to opt-in early. For more information, see "+n+"."]||(ve[i]=!0,console.warn(i))};function xe(e,t){null!=e&&e.v7_startTransition||ye("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),null!=e&&e.v7_relativeSplatPath||t&&t.v7_relativeSplatPath||ye("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath"),t&&(t.v7_fetcherPersist||ye("v7_fetcherPersist","The persistence behavior of fetchers is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_fetcherpersist"),t.v7_normalizeFormMethod||ye("v7_normalizeFormMethod","Casing of `formMethod` fields is being normalized to uppercase in v7","https://reactrouter.com/v6/upgrading/future#v7_normalizeformmethod"),t.v7_partialHydration||ye("v7_partialHydration","`RouterProvider` hydration behavior is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_partialhydration"),t.v7_skipActionErrorRevalidation||ye("v7_skipActionErrorRevalidation","The revalidation behavior after 4xx/5xx `action` responses is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_skipactionerrorrevalidation"))}s.startTransition;function be(e){let{to:t,replace:n,state:i,relative:s}=e;$()||d(!1);let{future:a,static:o}=r.useContext(J),{matches:l}=r.useContext(Z),{pathname:c}=ee(),u=ne(),h=z(t,O(l,a.v7_relativeSplatPath),c,"path"===s),p=JSON.stringify(h);return r.useEffect((()=>u(JSON.parse(p),{replace:n,state:i,relative:s})),[u,p,s,n,i]),null}function _e(e){return function(e){let t=r.useContext(Z).outlet;return t?r.createElement(ie.Provider,{value:e},t):t}(e.context)}function we(e){d(!1)}function Se(e){let{basename:t="/",children:n=null,location:s,navigationType:a=i.Pop,navigator:o,static:l=!1,future:c}=e;$()&&d(!1);let u=t.replace(/^\/*/,"/"),h=r.useMemo((()=>({basename:u,navigator:o,static:l,future:q({v7_relativeSplatPath:!1},c)})),[u,c,o,l]);"string"===typeof s&&(s=g(s));let{pathname:p="/",search:f="",hash:m="",state:v=null,key:y="default"}=s,x=r.useMemo((()=>{let e=L(p,u);return null==e?null:{location:{pathname:e,search:f,hash:m,state:v,key:y},navigationType:a}}),[u,p,f,m,v,y,a]);return null==x?null:r.createElement(J.Provider,{value:h},r.createElement(K.Provider,{children:n,value:x}))}function Me(e){let{children:t,location:n}=e;return se(Ee(t),n)}new Promise((()=>{}));r.Component;function Ee(e,t){void 0===t&&(t=[]);let n=[];return r.Children.forEach(e,((e,i)=>{if(!r.isValidElement(e))return;let s=[...t,i];if(e.type===r.Fragment)return void n.push.apply(n,Ee(e.props.children,s));e.type!==we&&d(!1),e.props.index&&e.props.children&&d(!1);let a={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=Ee(e.props.children,s)),n.push(a)})),n}function Te(){return Te=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Te.apply(this,arguments)}function Ce(e,t){if(null==e)return{};var n,i,r={},s=Object.keys(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Ae=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(oq){}new Map;const Pe=s.startTransition;l.flushSync,s.useId;function Ne(e){let{basename:t,children:n,future:i,window:s}=e,a=r.useRef();var o;null==a.current&&(a.current=(void 0===(o={window:s,v5Compat:!0})&&(o={}),v((function(e,t){let{pathname:n,search:i,hash:r}=e.location;return f("",{pathname:n,search:i,hash:r},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:m(t)}),null,o)));let l=a.current,[c,u]=r.useState({action:l.action,location:l.location}),{v7_startTransition:d}=i||{},h=r.useCallback((e=>{d&&Pe?Pe((()=>u(e))):u(e)}),[u,d]);return r.useLayoutEffect((()=>l.listen(h)),[l,h]),r.useEffect((()=>xe(i)),[i]),r.createElement(Se,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:i})}const ke="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Re=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ie=r.forwardRef((function(e,t){let n,{onClick:i,relative:s,reloadDocument:a,replace:o,state:l,target:c,to:u,preventScrollReset:h,viewTransition:p}=e,f=Ce(e,Ae),{basename:g}=r.useContext(J),v=!1;if("string"===typeof u&&Re.test(u)&&(n=u,ke))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),n=L(t.pathname,g);t.origin===e.origin&&null!=n?u=n+t.search+t.hash:v=!0}catch(oq){}let y=function(e,t){let{relative:n}=void 0===t?{}:t;$()||d(!1);let{basename:i,navigator:s}=r.useContext(J),{hash:a,pathname:o,search:l}=re(e,{relative:n}),c=o;return"/"!==i&&(c="/"===o?i:F([i,o])),s.createHref({pathname:c,search:l,hash:a})}(u,{relative:s}),x=function(e,t){let{target:n,replace:i,state:s,preventScrollReset:a,relative:o,viewTransition:l}=void 0===t?{}:t,c=ne(),u=ee(),d=re(e,{relative:o});return r.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==i?i:m(u)===m(d);c(e,{replace:n,state:s,preventScrollReset:a,relative:o,viewTransition:l})}}),[u,c,d,i,s,n,e,a,o,l])}(u,{replace:o,state:l,target:c,preventScrollReset:h,relative:s,viewTransition:p});return r.createElement("a",Te({},f,{href:n||y,onClick:v||a?i:function(e){i&&i(e),e.defaultPrevented||x(e)},ref:t,target:c}))}));var Le,je;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Le||(Le={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(je||(je={}));var De=n(414);const Oe=(0,r.createContext)(null),ze=e=>{let{children:t}=e;const[n,i]=(0,r.useState)((()=>{const e=localStorage.getItem("token"),t=localStorage.getItem("user");if(e&&t)try{return{isAuthenticated:!0,user:JSON.parse(t),token:e}}catch(Ib){localStorage.removeItem("token"),localStorage.removeItem("user"),console.error("Erreur lors du parsing des donn\xe9es utilisateur:",Ib)}return{isAuthenticated:!1,user:null,token:null}}));return(0,De.jsx)(Oe.Provider,{value:{auth:n,login:async e=>{try{if(!e.token||!e.user)throw new Error("Donn\xe9es de connexion invalides");localStorage.setItem("token",e.token),localStorage.setItem("user",JSON.stringify(e.user)),i({isAuthenticated:!0,user:e.user,token:e.token})}catch(Ib){throw console.error("Erreur lors de la sauvegarde des donn\xe9es:",Ib),Ib}},logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),i({isAuthenticated:!1,user:null,token:null})}},children:t})};function Fe(e){return Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fe(e)}function Ue(e){var t=function(e,t){if("object"!=Fe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=Fe(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Fe(t)?t:t+""}function Be(e,t,n){return(t=Ue(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function He(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(n),!0).forEach((function(t){Be(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function We(e,t){return function(){return e.apply(t,arguments)}}const{toString:Ge}=Object.prototype,{getPrototypeOf:qe}=Object,Xe=(Ye=Object.create(null),e=>{const t=Ge.call(e);return Ye[t]||(Ye[t]=t.slice(8,-1).toLowerCase())});var Ye;const Je=e=>(e=e.toLowerCase(),t=>Xe(t)===e),Ke=e=>t=>typeof t===e,{isArray:Ze}=Array,Qe=Ke("undefined");const $e=Je("ArrayBuffer");const et=Ke("string"),tt=Ke("function"),nt=Ke("number"),it=e=>null!==e&&"object"===typeof e,rt=e=>{if("object"!==Xe(e))return!1;const t=qe(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},st=Je("Date"),at=Je("File"),ot=Je("Blob"),lt=Je("FileList"),ct=Je("URLSearchParams"),[ut,dt,ht,pt]=["ReadableStream","Request","Response","Headers"].map(Je);function ft(e,t){let n,i,{allOwnKeys:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),Ze(e))for(n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else{const i=r?Object.getOwnPropertyNames(e):Object.keys(e),s=i.length;let a;for(n=0;n<s;n++)a=i[n],t.call(null,e[a],a,e)}}function mt(e,t){t=t.toLowerCase();const n=Object.keys(e);let i,r=n.length;for(;r-- >0;)if(i=n[r],t===i.toLowerCase())return i;return null}const gt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,vt=e=>!Qe(e)&&e!==gt;const yt=(xt="undefined"!==typeof Uint8Array&&qe(Uint8Array),e=>xt&&e instanceof xt);var xt;const bt=Je("HTMLFormElement"),_t=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),wt=Je("RegExp"),St=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),i={};ft(n,((n,r)=>{let s;!1!==(s=t(n,r,e))&&(i[r]=s||n)})),Object.defineProperties(e,i)},Mt="abcdefghijklmnopqrstuvwxyz",Et="0123456789",Tt={DIGIT:Et,ALPHA:Mt,ALPHA_DIGIT:Mt+Mt.toUpperCase()+Et};const Ct=Je("AsyncFunction"),At=((e,t)=>{return e?setImmediate:t?(n="axios@".concat(Math.random()),i=[],gt.addEventListener("message",(e=>{let{source:t,data:r}=e;t===gt&&r===n&&i.length&&i.shift()()}),!1),e=>{i.push(e),gt.postMessage(n,"*")}):e=>setTimeout(e);var n,i})("function"===typeof setImmediate,tt(gt.postMessage)),Pt="undefined"!==typeof queueMicrotask?queueMicrotask.bind(gt):"undefined"!==typeof process&&process.nextTick||At,Nt={isArray:Ze,isArrayBuffer:$e,isBuffer:function(e){return null!==e&&!Qe(e)&&null!==e.constructor&&!Qe(e.constructor)&&tt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||tt(e.append)&&("formdata"===(t=Xe(e))||"object"===t&&tt(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&$e(e.buffer),t},isString:et,isNumber:nt,isBoolean:e=>!0===e||!1===e,isObject:it,isPlainObject:rt,isReadableStream:ut,isRequest:dt,isResponse:ht,isHeaders:pt,isUndefined:Qe,isDate:st,isFile:at,isBlob:ot,isRegExp:wt,isFunction:tt,isStream:e=>it(e)&&tt(e.pipe),isURLSearchParams:ct,isTypedArray:yt,isFileList:lt,forEach:ft,merge:function e(){const{caseless:t}=vt(this)&&this||{},n={},i=(i,r)=>{const s=t&&mt(n,r)||r;rt(n[s])&&rt(i)?n[s]=e(n[s],i):rt(i)?n[s]=e({},i):Ze(i)?n[s]=i.slice():n[s]=i};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&ft(arguments[r],i);return n},extend:function(e,t,n){let{allOwnKeys:i}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return ft(t,((t,i)=>{n&&tt(t)?e[i]=We(t,n):e[i]=t}),{allOwnKeys:i}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,i)=>{e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,i)=>{let r,s,a;const o={};if(t=t||{},null==e)return t;do{for(r=Object.getOwnPropertyNames(e),s=r.length;s-- >0;)a=r[s],i&&!i(a,e,t)||o[a]||(t[a]=e[a],o[a]=!0);e=!1!==n&&qe(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:Xe,kindOfTest:Je,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const i=e.indexOf(t,n);return-1!==i&&i===n},toArray:e=>{if(!e)return null;if(Ze(e))return e;let t=e.length;if(!nt(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let i;for(;(i=n.next())&&!i.done;){const n=i.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const i=[];for(;null!==(n=e.exec(t));)i.push(n);return i},isHTMLForm:bt,hasOwnProperty:_t,hasOwnProp:_t,reduceDescriptors:St,freezeMethods:e=>{St(e,((t,n)=>{if(tt(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const i=e[n];tt(i)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},i=e=>{e.forEach((e=>{n[e]=!0}))};return Ze(e)?i(e):i(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:mt,global:gt,isContextDefined:vt,ALPHABET:Tt,generateString:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Tt.ALPHA_DIGIT,n="";const{length:i}=t;for(;e--;)n+=t[Math.random()*i|0];return n},isSpecCompliantForm:function(e){return!!(e&&tt(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,i)=>{if(it(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[i]=e;const r=Ze(e)?[]:{};return ft(e,((e,t)=>{const s=n(e,i+1);!Qe(s)&&(r[t]=s)})),t[i]=void 0,r}}return e};return n(e,0)},isAsyncFn:Ct,isThenable:e=>e&&(it(e)||tt(e))&&tt(e.then)&&tt(e.catch),setImmediate:At,asap:Pt};function kt(e,t,n,i,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),i&&(this.request=i),r&&(this.response=r,this.status=r.status?r.status:null)}Nt.inherits(kt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Nt.toJSONObject(this.config),code:this.code,status:this.status}}});const Rt=kt.prototype,It={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{It[e]={value:e}})),Object.defineProperties(kt,It),Object.defineProperty(Rt,"isAxiosError",{value:!0}),kt.from=(e,t,n,i,r,s)=>{const a=Object.create(Rt);return Nt.toFlatObject(e,a,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),kt.call(a,e.message,t,n,i,r),a.cause=e,a.name=e.name,s&&Object.assign(a,s),a};const Lt=kt;function jt(e){return Nt.isPlainObject(e)||Nt.isArray(e)}function Dt(e){return Nt.endsWith(e,"[]")?e.slice(0,-2):e}function Ot(e,t,n){return e?e.concat(t).map((function(e,t){return e=Dt(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const zt=Nt.toFlatObject(Nt,{},null,(function(e){return/^is[A-Z]/.test(e)}));const Ft=function(e,t,n){if(!Nt.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const i=(n=Nt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!Nt.isUndefined(t[e])}))).metaTokens,r=n.visitor||c,s=n.dots,a=n.indexes,o=(n.Blob||"undefined"!==typeof Blob&&Blob)&&Nt.isSpecCompliantForm(t);if(!Nt.isFunction(r))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(Nt.isDate(e))return e.toISOString();if(!o&&Nt.isBlob(e))throw new Lt("Blob is not supported. Use a Buffer instead.");return Nt.isArrayBuffer(e)||Nt.isTypedArray(e)?o&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,r){let o=e;if(e&&!r&&"object"===typeof e)if(Nt.endsWith(n,"{}"))n=i?n:n.slice(0,-2),e=JSON.stringify(e);else if(Nt.isArray(e)&&function(e){return Nt.isArray(e)&&!e.some(jt)}(e)||(Nt.isFileList(e)||Nt.endsWith(n,"[]"))&&(o=Nt.toArray(e)))return n=Dt(n),o.forEach((function(e,i){!Nt.isUndefined(e)&&null!==e&&t.append(!0===a?Ot([n],i,s):null===a?n:n+"[]",l(e))})),!1;return!!jt(e)||(t.append(Ot(r,n,s),l(e)),!1)}const u=[],d=Object.assign(zt,{defaultVisitor:c,convertValue:l,isVisitable:jt});if(!Nt.isObject(e))throw new TypeError("data must be an object");return function e(n,i){if(!Nt.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+i.join("."));u.push(n),Nt.forEach(n,(function(n,s){!0===(!(Nt.isUndefined(n)||null===n)&&r.call(t,n,Nt.isString(s)?s.trim():s,i,d))&&e(n,i?i.concat(s):[s])})),u.pop()}}(e),t};function Ut(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function Bt(e,t){this._pairs=[],e&&Ft(e,this,t)}const Vt=Bt.prototype;Vt.append=function(e,t){this._pairs.push([e,t])},Vt.toString=function(e){const t=e?function(t){return e.call(this,t,Ut)}:Ut;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const Ht=Bt;function Wt(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Gt(e,t,n){if(!t)return e;const i=n&&n.encode||Wt;Nt.isFunction(n)&&(n={serialize:n});const r=n&&n.serialize;let s;if(s=r?r(t,n):Nt.isURLSearchParams(t)?t.toString():new Ht(t,n).toString(i),s){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}const qt=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Nt.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},Xt={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Yt={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:Ht,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Jt="undefined"!==typeof window&&"undefined"!==typeof document,Kt="object"===typeof navigator&&navigator||void 0,Zt=Jt&&(!Kt||["ReactNative","NativeScript","NS"].indexOf(Kt.product)<0),Qt="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,$t=Jt&&window.location.href||"http://localhost",en=He(He({},e),Yt);const tn=function(e){function t(e,n,i,r){let s=e[r++];if("__proto__"===s)return!0;const a=Number.isFinite(+s),o=r>=e.length;if(s=!s&&Nt.isArray(i)?i.length:s,o)return Nt.hasOwnProp(i,s)?i[s]=[i[s],n]:i[s]=n,!a;i[s]&&Nt.isObject(i[s])||(i[s]=[]);return t(e,n,i[s],r)&&Nt.isArray(i[s])&&(i[s]=function(e){const t={},n=Object.keys(e);let i;const r=n.length;let s;for(i=0;i<r;i++)s=n[i],t[s]=e[s];return t}(i[s])),!a}if(Nt.isFormData(e)&&Nt.isFunction(e.entries)){const n={};return Nt.forEachEntry(e,((e,i)=>{t(function(e){return Nt.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),i,n,0)})),n}return null};const nn={transitional:Xt,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",i=n.indexOf("application/json")>-1,r=Nt.isObject(e);r&&Nt.isHTMLForm(e)&&(e=new FormData(e));if(Nt.isFormData(e))return i?JSON.stringify(tn(e)):e;if(Nt.isArrayBuffer(e)||Nt.isBuffer(e)||Nt.isStream(e)||Nt.isFile(e)||Nt.isBlob(e)||Nt.isReadableStream(e))return e;if(Nt.isArrayBufferView(e))return e.buffer;if(Nt.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(r){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Ft(e,new en.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,i){return en.isNode&&Nt.isBuffer(e)?(this.append(t,e.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((s=Nt.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Ft(s?{"files[]":e}:e,t&&new t,this.formSerializer)}}return r||i?(t.setContentType("application/json",!1),function(e,t,n){if(Nt.isString(e))try{return(t||JSON.parse)(e),Nt.trim(e)}catch(oq){if("SyntaxError"!==oq.name)throw oq}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||nn.transitional,n=t&&t.forcedJSONParsing,i="json"===this.responseType;if(Nt.isResponse(e)||Nt.isReadableStream(e))return e;if(e&&Nt.isString(e)&&(n&&!this.responseType||i)){const n=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(oq){if(n){if("SyntaxError"===oq.name)throw Lt.from(oq,Lt.ERR_BAD_RESPONSE,this,null,this.response);throw oq}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:en.classes.FormData,Blob:en.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Nt.forEach(["delete","get","head","post","put","patch"],(e=>{nn.headers[e]={}}));const rn=nn,sn=Nt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),an=Symbol("internals");function on(e){return e&&String(e).trim().toLowerCase()}function ln(e){return!1===e||null==e?e:Nt.isArray(e)?e.map(ln):String(e)}function cn(e,t,n,i,r){return Nt.isFunction(i)?i.call(this,t,n):(r&&(t=n),Nt.isString(t)?Nt.isString(i)?-1!==t.indexOf(i):Nt.isRegExp(i)?i.test(t):void 0:void 0)}class un{constructor(e){e&&this.set(e)}set(e,t,n){const i=this;function r(e,t,n){const r=on(t);if(!r)throw new Error("header name must be a non-empty string");const s=Nt.findKey(i,r);(!s||void 0===i[s]||!0===n||void 0===n&&!1!==i[s])&&(i[s||t]=ln(e))}const s=(e,t)=>Nt.forEach(e,((e,n)=>r(e,n,t)));if(Nt.isPlainObject(e)||e instanceof this.constructor)s(e,t);else if(Nt.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))s((e=>{const t={};let n,i,r;return e&&e.split("\n").forEach((function(e){r=e.indexOf(":"),n=e.substring(0,r).trim().toLowerCase(),i=e.substring(r+1).trim(),!n||t[n]&&sn[n]||("set-cookie"===n?t[n]?t[n].push(i):t[n]=[i]:t[n]=t[n]?t[n]+", "+i:i)})),t})(e),t);else if(Nt.isHeaders(e))for(const[a,o]of e.entries())r(o,a,n);else null!=e&&r(t,e,n);return this}get(e,t){if(e=on(e)){const n=Nt.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(e);)t[i[1]]=i[2];return t}(e);if(Nt.isFunction(t))return t.call(this,e,n);if(Nt.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=on(e)){const n=Nt.findKey(this,e);return!(!n||void 0===this[n]||t&&!cn(0,this[n],n,t))}return!1}delete(e,t){const n=this;let i=!1;function r(e){if(e=on(e)){const r=Nt.findKey(n,e);!r||t&&!cn(0,n[r],r,t)||(delete n[r],i=!0)}}return Nt.isArray(e)?e.forEach(r):r(e),i}clear(e){const t=Object.keys(this);let n=t.length,i=!1;for(;n--;){const r=t[n];e&&!cn(0,this[r],r,e,!0)||(delete this[r],i=!0)}return i}normalize(e){const t=this,n={};return Nt.forEach(this,((i,r)=>{const s=Nt.findKey(n,r);if(s)return t[s]=ln(i),void delete t[r];const a=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(r):String(r).trim();a!==r&&delete t[r],t[a]=ln(i),n[a]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return Nt.forEach(this,((n,i)=>{null!=n&&!1!==n&&(t[i]=e&&Nt.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return i.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[an]=this[an]={accessors:{}}).accessors,n=this.prototype;function i(e){const i=on(e);t[i]||(!function(e,t){const n=Nt.toCamelCase(" "+t);["get","set","has"].forEach((i=>{Object.defineProperty(e,i+n,{value:function(e,n,r){return this[i].call(this,t,e,n,r)},configurable:!0})}))}(n,e),t[i]=!0)}return Nt.isArray(e)?e.forEach(i):i(e),this}}un.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Nt.reduceDescriptors(un.prototype,((e,t)=>{let{value:n}=e,i=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[i]=e}}})),Nt.freezeMethods(un);const dn=un;function hn(e,t){const n=this||rn,i=t||n,r=dn.from(i.headers);let s=i.data;return Nt.forEach(e,(function(e){s=e.call(n,s,r.normalize(),t?t.status:void 0)})),r.normalize(),s}function pn(e){return!(!e||!e.__CANCEL__)}function fn(e,t,n){Lt.call(this,null==e?"canceled":e,Lt.ERR_CANCELED,t,n),this.name="CanceledError"}Nt.inherits(fn,Lt,{__CANCEL__:!0});const mn=fn;function gn(e,t,n){const i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(new Lt("Request failed with status code "+n.status,[Lt.ERR_BAD_REQUEST,Lt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const vn=function(e,t){e=e||10;const n=new Array(e),i=new Array(e);let r,s=0,a=0;return t=void 0!==t?t:1e3,function(o){const l=Date.now(),c=i[a];r||(r=l),n[s]=o,i[s]=l;let u=a,d=0;for(;u!==s;)d+=n[u++],u%=e;if(s=(s+1)%e,s===a&&(a=(a+1)%e),l-r<t)return;const h=c&&l-c;return h?Math.round(1e3*d/h):void 0}};const yn=function(e,t){let n,i,r=0,s=1e3/t;const a=function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();r=s,n=null,i&&(clearTimeout(i),i=null),e.apply(null,t)};return[function(){const e=Date.now(),t=e-r;for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];t>=s?a(l,e):(n=l,i||(i=setTimeout((()=>{i=null,a(n)}),s-t)))},()=>n&&a(n)]},xn=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,i=0;const r=vn(50,250);return yn((n=>{const s=n.loaded,a=n.lengthComputable?n.total:void 0,o=s-i,l=r(o);i=s;e({loaded:s,total:a,progress:a?s/a:void 0,bytes:o,rate:l||void 0,estimated:l&&a&&s<=a?(a-s)/l:void 0,event:n,lengthComputable:null!=a,[t?"download":"upload"]:!0})}),n)},bn=(e,t)=>{const n=null!=e;return[i=>t[0]({lengthComputable:n,total:e,loaded:i}),t[1]]},_n=e=>function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return Nt.asap((()=>e(...n)))},wn=en.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,en.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(en.origin),en.navigator&&/(msie|trident)/i.test(en.navigator.userAgent)):()=>!0,Sn=en.hasStandardBrowserEnv?{write(e,t,n,i,r,s){const a=[e+"="+encodeURIComponent(t)];Nt.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),Nt.isString(i)&&a.push("path="+i),Nt.isString(r)&&a.push("domain="+r),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Mn(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const En=e=>e instanceof dn?He({},e):e;function Tn(e,t){t=t||{};const n={};function i(e,t,n,i){return Nt.isPlainObject(e)&&Nt.isPlainObject(t)?Nt.merge.call({caseless:i},e,t):Nt.isPlainObject(t)?Nt.merge({},t):Nt.isArray(t)?t.slice():t}function r(e,t,n,r){return Nt.isUndefined(t)?Nt.isUndefined(e)?void 0:i(void 0,e,0,r):i(e,t,0,r)}function s(e,t){if(!Nt.isUndefined(t))return i(void 0,t)}function a(e,t){return Nt.isUndefined(t)?Nt.isUndefined(e)?void 0:i(void 0,e):i(void 0,t)}function o(n,r,s){return s in t?i(n,r):s in e?i(void 0,n):void 0}const l={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(e,t,n)=>r(En(e),En(t),0,!0)};return Nt.forEach(Object.keys(Object.assign({},e,t)),(function(i){const s=l[i]||r,a=s(e[i],t[i],i);Nt.isUndefined(a)&&s!==o||(n[i]=a)})),n}const Cn=e=>{const t=Tn({},e);let n,{data:i,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:a,headers:o,auth:l}=t;if(t.headers=o=dn.from(o),t.url=Gt(Mn(t.baseURL,t.url),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),Nt.isFormData(i))if(en.hasStandardBrowserEnv||en.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(!1!==(n=o.getContentType())){const[e,...t]=n?n.split(";").map((e=>e.trim())).filter(Boolean):[];o.setContentType([e||"multipart/form-data",...t].join("; "))}if(en.hasStandardBrowserEnv&&(r&&Nt.isFunction(r)&&(r=r(t)),r||!1!==r&&wn(t.url))){const e=s&&a&&Sn.read(a);e&&o.set(s,e)}return t},An="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){const i=Cn(e);let r=i.data;const s=dn.from(i.headers).normalize();let a,o,l,c,u,{responseType:d,onUploadProgress:h,onDownloadProgress:p}=i;function f(){c&&c(),u&&u(),i.cancelToken&&i.cancelToken.unsubscribe(a),i.signal&&i.signal.removeEventListener("abort",a)}let m=new XMLHttpRequest;function g(){if(!m)return;const i=dn.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());gn((function(e){t(e),f()}),(function(e){n(e),f()}),{data:d&&"text"!==d&&"json"!==d?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:i,config:e,request:m}),m=null}m.open(i.method.toUpperCase(),i.url,!0),m.timeout=i.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(n(new Lt("Request aborted",Lt.ECONNABORTED,e,m)),m=null)},m.onerror=function(){n(new Lt("Network Error",Lt.ERR_NETWORK,e,m)),m=null},m.ontimeout=function(){let t=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const r=i.transitional||Xt;i.timeoutErrorMessage&&(t=i.timeoutErrorMessage),n(new Lt(t,r.clarifyTimeoutError?Lt.ETIMEDOUT:Lt.ECONNABORTED,e,m)),m=null},void 0===r&&s.setContentType(null),"setRequestHeader"in m&&Nt.forEach(s.toJSON(),(function(e,t){m.setRequestHeader(t,e)})),Nt.isUndefined(i.withCredentials)||(m.withCredentials=!!i.withCredentials),d&&"json"!==d&&(m.responseType=i.responseType),p&&([l,u]=xn(p,!0),m.addEventListener("progress",l)),h&&m.upload&&([o,c]=xn(h),m.upload.addEventListener("progress",o),m.upload.addEventListener("loadend",c)),(i.cancelToken||i.signal)&&(a=t=>{m&&(n(!t||t.type?new mn(null,e,m):t),m.abort(),m=null)},i.cancelToken&&i.cancelToken.subscribe(a),i.signal&&(i.signal.aborted?a():i.signal.addEventListener("abort",a)));const v=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(i.url);v&&-1===en.protocols.indexOf(v)?n(new Lt("Unsupported protocol "+v+":",Lt.ERR_BAD_REQUEST,e)):m.send(r||null)}))},Pn=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,i=new AbortController;const r=function(e){if(!n){n=!0,a();const t=e instanceof Error?e:this.reason;i.abort(t instanceof Lt?t:new mn(t instanceof Error?t.message:t))}};let s=t&&setTimeout((()=>{s=null,r(new Lt("timeout ".concat(t," of ms exceeded"),Lt.ETIMEDOUT))}),t);const a=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(r):e.removeEventListener("abort",r)})),e=null)};e.forEach((e=>e.addEventListener("abort",r)));const{signal:o}=i;return o.unsubscribe=()=>Nt.asap(a),o}};function Nn(e,t){this.v=e,this.k=t}function kn(e){return function(){return new Rn(e.apply(this,arguments))}}function Rn(e){var t,n;function i(t,n){try{var s=e[t](n),a=s.value,o=a instanceof Nn;Promise.resolve(o?a.v:a).then((function(n){if(o){var l="return"===t?"return":"next";if(!a.k||n.done)return i(l,n);n=e[l](n).value}r(s.done?"return":"normal",n)}),(function(e){i("throw",e)}))}catch(e){r("throw",e)}}function r(e,r){switch(e){case"return":t.resolve({value:r,done:!0});break;case"throw":t.reject(r);break;default:t.resolve({value:r,done:!1})}(t=t.next)?i(t.key,t.arg):n=null}this._invoke=function(e,r){return new Promise((function(s,a){var o={key:e,arg:r,resolve:s,reject:a,next:null};n?n=n.next=o:(t=n=o,i(e,r))}))},"function"!=typeof e.return&&(this.return=void 0)}function In(e){return new Nn(e,0)}function Ln(e){var t={},n=!1;function i(t,i){return n=!0,i=new Promise((function(n){n(e[t](i))})),{done:!1,value:new Nn(i,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return n?(n=!1,e):i("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(n)throw n=!1,e;return i("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return n?(n=!1,e):i("return",e)}),t}function jn(e){var t,n,i,r=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,i=Symbol.iterator);r--;){if(n&&null!=(t=e[n]))return t.call(e);if(i&&null!=(t=e[i]))return new Dn(t.call(e));n="@@asyncIterator",i="@@iterator"}throw new TypeError("Object is not async iterable")}function Dn(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return Dn=function(e){this.s=e,this.n=e.next},Dn.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new Dn(e)}Rn.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Rn.prototype.next=function(e){return this._invoke("next",e)},Rn.prototype.throw=function(e){return this._invoke("throw",e)},Rn.prototype.return=function(e){return this._invoke("return",e)};const On=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let i,r=0;for(;r<n;)i=r+t,yield e.slice(r,i),r=i},zn=function(){var e=kn((function*(e,t){var n,i=!1,r=!1;try{for(var s,a=jn(Fn(e));i=!(s=yield In(a.next())).done;i=!1){const e=s.value;yield*Ln(jn(On(e,t)))}}catch(o){r=!0,n=o}finally{try{i&&null!=a.return&&(yield In(a.return()))}finally{if(r)throw n}}}));return function(t,n){return e.apply(this,arguments)}}(),Fn=function(){var e=kn((function*(e){if(e[Symbol.asyncIterator])return void(yield*Ln(jn(e)));const t=e.getReader();try{for(;;){const{done:e,value:n}=yield In(t.read());if(e)break;yield n}}finally{yield In(t.cancel())}}));return function(t){return e.apply(this,arguments)}}(),Un=(e,t,n,i)=>{const r=zn(e,t);let s,a=0,o=e=>{s||(s=!0,i&&i(e))};return new ReadableStream({async pull(e){try{const{done:t,value:i}=await r.next();if(t)return o(),void e.close();let s=i.byteLength;if(n){let e=a+=s;n(e)}e.enqueue(new Uint8Array(i))}catch(t){throw o(t),t}},cancel:e=>(o(e),r.return())},{highWaterMark:2})},Bn="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,Vn=Bn&&"function"===typeof ReadableStream,Hn=Bn&&("function"===typeof TextEncoder?(Wn=new TextEncoder,e=>Wn.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var Wn;const Gn=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return!!e(...n)}catch(oq){return!1}},qn=Vn&&Gn((()=>{let e=!1;const t=new Request(en.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),Xn=Vn&&Gn((()=>Nt.isReadableStream(new Response("").body))),Yn={stream:Xn&&(e=>e.body)};var Jn;Bn&&(Jn=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!Yn[e]&&(Yn[e]=Nt.isFunction(Jn[e])?t=>t[e]():(t,n)=>{throw new Lt("Response type '".concat(e,"' is not supported"),Lt.ERR_NOT_SUPPORT,n)})})));const Kn=async(e,t)=>{const n=Nt.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(Nt.isBlob(e))return e.size;if(Nt.isSpecCompliantForm(e)){const t=new Request(en.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return Nt.isArrayBufferView(e)||Nt.isArrayBuffer(e)?e.byteLength:(Nt.isURLSearchParams(e)&&(e+=""),Nt.isString(e)?(await Hn(e)).byteLength:void 0)})(t):n},Zn=Bn&&(async e=>{let{url:t,method:n,data:i,signal:r,cancelToken:s,timeout:a,onDownloadProgress:o,onUploadProgress:l,responseType:c,headers:u,withCredentials:d="same-origin",fetchOptions:h}=Cn(e);c=c?(c+"").toLowerCase():"text";let p,f=Pn([r,s&&s.toAbortSignal()],a);const m=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let g;try{if(l&&qn&&"get"!==n&&"head"!==n&&0!==(g=await Kn(u,i))){let e,n=new Request(t,{method:"POST",body:i,duplex:"half"});if(Nt.isFormData(i)&&(e=n.headers.get("content-type"))&&u.setContentType(e),n.body){const[e,t]=bn(g,xn(_n(l)));i=Un(n.body,65536,e,t)}}Nt.isString(d)||(d=d?"include":"omit");const r="credentials"in Request.prototype;p=new Request(t,He(He({},h),{},{signal:f,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:i,duplex:"half",credentials:r?d:void 0}));let s=await fetch(p);const a=Xn&&("stream"===c||"response"===c);if(Xn&&(o||a&&m)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=s[t]}));const t=Nt.toFiniteNumber(s.headers.get("content-length")),[n,i]=o&&bn(t,xn(_n(o),!0))||[];s=new Response(Un(s.body,65536,n,(()=>{i&&i(),m&&m()})),e)}c=c||"text";let v=await Yn[Nt.findKey(Yn,c)||"text"](s,e);return!a&&m&&m(),await new Promise(((t,n)=>{gn(t,n,{data:v,headers:dn.from(s.headers),status:s.status,statusText:s.statusText,config:e,request:p})}))}catch(v){if(m&&m(),v&&"TypeError"===v.name&&/fetch/i.test(v.message))throw Object.assign(new Lt("Network Error",Lt.ERR_NETWORK,e,p),{cause:v.cause||v});throw Lt.from(v,v&&v.code,e,p)}}),Qn={http:null,xhr:An,fetch:Zn};Nt.forEach(Qn,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(oq){}Object.defineProperty(e,"adapterName",{value:t})}}));const $n=e=>"- ".concat(e),ei=e=>Nt.isFunction(e)||null===e||!1===e,ti=e=>{e=Nt.isArray(e)?e:[e];const{length:t}=e;let n,i;const r={};for(let s=0;s<t;s++){let t;if(n=e[s],i=n,!ei(n)&&(i=Qn[(t=String(n)).toLowerCase()],void 0===i))throw new Lt("Unknown adapter '".concat(t,"'"));if(i)break;r[t||"#"+s]=i}if(!i){const e=Object.entries(r).map((e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")}));let n=t?e.length>1?"since :\n"+e.map($n).join("\n"):" "+$n(e[0]):"as no adapter specified";throw new Lt("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return i};function ni(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new mn(null,e)}function ii(e){ni(e),e.headers=dn.from(e.headers),e.data=hn.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return ti(e.adapter||rn.adapter)(e).then((function(t){return ni(e),t.data=hn.call(e,e.transformResponse,t),t.headers=dn.from(t.headers),t}),(function(t){return pn(t)||(ni(e),t&&t.response&&(t.response.data=hn.call(e,e.transformResponse,t.response),t.response.headers=dn.from(t.response.headers))),Promise.reject(t)}))}const ri="1.7.9",si={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{si[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const ai={};si.transitional=function(e,t,n){function i(e,t){return"[Axios v1.7.9] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,r,s)=>{if(!1===e)throw new Lt(i(r," has been removed"+(t?" in "+t:"")),Lt.ERR_DEPRECATED);return t&&!ai[r]&&(ai[r]=!0,console.warn(i(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,s)}},si.spelling=function(e){return(t,n)=>(console.warn("".concat(n," is likely a misspelling of ").concat(e)),!0)};const oi={assertOptions:function(e,t,n){if("object"!==typeof e)throw new Lt("options must be an object",Lt.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let r=i.length;for(;r-- >0;){const s=i[r],a=t[s];if(a){const t=e[s],n=void 0===t||a(t,s,e);if(!0!==n)throw new Lt("option "+s+" must be "+n,Lt.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new Lt("Unknown option "+s,Lt.ERR_BAD_OPTION)}},validators:si},li=oi.validators;class ci{constructor(e){this.defaults=e,this.interceptors={request:new qt,response:new qt}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(oq){}}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=Tn(this.defaults,t);const{transitional:n,paramsSerializer:i,headers:r}=t;void 0!==n&&oi.assertOptions(n,{silentJSONParsing:li.transitional(li.boolean),forcedJSONParsing:li.transitional(li.boolean),clarifyTimeoutError:li.transitional(li.boolean)},!1),null!=i&&(Nt.isFunction(i)?t.paramsSerializer={serialize:i}:oi.assertOptions(i,{encode:li.function,serialize:li.function},!0)),oi.assertOptions(t,{baseUrl:li.spelling("baseURL"),withXsrfToken:li.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=r&&Nt.merge(r.common,r[t.method]);r&&Nt.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete r[e]})),t.headers=dn.concat(s,r);const a=[];let o=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,a.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let u,d=0;if(!o){const e=[ii.bind(this),void 0];for(e.unshift.apply(e,a),e.push.apply(e,l),u=e.length,c=Promise.resolve(t);d<u;)c=c.then(e[d++],e[d++]);return c}u=a.length;let h=t;for(d=0;d<u;){const e=a[d++],t=a[d++];try{h=e(h)}catch(Ib){t.call(this,Ib);break}}try{c=ii.call(this,h)}catch(Ib){return Promise.reject(Ib)}for(d=0,u=l.length;d<u;)c=c.then(l[d++],l[d++]);return c}getUri(e){return Gt(Mn((e=Tn(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}Nt.forEach(["delete","get","head","options"],(function(e){ci.prototype[e]=function(t,n){return this.request(Tn(n||{},{method:e,url:t,data:(n||{}).data}))}})),Nt.forEach(["post","put","patch"],(function(e){function t(t){return function(n,i,r){return this.request(Tn(r||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:i}))}}ci.prototype[e]=t(),ci.prototype[e+"Form"]=t(!0)}));const ui=ci;class di{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const i=new Promise((e=>{n.subscribe(e),t=e})).then(e);return i.cancel=function(){n.unsubscribe(t)},i},e((function(e,i,r){n.reason||(n.reason=new mn(e,i,r),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;const t=new di((function(t){e=t}));return{token:t,cancel:e}}}const hi=di;const pi={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(pi).forEach((e=>{let[t,n]=e;pi[n]=t}));const fi=pi;const mi=function e(t){const n=new ui(t),i=We(ui.prototype.request,n);return Nt.extend(i,ui.prototype,n,{allOwnKeys:!0}),Nt.extend(i,n,null,{allOwnKeys:!0}),i.create=function(n){return e(Tn(t,n))},i}(rn);mi.Axios=ui,mi.CanceledError=mn,mi.CancelToken=hi,mi.isCancel=pn,mi.VERSION=ri,mi.toFormData=Ft,mi.AxiosError=Lt,mi.Cancel=mi.CanceledError,mi.all=function(e){return Promise.all(e)},mi.spread=function(e){return function(t){return e.apply(null,t)}},mi.isAxiosError=function(e){return Nt.isObject(e)&&!0===e.isAxiosError},mi.mergeConfig=Tn,mi.AxiosHeaders=dn,mi.formToJSON=e=>tn(Nt.isHTMLForm(e)?new FormData(e):e),mi.getAdapter=ti,mi.HttpStatusCode=fi,mi.default=mi;const gi=mi,vi=gi.create({baseURL:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyAvU9kEEeWjQ7IAqBYbGgC42AdkWLES81M",REACT_APP_FIREBASE_APP_ID:"1:572769350923:web:4583cdf7d3de12a6769e0e",REACT_APP_FIREBASE_AUTH_DOMAIN:"rdv-project-7ba0a.firebaseapp.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-2E561CDQNN",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"572769350923",REACT_APP_FIREBASE_PROJECT_ID:"rdv-project-7ba0a",REACT_APP_FIREBASE_STORAGE_BUCKET:"rdv-project-7ba0a.firebasestorage.app"}.REACT_APP_API_URL||"http://localhost:5000/api",headers:{}});vi.interceptors.request.use((e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e})),vi.interceptors.response.use((e=>e),(e=>{var t,n;return(403===(null===(t=e.response)||void 0===t?void 0:t.status)||401===(null===(n=e.response)||void 0===n?void 0:n.status))&&e.config.url.includes("/auth/login"),Promise.reject(e)}));const yi={updateProfile:async e=>{try{const t=xi.getCurrentUser(),n="PROF"===(null===t||void 0===t?void 0:t.role),i=n?"/professionnels/profile":"/utilisateurs/profile",r=e instanceof FormData,s={headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}};r||(s.headers["Content-Type"]="application/json");let a=e;if(r){console.log("Donn\xe9es FormData envoy\xe9es:",Object.fromEntries(e.entries()));const t=e.get("photo");t instanceof File?console.log("Photo incluse dans FormData:",t.name,t.type,t.size):e.get("photoPath")&&console.log("Chemin de photo existante inclus:",e.get("photoPath")),n&&(null!==e.get("tarif")&&console.log("Tarif envoy\xe9:",e.get("tarif")),null!==e.get("specialites")&&console.log("Sp\xe9cialit\xe9s envoy\xe9es:",e.get("specialites")),null!==e.get("categorieId")&&console.log("Cat\xe9gorie envoy\xe9e:",e.get("categorieId"))),console.log("Donn\xe9es FormData envoy\xe9es \xe0 ".concat(i))}else a=He({},e),a.photo&&"object"===typeof a.photo&&(a.photo=""),a.specialites&&Array.isArray(a.specialites)?a.specialites=a.specialites.map((e=>"object"===typeof e&&e.nom?e.nom:e)):a.specialites&&"string"===typeof a.specialites&&(a.specialites=a.specialites.split(",").map((e=>e.trim()))),console.log("Donn\xe9es JSON envoy\xe9es \xe0 ".concat(i,":"),a);const o=await vi.put(i,a,s);if(!o.data)throw new Error("R\xe9ponse invalide du serveur");return o.data.photoUrl&&(localStorage.setItem("userPhotoUrl",o.data.photoUrl),console.log("Photo URL sauvegard\xe9e dans localStorage:",o.data.photoUrl)),o.data}catch(Ib){var t,n,i;if(console.error("Erreur updateProfile:",Ib),401===(null===(t=Ib.response)||void 0===t?void 0:t.status))throw new Error("Session expir\xe9e");throw new Error((null===(n=Ib.response)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.message)||"Erreur lors de la mise \xe0 jour")}},updateProfileJSON:async e=>yi.updateProfile(e),uploadPhoto:async e=>{try{if(!(e instanceof FormData))throw new Error("Les donn\xe9es doivent \xeatre au format FormData");const t=e.get("photo");t instanceof File?console.log("Photo \xe0 t\xe9l\xe9charger:",t.name,t.type,t.size):console.warn("Aucun fichier photo trouv\xe9 dans FormData");const n={headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}},i=await vi.post("/utilisateurs/upload-photo",e,n);return i.data&&i.data.photo&&(localStorage.setItem("userPhotoUrl",i.data.photo),console.log("Photo URL sauvegard\xe9e dans localStorage:",i.data.photo),i.data.photoUrl||(i.data.photoUrl=i.data.photo)),i}catch(Ib){var t,n,i;if(console.error("Erreur uploadPhoto:",Ib),401===(null===(t=Ib.response)||void 0===t?void 0:t.status))throw new Error("Session expir\xe9e");throw new Error((null===(n=Ib.response)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.message)||"Erreur lors du t\xe9l\xe9chargement de la photo")}},getProfile:()=>vi.get("/utilisateurs/profile",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}),getCategories:async()=>{try{return(await vi.get("/categories",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}})).data}catch(Ib){var e,t;throw console.error("Erreur lors du chargement des cat\xe9gories:",Ib),new Error((null===(e=Ib.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Erreur lors du chargement des cat\xe9gories")}},getAvailableSlots:async(e,t)=>{try{const n=await vi.get("/professionnels/".concat(e,"/disponibilites?date=").concat(t,"&disponible=true"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(!n.data)throw new Error("Aucune disponibilit\xe9 trouv\xe9e");return{data:n.data}}catch(Ib){throw console.error("Erreur lors de la r\xe9cup\xe9ration des disponibilit\xe9s:",Ib),Ib}},getAppointments:async()=>{try{const e=await vi.get("/utilisateurs/mes-rendez-vous",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});return console.log("R\xe9ponse API compl\xe8te:",e),e}catch(Ib){throw console.error("Erreur getAppointments:",Ib),Ib}},deleteAppointment:async e=>{try{if(!e)return console.error("ID de rendez-vous invalide:",e),Promise.reject(new Error("ID de rendez-vous invalide"));return await vi.delete("/utilisateurs/rendez-vous/".concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}})}catch(Ib){throw console.error("Erreur lors de la suppression:",Ib),Ib}},createAppointment:async e=>{try{return await vi.post("/utilisateurs/rendez-vous",e)}catch(Ib){throw console.error("Erreur lors de la cr\xe9ation du rendez-vous:",Ib),Ib}},cancelAppointment:async e=>{try{return await vi.put("/utilisateurs/rendez-vous/".concat(e,"/annuler"))}catch(Ib){throw console.error("Erreur lors de l'annulation du rendez-vous:",Ib),Ib}},getProfessionals:()=>vi.get("/professionnels",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}),bookAppointment:e=>vi.post("/utilisateurs/rendez-vous",e,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}),getProfessional:e=>vi.get("/utilisateurs/professionals/".concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}),getProfessionalsByCategory:async e=>{try{return await vi.get("/categories/".concat(e,"/professionnels"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}})}catch(Ib){throw console.error("Erreur lors de la r\xe9cup\xe9ration des professionnels par cat\xe9gorie:",Ib),Ib}},getAllProfessionals:async()=>{try{return await vi.get("/professionnels",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}})}catch(Ib){throw console.error("Erreur lors de la r\xe9cup\xe9ration des professionnels:",Ib),Ib}},getProfessionalAvailabilities:async e=>{try{const t=await vi.get("/professionnels/".concat(e,"/disponibilites?disponible=true"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(!t.data)throw new Error("Aucune disponibilit\xe9 trouv\xe9e");return t}catch(Ib){throw console.error("Erreur lors de la r\xe9cup\xe9ration des disponibilit\xe9s:",Ib),Ib}},getAvailability:e=>vi.get("/professionnels/".concat(e,"/disponibilites?disponible=true"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}),getAllProfessionalAvailabilities:async e=>{try{const t=await vi.get("/professionnels/".concat(e,"/disponibilites?all=true"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(!t.data)throw new Error("Aucune disponibilit\xe9 trouv\xe9e");return t}catch(Ib){throw console.error("Erreur lors de la r\xe9cup\xe9ration des disponibilit\xe9s:",Ib),Ib}}},xi={login:async e=>{try{const t=await vi.post("/utilisateurs/connexion",{email:e.email,password:e.password});return t.data.token&&(localStorage.setItem("token",t.data.token),localStorage.setItem("user",JSON.stringify(t.data.user))),t}catch(Ib){throw Ib}},register:async e=>{try{console.log("Donn\xe9es envoy\xe9es:",e);return await vi.post("/utilisateurs/inscription",e)}catch(Ib){var t;throw console.error("Erreur d'inscription:",null===(t=Ib.response)||void 0===t?void 0:t.data),Ib}},socialLogin:async e=>{try{console.log("Donn\xe9es de connexion sociale envoy\xe9es:",e);const t=await vi.post("/utilisateurs/social-login",e);return t.data.token&&(localStorage.setItem("token",t.data.token),localStorage.setItem("user",JSON.stringify(t.data.user))),t}catch(Ib){var t;throw console.error("Erreur de connexion sociale:",null===(t=Ib.response)||void 0===t?void 0:t.data),Ib}},logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user")},getCurrentUser:()=>{const e=localStorage.getItem("user");return e?JSON.parse(e):null}},bi=()=>vi.get("/professionnels/appointments",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}),_i=()=>vi.get("/professionnels/stats",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}),wi=e=>vi.put("/professionnels/appointments/".concat(e,"/accept"),{},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}),Si=e=>vi.put("/professionnels/appointments/".concat(e,"/reject"),{},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}),Mi=e=>vi.post("/professionnels/disponibilites",e,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}}),Ei=async()=>{try{const e=await vi.get("/professionnels/disponibilites",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});return console.log("R\xe9ponse brute getAvailabilities:",e),e.data&&!0===e.data.success&&Array.isArray(e.data.data)?{data:e.data.data}:e.data&&Array.isArray(e.data)?{data:e.data}:(console.warn("Format de r\xe9ponse inattendu dans getAvailabilities:",e.data),{data:[]})}catch(Ib){throw console.error("Erreur getAvailabilities:",Ib),Ib}},Ti=e=>vi.delete("/professionnels/disponibilites/".concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}}),Ci=()=>(console.log("Appel de getNotifications"),vi.get("/professionnels/notifications",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((e=>(console.log("R\xe9ponse de getNotifications:",e),e))).catch((e=>{throw console.error("Erreur getNotifications:",e),e}))),Ai=e=>e&&"string"===typeof e?(console.log("Marquage de la notification ".concat(e," comme lue")),vi.put("/professionnels/notifications/".concat(e,"/lue"),{},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((e=>(console.log("R\xe9ponse de markNotificationAsRead:",e),e))).catch((e=>{throw console.error("Erreur markNotificationAsRead:",e),e}))):(console.error("ID de notification invalide:",e),Promise.reject(new Error("ID de notification invalide"))),Pi=e=>vi.delete("/professionnels/appointments/".concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}),Ni=()=>vi.get("/admin/statistiques",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}),ki=()=>vi.get("/admin/rendez-vous",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}),Ri=e=>vi.get("/admin/utilisateurs",{params:He(He({},e),{},{action:"LISTER"}),headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}),Ii=(e,t)=>vi.put("/admin/utilisateurs/".concat(e),t,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}}),Li=e=>vi.delete("/admin/utilisateurs/".concat(e),{params:{action:"SUPPRIMER"},headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}),ji=()=>vi.get("/categories",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}),Di=()=>vi.get("/statistiques",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}),Oi=e=>{console.log("Envoi des donn\xe9es pour la cr\xe9ation de cat\xe9gorie:",e);const t=He(He({},e),{},{tarif:"string"===typeof e.tarif?parseFloat(e.tarif):e.tarif});return vi.post("/categories",t,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}})},zi=(e,t)=>{console.log("Mise \xe0 jour de la cat\xe9gorie ".concat(e," avec les donn\xe9es:"),t);const n=He(He({},t),{},{tarif:"string"===typeof t.tarif?parseFloat(t.tarif):t.tarif});return vi.put("/categories/".concat(e),n,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}})},Fi=e=>vi.delete("/categories/".concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}),Ui=vi,Bi=e=>{let{message:t,type:n="info",duration:i=3e3,onClose:s}=e;const[a,o]=(0,r.useState)(!0);return(0,r.useEffect)((()=>{const e=setTimeout((()=>{o(!1),s&&s()}),i);return()=>clearTimeout(e)}),[i,s]),a?(0,De.jsxs)("div",{className:"toast toast-".concat(n),children:[(0,De.jsx)("div",{className:"toast-content",children:(0,De.jsx)("p",{children:t})}),(0,De.jsx)("button",{className:"toast-close",onClick:()=>o(!1),children:"\xd7"})]}):null},Vi=()=>{const{id:e}=function(){let{matches:e}=r.useContext(Z),t=e[e.length-1];return t?t.params:{}}(),t=ne(),{auth:n}=(0,r.useContext)(Oe),[i,s]=(0,r.useState)(null),[a,o]=(0,r.useState)([]),[l,c]=(0,r.useState)(!0),[u,d]=(0,r.useState)(null),[h,p]=(0,r.useState)(!1),[f,m]=(0,r.useState)(""),[g,v]=(0,r.useState)(null),[y,x]=(0,r.useState)(""),[b,_]=(0,r.useState)(!1),[w,S]=(0,r.useState)(!1),M=(0,r.useCallback)((async()=>{try{const t=await yi.getAvailableSlots(e),n=(Array.isArray(t.data.data)?t.data.data:[]).reduce(((e,t)=>{const n=new Date(t.debut).toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return e[n]||(e[n]=[]),e[n].push(t),e}),{});o(n),c(!1)}catch(t){console.error("Erreur lors du chargement des disponibilit\xe9s:",t),d("Impossible de charger les disponibilit\xe9s"),c(!1)}}),[e]);(0,r.useEffect)((()=>{e&&(async()=>{try{if(c(!0),d(null),!e)throw new Error("ID du professionnel manquant");const[t]=await Promise.all([yi.getProfessional(e),M()]);if(null===t||void 0===t||!t.data)throw new Error("Donn\xe9es du profil invalides");s(t.data)}catch(u){console.error("Erreur:",u),d(u.message||"Erreur lors du chargement des donn\xe9es")}finally{c(!1)}})()}),[e,M]);const E=()=>{S(!1)};return l?(0,De.jsx)("div",{className:"loading-spinner",children:"Chargement..."}):u?(0,De.jsx)("div",{className:"error-message",children:u}):i?(0,De.jsxs)("div",{className:"professional-public-profile",children:[h&&(0,De.jsx)(Bi,{message:f,type:f.includes("succ\xe8s")?"success":"error",duration:3e3,onClose:()=>p(!1)}),b&&(0,De.jsx)("div",{className:"modal-overlay",children:(0,De.jsxs)("div",{className:"modal-content",children:[(0,De.jsx)("h3",{children:"Motif de la consultation"}),(0,De.jsx)("textarea",{value:y,onChange:e=>x(e.target.value),placeholder:"D\xe9crivez la raison de votre consultation...",required:!0}),(0,De.jsxs)("div",{className:"modal-actions",children:[(0,De.jsx)("button",{onClick:()=>_(!1),className:"btn-secondary",children:"Annuler"}),(0,De.jsx)("button",{onClick:async()=>{try{c(!0);const n={professionnelId:e,date:g.debut,status:"pending",motif:y.trim()};await yi.bookAppointment(n),m("Rendez-vous r\xe9serv\xe9 avec succ\xe8s!"),p(!0),setTimeout((()=>t("/user/appointments")),2e3),x("")}catch(r){var n,i;m((null===(n=r.response)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.message)||"Erreur lors de la r\xe9servation"),p(!0)}finally{c(!1),_(!1)}},className:"btn-primary",disabled:!y.trim(),children:"Confirmer la r\xe9servation"})]})]})}),(0,De.jsxs)("div",{className:"profile-header",children:[(0,De.jsxs)("div",{className:"profile-photo-container",onClick:()=>{S(!0)},children:[(0,De.jsx)("img",{src:i.photo||"/default-avatar.png",alt:"".concat(i.nom," ").concat(i.prenom),className:"profile-photo",onError:e=>{e.target.onerror=null,e.target.src="/default-avatar.png"}}),(0,De.jsx)("div",{className:"photo-overlay",children:(0,De.jsx)("span",{children:"Agrandir"})})]}),(0,De.jsxs)("h1",{children:[i.nom," ",i.prenom]}),(0,De.jsx)("p",{children:i.email})]}),w&&(0,De.jsx)("div",{className:"photo-modal",onClick:E,children:(0,De.jsxs)("div",{className:"photo-modal-content",onClick:e=>e.stopPropagation(),children:[(0,De.jsx)("span",{className:"close-modal",onClick:E,children:"\xd7"}),(0,De.jsx)("img",{src:i.photo||"/default-avatar.png",alt:"".concat(i.nom," ").concat(i.prenom),className:"modal-photo",onError:e=>{e.target.onerror=null,e.target.src="/default-avatar.png"}})]})}),(0,De.jsxs)("div",{className:"availability-section",children:[(0,De.jsx)("h2",{children:"Disponibilit\xe9s"}),0===Object.keys(a).length?(0,De.jsx)("p",{children:"Aucune disponibilit\xe9 pour le moment"}):Object.entries(a).map((e=>{let[i,r]=e;return(0,De.jsxs)("div",{className:"date-group",children:[(0,De.jsx)("h3",{className:"date-header",children:i}),(0,De.jsx)("div",{className:"time-slots",children:r.map((e=>(0,De.jsxs)("button",{className:"time-slot",onClick:()=>(e=>{if(null===n||void 0===n||!n.isAuthenticated)return m("Veuillez vous connecter pour prendre rendez-vous"),p(!0),void setTimeout((()=>t("/login")),2e3);v(e),_(!0)})(e),children:[(0,De.jsx)("span",{role:"img","aria-label":"clock",children:"\ud83d\udd52"}),new Date(e.debut).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})," -",new Date(e.fin).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})]},e._id)))})]},i)}))]})]}):(0,De.jsx)("div",{className:"error-message",children:"Profil non trouv\xe9"})};function Hi(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.includes(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}const Wi="150",Gi={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},qi={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Xi=0,Yi=1,Ji=2,Ki=3,Zi=0,Qi=1,$i=2,er=3,tr=0,nr=1,ir=2,rr=2,sr=0,ar=1,or=2,lr=3,cr=4,ur=5,dr=100,hr=101,pr=102,fr=103,mr=104,gr=200,vr=201,yr=202,xr=203,br=204,_r=205,wr=206,Sr=207,Mr=208,Er=209,Tr=210,Cr=0,Ar=1,Pr=2,Nr=3,kr=4,Rr=5,Ir=6,Lr=7,jr=0,Dr=1,Or=2,zr=0,Fr=1,Ur=2,Br=3,Vr=4,Hr=5,Wr=300,Gr=301,qr=302,Xr=303,Yr=304,Jr=306,Kr=1e3,Zr=1001,Qr=1002,$r=1003,es=1004,ts=1004,ns=1005,is=1005,rs=1006,ss=1007,as=1007,os=1008,ls=1008,cs=1009,us=1010,ds=1011,hs=1012,ps=1013,fs=1014,ms=1015,gs=1016,vs=1017,ys=1018,xs=1020,bs=1021,_s=1023,ws=1024,Ss=1025,Ms=1026,Es=1027,Ts=1028,Cs=1029,As=1030,Ps=1031,Ns=1033,ks=33776,Rs=33777,Is=33778,Ls=33779,js=35840,Ds=35841,Os=35842,zs=35843,Fs=36196,Us=37492,Bs=37496,Vs=37808,Hs=37809,Ws=37810,Gs=37811,qs=37812,Xs=37813,Ys=37814,Js=37815,Ks=37816,Zs=37817,Qs=37818,$s=37819,ea=37820,ta=37821,na=36492,ia=36283,ra=36284,sa=36285,aa=36286,oa=2200,la=2201,ca=2202,ua=2300,da=2301,ha=2302,pa=2400,fa=2401,ma=2402,ga=2500,va=2501,ya=0,xa=1,ba=2,_a=3e3,wa=3001,Sa=3200,Ma=3201,Ea=0,Ta=1,Ca="",Aa="srgb",Pa="srgb-linear",Na="display-p3",ka=0,Ra=7680,Ia=7681,La=7682,ja=7683,Da=34055,Oa=34056,za=5386,Fa=512,Ua=513,Ba=514,Va=515,Ha=516,Wa=517,Ga=518,qa=519,Xa=35044,Ya=35048,Ja=35040,Ka=35045,Za=35049,Qa=35041,$a=35046,eo=35050,to=35042,no="100",io="300 es",ro=1035;class so{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,i=n.length;t<i;t++)n[t].call(this,e);e.target=null}}}const ao=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let oo=1234567;const lo=Math.PI/180,co=180/Math.PI;function uo(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(ao[255&e]+ao[e>>8&255]+ao[e>>16&255]+ao[e>>24&255]+"-"+ao[255&t]+ao[t>>8&255]+"-"+ao[t>>16&15|64]+ao[t>>24&255]+"-"+ao[63&n|128]+ao[n>>8&255]+"-"+ao[n>>16&255]+ao[n>>24&255]+ao[255&i]+ao[i>>8&255]+ao[i>>16&255]+ao[i>>24&255]).toLowerCase()}function ho(e,t,n){return Math.max(t,Math.min(n,e))}function po(e,t){return(e%t+t)%t}function fo(e,t,n){return(1-n)*e+n*t}function mo(e){return 0===(e&e-1)&&0!==e}function go(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function vo(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function yo(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function xo(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}const bo={DEG2RAD:lo,RAD2DEG:co,generateUUID:uo,clamp:ho,euclideanModulo:po,mapLinear:function(e,t,n,i,r){return i+(e-t)*(r-i)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:fo,damp:function(e,t,n,i){return fo(e,t,1-Math.exp(-n*i))},pingpong:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t-Math.abs(po(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(oo=e);let t=oo+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296},degToRad:function(e){return e*lo},radToDeg:function(e){return e*co},isPowerOfTwo:mo,ceilPowerOfTwo:go,floorPowerOfTwo:vo,setQuaternionFromProperEuler:function(e,t,n,i,r){const s=Math.cos,a=Math.sin,o=s(n/2),l=a(n/2),c=s((t+i)/2),u=a((t+i)/2),d=s((t-i)/2),h=a((t-i)/2),p=s((i-t)/2),f=a((i-t)/2);switch(r){case"XYX":e.set(o*u,l*d,l*h,o*c);break;case"YZY":e.set(l*h,o*u,l*d,o*c);break;case"ZXZ":e.set(l*d,l*h,o*u,o*c);break;case"XZX":e.set(o*u,l*f,l*p,o*c);break;case"YXY":e.set(l*p,o*u,l*f,o*c);break;case"ZYZ":e.set(l*f,l*p,o*u,o*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}},normalize:xo,denormalize:yo};class _o{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;_o.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),i=Math.sin(t),r=this.x-e.x,s=this.y-e.y;return this.x=r*n-s*i+e.x,this.y=r*i+s*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class wo{constructor(){wo.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,n,i,r,s,a,o,l){const c=this.elements;return c[0]=e,c[1]=i,c[2]=a,c[3]=t,c[4]=r,c[5]=o,c[6]=n,c[7]=s,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,r=this.elements,s=n[0],a=n[3],o=n[6],l=n[1],c=n[4],u=n[7],d=n[2],h=n[5],p=n[8],f=i[0],m=i[3],g=i[6],v=i[1],y=i[4],x=i[7],b=i[2],_=i[5],w=i[8];return r[0]=s*f+a*v+o*b,r[3]=s*m+a*y+o*_,r[6]=s*g+a*x+o*w,r[1]=l*f+c*v+u*b,r[4]=l*m+c*y+u*_,r[7]=l*g+c*x+u*w,r[2]=d*f+h*v+p*b,r[5]=d*m+h*y+p*_,r[8]=d*g+h*x+p*w,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],s=e[4],a=e[5],o=e[6],l=e[7],c=e[8];return t*s*c-t*a*l-n*r*c+n*a*o+i*r*l-i*s*o}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],s=e[4],a=e[5],o=e[6],l=e[7],c=e[8],u=c*s-a*l,d=a*o-c*r,h=l*r-s*o,p=t*u+n*d+i*h;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const f=1/p;return e[0]=u*f,e[1]=(i*l-c*n)*f,e[2]=(a*n-i*s)*f,e[3]=d*f,e[4]=(c*t-i*o)*f,e[5]=(i*r-a*t)*f,e[6]=h*f,e[7]=(n*o-l*t)*f,e[8]=(s*t-n*r)*f,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,i,r,s,a){const o=Math.cos(r),l=Math.sin(r);return this.set(n*o,n*l,-n*(o*s+l*a)+s+e,-i*l,i*o,-i*(-l*s+o*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(So.makeScale(e,t)),this}rotate(e){return this.premultiply(So.makeRotation(-e)),this}translate(e,t){return this.premultiply(So.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const So=new wo;function Mo(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}const Eo={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function To(e,t){return new Eo[e](t)}function Co(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}class Ao{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=i}static slerpFlat(e,t,n,i,r,s,a){let o=n[i+0],l=n[i+1],c=n[i+2],u=n[i+3];const d=r[s+0],h=r[s+1],p=r[s+2],f=r[s+3];if(0===a)return e[t+0]=o,e[t+1]=l,e[t+2]=c,void(e[t+3]=u);if(1===a)return e[t+0]=d,e[t+1]=h,e[t+2]=p,void(e[t+3]=f);if(u!==f||o!==d||l!==h||c!==p){let e=1-a;const t=o*d+l*h+c*p+u*f,n=t>=0?1:-1,i=1-t*t;if(i>Number.EPSILON){const r=Math.sqrt(i),s=Math.atan2(r,t*n);e=Math.sin(e*s)/r,a=Math.sin(a*s)/r}const r=a*n;if(o=o*e+d*r,l=l*e+h*r,c=c*e+p*r,u=u*e+f*r,e===1-a){const e=1/Math.sqrt(o*o+l*l+c*c+u*u);o*=e,l*=e,c*=e,u*=e}}e[t]=o,e[t+1]=l,e[t+2]=c,e[t+3]=u}static multiplyQuaternionsFlat(e,t,n,i,r,s){const a=n[i],o=n[i+1],l=n[i+2],c=n[i+3],u=r[s],d=r[s+1],h=r[s+2],p=r[s+3];return e[t]=a*p+c*u+o*h-l*d,e[t+1]=o*p+c*d+l*u-a*h,e[t+2]=l*p+c*h+a*d-o*u,e[t+3]=c*p-a*u-o*d-l*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const n=e._x,i=e._y,r=e._z,s=e._order,a=Math.cos,o=Math.sin,l=a(n/2),c=a(i/2),u=a(r/2),d=o(n/2),h=o(i/2),p=o(r/2);switch(s){case"XYZ":this._x=d*c*u+l*h*p,this._y=l*h*u-d*c*p,this._z=l*c*p+d*h*u,this._w=l*c*u-d*h*p;break;case"YXZ":this._x=d*c*u+l*h*p,this._y=l*h*u-d*c*p,this._z=l*c*p-d*h*u,this._w=l*c*u+d*h*p;break;case"ZXY":this._x=d*c*u-l*h*p,this._y=l*h*u+d*c*p,this._z=l*c*p+d*h*u,this._w=l*c*u-d*h*p;break;case"ZYX":this._x=d*c*u-l*h*p,this._y=l*h*u+d*c*p,this._z=l*c*p-d*h*u,this._w=l*c*u+d*h*p;break;case"YZX":this._x=d*c*u+l*h*p,this._y=l*h*u+d*c*p,this._z=l*c*p-d*h*u,this._w=l*c*u-d*h*p;break;case"XZY":this._x=d*c*u-l*h*p,this._y=l*h*u-d*c*p,this._z=l*c*p+d*h*u,this._w=l*c*u+d*h*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],i=t[4],r=t[8],s=t[1],a=t[5],o=t[9],l=t[2],c=t[6],u=t[10],d=n+a+u;if(d>0){const e=.5/Math.sqrt(d+1);this._w=.25/e,this._x=(c-o)*e,this._y=(r-l)*e,this._z=(s-i)*e}else if(n>a&&n>u){const e=2*Math.sqrt(1+n-a-u);this._w=(c-o)/e,this._x=.25*e,this._y=(i+s)/e,this._z=(r+l)/e}else if(a>u){const e=2*Math.sqrt(1+a-n-u);this._w=(r-l)/e,this._x=(i+s)/e,this._y=.25*e,this._z=(o+c)/e}else{const e=2*Math.sqrt(1+u-n-a);this._w=(s-i)/e,this._x=(r+l)/e,this._y=(o+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(ho(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const i=Math.min(1,t/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,i=e._y,r=e._z,s=e._w,a=t._x,o=t._y,l=t._z,c=t._w;return this._x=n*c+s*a+i*l-r*o,this._y=i*c+s*o+r*a-n*l,this._z=r*c+s*l+n*o-i*a,this._w=s*c-n*a-i*o-r*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,i=this._y,r=this._z,s=this._w;let a=s*e._w+n*e._x+i*e._y+r*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=n,this._y=i,this._z=r,this;const o=1-a*a;if(o<=Number.EPSILON){const e=1-t;return this._w=e*s+t*this._w,this._x=e*n+t*this._x,this._y=e*i+t*this._y,this._z=e*r+t*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(o),c=Math.atan2(l,a),u=Math.sin((1-t)*c)/l,d=Math.sin(t*c)/l;return this._w=s*u+this._w*d,this._x=n*u+this._x*d,this._y=i*u+this._y*d,this._z=r*u+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),i=2*Math.PI*Math.random(),r=2*Math.PI*Math.random();return this.set(t*Math.cos(i),n*Math.sin(r),n*Math.cos(r),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Po{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Po.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(ko.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(ko.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*i,this.y=r[1]*t+r[4]*n+r[7]*i,this.z=r[2]*t+r[5]*n+r[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,r=e.elements,s=1/(r[3]*t+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*i+r[12])*s,this.y=(r[1]*t+r[5]*n+r[9]*i+r[13])*s,this.z=(r[2]*t+r[6]*n+r[10]*i+r[14])*s,this}applyQuaternion(e){const t=this.x,n=this.y,i=this.z,r=e.x,s=e.y,a=e.z,o=e.w,l=o*t+s*i-a*n,c=o*n+a*t-r*i,u=o*i+r*n-s*t,d=-r*t-s*n-a*i;return this.x=l*o+d*-r+c*-a-u*-s,this.y=c*o+d*-s+u*-r-l*-a,this.z=u*o+d*-a+l*-s-c*-r,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*i,this.y=r[1]*t+r[5]*n+r[9]*i,this.z=r[2]*t+r[6]*n+r[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,i=e.y,r=e.z,s=t.x,a=t.y,o=t.z;return this.x=i*o-r*a,this.y=r*s-n*o,this.z=n*a-i*s,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return No.copy(this).projectOnVector(e),this.sub(No)}reflect(e){return this.sub(No.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(ho(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const No=new Po,ko=new Ao;function Ro(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function Io(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}const Lo=(new wo).fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),jo=(new wo).fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]),Do=new Po;const Oo={[Pa]:e=>e,[Aa]:e=>e.convertSRGBToLinear(),[Na]:function(e){return e.convertSRGBToLinear(),Do.set(e.r,e.g,e.b).applyMatrix3(jo),e.setRGB(Do.x,Do.y,Do.z)}},zo={[Pa]:e=>e,[Aa]:e=>e.convertLinearToSRGB(),[Na]:function(e){return Do.set(e.r,e.g,e.b).applyMatrix3(Lo),e.setRGB(Do.x,Do.y,Do.z).convertLinearToSRGB()}},Fo={enabled:!1,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(e){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!e},get workingColorSpace(){return Pa},set workingColorSpace(e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,t,n){if(!1===this.enabled||t===n||!t||!n)return e;const i=Oo[t],r=zo[n];if(void 0===i||void 0===r)throw new Error('Unsupported color space conversion, "'.concat(t,'" to "').concat(n,'".'));return r(i(e))},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}};let Uo;class Bo{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Uo&&(Uo=Co("canvas")),Uo.width=e.width,Uo.height=e.height;const n=Uo.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Uo}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){const t=Co("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const i=n.getImageData(0,0,e.width,e.height),r=i.data;for(let e=0;e<r.length;e++)r[e]=255*Ro(r[e]/255);return n.putImageData(i,0,0),t}if(e.data){const t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*Ro(t[e]/255)):t[e]=Ro(t[e]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class Vo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.isSource=!0,this.uuid=uo(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(null!==i){let e;if(Array.isArray(i)){e=[];for(let t=0,n=i.length;t<n;t++)i[t].isDataTexture?e.push(Ho(i[t].image)):e.push(Ho(i[t]))}else e=Ho(i);n.url=e}return t||(e.images[this.uuid]=n),n}}function Ho(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap?Bo.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Wo=0;class Go extends so{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Go.DEFAULT_IMAGE,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Go.DEFAULT_MAPPING,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Zr,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Zr,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:rs,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:os,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:_s,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:cs,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Go.DEFAULT_ANISOTROPY,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:_a;super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Wo++}),this.uuid=uo(),this.name="",this.source=new Vo(e),this.mipmaps=[],this.mapping=t,this.wrapS=n,this.wrapT=i,this.magFilter=r,this.minFilter=s,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=o,this.offset=new _o(0,0),this.repeat=new _o(1,1),this.center=new _o(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new wo,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){void 0===e&&(e=null),this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Wr)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Kr:e.x=e.x-Math.floor(e.x);break;case Zr:e.x=e.x<0?0:1;break;case Qr:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case Kr:e.y=e.y-Math.floor(e.y);break;case Zr:e.y=e.y<0?0:1;break;case Qr:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}}Go.DEFAULT_IMAGE=null,Go.DEFAULT_MAPPING=Wr,Go.DEFAULT_ANISOTROPY=1;class qo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;qo.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,r=this.w,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*i+s[12]*r,this.y=s[1]*t+s[5]*n+s[9]*i+s[13]*r,this.z=s[2]*t+s[6]*n+s[10]*i+s[14]*r,this.w=s[3]*t+s[7]*n+s[11]*i+s[15]*r,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,i,r;const s=.01,a=.1,o=e.elements,l=o[0],c=o[4],u=o[8],d=o[1],h=o[5],p=o[9],f=o[2],m=o[6],g=o[10];if(Math.abs(c-d)<s&&Math.abs(u-f)<s&&Math.abs(p-m)<s){if(Math.abs(c+d)<a&&Math.abs(u+f)<a&&Math.abs(p+m)<a&&Math.abs(l+h+g-3)<a)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,o=(h+1)/2,v=(g+1)/2,y=(c+d)/4,x=(u+f)/4,b=(p+m)/4;return e>o&&e>v?e<s?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(e),i=y/n,r=x/n):o>v?o<s?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(o),n=y/i,r=b/i):v<s?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(v),n=x/r,i=b/r),this.set(n,i,r,t),this}let v=Math.sqrt((m-p)*(m-p)+(u-f)*(u-f)+(d-c)*(d-c));return Math.abs(v)<.001&&(v=1),this.x=(m-p)/v,this.y=(u-f)/v,this.z=(d-c)/v,this.w=Math.acos((l+h+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Xo extends so{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new qo(0,0,e,t),this.scissorTest=!1,this.viewport=new qo(0,0,e,t);const i={width:e,height:t,depth:1};this.texture=new Go(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:rs,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null,this.samples=void 0!==n.samples?n.samples:0}setSize(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Vo(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Yo extends Go{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=$r,this.minFilter=$r,this.wrapR=Zr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Jo extends Xo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new Yo(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class Ko extends Go{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=$r,this.minFilter=$r,this.wrapR=Zr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Zo extends Xo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new Ko(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class Qo extends Xo{constructor(){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}),this.isWebGLMultipleRenderTargets=!0;const t=this.texture;this.texture=[];for(let n=0;n<e;n++)this.texture[n]=t.clone(),this.texture[n].isRenderTargetTexture=!0}setSize(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let i=0,r=this.texture.length;i<r;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class $o{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Po(1/0,1/0,1/0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Po(-1/0,-1/0,-1/0);this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,n=1/0,i=1/0,r=-1/0,s=-1/0,a=-1/0;for(let o=0,l=e.length;o<l;o+=3){const l=e[o],c=e[o+1],u=e[o+2];l<t&&(t=l),c<n&&(n=c),u<i&&(i=u),l>r&&(r=l),c>s&&(s=c),u>a&&(a=u)}return this.min.set(t,n,i),this.max.set(r,s,a),this}setFromBufferAttribute(e){let t=1/0,n=1/0,i=1/0,r=-1/0,s=-1/0,a=-1/0;for(let o=0,l=e.count;o<l;o++){const l=e.getX(o),c=e.getY(o),u=e.getZ(o);l<t&&(t=l),c<n&&(n=c),u<i&&(i=u),l>r&&(r=l),c>s&&(s=c),u>a&&(a=u)}return this.min.set(t,n,i),this.max.set(r,s,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=tl.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.updateWorldMatrix(!1,!1);const n=e.geometry;if(void 0!==n)if(t&&void 0!=n.attributes&&void 0!==n.attributes.position){const t=n.attributes.position;for(let n=0,i=t.count;n<i;n++)tl.fromBufferAttribute(t,n).applyMatrix4(e.matrixWorld),this.expandByPoint(tl)}else null===n.boundingBox&&n.computeBoundingBox(),nl.copy(n.boundingBox),nl.applyMatrix4(e.matrixWorld),this.union(nl);const i=e.children;for(let r=0,s=i.length;r<s;r++)this.expandByObject(i[r],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,tl),tl.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(cl),ul.subVectors(this.max,cl),il.subVectors(e.a,cl),rl.subVectors(e.b,cl),sl.subVectors(e.c,cl),al.subVectors(rl,il),ol.subVectors(sl,rl),ll.subVectors(il,sl);let t=[0,-al.z,al.y,0,-ol.z,ol.y,0,-ll.z,ll.y,al.z,0,-al.x,ol.z,0,-ol.x,ll.z,0,-ll.x,-al.y,al.x,0,-ol.y,ol.x,0,-ll.y,ll.x,0];return!!pl(t,il,rl,sl,ul)&&(t=[1,0,0,0,1,0,0,0,1],!!pl(t,il,rl,sl,ul)&&(dl.crossVectors(al,ol),t=[dl.x,dl.y,dl.z],pl(t,il,rl,sl,ul)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,tl).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(tl).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(el[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),el[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),el[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),el[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),el[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),el[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),el[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),el[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(el)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const el=[new Po,new Po,new Po,new Po,new Po,new Po,new Po,new Po],tl=new Po,nl=new $o,il=new Po,rl=new Po,sl=new Po,al=new Po,ol=new Po,ll=new Po,cl=new Po,ul=new Po,dl=new Po,hl=new Po;function pl(e,t,n,i,r){for(let s=0,a=e.length-3;s<=a;s+=3){hl.fromArray(e,s);const a=r.x*Math.abs(hl.x)+r.y*Math.abs(hl.y)+r.z*Math.abs(hl.z),o=t.dot(hl),l=n.dot(hl),c=i.dot(hl);if(Math.max(-Math.max(o,l,c),Math.min(o,l,c))>a)return!1}return!0}const fl=new $o,ml=new Po,gl=new Po;class vl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Po,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):fl.setFromPoints(e).getCenter(n);let i=0;for(let r=0,s=e.length;r<s;r++)i=Math.max(i,n.distanceToSquared(e[r]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;ml.subVectors(e,this.center);const t=ml.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.addScaledVector(ml,n/e),this.radius+=n}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(gl.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(ml.copy(e.center).add(gl)),this.expandByPoint(ml.copy(e.center).sub(gl))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const yl=new Po,xl=new Po,bl=new Po,_l=new Po,wl=new Po,Sl=new Po,Ml=new Po;class El{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Po,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Po(0,0,-1);this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,yl)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=yl.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(yl.copy(this.origin).addScaledVector(this.direction,t),yl.distanceToSquared(e))}distanceSqToSegment(e,t,n,i){xl.copy(e).add(t).multiplyScalar(.5),bl.copy(t).sub(e).normalize(),_l.copy(this.origin).sub(xl);const r=.5*e.distanceTo(t),s=-this.direction.dot(bl),a=_l.dot(this.direction),o=-_l.dot(bl),l=_l.lengthSq(),c=Math.abs(1-s*s);let u,d,h,p;if(c>0)if(u=s*o-a,d=s*a-o,p=r*c,u>=0)if(d>=-p)if(d<=p){const e=1/c;u*=e,d*=e,h=u*(u+s*d+2*a)+d*(s*u+d+2*o)+l}else d=r,u=Math.max(0,-(s*d+a)),h=-u*u+d*(d+2*o)+l;else d=-r,u=Math.max(0,-(s*d+a)),h=-u*u+d*(d+2*o)+l;else d<=-p?(u=Math.max(0,-(-s*r+a)),d=u>0?-r:Math.min(Math.max(-r,-o),r),h=-u*u+d*(d+2*o)+l):d<=p?(u=0,d=Math.min(Math.max(-r,-o),r),h=d*(d+2*o)+l):(u=Math.max(0,-(s*r+a)),d=u>0?r:Math.min(Math.max(-r,-o),r),h=-u*u+d*(d+2*o)+l);else d=s>0?-r:r,u=Math.max(0,-(s*d+a)),h=-u*u+d*(d+2*o)+l;return n&&n.copy(this.origin).addScaledVector(this.direction,u),i&&i.copy(xl).addScaledVector(bl,d),h}intersectSphere(e,t){yl.subVectors(e.center,this.origin);const n=yl.dot(this.direction),i=yl.dot(yl)-n*n,r=e.radius*e.radius;if(i>r)return null;const s=Math.sqrt(r-i),a=n-s,o=n+s;return o<0?null:a<0?this.at(o,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);if(0===t)return!0;return e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,i,r,s,a,o;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,d=this.origin;return l>=0?(n=(e.min.x-d.x)*l,i=(e.max.x-d.x)*l):(n=(e.max.x-d.x)*l,i=(e.min.x-d.x)*l),c>=0?(r=(e.min.y-d.y)*c,s=(e.max.y-d.y)*c):(r=(e.max.y-d.y)*c,s=(e.min.y-d.y)*c),n>s||r>i?null:((r>n||isNaN(n))&&(n=r),(s<i||isNaN(i))&&(i=s),u>=0?(a=(e.min.z-d.z)*u,o=(e.max.z-d.z)*u):(a=(e.max.z-d.z)*u,o=(e.min.z-d.z)*u),n>o||a>i?null:((a>n||n!==n)&&(n=a),(o<i||i!==i)&&(i=o),i<0?null:this.at(n>=0?n:i,t)))}intersectsBox(e){return null!==this.intersectBox(e,yl)}intersectTriangle(e,t,n,i,r){wl.subVectors(t,e),Sl.subVectors(n,e),Ml.crossVectors(wl,Sl);let s,a=this.direction.dot(Ml);if(a>0){if(i)return null;s=1}else{if(!(a<0))return null;s=-1,a=-a}_l.subVectors(this.origin,e);const o=s*this.direction.dot(Sl.crossVectors(_l,Sl));if(o<0)return null;const l=s*this.direction.dot(wl.cross(_l));if(l<0)return null;if(o+l>a)return null;const c=-s*_l.dot(Ml);return c<0?null:this.at(c/a,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Tl{constructor(){Tl.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,n,i,r,s,a,o,l,c,u,d,h,p,f,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=i,g[1]=r,g[5]=s,g[9]=a,g[13]=o,g[2]=l,g[6]=c,g[10]=u,g[14]=d,g[3]=h,g[7]=p,g[11]=f,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Tl).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,i=1/Cl.setFromMatrixColumn(e,0).length(),r=1/Cl.setFromMatrixColumn(e,1).length(),s=1/Cl.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=0,t[8]=n[8]*s,t[9]=n[9]*s,t[10]=n[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,i=e.y,r=e.z,s=Math.cos(n),a=Math.sin(n),o=Math.cos(i),l=Math.sin(i),c=Math.cos(r),u=Math.sin(r);if("XYZ"===e.order){const e=s*c,n=s*u,i=a*c,r=a*u;t[0]=o*c,t[4]=-o*u,t[8]=l,t[1]=n+i*l,t[5]=e-r*l,t[9]=-a*o,t[2]=r-e*l,t[6]=i+n*l,t[10]=s*o}else if("YXZ"===e.order){const e=o*c,n=o*u,i=l*c,r=l*u;t[0]=e+r*a,t[4]=i*a-n,t[8]=s*l,t[1]=s*u,t[5]=s*c,t[9]=-a,t[2]=n*a-i,t[6]=r+e*a,t[10]=s*o}else if("ZXY"===e.order){const e=o*c,n=o*u,i=l*c,r=l*u;t[0]=e-r*a,t[4]=-s*u,t[8]=i+n*a,t[1]=n+i*a,t[5]=s*c,t[9]=r-e*a,t[2]=-s*l,t[6]=a,t[10]=s*o}else if("ZYX"===e.order){const e=s*c,n=s*u,i=a*c,r=a*u;t[0]=o*c,t[4]=i*l-n,t[8]=e*l+r,t[1]=o*u,t[5]=r*l+e,t[9]=n*l-i,t[2]=-l,t[6]=a*o,t[10]=s*o}else if("YZX"===e.order){const e=s*o,n=s*l,i=a*o,r=a*l;t[0]=o*c,t[4]=r-e*u,t[8]=i*u+n,t[1]=u,t[5]=s*c,t[9]=-a*c,t[2]=-l*c,t[6]=n*u+i,t[10]=e-r*u}else if("XZY"===e.order){const e=s*o,n=s*l,i=a*o,r=a*l;t[0]=o*c,t[4]=-u,t[8]=l*c,t[1]=e*u+r,t[5]=s*c,t[9]=n*u-i,t[2]=i*u-n,t[6]=a*c,t[10]=r*u+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Pl,e,Nl)}lookAt(e,t,n){const i=this.elements;return Il.subVectors(e,t),0===Il.lengthSq()&&(Il.z=1),Il.normalize(),kl.crossVectors(n,Il),0===kl.lengthSq()&&(1===Math.abs(n.z)?Il.x+=1e-4:Il.z+=1e-4,Il.normalize(),kl.crossVectors(n,Il)),kl.normalize(),Rl.crossVectors(Il,kl),i[0]=kl.x,i[4]=Rl.x,i[8]=Il.x,i[1]=kl.y,i[5]=Rl.y,i[9]=Il.y,i[2]=kl.z,i[6]=Rl.z,i[10]=Il.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,r=this.elements,s=n[0],a=n[4],o=n[8],l=n[12],c=n[1],u=n[5],d=n[9],h=n[13],p=n[2],f=n[6],m=n[10],g=n[14],v=n[3],y=n[7],x=n[11],b=n[15],_=i[0],w=i[4],S=i[8],M=i[12],E=i[1],T=i[5],C=i[9],A=i[13],P=i[2],N=i[6],k=i[10],R=i[14],I=i[3],L=i[7],j=i[11],D=i[15];return r[0]=s*_+a*E+o*P+l*I,r[4]=s*w+a*T+o*N+l*L,r[8]=s*S+a*C+o*k+l*j,r[12]=s*M+a*A+o*R+l*D,r[1]=c*_+u*E+d*P+h*I,r[5]=c*w+u*T+d*N+h*L,r[9]=c*S+u*C+d*k+h*j,r[13]=c*M+u*A+d*R+h*D,r[2]=p*_+f*E+m*P+g*I,r[6]=p*w+f*T+m*N+g*L,r[10]=p*S+f*C+m*k+g*j,r[14]=p*M+f*A+m*R+g*D,r[3]=v*_+y*E+x*P+b*I,r[7]=v*w+y*T+x*N+b*L,r[11]=v*S+y*C+x*k+b*j,r[15]=v*M+y*A+x*R+b*D,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],i=e[8],r=e[12],s=e[1],a=e[5],o=e[9],l=e[13],c=e[2],u=e[6],d=e[10],h=e[14];return e[3]*(+r*o*u-i*l*u-r*a*d+n*l*d+i*a*h-n*o*h)+e[7]*(+t*o*h-t*l*d+r*s*d-i*s*h+i*l*c-r*o*c)+e[11]*(+t*l*u-t*a*h-r*s*u+n*s*h+r*a*c-n*l*c)+e[15]*(-i*a*c-t*o*u+t*a*d+i*s*u-n*s*d+n*o*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],s=e[4],a=e[5],o=e[6],l=e[7],c=e[8],u=e[9],d=e[10],h=e[11],p=e[12],f=e[13],m=e[14],g=e[15],v=u*m*l-f*d*l+f*o*h-a*m*h-u*o*g+a*d*g,y=p*d*l-c*m*l-p*o*h+s*m*h+c*o*g-s*d*g,x=c*f*l-p*u*l+p*a*h-s*f*h-c*a*g+s*u*g,b=p*u*o-c*f*o-p*a*d+s*f*d+c*a*m-s*u*m,_=t*v+n*y+i*x+r*b;if(0===_)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/_;return e[0]=v*w,e[1]=(f*d*r-u*m*r-f*i*h+n*m*h+u*i*g-n*d*g)*w,e[2]=(a*m*r-f*o*r+f*i*l-n*m*l-a*i*g+n*o*g)*w,e[3]=(u*o*r-a*d*r-u*i*l+n*d*l+a*i*h-n*o*h)*w,e[4]=y*w,e[5]=(c*m*r-p*d*r+p*i*h-t*m*h-c*i*g+t*d*g)*w,e[6]=(p*o*r-s*m*r-p*i*l+t*m*l+s*i*g-t*o*g)*w,e[7]=(s*d*r-c*o*r+c*i*l-t*d*l-s*i*h+t*o*h)*w,e[8]=x*w,e[9]=(p*u*r-c*f*r-p*n*h+t*f*h+c*n*g-t*u*g)*w,e[10]=(s*f*r-p*a*r+p*n*l-t*f*l-s*n*g+t*a*g)*w,e[11]=(c*a*r-s*u*r-c*n*l+t*u*l+s*n*h-t*a*h)*w,e[12]=b*w,e[13]=(c*f*i-p*u*i+p*n*d-t*f*d-c*n*m+t*u*m)*w,e[14]=(p*a*i-s*f*i-p*n*o+t*f*o+s*n*m-t*a*m)*w,e[15]=(s*u*i-c*a*i+c*n*o-t*u*o-s*n*d+t*a*d)*w,this}scale(e){const t=this.elements,n=e.x,i=e.y,r=e.z;return t[0]*=n,t[4]*=i,t[8]*=r,t[1]*=n,t[5]*=i,t[9]*=r,t[2]*=n,t[6]*=i,t[10]*=r,t[3]*=n,t[7]*=i,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),i=Math.sin(t),r=1-n,s=e.x,a=e.y,o=e.z,l=r*s,c=r*a;return this.set(l*s+n,l*a-i*o,l*o+i*a,0,l*a+i*o,c*a+n,c*o-i*s,0,l*o-i*a,c*o+i*s,r*o*o+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,i,r,s){return this.set(1,n,r,0,e,1,s,0,t,i,1,0,0,0,0,1),this}compose(e,t,n){const i=this.elements,r=t._x,s=t._y,a=t._z,o=t._w,l=r+r,c=s+s,u=a+a,d=r*l,h=r*c,p=r*u,f=s*c,m=s*u,g=a*u,v=o*l,y=o*c,x=o*u,b=n.x,_=n.y,w=n.z;return i[0]=(1-(f+g))*b,i[1]=(h+x)*b,i[2]=(p-y)*b,i[3]=0,i[4]=(h-x)*_,i[5]=(1-(d+g))*_,i[6]=(m+v)*_,i[7]=0,i[8]=(p+y)*w,i[9]=(m-v)*w,i[10]=(1-(d+f))*w,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,n){const i=this.elements;let r=Cl.set(i[0],i[1],i[2]).length();const s=Cl.set(i[4],i[5],i[6]).length(),a=Cl.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),e.x=i[12],e.y=i[13],e.z=i[14],Al.copy(this);const o=1/r,l=1/s,c=1/a;return Al.elements[0]*=o,Al.elements[1]*=o,Al.elements[2]*=o,Al.elements[4]*=l,Al.elements[5]*=l,Al.elements[6]*=l,Al.elements[8]*=c,Al.elements[9]*=c,Al.elements[10]*=c,t.setFromRotationMatrix(Al),n.x=r,n.y=s,n.z=a,this}makePerspective(e,t,n,i,r,s){const a=this.elements,o=2*r/(t-e),l=2*r/(n-i),c=(t+e)/(t-e),u=(n+i)/(n-i),d=-(s+r)/(s-r),h=-2*s*r/(s-r);return a[0]=o,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=l,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=d,a[14]=h,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,n,i,r,s){const a=this.elements,o=1/(t-e),l=1/(n-i),c=1/(s-r),u=(t+e)*o,d=(n+i)*l,h=(s+r)*c;return a[0]=2*o,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-d,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-h,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const Cl=new Po,Al=new Tl,Pl=new Po(0,0,0),Nl=new Po(1,1,1),kl=new Po,Rl=new Po,Il=new Po,Ll=new Tl,jl=new Ao;class Dl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Dl.DEFAULT_ORDER;this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=e.elements,r=i[0],s=i[4],a=i[8],o=i[1],l=i[5],c=i[9],u=i[2],d=i[6],h=i[10];switch(t){case"XYZ":this._y=Math.asin(ho(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,h),this._z=Math.atan2(-s,r)):(this._x=Math.atan2(d,l),this._z=0);break;case"YXZ":this._x=Math.asin(-ho(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,h),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-u,r),this._z=0);break;case"ZXY":this._x=Math.asin(ho(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-u,h),this._z=Math.atan2(-s,l)):(this._y=0,this._z=Math.atan2(o,r));break;case"ZYX":this._y=Math.asin(-ho(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(d,h),this._z=Math.atan2(o,r)):(this._x=0,this._z=Math.atan2(-s,l));break;case"YZX":this._z=Math.asin(ho(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,r)):(this._x=0,this._y=Math.atan2(a,h));break;case"XZY":this._z=Math.asin(-ho(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(d,l),this._y=Math.atan2(a,r)):(this._x=Math.atan2(-c,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return Ll.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Ll,t,n)}setFromVector3(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,t)}reorder(e){return jl.setFromEuler(this),this.setFromQuaternion(jl,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Dl.DEFAULT_ORDER="XYZ";class Ol{constructor(){this.mask=1}set(e){this.mask=1<<e>>>0}enable(e){this.mask|=1<<e}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e}disable(e){this.mask&=~(1<<e)}disableAll(){this.mask=0}test(e){return 0!==(this.mask&e.mask)}isEnabled(e){return 0!==(this.mask&1<<e)}}let zl=0;const Fl=new Po,Ul=new Ao,Bl=new Tl,Vl=new Po,Hl=new Po,Wl=new Po,Gl=new Ao,ql=new Po(1,0,0),Xl=new Po(0,1,0),Yl=new Po(0,0,1),Jl={type:"added"},Kl={type:"removed"};class Zl extends so{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:zl++}),this.uuid=uo(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Zl.DEFAULT_UP.clone();const e=new Po,t=new Dl,n=new Ao,i=new Po(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Tl},normalMatrix:{value:new wo}}),this.matrix=new Tl,this.matrixWorld=new Tl,this.matrixAutoUpdate=Zl.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Zl.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Ol,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Ul.setFromAxisAngle(e,t),this.quaternion.multiply(Ul),this}rotateOnWorldAxis(e,t){return Ul.setFromAxisAngle(e,t),this.quaternion.premultiply(Ul),this}rotateX(e){return this.rotateOnAxis(ql,e)}rotateY(e){return this.rotateOnAxis(Xl,e)}rotateZ(e){return this.rotateOnAxis(Yl,e)}translateOnAxis(e,t){return Fl.copy(e).applyQuaternion(this.quaternion),this.position.add(Fl.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(ql,e)}translateY(e){return this.translateOnAxis(Xl,e)}translateZ(e){return this.translateOnAxis(Yl,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Bl.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?Vl.copy(e):Vl.set(e,t,n);const i=this.parent;this.updateWorldMatrix(!0,!1),Hl.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Bl.lookAt(Hl,Vl,this.up):Bl.lookAt(Vl,Hl,this.up),this.quaternion.setFromRotationMatrix(Bl),i&&(Bl.extractRotation(i.matrixWorld),Ul.setFromRotationMatrix(Bl),this.quaternion.premultiply(Ul.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Jl)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Kl)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(Kl)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Bl.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Bl.multiply(e.parent.matrixWorld)),e.applyMatrix4(Bl),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){const i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}}getObjectsByProperty(e,t){let n=[];this[e]===t&&n.push(this);for(let i=0,r=this.children.length;i<r;i++){const r=this.children[i].getObjectsByProperty(e,t);r.length>0&&(n=n.concat(r))}return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Hl,e,Wl),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Hl,Gl,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,i=t.length;n<i;n++){const i=t[n];!0!==i.matrixWorldAutoUpdate&&!0!==e||i.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++){const n=e[t];!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=void 0===e||"string"===typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};function r(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(i.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const i=n[t];r(e.shapes,i)}else r(e.shapes,n)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,i=this.material.length;n<i;n++)t.push(r(e.materials,this.material[n]));i.material=t}else i.material=r(e.materials,this.material);if(this.children.length>0){i.children=[];for(let t=0;t<this.children.length;t++)i.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];i.animations.push(r(e.animations,n))}}if(t){const t=s(e.geometries),i=s(e.materials),r=s(e.textures),a=s(e.images),o=s(e.shapes),l=s(e.skeletons),c=s(e.animations),u=s(e.nodes);t.length>0&&(n.geometries=t),i.length>0&&(n.materials=i),r.length>0&&(n.textures=r),a.length>0&&(n.images=a),o.length>0&&(n.shapes=o),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c),u.length>0&&(n.nodes=u)}return n.object=i,n;function s(e){const t=[];for(const n in e){const i=e[n];delete i.metadata,t.push(i)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let n=0;n<e.children.length;n++){const t=e.children[n];this.add(t.clone())}return this}}Zl.DEFAULT_UP=new Po(0,1,0),Zl.DEFAULT_MATRIX_AUTO_UPDATE=!0,Zl.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Ql=new Po,$l=new Po,ec=new Po,tc=new Po,nc=new Po,ic=new Po,rc=new Po,sc=new Po,ac=new Po,oc=new Po;class lc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Po,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Po,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Po;this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,i){i.subVectors(n,t),Ql.subVectors(e,t),i.cross(Ql);const r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}static getBarycoord(e,t,n,i,r){Ql.subVectors(i,t),$l.subVectors(n,t),ec.subVectors(e,t);const s=Ql.dot(Ql),a=Ql.dot($l),o=Ql.dot(ec),l=$l.dot($l),c=$l.dot(ec),u=s*l-a*a;if(0===u)return r.set(-2,-1,-1);const d=1/u,h=(l*o-a*c)*d,p=(s*c-a*o)*d;return r.set(1-h-p,p,h)}static containsPoint(e,t,n,i){return this.getBarycoord(e,t,n,i,tc),tc.x>=0&&tc.y>=0&&tc.x+tc.y<=1}static getUV(e,t,n,i,r,s,a,o){return this.getBarycoord(e,t,n,i,tc),o.set(0,0),o.addScaledVector(r,tc.x),o.addScaledVector(s,tc.y),o.addScaledVector(a,tc.z),o}static isFrontFacing(e,t,n,i){return Ql.subVectors(n,t),$l.subVectors(e,t),Ql.cross($l).dot(i)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,n,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ql.subVectors(this.c,this.b),$l.subVectors(this.a,this.b),.5*Ql.cross($l).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return lc.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return lc.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,i,r){return lc.getUV(e,this.a,this.b,this.c,t,n,i,r)}containsPoint(e){return lc.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return lc.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,i=this.b,r=this.c;let s,a;nc.subVectors(i,n),ic.subVectors(r,n),sc.subVectors(e,n);const o=nc.dot(sc),l=ic.dot(sc);if(o<=0&&l<=0)return t.copy(n);ac.subVectors(e,i);const c=nc.dot(ac),u=ic.dot(ac);if(c>=0&&u<=c)return t.copy(i);const d=o*u-c*l;if(d<=0&&o>=0&&c<=0)return s=o/(o-c),t.copy(n).addScaledVector(nc,s);oc.subVectors(e,r);const h=nc.dot(oc),p=ic.dot(oc);if(p>=0&&h<=p)return t.copy(r);const f=h*l-o*p;if(f<=0&&l>=0&&p<=0)return a=l/(l-p),t.copy(n).addScaledVector(ic,a);const m=c*p-h*u;if(m<=0&&u-c>=0&&h-p>=0)return rc.subVectors(r,i),a=(u-c)/(u-c+(h-p)),t.copy(i).addScaledVector(rc,a);const g=1/(m+f+d);return s=f*g,a=d*g,t.copy(n).addScaledVector(nc,s).addScaledVector(ic,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let cc=0;class uc extends so{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:cc++}),this.uuid=uo(),this.name="",this.type="Material",this.blending=ar,this.side=tr,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=br,this.blendDst=_r,this.blendEquation=dr,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Nr,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=qa,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Ra,this.stencilZFail=Ra,this.stencilZPass=Ra,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!==e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}const i=this[t];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(e){const t=[];for(const n in e){const i=e[n];delete i.metadata,t.push(i)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==ar&&(n.blending=this.blending),this.side!==tr&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.forceSinglePass&&(n.forceSinglePass=this.forceSinglePass),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){const t=i(e.textures),r=i(e.images);t.length>0&&(n.textures=t),r.length>0&&(n.images=r)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let i=0;i!==e;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}const dc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},hc={h:0,s:0,l:0},pc={h:0,s:0,l:0};function fc(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}class mc{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):"number"===typeof e?this.setHex(e):"string"===typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Aa;return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,Fo.toWorkingColorSpace(this,t),this}setRGB(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Fo.workingColorSpace;return this.r=e,this.g=t,this.b=n,Fo.toWorkingColorSpace(this,i),this}setHSL(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Fo.workingColorSpace;if(e=po(e,1),t=ho(t,0,1),n=ho(n,0,1),0===t)this.r=this.g=this.b=n;else{const i=n<=.5?n*(1+t):n+t-n*t,r=2*n-i;this.r=fc(r,i,e+1/3),this.g=fc(r,i,e),this.b=fc(r,i,e-1/3)}return Fo.toWorkingColorSpace(this,i),this}setStyle(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Aa;function i(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}if(t=/^(\w+)\(([^\)]*)\)/.exec(e)){let r;const s=t[1],a=t[2];switch(s){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,Fo.toWorkingColorSpace(this,n),i(r[4]),this;if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,Fo.toWorkingColorSpace(this,n),i(r[4]),this;break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){const e=parseFloat(r[1])/360,t=parseFloat(r[2])/100,s=parseFloat(r[3])/100;return i(r[4]),this.setHSL(e,t,s,n)}break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(t=/^\#([A-Fa-f\d]+)$/.exec(e)){const i=t[1],r=i.length;if(3===r)return this.r=parseInt(i.charAt(0)+i.charAt(0),16)/255,this.g=parseInt(i.charAt(1)+i.charAt(1),16)/255,this.b=parseInt(i.charAt(2)+i.charAt(2),16)/255,Fo.toWorkingColorSpace(this,n),this;if(6===r)return this.r=parseInt(i.charAt(0)+i.charAt(1),16)/255,this.g=parseInt(i.charAt(2)+i.charAt(3),16)/255,this.b=parseInt(i.charAt(4)+i.charAt(5),16)/255,Fo.toWorkingColorSpace(this,n),this;console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Aa;const n=dc[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Ro(e.r),this.g=Ro(e.g),this.b=Ro(e.b),this}copyLinearToSRGB(e){return this.r=Io(e.r),this.g=Io(e.g),this.b=Io(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Aa;return Fo.fromWorkingColorSpace(gc.copy(this),e),ho(255*gc.r,0,255)<<16^ho(255*gc.g,0,255)<<8^ho(255*gc.b,0,255)}getHexString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Aa;return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Fo.workingColorSpace;Fo.fromWorkingColorSpace(gc.copy(this),t);const n=gc.r,i=gc.g,r=gc.b,s=Math.max(n,i,r),a=Math.min(n,i,r);let o,l;const c=(a+s)/2;if(a===s)o=0,l=0;else{const e=s-a;switch(l=c<=.5?e/(s+a):e/(2-s-a),s){case n:o=(i-r)/e+(i<r?6:0);break;case i:o=(r-n)/e+2;break;case r:o=(n-i)/e+4}o/=6}return e.h=o,e.s=l,e.l=c,e}getRGB(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Fo.workingColorSpace;return Fo.fromWorkingColorSpace(gc.copy(this),t),e.r=gc.r,e.g=gc.g,e.b=gc.b,e}getStyle(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Aa;Fo.fromWorkingColorSpace(gc.copy(this),e);const t=gc.r,n=gc.g,i=gc.b;return e!==Aa?"color(".concat(e," ").concat(t.toFixed(3)," ").concat(n.toFixed(3)," ").concat(i.toFixed(3),")"):"rgb(".concat(255*t|0,",").concat(255*n|0,",").concat(255*i|0,")")}offsetHSL(e,t,n){return this.getHSL(hc),hc.h+=e,hc.s+=t,hc.l+=n,this.setHSL(hc.h,hc.s,hc.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(hc),e.getHSL(pc);const n=fo(hc.h,pc.h,t),i=fo(hc.s,pc.s,t),r=fo(hc.l,pc.l,t);return this.setHSL(n,i,r),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const gc=new mc;mc.NAMES=dc;class vc extends uc{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new mc(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=jr,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const yc=new Po,xc=new _o;class bc{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=n,this.usage=Xa,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[e+i]=t.array[n+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)xc.fromBufferAttribute(this,t),xc.applyMatrix3(e),this.setXY(t,xc.x,xc.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)yc.fromBufferAttribute(this,t),yc.applyMatrix3(e),this.setXYZ(t,yc.x,yc.y,yc.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)yc.fromBufferAttribute(this,t),yc.applyMatrix4(e),this.setXYZ(t,yc.x,yc.y,yc.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)yc.fromBufferAttribute(this,t),yc.applyNormalMatrix(e),this.setXYZ(t,yc.x,yc.y,yc.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)yc.fromBufferAttribute(this,t),yc.transformDirection(e),this.setXYZ(t,yc.x,yc.y,yc.z);return this}set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=yo(t,this.array)),t}setX(e,t){return this.normalized&&(t=xo(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=yo(t,this.array)),t}setY(e,t){return this.normalized&&(t=xo(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=yo(t,this.array)),t}setZ(e,t){return this.normalized&&(t=xo(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=yo(t,this.array)),t}setW(e,t){return this.normalized&&(t=xo(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=xo(t,this.array),n=xo(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=xo(t,this.array),n=xo(n,this.array),i=xo(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this}setXYZW(e,t,n,i,r){return e*=this.itemSize,this.normalized&&(t=xo(t,this.array),n=xo(n,this.array),i=xo(i,this.array),r=xo(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==Xa&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class _c extends bc{constructor(e,t,n){super(new Int8Array(e),t,n)}}class wc extends bc{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class Sc extends bc{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class Mc extends bc{constructor(e,t,n){super(new Int16Array(e),t,n)}}class Ec extends bc{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class Tc extends bc{constructor(e,t,n){super(new Int32Array(e),t,n)}}class Cc extends bc{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class Ac extends bc{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}}class Pc extends bc{constructor(e,t,n){super(new Float32Array(e),t,n)}}class Nc extends bc{constructor(e,t,n){super(new Float64Array(e),t,n)}}let kc=0;const Rc=new Tl,Ic=new Zl,Lc=new Po,jc=new $o,Dc=new $o,Oc=new Po;class zc extends so{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:kc++}),this.uuid=uo(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Mo(e)?Cc:Ec)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new wo).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Rc.makeRotationFromQuaternion(e),this.applyMatrix4(Rc),this}rotateX(e){return Rc.makeRotationX(e),this.applyMatrix4(Rc),this}rotateY(e){return Rc.makeRotationY(e),this.applyMatrix4(Rc),this}rotateZ(e){return Rc.makeRotationZ(e),this.applyMatrix4(Rc),this}translate(e,t,n){return Rc.makeTranslation(e,t,n),this.applyMatrix4(Rc),this}scale(e,t,n){return Rc.makeScale(e,t,n),this.applyMatrix4(Rc),this}lookAt(e){return Ic.lookAt(e),Ic.updateMatrix(),this.applyMatrix4(Ic.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Lc).negate(),this.translate(Lc.x,Lc.y,Lc.z),this}setFromPoints(e){const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n];t.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new Pc(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new $o);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Po(-1/0,-1/0,-1/0),new Po(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,i=t.length;n<i;n++){const e=t[n];jc.setFromBufferAttribute(e),this.morphTargetsRelative?(Oc.addVectors(this.boundingBox.min,jc.min),this.boundingBox.expandByPoint(Oc),Oc.addVectors(this.boundingBox.max,jc.max),this.boundingBox.expandByPoint(Oc)):(this.boundingBox.expandByPoint(jc.min),this.boundingBox.expandByPoint(jc.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new vl);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Po,1/0);if(e){const n=this.boundingSphere.center;if(jc.setFromBufferAttribute(e),t)for(let e=0,r=t.length;e<r;e++){const n=t[e];Dc.setFromBufferAttribute(n),this.morphTargetsRelative?(Oc.addVectors(jc.min,Dc.min),jc.expandByPoint(Oc),Oc.addVectors(jc.max,Dc.max),jc.expandByPoint(Oc)):(jc.expandByPoint(Dc.min),jc.expandByPoint(Dc.max))}jc.getCenter(n);let i=0;for(let t=0,r=e.count;t<r;t++)Oc.fromBufferAttribute(e,t),i=Math.max(i,n.distanceToSquared(Oc));if(t)for(let r=0,s=t.length;r<s;r++){const s=t[r],a=this.morphTargetsRelative;for(let t=0,r=s.count;t<r;t++)Oc.fromBufferAttribute(s,t),a&&(Lc.fromBufferAttribute(e,t),Oc.add(Lc)),i=Math.max(i,n.distanceToSquared(Oc))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=e.array,i=t.position.array,r=t.normal.array,s=t.uv.array,a=i.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new bc(new Float32Array(4*a),4));const o=this.getAttribute("tangent").array,l=[],c=[];for(let E=0;E<a;E++)l[E]=new Po,c[E]=new Po;const u=new Po,d=new Po,h=new Po,p=new _o,f=new _o,m=new _o,g=new Po,v=new Po;function y(e,t,n){u.fromArray(i,3*e),d.fromArray(i,3*t),h.fromArray(i,3*n),p.fromArray(s,2*e),f.fromArray(s,2*t),m.fromArray(s,2*n),d.sub(u),h.sub(u),f.sub(p),m.sub(p);const r=1/(f.x*m.y-m.x*f.y);isFinite(r)&&(g.copy(d).multiplyScalar(m.y).addScaledVector(h,-f.y).multiplyScalar(r),v.copy(h).multiplyScalar(f.x).addScaledVector(d,-m.x).multiplyScalar(r),l[e].add(g),l[t].add(g),l[n].add(g),c[e].add(v),c[t].add(v),c[n].add(v))}let x=this.groups;0===x.length&&(x=[{start:0,count:n.length}]);for(let E=0,T=x.length;E<T;++E){const e=x[E],t=e.start;for(let i=t,r=t+e.count;i<r;i+=3)y(n[i+0],n[i+1],n[i+2])}const b=new Po,_=new Po,w=new Po,S=new Po;function M(e){w.fromArray(r,3*e),S.copy(w);const t=l[e];b.copy(t),b.sub(w.multiplyScalar(w.dot(t))).normalize(),_.crossVectors(S,t);const n=_.dot(c[e])<0?-1:1;o[4*e]=b.x,o[4*e+1]=b.y,o[4*e+2]=b.z,o[4*e+3]=n}for(let E=0,T=x.length;E<T;++E){const e=x[E],t=e.start;for(let i=t,r=t+e.count;i<r;i+=3)M(n[i+0]),M(n[i+1]),M(n[i+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new bc(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const i=new Po,r=new Po,s=new Po,a=new Po,o=new Po,l=new Po,c=new Po,u=new Po;if(e)for(let d=0,h=e.count;d<h;d+=3){const h=e.getX(d+0),p=e.getX(d+1),f=e.getX(d+2);i.fromBufferAttribute(t,h),r.fromBufferAttribute(t,p),s.fromBufferAttribute(t,f),c.subVectors(s,r),u.subVectors(i,r),c.cross(u),a.fromBufferAttribute(n,h),o.fromBufferAttribute(n,p),l.fromBufferAttribute(n,f),a.add(c),o.add(c),l.add(c),n.setXYZ(h,a.x,a.y,a.z),n.setXYZ(p,o.x,o.y,o.z),n.setXYZ(f,l.x,l.y,l.z)}else for(let e=0,d=t.count;e<d;e+=3)i.fromBufferAttribute(t,e+0),r.fromBufferAttribute(t,e+1),s.fromBufferAttribute(t,e+2),c.subVectors(s,r),u.subVectors(i,r),c.cross(u),n.setXYZ(e+0,c.x,c.y,c.z),n.setXYZ(e+1,c.x,c.y,c.z),n.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Oc.fromBufferAttribute(e,t),Oc.normalize(),e.setXYZ(t,Oc.x,Oc.y,Oc.z)}toNonIndexed(){function e(e,t){const n=e.array,i=e.itemSize,r=e.normalized,s=new n.constructor(t.length*i);let a=0,o=0;for(let l=0,c=t.length;l<c;l++){a=e.isInterleavedBufferAttribute?t[l]*e.data.stride+e.offset:t[l]*i;for(let e=0;e<i;e++)s[o++]=n[a++]}return new bc(s,i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new zc,n=this.index.array,i=this.attributes;for(const a in i){const r=e(i[a],n);t.setAttribute(a,r)}const r=this.morphAttributes;for(const a in r){const i=[],s=r[a];for(let t=0,r=s.length;t<r;t++){const r=e(s[t],n);i.push(r)}t.morphAttributes[a]=i}t.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let a=0,o=s.length;a<o;a++){const e=s[a];t.addGroup(e.start,e.count,e.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const o in n){const t=n[o];e.data.attributes[o]=t.toJSON(e.data)}const i={};let r=!1;for(const o in this.morphAttributes){const t=this.morphAttributes[o],n=[];for(let i=0,r=t.length;i<r;i++){const r=t[i];n.push(r.toJSON(e.data))}n.length>0&&(i[o]=n,r=!0)}r&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const i=e.attributes;for(const l in i){const e=i[l];this.setAttribute(l,e.clone(t))}const r=e.morphAttributes;for(const l in r){const e=[],n=r[l];for(let i=0,r=n.length;i<r;i++)e.push(n[i].clone(t));this.morphAttributes[l]=e}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let l=0,c=s.length;l<c;l++){const e=s[l];this.addGroup(e.start,e.count,e.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const o=e.boundingSphere;return null!==o&&(this.boundingSphere=o.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Fc=new Tl,Uc=new El,Bc=new vl,Vc=new Po,Hc=new Po,Wc=new Po,Gc=new Po,qc=new Po,Xc=new Po,Yc=new _o,Jc=new _o,Kc=new _o,Zc=new Po,Qc=new Po;class $c extends Zl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new zc,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new vc;super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}getVertexPosition(e,t){const n=this.geometry,i=n.attributes.position,r=n.morphAttributes.position,s=n.morphTargetsRelative;t.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(r&&a){Xc.set(0,0,0);for(let n=0,i=r.length;n<i;n++){const i=a[n],o=r[n];0!==i&&(qc.fromBufferAttribute(o,e),s?Xc.addScaledVector(qc,i):Xc.addScaledVector(qc.sub(t),i))}t.add(Xc)}return this.isSkinnedMesh&&this.boneTransform(e,t),t}raycast(e,t){const n=this.geometry,i=this.material,r=this.matrixWorld;if(void 0===i)return;if(null===n.boundingSphere&&n.computeBoundingSphere(),Bc.copy(n.boundingSphere),Bc.applyMatrix4(r),Uc.copy(e.ray).recast(e.near),!1===Bc.containsPoint(Uc.origin)){if(null===Uc.intersectSphere(Bc,Vc))return;if(Uc.origin.distanceToSquared(Vc)>(e.far-e.near)**2)return}if(Fc.copy(r).invert(),Uc.copy(e.ray).applyMatrix4(Fc),null!==n.boundingBox&&!1===Uc.intersectsBox(n.boundingBox))return;let s;const a=n.index,o=n.attributes.position,l=n.attributes.uv,c=n.attributes.uv2,u=n.groups,d=n.drawRange;if(null!==a)if(Array.isArray(i))for(let h=0,p=u.length;h<p;h++){const n=u[h],r=i[n.materialIndex];for(let i=Math.max(n.start,d.start),o=Math.min(a.count,Math.min(n.start+n.count,d.start+d.count));i<o;i+=3){const o=a.getX(i),u=a.getX(i+1),d=a.getX(i+2);s=eu(this,r,e,Uc,l,c,o,u,d),s&&(s.faceIndex=Math.floor(i/3),s.face.materialIndex=n.materialIndex,t.push(s))}}else{for(let n=Math.max(0,d.start),r=Math.min(a.count,d.start+d.count);n<r;n+=3){const r=a.getX(n),o=a.getX(n+1),u=a.getX(n+2);s=eu(this,i,e,Uc,l,c,r,o,u),s&&(s.faceIndex=Math.floor(n/3),t.push(s))}}else if(void 0!==o)if(Array.isArray(i))for(let h=0,p=u.length;h<p;h++){const n=u[h],r=i[n.materialIndex];for(let i=Math.max(n.start,d.start),a=Math.min(o.count,Math.min(n.start+n.count,d.start+d.count));i<a;i+=3){s=eu(this,r,e,Uc,l,c,i,i+1,i+2),s&&(s.faceIndex=Math.floor(i/3),s.face.materialIndex=n.materialIndex,t.push(s))}}else{for(let n=Math.max(0,d.start),r=Math.min(o.count,d.start+d.count);n<r;n+=3){s=eu(this,i,e,Uc,l,c,n,n+1,n+2),s&&(s.faceIndex=Math.floor(n/3),t.push(s))}}}}function eu(e,t,n,i,r,s,a,o,l){e.getVertexPosition(a,Hc),e.getVertexPosition(o,Wc),e.getVertexPosition(l,Gc);const c=function(e,t,n,i,r,s,a,o){let l;if(l=t.side===nr?i.intersectTriangle(a,s,r,!0,o):i.intersectTriangle(r,s,a,t.side===tr,o),null===l)return null;Qc.copy(o),Qc.applyMatrix4(e.matrixWorld);const c=n.ray.origin.distanceTo(Qc);return c<n.near||c>n.far?null:{distance:c,point:Qc.clone(),object:e}}(e,t,n,i,Hc,Wc,Gc,Zc);if(c){r&&(Yc.fromBufferAttribute(r,a),Jc.fromBufferAttribute(r,o),Kc.fromBufferAttribute(r,l),c.uv=lc.getUV(Zc,Hc,Wc,Gc,Yc,Jc,Kc,new _o)),s&&(Yc.fromBufferAttribute(s,a),Jc.fromBufferAttribute(s,o),Kc.fromBufferAttribute(s,l),c.uv2=lc.getUV(Zc,Hc,Wc,Gc,Yc,Jc,Kc,new _o));const e={a:a,b:o,c:l,normal:new Po,materialIndex:0};lc.getNormal(Hc,Wc,Gc,e.normal),c.face=e}return c}class tu extends zc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:s};const a=this;i=Math.floor(i),r=Math.floor(r),s=Math.floor(s);const o=[],l=[],c=[],u=[];let d=0,h=0;function p(e,t,n,i,r,s,p,f,m,g,v){const y=s/m,x=p/g,b=s/2,_=p/2,w=f/2,S=m+1,M=g+1;let E=0,T=0;const C=new Po;for(let a=0;a<M;a++){const s=a*x-_;for(let o=0;o<S;o++){const d=o*y-b;C[e]=d*i,C[t]=s*r,C[n]=w,l.push(C.x,C.y,C.z),C[e]=0,C[t]=0,C[n]=f>0?1:-1,c.push(C.x,C.y,C.z),u.push(o/m),u.push(1-a/g),E+=1}}for(let a=0;a<g;a++)for(let e=0;e<m;e++){const t=d+e+S*a,n=d+e+S*(a+1),i=d+(e+1)+S*(a+1),r=d+(e+1)+S*a;o.push(t,n,r),o.push(n,i,r),T+=6}a.addGroup(h,T,v),h+=T,d+=E}p("z","y","x",-1,-1,n,t,e,s,r,0),p("z","y","x",1,-1,n,t,-e,s,r,1),p("x","z","y",1,1,e,n,t,i,s,2),p("x","z","y",1,-1,e,n,-t,i,s,3),p("x","y","z",1,-1,e,t,n,i,r,4),p("x","y","z",-1,-1,e,t,-n,i,r,5),this.setIndex(o),this.setAttribute("position",new Pc(l,3)),this.setAttribute("normal",new Pc(c,3)),this.setAttribute("uv",new Pc(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new tu(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function nu(e){const t={};for(const n in e){t[n]={};for(const i in e[n]){const r=e[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?t[n][i]=r.clone():Array.isArray(r)?t[n][i]=r.slice():t[n][i]=r}}return t}function iu(e){const t={};for(let n=0;n<e.length;n++){const i=nu(e[n]);for(const e in i)t[e]=i[e]}return t}function ru(e){return null===e.getRenderTarget()&&e.outputEncoding===wa?Aa:Pa}const su={clone:nu,merge:iu};class au extends uc{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=nu(e.uniforms),this.uniformsGroups=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const n=this.uniforms[i].value;n&&n.isTexture?t.uniforms[i]={type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?t.uniforms[i]={type:"c",value:n.getHex()}:n&&n.isVector2?t.uniforms[i]={type:"v2",value:n.toArray()}:n&&n.isVector3?t.uniforms[i]={type:"v3",value:n.toArray()}:n&&n.isVector4?t.uniforms[i]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?t.uniforms[i]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?t.uniforms[i]={type:"m4",value:n.toArray()}:t.uniforms[i]={value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const i in this.extensions)!0===this.extensions[i]&&(n[i]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class ou extends Zl{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Tl,this.projectionMatrix=new Tl,this.projectionMatrixInverse=new Tl}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class lu extends ou{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*co*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*lo*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*co*Math.atan(Math.tan(.5*lo*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,i,r,s){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*lo*this.fov)/this.zoom,n=2*t,i=this.aspect*n,r=-.5*i;const s=this.view;if(null!==this.view&&this.view.enabled){const e=s.fullWidth,a=s.fullHeight;r+=s.offsetX*i/e,t-=s.offsetY*n/a,i*=s.width/e,n*=s.height/a}const a=this.filmOffset;0!==a&&(r+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const cu=-90;class uu extends Zl{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n;const i=new lu(cu,1,e,t);i.layers=this.layers,i.up.set(0,1,0),i.lookAt(1,0,0),this.add(i);const r=new lu(cu,1,e,t);r.layers=this.layers,r.up.set(0,1,0),r.lookAt(-1,0,0),this.add(r);const s=new lu(cu,1,e,t);s.layers=this.layers,s.up.set(0,0,-1),s.lookAt(0,1,0),this.add(s);const a=new lu(cu,1,e,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(0,-1,0),this.add(a);const o=new lu(cu,1,e,t);o.layers=this.layers,o.up.set(0,1,0),o.lookAt(0,0,1),this.add(o);const l=new lu(cu,1,e,t);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,-1),this.add(l)}update(e,t){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[i,r,s,a,o,l]=this.children,c=e.getRenderTarget(),u=e.toneMapping,d=e.xr.enabled;e.toneMapping=zr,e.xr.enabled=!1;const h=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,i),e.setRenderTarget(n,1),e.render(t,r),e.setRenderTarget(n,2),e.render(t,s),e.setRenderTarget(n,3),e.render(t,a),e.setRenderTarget(n,4),e.render(t,o),n.texture.generateMipmaps=h,e.setRenderTarget(n,5),e.render(t,l),e.setRenderTarget(c),e.toneMapping=u,e.xr.enabled=d,n.texture.needsPMREMUpdate=!0}}class du extends Go{constructor(e,t,n,i,r,s,a,o,l,c){super(e=void 0!==e?e:[],t=void 0!==t?t:Gr,n,i,r,s,a,o,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class hu extends Xo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},i=[n,n,n,n,n,n];this.texture=new du(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:rs}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={tEquirect:{value:null}},i="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",r="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",s=new tu(5,5,5),a=new au({name:"CubemapFromEquirect",uniforms:nu(n),vertexShader:i,fragmentShader:r,side:nr,blending:sr});a.uniforms.tEquirect.value=t;const o=new $c(s,a),l=t.minFilter;t.minFilter===os&&(t.minFilter=rs);return new uu(1,10,this).update(e,o),t.minFilter=l,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,n,i){const r=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,n,i);e.setRenderTarget(r)}}const pu=new Po,fu=new Po,mu=new wo;class gu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Po(1,0,0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const i=pu.subVectors(n,t).cross(fu.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(pu),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const r=-(e.start.dot(this.normal)+this.constant)/i;return r<0||r>1?null:t.copy(e.start).addScaledVector(n,r)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||mu.getNormalMatrix(e),i=this.coplanarPoint(pu).applyMatrix4(e),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const vu=new vl,yu=new Po;class xu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new gu,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new gu,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new gu,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new gu,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new gu,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new gu;this.planes=[e,t,n,i,r,s]}set(e,t,n,i,r,s){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(i),a[4].copy(r),a[5].copy(s),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){const t=this.planes,n=e.elements,i=n[0],r=n[1],s=n[2],a=n[3],o=n[4],l=n[5],c=n[6],u=n[7],d=n[8],h=n[9],p=n[10],f=n[11],m=n[12],g=n[13],v=n[14],y=n[15];return t[0].setComponents(a-i,u-o,f-d,y-m).normalize(),t[1].setComponents(a+i,u+o,f+d,y+m).normalize(),t[2].setComponents(a+r,u+l,f+h,y+g).normalize(),t[3].setComponents(a-r,u-l,f-h,y-g).normalize(),t[4].setComponents(a-s,u-c,f-p,y-v).normalize(),t[5].setComponents(a+s,u+c,f+p,y+v).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),vu.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(vu)}intersectsSprite(e){return vu.center.set(0,0,0),vu.radius=.7071067811865476,vu.applyMatrix4(e.matrixWorld),this.intersectsSphere(vu)}intersectsSphere(e){const t=this.planes,n=e.center,i=-e.radius;for(let r=0;r<6;r++){if(t[r].distanceToPoint(n)<i)return!1}return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const i=t[n];if(yu.x=i.normal.x>0?e.max.x:e.min.x,yu.y=i.normal.y>0?e.max.y:e.min.y,yu.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(yu)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function bu(){let e=null,t=!1,n=null,i=null;function r(t,s){n(t,s),i=e.requestAnimationFrame(r)}return{start:function(){!0!==t&&null!==n&&(i=e.requestAnimationFrame(r),t=!0)},stop:function(){e.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function _u(e,t){const n=t.isWebGL2,i=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),i.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);const n=i.get(t);n&&(e.deleteBuffer(n.buffer),i.delete(t))},update:function(t,r){if(t.isGLBufferAttribute){const e=i.get(t);return void((!e||e.version<t.version)&&i.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const s=i.get(t);void 0===s?i.set(t,function(t,i){const r=t.array,s=t.usage,a=e.createBuffer();let o;if(e.bindBuffer(i,a),e.bufferData(i,r,s),t.onUploadCallback(),r instanceof Float32Array)o=5126;else if(r instanceof Uint16Array)if(t.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");o=5131}else o=5123;else if(r instanceof Int16Array)o=5122;else if(r instanceof Uint32Array)o=5125;else if(r instanceof Int32Array)o=5124;else if(r instanceof Int8Array)o=5120;else if(r instanceof Uint8Array)o=5121;else{if(!(r instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+r);o=5121}return{buffer:a,type:o,bytesPerElement:r.BYTES_PER_ELEMENT,version:t.version}}(t,r)):s.version<t.version&&(!function(t,i,r){const s=i.array,a=i.updateRange;e.bindBuffer(r,t),-1===a.count?e.bufferSubData(r,0,s):(n?e.bufferSubData(r,a.offset*s.BYTES_PER_ELEMENT,s,a.offset,a.count):e.bufferSubData(r,a.offset*s.BYTES_PER_ELEMENT,s.subarray(a.offset,a.offset+a.count)),a.count=-1),i.onUploadCallback()}(s.buffer,t,r),s.version=t.version)}}}class wu extends zc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};const r=e/2,s=t/2,a=Math.floor(n),o=Math.floor(i),l=a+1,c=o+1,u=e/a,d=t/o,h=[],p=[],f=[],m=[];for(let g=0;g<c;g++){const e=g*d-s;for(let t=0;t<l;t++){const n=t*u-r;p.push(n,-e,0),f.push(0,0,1),m.push(t/a),m.push(1-g/o)}}for(let g=0;g<o;g++)for(let e=0;e<a;e++){const t=e+l*g,n=e+l*(g+1),i=e+1+l*(g+1),r=e+1+l*g;h.push(t,n,r),h.push(n,i,r)}this.setIndex(h),this.setAttribute("position",new Pc(p,3)),this.setAttribute("normal",new Pc(f,3)),this.setAttribute("uv",new Pc(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new wu(e.width,e.height,e.widthSegments,e.heightSegments)}}const Su={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, vec2 fullSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\t\n\t\tvec2 lodFudge = pow( 1.95, lod ) / fullSize;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec2 fullSize = vec2( textureSize( sampler, 0 ) );\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), fullSize, floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), fullSize, ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Mu={common:{diffuse:{value:new mc(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new wo},uv2Transform:{value:new wo},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new _o(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new mc(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new mc(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new wo}},sprite:{diffuse:{value:new mc(16777215)},opacity:{value:1},center:{value:new _o(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new wo}}},Eu={basic:{uniforms:iu([Mu.common,Mu.specularmap,Mu.envmap,Mu.aomap,Mu.lightmap,Mu.fog]),vertexShader:Su.meshbasic_vert,fragmentShader:Su.meshbasic_frag},lambert:{uniforms:iu([Mu.common,Mu.specularmap,Mu.envmap,Mu.aomap,Mu.lightmap,Mu.emissivemap,Mu.bumpmap,Mu.normalmap,Mu.displacementmap,Mu.fog,Mu.lights,{emissive:{value:new mc(0)}}]),vertexShader:Su.meshlambert_vert,fragmentShader:Su.meshlambert_frag},phong:{uniforms:iu([Mu.common,Mu.specularmap,Mu.envmap,Mu.aomap,Mu.lightmap,Mu.emissivemap,Mu.bumpmap,Mu.normalmap,Mu.displacementmap,Mu.fog,Mu.lights,{emissive:{value:new mc(0)},specular:{value:new mc(1118481)},shininess:{value:30}}]),vertexShader:Su.meshphong_vert,fragmentShader:Su.meshphong_frag},standard:{uniforms:iu([Mu.common,Mu.envmap,Mu.aomap,Mu.lightmap,Mu.emissivemap,Mu.bumpmap,Mu.normalmap,Mu.displacementmap,Mu.roughnessmap,Mu.metalnessmap,Mu.fog,Mu.lights,{emissive:{value:new mc(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Su.meshphysical_vert,fragmentShader:Su.meshphysical_frag},toon:{uniforms:iu([Mu.common,Mu.aomap,Mu.lightmap,Mu.emissivemap,Mu.bumpmap,Mu.normalmap,Mu.displacementmap,Mu.gradientmap,Mu.fog,Mu.lights,{emissive:{value:new mc(0)}}]),vertexShader:Su.meshtoon_vert,fragmentShader:Su.meshtoon_frag},matcap:{uniforms:iu([Mu.common,Mu.bumpmap,Mu.normalmap,Mu.displacementmap,Mu.fog,{matcap:{value:null}}]),vertexShader:Su.meshmatcap_vert,fragmentShader:Su.meshmatcap_frag},points:{uniforms:iu([Mu.points,Mu.fog]),vertexShader:Su.points_vert,fragmentShader:Su.points_frag},dashed:{uniforms:iu([Mu.common,Mu.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Su.linedashed_vert,fragmentShader:Su.linedashed_frag},depth:{uniforms:iu([Mu.common,Mu.displacementmap]),vertexShader:Su.depth_vert,fragmentShader:Su.depth_frag},normal:{uniforms:iu([Mu.common,Mu.bumpmap,Mu.normalmap,Mu.displacementmap,{opacity:{value:1}}]),vertexShader:Su.meshnormal_vert,fragmentShader:Su.meshnormal_frag},sprite:{uniforms:iu([Mu.sprite,Mu.fog]),vertexShader:Su.sprite_vert,fragmentShader:Su.sprite_frag},background:{uniforms:{uvTransform:{value:new wo},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Su.background_vert,fragmentShader:Su.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Su.backgroundCube_vert,fragmentShader:Su.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Su.cube_vert,fragmentShader:Su.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Su.equirect_vert,fragmentShader:Su.equirect_frag},distanceRGBA:{uniforms:iu([Mu.common,Mu.displacementmap,{referencePosition:{value:new Po},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Su.distanceRGBA_vert,fragmentShader:Su.distanceRGBA_frag},shadow:{uniforms:iu([Mu.lights,Mu.fog,{color:{value:new mc(0)},opacity:{value:1}}]),vertexShader:Su.shadow_vert,fragmentShader:Su.shadow_frag}};Eu.physical={uniforms:iu([Eu.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new _o(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new mc(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new _o},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new mc(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new mc(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Su.meshphysical_vert,fragmentShader:Su.meshphysical_frag};const Tu={r:0,b:0,g:0};function Cu(e,t,n,i,r,s,a){const o=new mc(0);let l,c,u=!0===s?0:1,d=null,h=0,p=null;function f(t,n){t.getRGB(Tu,ru(e)),i.buffers.color.setClear(Tu.r,Tu.g,Tu.b,n,a)}return{getClearColor:function(){return o},setClearColor:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;o.set(e),u=t,f(o,u)},getClearAlpha:function(){return u},setClearAlpha:function(e){u=e,f(o,u)},render:function(i,s){let a=!1,m=!0===s.isScene?s.background:null;if(m&&m.isTexture){m=(s.backgroundBlurriness>0?n:t).get(m)}const g=e.xr,v=g.getSession&&g.getSession();v&&"additive"===v.environmentBlendMode&&(m=null),null===m?f(o,u):m&&m.isColor&&(f(m,1),a=!0),(e.autoClear||a)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),m&&(m.isCubeTexture||m.mapping===Jr)?(void 0===c&&(c=new $c(new tu(1,1,1),new au({name:"BackgroundCubeMaterial",uniforms:nu(Eu.backgroundCube.uniforms),vertexShader:Eu.backgroundCube.vertexShader,fragmentShader:Eu.backgroundCube.fragmentShader,side:nr,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(c)),c.material.uniforms.envMap.value=m,c.material.uniforms.flipEnvMap.value=m.isCubeTexture&&!1===m.isRenderTargetTexture?-1:1,c.material.uniforms.backgroundBlurriness.value=s.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=s.backgroundIntensity,c.material.toneMapped=m.encoding!==wa,d===m&&h===m.version&&p===e.toneMapping||(c.material.needsUpdate=!0,d=m,h=m.version,p=e.toneMapping),c.layers.enableAll(),i.unshift(c,c.geometry,c.material,0,0,null)):m&&m.isTexture&&(void 0===l&&(l=new $c(new wu(2,2),new au({name:"BackgroundMaterial",uniforms:nu(Eu.background.uniforms),vertexShader:Eu.background.vertexShader,fragmentShader:Eu.background.fragmentShader,side:tr,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(l)),l.material.uniforms.t2D.value=m,l.material.uniforms.backgroundIntensity.value=s.backgroundIntensity,l.material.toneMapped=m.encoding!==wa,!0===m.matrixAutoUpdate&&m.updateMatrix(),l.material.uniforms.uvTransform.value.copy(m.matrix),d===m&&h===m.version&&p===e.toneMapping||(l.material.needsUpdate=!0,d=m,h=m.version,p=e.toneMapping),l.layers.enableAll(),i.unshift(l,l.geometry,l.material,0,0,null))}}}function Au(e,t,n,i){const r=e.getParameter(34921),s=i.isWebGL2?null:t.get("OES_vertex_array_object"),a=i.isWebGL2||null!==s,o={},l=p(null);let c=l,u=!1;function d(t){return i.isWebGL2?e.bindVertexArray(t):s.bindVertexArrayOES(t)}function h(t){return i.isWebGL2?e.deleteVertexArray(t):s.deleteVertexArrayOES(t)}function p(e){const t=[],n=[],i=[];for(let s=0;s<r;s++)t[s]=0,n[s]=0,i[s]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:i,object:e,attributes:{},index:null}}function f(){const e=c.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function m(e){g(e,0)}function g(n,r){const s=c.newAttributes,a=c.enabledAttributes,o=c.attributeDivisors;if(s[n]=1,0===a[n]&&(e.enableVertexAttribArray(n),a[n]=1),o[n]!==r){(i.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),o[n]=r}}function v(){const t=c.newAttributes,n=c.enabledAttributes;for(let i=0,r=n.length;i<r;i++)n[i]!==t[i]&&(e.disableVertexAttribArray(i),n[i]=0)}function y(t,n,r,s,a,o){!0!==i.isWebGL2||5124!==r&&5125!==r?e.vertexAttribPointer(t,n,r,s,a,o):e.vertexAttribIPointer(t,n,r,a,o)}function x(){b(),u=!0,c!==l&&(c=l,d(c.object))}function b(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(r,l,h,x,b){let _=!1;if(a){const t=function(t,n,r){const a=!0===r.wireframe;let l=o[t.id];void 0===l&&(l={},o[t.id]=l);let c=l[n.id];void 0===c&&(c={},l[n.id]=c);let u=c[a];void 0===u&&(u=p(i.isWebGL2?e.createVertexArray():s.createVertexArrayOES()),c[a]=u);return u}(x,h,l);c!==t&&(c=t,d(c.object)),_=function(e,t,n,i){const r=c.attributes,s=t.attributes;let a=0;const o=n.getAttributes();for(const l in o){if(o[l].location>=0){const t=r[l];let n=s[l];if(void 0===n&&("instanceMatrix"===l&&e.instanceMatrix&&(n=e.instanceMatrix),"instanceColor"===l&&e.instanceColor&&(n=e.instanceColor)),void 0===t)return!0;if(t.attribute!==n)return!0;if(n&&t.data!==n.data)return!0;a++}}return c.attributesNum!==a||c.index!==i}(r,x,h,b),_&&function(e,t,n,i){const r={},s=t.attributes;let a=0;const o=n.getAttributes();for(const l in o){if(o[l].location>=0){let t=s[l];void 0===t&&("instanceMatrix"===l&&e.instanceMatrix&&(t=e.instanceMatrix),"instanceColor"===l&&e.instanceColor&&(t=e.instanceColor));const n={};n.attribute=t,t&&t.data&&(n.data=t.data),r[l]=n,a++}}c.attributes=r,c.attributesNum=a,c.index=i}(r,x,h,b)}else{const e=!0===l.wireframe;c.geometry===x.id&&c.program===h.id&&c.wireframe===e||(c.geometry=x.id,c.program=h.id,c.wireframe=e,_=!0)}null!==b&&n.update(b,34963),(_||u)&&(u=!1,function(r,s,a,o){if(!1===i.isWebGL2&&(r.isInstancedMesh||o.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;f();const l=o.attributes,c=a.getAttributes(),u=s.defaultAttributeValues;for(const t in c){const i=c[t];if(i.location>=0){let s=l[t];if(void 0===s&&("instanceMatrix"===t&&r.instanceMatrix&&(s=r.instanceMatrix),"instanceColor"===t&&r.instanceColor&&(s=r.instanceColor)),void 0!==s){const t=s.normalized,a=s.itemSize,l=n.get(s);if(void 0===l)continue;const c=l.buffer,u=l.type,d=l.bytesPerElement;if(s.isInterleavedBufferAttribute){const n=s.data,l=n.stride,h=s.offset;if(n.isInstancedInterleavedBuffer){for(let e=0;e<i.locationSize;e++)g(i.location+e,n.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let e=0;e<i.locationSize;e++)m(i.location+e);e.bindBuffer(34962,c);for(let e=0;e<i.locationSize;e++)y(i.location+e,a/i.locationSize,u,t,l*d,(h+a/i.locationSize*e)*d)}else{if(s.isInstancedBufferAttribute){for(let e=0;e<i.locationSize;e++)g(i.location+e,s.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=s.meshPerAttribute*s.count)}else for(let e=0;e<i.locationSize;e++)m(i.location+e);e.bindBuffer(34962,c);for(let e=0;e<i.locationSize;e++)y(i.location+e,a/i.locationSize,u,t,a*d,a/i.locationSize*e*d)}}else if(void 0!==u){const n=u[t];if(void 0!==n)switch(n.length){case 2:e.vertexAttrib2fv(i.location,n);break;case 3:e.vertexAttrib3fv(i.location,n);break;case 4:e.vertexAttrib4fv(i.location,n);break;default:e.vertexAttrib1fv(i.location,n)}}}}v()}(r,l,h,x),null!==b&&e.bindBuffer(34963,n.get(b).buffer))},reset:x,resetDefaultState:b,dispose:function(){x();for(const e in o){const t=o[e];for(const e in t){const n=t[e];for(const e in n)h(n[e].object),delete n[e];delete t[e]}delete o[e]}},releaseStatesOfGeometry:function(e){if(void 0===o[e.id])return;const t=o[e.id];for(const n in t){const e=t[n];for(const t in e)h(e[t].object),delete e[t];delete t[n]}delete o[e.id]},releaseStatesOfProgram:function(e){for(const t in o){const n=o[t];if(void 0===n[e.id])continue;const i=n[e.id];for(const e in i)h(i[e].object),delete i[e];delete n[e.id]}},initAttributes:f,enableAttribute:m,disableUnusedAttributes:v}}function Pu(e,t,n,i){const r=i.isWebGL2;let s;this.setMode=function(e){s=e},this.render=function(t,i){e.drawArrays(s,t,i),n.update(i,s,1)},this.renderInstances=function(i,a,o){if(0===o)return;let l,c;if(r)l=e,c="drawArraysInstanced";else if(l=t.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](s,i,a,o),n.update(a,s,o)}}function Nu(e,t,n){let i;function r(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const s="undefined"!==typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext;let a=void 0!==n.precision?n.precision:"highp";const o=r(a);o!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",o,"instead."),a=o);const l=s||t.has("WEBGL_draw_buffers"),c=!0===n.logarithmicDepthBuffer,u=e.getParameter(34930),d=e.getParameter(35660),h=e.getParameter(3379),p=e.getParameter(34076),f=e.getParameter(34921),m=e.getParameter(36347),g=e.getParameter(36348),v=e.getParameter(36349),y=d>0,x=s||t.has("OES_texture_float");return{isWebGL2:s,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==i)return i;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");i=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:r,precision:a,logarithmicDepthBuffer:c,maxTextures:u,maxVertexTextures:d,maxTextureSize:h,maxCubemapSize:p,maxAttributes:f,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:v,vertexTextures:y,floatFragmentTextures:x,floatVertexTextures:y&&x,maxSamples:s?e.getParameter(36183):0}}function ku(e){const t=this;let n=null,i=0,r=!1,s=!1;const a=new gu,o=new wo,l={value:null,needsUpdate:!1};function c(e,n,i,r){const s=null!==e?e.length:0;let c=null;if(0!==s){if(c=l.value,!0!==r||null===c){const t=i+4*s,r=n.matrixWorldInverse;o.getNormalMatrix(r),(null===c||c.length<t)&&(c=new Float32Array(t));for(let n=0,l=i;n!==s;++n,l+=4)a.copy(e[n]).applyMatrix4(r,o),a.normal.toArray(c,l),c[l+3]=a.constant}l.value=c,l.needsUpdate=!0}return t.numPlanes=s,t.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){const n=0!==e.length||t||0!==i||r;return r=t,i=e.length,n},this.beginShadows=function(){s=!0,c(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(e,t){n=c(e,t,0)},this.setState=function(a,o,u){const d=a.clippingPlanes,h=a.clipIntersection,p=a.clipShadows,f=e.get(a);if(!r||null===d||0===d.length||s&&!p)s?c(null):function(){l.value!==n&&(l.value=n,l.needsUpdate=i>0);t.numPlanes=i,t.numIntersection=0}();else{const e=s?0:i,t=4*e;let r=f.clippingState||null;l.value=r,r=c(d,o,t,u);for(let i=0;i!==t;++i)r[i]=n[i];f.clippingState=r,this.numIntersection=h?this.numPlanes:0,this.numPlanes+=e}}}function Ru(e){let t=new WeakMap;function n(e,t){return t===Xr?e.mapping=Gr:t===Yr&&(e.mapping=qr),e}function i(e){const n=e.target;n.removeEventListener("dispose",i);const r=t.get(n);void 0!==r&&(t.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture&&!1===r.isRenderTargetTexture){const s=r.mapping;if(s===Xr||s===Yr){if(t.has(r)){return n(t.get(r).texture,r.mapping)}{const s=r.image;if(s&&s.height>0){const a=new hu(s.height/2);return a.fromEquirectangularTexture(e,r),t.set(r,a),r.addEventListener("dispose",i),n(a.texture,r.mapping)}return null}}}return r},dispose:function(){t=new WeakMap}}}class Iu extends ou{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=r,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,i,r,s){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let r=n-e,s=n+e,a=i+t,o=i-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=e*this.view.offsetX,s=r+e*this.view.width,a-=t*this.view.offsetY,o=a-t*this.view.height}this.projectionMatrix.makeOrthographic(r,s,a,o,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const Lu=[.125,.215,.35,.446,.526,.582],ju=20,Du=new Iu,Ou=new mc;let zu=null;const Fu=(1+Math.sqrt(5))/2,Uu=1/Fu,Bu=[new Po(1,1,1),new Po(-1,1,1),new Po(1,1,-1),new Po(-1,1,-1),new Po(0,Fu,Uu),new Po(0,Fu,-Uu),new Po(Uu,0,Fu),new Po(-Uu,0,Fu),new Po(Fu,Uu,0),new Po(-Fu,Uu,0)];class Vu{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;zu=this._renderer.getRenderTarget(),this._setSize(256);const r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(e,n,i,r),t>0&&this._blur(r,0,0,t),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}fromCubemap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=qu(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=Gu(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(zu),e.scissorTest=!1,Wu(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Gr||e.mapping===qr?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),zu=this._renderer.getRenderTarget();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:rs,minFilter:rs,generateMipmaps:!1,type:gs,format:_s,encoding:_a,depthBuffer:!1},i=Hu(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=Hu(e,t,n);const{_lodMax:i}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(e){const t=[],n=[],i=[];let r=e;const s=e-4+1+Lu.length;for(let a=0;a<s;a++){const s=Math.pow(2,r);n.push(s);let o=1/s;a>e-4?o=Lu[a-e+4-1]:0===a&&(o=0),i.push(o);const l=1/(s-2),c=-l,u=1+l,d=[c,c,u,c,u,u,c,c,u,u,c,u],h=6,p=6,f=3,m=2,g=1,v=new Float32Array(f*p*h),y=new Float32Array(m*p*h),x=new Float32Array(g*p*h);for(let e=0;e<h;e++){const t=e%3*2/3-1,n=e>2?0:-1,i=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];v.set(i,f*p*e),y.set(d,m*p*e);const r=[e,e,e,e,e,e];x.set(r,g*p*e)}const b=new zc;b.setAttribute("position",new bc(v,f)),b.setAttribute("uv",new bc(y,m)),b.setAttribute("faceIndex",new bc(x,g)),t.push(b),r>4&&r--}return{lodPlanes:t,sizeLods:n,sigmas:i}}(i)),this._blurMaterial=function(e,t,n){const i=new Float32Array(ju),r=new Po(0,1,0),s=new au({name:"SphericalGaussianBlur",defines:{n:ju,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:"".concat(e,".0")},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:sr,depthTest:!1,depthWrite:!1});return s}(i,e,t)}return i}_compileMaterial(e){const t=new $c(this._lodPlanes[0],e);this._renderer.compile(t,Du)}_sceneToCubeUV(e,t,n,i){const r=new lu(90,1,t,n),s=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],o=this._renderer,l=o.autoClear,c=o.toneMapping;o.getClearColor(Ou),o.toneMapping=zr,o.autoClear=!1;const u=new vc({name:"PMREM.Background",side:nr,depthWrite:!1,depthTest:!1}),d=new $c(new tu,u);let h=!1;const p=e.background;p?p.isColor&&(u.color.copy(p),e.background=null,h=!0):(u.color.copy(Ou),h=!0);for(let f=0;f<6;f++){const t=f%3;0===t?(r.up.set(0,s[f],0),r.lookAt(a[f],0,0)):1===t?(r.up.set(0,0,s[f]),r.lookAt(0,a[f],0)):(r.up.set(0,s[f],0),r.lookAt(0,0,a[f]));const n=this._cubeSize;Wu(i,t*n,f>2?n:0,n,n),o.setRenderTarget(i),h&&o.render(d,r),o.render(e,r)}d.geometry.dispose(),d.material.dispose(),o.toneMapping=c,o.autoClear=l,e.background=p}_textureToCubeUV(e,t){const n=this._renderer,i=e.mapping===Gr||e.mapping===qr;i?(null===this._cubemapMaterial&&(this._cubemapMaterial=qu()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=Gu());const r=i?this._cubemapMaterial:this._equirectMaterial,s=new $c(this._lodPlanes[0],r);r.uniforms.envMap.value=e;const a=this._cubeSize;Wu(t,0,0,3*a,2*a),n.setRenderTarget(t),n.render(s,Du)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const t=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),n=Bu[(i-1)%Bu.length];this._blur(e,i-1,i,t,n)}t.autoClear=n}_blur(e,t,n,i,r){const s=this._pingPongRenderTarget;this._halfBlur(e,s,t,n,i,"latitudinal",r),this._halfBlur(s,e,n,n,i,"longitudinal",r)}_halfBlur(e,t,n,i,r,s,a){const o=this._renderer,l=this._blurMaterial;"latitudinal"!==s&&"longitudinal"!==s&&console.error("blur direction must be either latitudinal or longitudinal!");const c=new $c(this._lodPlanes[i],l),u=l.uniforms,d=this._sizeLods[n]-1,h=isFinite(r)?Math.PI/(2*d):2*Math.PI/39,p=r/h,f=isFinite(r)?1+Math.floor(3*p):ju;f>ju&&console.warn("sigmaRadians, ".concat(r,", is too large and will clip, as it requested ").concat(f," samples when the maximum is set to ").concat(ju));const m=[];let g=0;for(let x=0;x<ju;++x){const e=x/p,t=Math.exp(-e*e/2);m.push(t),0===x?g+=t:x<f&&(g+=2*t)}for(let x=0;x<m.length;x++)m[x]=m[x]/g;u.envMap.value=e.texture,u.samples.value=f,u.weights.value=m,u.latitudinal.value="latitudinal"===s,a&&(u.poleAxis.value=a);const{_lodMax:v}=this;u.dTheta.value=h,u.mipInt.value=v-n;const y=this._sizeLods[i];Wu(t,3*y*(i>v-4?i-v+4:0),4*(this._cubeSize-y),3*y,2*y),o.setRenderTarget(t),o.render(c,Du)}}function Hu(e,t,n){const i=new Xo(e,t,n);return i.texture.mapping=Jr,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Wu(e,t,n,i,r){e.viewport.set(t,n,i,r),e.scissor.set(t,n,i,r)}function Gu(){return new au({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:sr,depthTest:!1,depthWrite:!1})}function qu(){return new au({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:sr,depthTest:!1,depthWrite:!1})}function Xu(e){let t=new WeakMap,n=null;function i(e){const n=e.target;n.removeEventListener("dispose",i);const r=t.get(n);void 0!==r&&(t.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture){const s=r.mapping,a=s===Xr||s===Yr,o=s===Gr||s===qr;if(a||o){if(r.isRenderTargetTexture&&!0===r.needsPMREMUpdate){r.needsPMREMUpdate=!1;let i=t.get(r);return null===n&&(n=new Vu(e)),i=a?n.fromEquirectangular(r,i):n.fromCubemap(r,i),t.set(r,i),i.texture}if(t.has(r))return t.get(r).texture;{const s=r.image;if(a&&s&&s.height>0||o&&s&&function(e){let t=0;const n=6;for(let i=0;i<n;i++)void 0!==e[i]&&t++;return t===n}(s)){null===n&&(n=new Vu(e));const s=a?n.fromEquirectangular(r):n.fromCubemap(r);return t.set(r,s),r.addEventListener("dispose",i),s.texture}return null}}}return r},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function Yu(e){const t={};function n(n){if(void 0!==t[n])return t[n];let i;switch(n){case"WEBGL_depth_texture":i=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=e.getExtension(n)}return t[n]=i,i}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){const t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function Ju(e,t,n,i){const r={},s=new WeakMap;function a(e){const o=e.target;null!==o.index&&t.remove(o.index);for(const n in o.attributes)t.remove(o.attributes[n]);o.removeEventListener("dispose",a),delete r[o.id];const l=s.get(o);l&&(t.remove(l),s.delete(o)),i.releaseStatesOfGeometry(o),!0===o.isInstancedBufferGeometry&&delete o._maxInstanceCount,n.memory.geometries--}function o(e){const n=[],i=e.index,r=e.attributes.position;let a=0;if(null!==i){const e=i.array;a=i.version;for(let t=0,i=e.length;t<i;t+=3){const i=e[t+0],r=e[t+1],s=e[t+2];n.push(i,r,r,s,s,i)}}else{const e=r.array;a=r.version;for(let t=0,i=e.length/3-1;t<i;t+=3){const e=t+0,i=t+1,r=t+2;n.push(e,i,i,r,r,e)}}const o=new(Mo(n)?Cc:Ec)(n,1);o.version=a;const l=s.get(e);l&&t.remove(l),s.set(e,o)}return{get:function(e,t){return!0===r[t.id]||(t.addEventListener("dispose",a),r[t.id]=!0,n.memory.geometries++),t},update:function(e){const n=e.attributes;for(const r in n)t.update(n[r],34962);const i=e.morphAttributes;for(const r in i){const e=i[r];for(let n=0,i=e.length;n<i;n++)t.update(e[n],34962)}},getWireframeAttribute:function(e){const t=s.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&o(e)}else o(e);return s.get(e)}}}function Ku(e,t,n,i){const r=i.isWebGL2;let s,a,o;this.setMode=function(e){s=e},this.setIndex=function(e){a=e.type,o=e.bytesPerElement},this.render=function(t,i){e.drawElements(s,i,a,t*o),n.update(i,s,1)},this.renderInstances=function(i,l,c){if(0===c)return;let u,d;if(r)u=e,d="drawElementsInstanced";else if(u=t.get("ANGLE_instanced_arrays"),d="drawElementsInstancedANGLE",null===u)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[d](s,l,a,i*o,c),n.update(l,s,c)}}function Zu(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,i){switch(t.calls++,n){case 4:t.triangles+=i*(e/3);break;case 1:t.lines+=i*(e/2);break;case 3:t.lines+=i*(e-1);break;case 2:t.lines+=i*e;break;case 0:t.points+=i*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function Qu(e,t){return e[0]-t[0]}function $u(e,t){return Math.abs(t[1])-Math.abs(e[1])}function ed(e,t,n){const i={},r=new Float32Array(8),s=new WeakMap,a=new qo,o=[];for(let l=0;l<8;l++)o[l]=[l,0];return{update:function(l,c,u){const d=l.morphTargetInfluences;if(!0===t.isWebGL2){const h=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,p=void 0!==h?h.length:0;let f=s.get(c);if(void 0===f||f.count!==p){void 0!==f&&f.texture.dispose();const v=void 0!==c.morphAttributes.position,y=void 0!==c.morphAttributes.normal,x=void 0!==c.morphAttributes.color,b=c.morphAttributes.position||[],_=c.morphAttributes.normal||[],w=c.morphAttributes.color||[];let S=0;!0===v&&(S=1),!0===y&&(S=2),!0===x&&(S=3);let M=c.attributes.position.count*S,E=1;M>t.maxTextureSize&&(E=Math.ceil(M/t.maxTextureSize),M=t.maxTextureSize);const T=new Float32Array(M*E*4*p),C=new Yo(T,M,E,p);C.type=ms,C.needsUpdate=!0;const A=4*S;for(let N=0;N<p;N++){const k=b[N],R=_[N],I=w[N],L=M*E*4*N;for(let j=0;j<k.count;j++){const D=j*A;!0===v&&(a.fromBufferAttribute(k,j),T[L+D+0]=a.x,T[L+D+1]=a.y,T[L+D+2]=a.z,T[L+D+3]=0),!0===y&&(a.fromBufferAttribute(R,j),T[L+D+4]=a.x,T[L+D+5]=a.y,T[L+D+6]=a.z,T[L+D+7]=0),!0===x&&(a.fromBufferAttribute(I,j),T[L+D+8]=a.x,T[L+D+9]=a.y,T[L+D+10]=a.z,T[L+D+11]=4===I.itemSize?a.w:1)}}function P(){C.dispose(),s.delete(c),c.removeEventListener("dispose",P)}f={count:p,texture:C,size:new _o(M,E)},s.set(c,f),c.addEventListener("dispose",P)}let m=0;for(let O=0;O<d.length;O++)m+=d[O];const g=c.morphTargetsRelative?1:1-m;u.getUniforms().setValue(e,"morphTargetBaseInfluence",g),u.getUniforms().setValue(e,"morphTargetInfluences",d),u.getUniforms().setValue(e,"morphTargetsTexture",f.texture,n),u.getUniforms().setValue(e,"morphTargetsTextureSize",f.size)}else{const z=void 0===d?0:d.length;let F=i[c.id];if(void 0===F||F.length!==z){F=[];for(let W=0;W<z;W++)F[W]=[W,0];i[c.id]=F}for(let G=0;G<z;G++){const q=F[G];q[0]=G,q[1]=d[G]}F.sort($u);for(let X=0;X<8;X++)X<z&&F[X][1]?(o[X][0]=F[X][0],o[X][1]=F[X][1]):(o[X][0]=Number.MAX_SAFE_INTEGER,o[X][1]=0);o.sort(Qu);const U=c.morphAttributes.position,B=c.morphAttributes.normal;let V=0;for(let Y=0;Y<8;Y++){const J=o[Y],K=J[0],Z=J[1];K!==Number.MAX_SAFE_INTEGER&&Z?(U&&c.getAttribute("morphTarget"+Y)!==U[K]&&c.setAttribute("morphTarget"+Y,U[K]),B&&c.getAttribute("morphNormal"+Y)!==B[K]&&c.setAttribute("morphNormal"+Y,B[K]),r[Y]=Z,V+=Z):(U&&!0===c.hasAttribute("morphTarget"+Y)&&c.deleteAttribute("morphTarget"+Y),B&&!0===c.hasAttribute("morphNormal"+Y)&&c.deleteAttribute("morphNormal"+Y),r[Y]=0)}const H=c.morphTargetsRelative?1:1-V;u.getUniforms().setValue(e,"morphTargetBaseInfluence",H),u.getUniforms().setValue(e,"morphTargetInfluences",r)}}}}function td(e,t,n,i){let r=new WeakMap;function s(e){const t=e.target;t.removeEventListener("dispose",s),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(e){const a=i.render.frame,o=e.geometry,l=t.get(e,o);return r.get(l)!==a&&(t.update(l),r.set(l,a)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",s)&&e.addEventListener("dispose",s),n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),l},dispose:function(){r=new WeakMap}}}const nd=new Go,id=new Yo,rd=new Ko,sd=new du,ad=[],od=[],ld=new Float32Array(16),cd=new Float32Array(9),ud=new Float32Array(4);function dd(e,t,n){const i=e[0];if(i<=0||i>0)return e;const r=t*n;let s=ad[r];if(void 0===s&&(s=new Float32Array(r),ad[r]=s),0!==t){i.toArray(s,0);for(let i=1,r=0;i!==t;++i)r+=n,e[i].toArray(s,r)}return s}function hd(e,t){if(e.length!==t.length)return!1;for(let n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0}function pd(e,t){for(let n=0,i=t.length;n<i;n++)e[n]=t[n]}function fd(e,t){let n=od[t];void 0===n&&(n=new Int32Array(t),od[t]=n);for(let i=0;i!==t;++i)n[i]=e.allocateTextureUnit();return n}function md(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function gd(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(hd(n,t))return;e.uniform2fv(this.addr,t),pd(n,t)}}function vd(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(hd(n,t))return;e.uniform3fv(this.addr,t),pd(n,t)}}function yd(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(hd(n,t))return;e.uniform4fv(this.addr,t),pd(n,t)}}function xd(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(hd(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),pd(n,t)}else{if(hd(n,i))return;ud.set(i),e.uniformMatrix2fv(this.addr,!1,ud),pd(n,i)}}function bd(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(hd(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),pd(n,t)}else{if(hd(n,i))return;cd.set(i),e.uniformMatrix3fv(this.addr,!1,cd),pd(n,i)}}function _d(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(hd(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),pd(n,t)}else{if(hd(n,i))return;ld.set(i),e.uniformMatrix4fv(this.addr,!1,ld),pd(n,i)}}function wd(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function Sd(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(hd(n,t))return;e.uniform2iv(this.addr,t),pd(n,t)}}function Md(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(hd(n,t))return;e.uniform3iv(this.addr,t),pd(n,t)}}function Ed(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(hd(n,t))return;e.uniform4iv(this.addr,t),pd(n,t)}}function Td(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function Cd(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(hd(n,t))return;e.uniform2uiv(this.addr,t),pd(n,t)}}function Ad(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(hd(n,t))return;e.uniform3uiv(this.addr,t),pd(n,t)}}function Pd(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(hd(n,t))return;e.uniform4uiv(this.addr,t),pd(n,t)}}function Nd(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2D(t||nd,r)}function kd(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(t||rd,r)}function Rd(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(t||sd,r)}function Id(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(t||id,r)}function Ld(e,t){e.uniform1fv(this.addr,t)}function jd(e,t){const n=dd(t,this.size,2);e.uniform2fv(this.addr,n)}function Dd(e,t){const n=dd(t,this.size,3);e.uniform3fv(this.addr,n)}function Od(e,t){const n=dd(t,this.size,4);e.uniform4fv(this.addr,n)}function zd(e,t){const n=dd(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function Fd(e,t){const n=dd(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function Ud(e,t){const n=dd(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function Bd(e,t){e.uniform1iv(this.addr,t)}function Vd(e,t){e.uniform2iv(this.addr,t)}function Hd(e,t){e.uniform3iv(this.addr,t)}function Wd(e,t){e.uniform4iv(this.addr,t)}function Gd(e,t){e.uniform1uiv(this.addr,t)}function qd(e,t){e.uniform2uiv(this.addr,t)}function Xd(e,t){e.uniform3uiv(this.addr,t)}function Yd(e,t){e.uniform4uiv(this.addr,t)}function Jd(e,t,n){const i=this.cache,r=t.length,s=fd(n,r);hd(i,s)||(e.uniform1iv(this.addr,s),pd(i,s));for(let a=0;a!==r;++a)n.setTexture2D(t[a]||nd,s[a])}function Kd(e,t,n){const i=this.cache,r=t.length,s=fd(n,r);hd(i,s)||(e.uniform1iv(this.addr,s),pd(i,s));for(let a=0;a!==r;++a)n.setTexture3D(t[a]||rd,s[a])}function Zd(e,t,n){const i=this.cache,r=t.length,s=fd(n,r);hd(i,s)||(e.uniform1iv(this.addr,s),pd(i,s));for(let a=0;a!==r;++a)n.setTextureCube(t[a]||sd,s[a])}function Qd(e,t,n){const i=this.cache,r=t.length,s=fd(n,r);hd(i,s)||(e.uniform1iv(this.addr,s),pd(i,s));for(let a=0;a!==r;++a)n.setTexture2DArray(t[a]||id,s[a])}class $d{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return md;case 35664:return gd;case 35665:return vd;case 35666:return yd;case 35674:return xd;case 35675:return bd;case 35676:return _d;case 5124:case 35670:return wd;case 35667:case 35671:return Sd;case 35668:case 35672:return Md;case 35669:case 35673:return Ed;case 5125:return Td;case 36294:return Cd;case 36295:return Ad;case 36296:return Pd;case 35678:case 36198:case 36298:case 36306:case 35682:return Nd;case 35679:case 36299:case 36307:return kd;case 35680:case 36300:case 36308:case 36293:return Rd;case 36289:case 36303:case 36311:case 36292:return Id}}(t.type)}}class eh{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return Ld;case 35664:return jd;case 35665:return Dd;case 35666:return Od;case 35674:return zd;case 35675:return Fd;case 35676:return Ud;case 5124:case 35670:return Bd;case 35667:case 35671:return Vd;case 35668:case 35672:return Hd;case 35669:case 35673:return Wd;case 5125:return Gd;case 36294:return qd;case 36295:return Xd;case 36296:return Yd;case 35678:case 36198:case 36298:case 36306:case 35682:return Jd;case 35679:case 36299:case 36307:return Kd;case 35680:case 36300:case 36308:case 36293:return Zd;case 36289:case 36303:case 36311:case 36292:return Qd}}(t.type)}}class th{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const i=this.seq;for(let r=0,s=i.length;r!==s;++r){const s=i[r];s.setValue(e,t[s.id],n)}}}const nh=/(\w+)(\])?(\[|\.)?/g;function ih(e,t){e.seq.push(t),e.map[t.id]=t}function rh(e,t,n){const i=e.name,r=i.length;for(nh.lastIndex=0;;){const s=nh.exec(i),a=nh.lastIndex;let o=s[1];const l="]"===s[2],c=s[3];if(l&&(o|=0),void 0===c||"["===c&&a+2===r){ih(n,void 0===c?new $d(o,e,t):new eh(o,e,t));break}{let e=n.map[o];void 0===e&&(e=new th(o),ih(n,e)),n=e}}}class sh{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,35718);for(let i=0;i<n;++i){const n=e.getActiveUniform(t,i);rh(n,e.getUniformLocation(t,n.name),this)}}setValue(e,t,n,i){const r=this.map[t];void 0!==r&&r.setValue(e,n,i)}setOptional(e,t,n){const i=t[n];void 0!==i&&this.setValue(e,n,i)}static upload(e,t,n,i){for(let r=0,s=t.length;r!==s;++r){const s=t[r],a=n[s.id];!1!==a.needsUpdate&&s.setValue(e,a.value,i)}}static seqWithValue(e,t){const n=[];for(let i=0,r=e.length;i!==r;++i){const r=e[i];r.id in t&&n.push(r)}return n}}function ah(e,t,n){const i=e.createShader(t);return e.shaderSource(i,n),e.compileShader(i),i}let oh=0;function lh(e,t,n){const i=e.getShaderParameter(t,35713),r=e.getShaderInfoLog(t).trim();if(i&&""===r)return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const i=parseInt(s[1]);return n.toUpperCase()+"\n\n"+r+"\n\n"+function(e,t){const n=e.split("\n"),i=[],r=Math.max(t-6,0),s=Math.min(t+6,n.length);for(let a=r;a<s;a++){const e=a+1;i.push("".concat(e===t?">":" "," ").concat(e,": ").concat(n[a]))}return i.join("\n")}(e.getShaderSource(t),i)}return r}function ch(e,t){const n=function(e){switch(e){case _a:return["Linear","( value )"];case wa:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function uh(e,t){let n;switch(t){case Fr:n="Linear";break;case Ur:n="Reinhard";break;case Br:n="OptimizedCineon";break;case Vr:n="ACESFilmic";break;case Hr:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function dh(e){return""!==e}function hh(e,t){const n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function ph(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const fh=/^[ \t]*#include +<([\w\d./]+)>/gm;function mh(e){return e.replace(fh,gh)}function gh(e,t){const n=Su[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return mh(n)}const vh=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function yh(e){return e.replace(vh,xh)}function xh(e,t,n,i){let r="";for(let s=parseInt(t);s<parseInt(n);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function bh(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function _h(e,t,n,i){const r=e.getContext(),s=n.defines;let a=n.vertexShader,o=n.fragmentShader;const l=function(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===Qi?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===$i?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===er&&(t="SHADOWMAP_TYPE_VSM"),t}(n),c=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case Gr:case qr:t="ENVMAP_TYPE_CUBE";break;case Jr:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),u=function(e){let t="ENVMAP_MODE_REFLECTION";e.envMap&&e.envMapMode===qr&&(t="ENVMAP_MODE_REFRACTION");return t}(n),d=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case jr:t="ENVMAP_BLENDING_MULTIPLY";break;case Dr:t="ENVMAP_BLENDING_MIX";break;case Or:t="ENVMAP_BLENDING_ADD"}return t}(n),h=function(e){const t=e.envMapCubeUVHeight;if(null===t)return null;const n=Math.log2(t)-2,i=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:i,maxMip:n}}(n),p=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(dh).join("\n")}(n),f=function(e){const t=[];for(const n in e){const i=e[n];!1!==i&&t.push("#define "+n+" "+i)}return t.join("\n")}(s),m=r.createProgram();let g,v,y=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(g=[f].filter(dh).join("\n"),g.length>0&&(g+="\n"),v=[p,f].filter(dh).join("\n"),v.length>0&&(v+="\n")):(g=[bh(n),"#define SHADER_NAME "+n.shaderName,f,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(dh).join("\n"),v=[p,bh(n),"#define SHADER_NAME "+n.shaderName,f,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==zr?"#define TONE_MAPPING":"",n.toneMapping!==zr?Su.tonemapping_pars_fragment:"",n.toneMapping!==zr?uh("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Su.encodings_pars_fragment,ch("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(dh).join("\n")),a=mh(a),a=hh(a,n),a=ph(a,n),o=mh(o),o=hh(o,n),o=ph(o,n),a=yh(a),o=yh(o),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(y="#version 300 es\n",g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,v=["#define varying in",n.glslVersion===io?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===io?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v);const x=y+v+o,b=ah(r,35633,y+g+a),_=ah(r,35632,x);if(r.attachShader(m,b),r.attachShader(m,_),void 0!==n.index0AttributeName?r.bindAttribLocation(m,0,n.index0AttributeName):!0===n.morphTargets&&r.bindAttribLocation(m,0,"position"),r.linkProgram(m),e.debug.checkShaderErrors){const e=r.getProgramInfoLog(m).trim(),t=r.getShaderInfoLog(b).trim(),n=r.getShaderInfoLog(_).trim();let i=!0,s=!0;if(!1===r.getProgramParameter(m,35714)){i=!1;const t=lh(r,b,"vertex"),n=lh(r,_,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(m,35715)+"\n\nProgram Info Log: "+e+"\n"+t+"\n"+n)}else""!==e?console.warn("THREE.WebGLProgram: Program Info Log:",e):""!==t&&""!==n||(s=!1);s&&(this.diagnostics={runnable:i,programLog:e,vertexShader:{log:t,prefix:g},fragmentShader:{log:n,prefix:v}})}let w,S;return r.deleteShader(b),r.deleteShader(_),this.getUniforms=function(){return void 0===w&&(w=new sh(r,m)),w},this.getAttributes=function(){return void 0===S&&(S=function(e,t){const n={},i=e.getProgramParameter(t,35721);for(let r=0;r<i;r++){const i=e.getActiveAttrib(t,r),s=i.name;let a=1;35674===i.type&&(a=2),35675===i.type&&(a=3),35676===i.type&&(a=4),n[s]={type:i.type,location:e.getAttribLocation(t,s),locationSize:a}}return n}(r,m)),S},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(m),this.program=void 0},this.name=n.shaderName,this.id=oh++,this.cacheKey=t,this.usedTimes=1,this.program=m,this.vertexShader=b,this.fragmentShader=_,this}let wh=0;class Sh{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,i=this._getShaderStage(t),r=this._getShaderStage(n),s=this._getShaderCacheForMaterial(e);return!1===s.has(i)&&(s.add(i),i.usedTimes++),!1===s.has(r)&&(s.add(r),r.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return void 0===n&&(n=new Mh(e),t.set(e,n)),n}}class Mh{constructor(e){this.id=wh++,this.code=e,this.usedTimes=0}}function Eh(e,t,n,i,r,s,a){const o=new Ol,l=new Sh,c=[],u=r.isWebGL2,d=r.logarithmicDepthBuffer,h=r.vertexTextures;let p=r.precision;const f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function(s,o,c,m,g){const v=m.fog,y=g.geometry,x=s.isMeshStandardMaterial?m.environment:null,b=(s.isMeshStandardMaterial?n:t).get(s.envMap||x),_=b&&b.mapping===Jr?b.image.height:null,w=f[s.type];null!==s.precision&&(p=r.getMaxPrecision(s.precision),p!==s.precision&&console.warn("THREE.WebGLProgram.getParameters:",s.precision,"not supported, using",p,"instead."));const S=y.morphAttributes.position||y.morphAttributes.normal||y.morphAttributes.color,M=void 0!==S?S.length:0;let E,T,C,A,P=0;if(void 0!==y.morphAttributes.position&&(P=1),void 0!==y.morphAttributes.normal&&(P=2),void 0!==y.morphAttributes.color&&(P=3),w){const e=Eu[w];E=e.vertexShader,T=e.fragmentShader}else E=s.vertexShader,T=s.fragmentShader,l.update(s),C=l.getVertexShaderID(s),A=l.getFragmentShaderID(s);const N=e.getRenderTarget(),k=s.alphaTest>0,R=s.clearcoat>0,I=s.iridescence>0;return{isWebGL2:u,shaderID:w,shaderName:s.type,vertexShader:E,fragmentShader:T,defines:s.defines,customVertexShaderID:C,customFragmentShaderID:A,isRawShaderMaterial:!0===s.isRawShaderMaterial,glslVersion:s.glslVersion,precision:p,instancing:!0===g.isInstancedMesh,instancingColor:!0===g.isInstancedMesh&&null!==g.instanceColor,supportsVertexTextures:h,outputEncoding:null===N?e.outputEncoding:!0===N.isXRRenderTarget?N.texture.encoding:_a,map:!!s.map,matcap:!!s.matcap,envMap:!!b,envMapMode:b&&b.mapping,envMapCubeUVHeight:_,lightMap:!!s.lightMap,aoMap:!!s.aoMap,emissiveMap:!!s.emissiveMap,bumpMap:!!s.bumpMap,normalMap:!!s.normalMap,objectSpaceNormalMap:s.normalMapType===Ta,tangentSpaceNormalMap:s.normalMapType===Ea,decodeVideoTexture:!!s.map&&!0===s.map.isVideoTexture&&s.map.encoding===wa,clearcoat:R,clearcoatMap:R&&!!s.clearcoatMap,clearcoatRoughnessMap:R&&!!s.clearcoatRoughnessMap,clearcoatNormalMap:R&&!!s.clearcoatNormalMap,iridescence:I,iridescenceMap:I&&!!s.iridescenceMap,iridescenceThicknessMap:I&&!!s.iridescenceThicknessMap,displacementMap:!!s.displacementMap,roughnessMap:!!s.roughnessMap,metalnessMap:!!s.metalnessMap,specularMap:!!s.specularMap,specularIntensityMap:!!s.specularIntensityMap,specularColorMap:!!s.specularColorMap,opaque:!1===s.transparent&&s.blending===ar,alphaMap:!!s.alphaMap,alphaTest:k,gradientMap:!!s.gradientMap,sheen:s.sheen>0,sheenColorMap:!!s.sheenColorMap,sheenRoughnessMap:!!s.sheenRoughnessMap,transmission:s.transmission>0,transmissionMap:!!s.transmissionMap,thicknessMap:!!s.thicknessMap,combine:s.combine,vertexTangents:!!s.normalMap&&!!y.attributes.tangent,vertexColors:s.vertexColors,vertexAlphas:!0===s.vertexColors&&!!y.attributes.color&&4===y.attributes.color.itemSize,vertexUvs:!!s.map||!!s.bumpMap||!!s.normalMap||!!s.specularMap||!!s.alphaMap||!!s.emissiveMap||!!s.roughnessMap||!!s.metalnessMap||!!s.clearcoatMap||!!s.clearcoatRoughnessMap||!!s.clearcoatNormalMap||!!s.iridescenceMap||!!s.iridescenceThicknessMap||!!s.displacementMap||!!s.transmissionMap||!!s.thicknessMap||!!s.specularIntensityMap||!!s.specularColorMap||!!s.sheenColorMap||!!s.sheenRoughnessMap,uvsVertexOnly:!(s.map||s.bumpMap||s.normalMap||s.specularMap||s.alphaMap||s.emissiveMap||s.roughnessMap||s.metalnessMap||s.clearcoatNormalMap||s.iridescenceMap||s.iridescenceThicknessMap||s.transmission>0||s.transmissionMap||s.thicknessMap||s.specularIntensityMap||s.specularColorMap||s.sheen>0||s.sheenColorMap||s.sheenRoughnessMap)&&!!s.displacementMap,fog:!!v,useFog:!0===s.fog,fogExp2:v&&v.isFogExp2,flatShading:!!s.flatShading,sizeAttenuation:s.sizeAttenuation,logarithmicDepthBuffer:d,skinning:!0===g.isSkinnedMesh,morphTargets:void 0!==y.morphAttributes.position,morphNormals:void 0!==y.morphAttributes.normal,morphColors:void 0!==y.morphAttributes.color,morphTargetsCount:M,morphTextureStride:P,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numSpotLightMaps:o.spotLightMap.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numDirLightShadows:o.directionalShadowMap.length,numPointLightShadows:o.pointShadowMap.length,numSpotLightShadows:o.spotShadowMap.length,numSpotLightShadowsWithMaps:o.numSpotLightShadowsWithMaps,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:s.dithering,shadowMapEnabled:e.shadowMap.enabled&&c.length>0,shadowMapType:e.shadowMap.type,toneMapping:s.toneMapped?e.toneMapping:zr,useLegacyLights:e.useLegacyLights,premultipliedAlpha:s.premultipliedAlpha,doubleSided:s.side===ir,flipSided:s.side===nr,useDepthPacking:!!s.depthPacking,depthPacking:s.depthPacking||0,index0AttributeName:s.index0AttributeName,extensionDerivatives:s.extensions&&s.extensions.derivatives,extensionFragDepth:s.extensions&&s.extensions.fragDepth,extensionDrawBuffers:s.extensions&&s.extensions.drawBuffers,extensionShaderTextureLOD:s.extensions&&s.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||i.has("EXT_shader_texture_lod"),customProgramCacheKey:s.customProgramCacheKey()}},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(!function(e,t){e.push(t.precision),e.push(t.outputEncoding),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.combine),e.push(t.vertexUvs),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){o.disableAll(),t.isWebGL2&&o.enable(0);t.supportsVertexTextures&&o.enable(1);t.instancing&&o.enable(2);t.instancingColor&&o.enable(3);t.map&&o.enable(4);t.matcap&&o.enable(5);t.envMap&&o.enable(6);t.lightMap&&o.enable(7);t.aoMap&&o.enable(8);t.emissiveMap&&o.enable(9);t.bumpMap&&o.enable(10);t.normalMap&&o.enable(11);t.objectSpaceNormalMap&&o.enable(12);t.tangentSpaceNormalMap&&o.enable(13);t.clearcoat&&o.enable(14);t.clearcoatMap&&o.enable(15);t.clearcoatRoughnessMap&&o.enable(16);t.clearcoatNormalMap&&o.enable(17);t.iridescence&&o.enable(18);t.iridescenceMap&&o.enable(19);t.iridescenceThicknessMap&&o.enable(20);t.displacementMap&&o.enable(21);t.specularMap&&o.enable(22);t.roughnessMap&&o.enable(23);t.metalnessMap&&o.enable(24);t.gradientMap&&o.enable(25);t.alphaMap&&o.enable(26);t.alphaTest&&o.enable(27);t.vertexColors&&o.enable(28);t.vertexAlphas&&o.enable(29);t.vertexUvs&&o.enable(30);t.vertexTangents&&o.enable(31);t.uvsVertexOnly&&o.enable(32);e.push(o.mask),o.disableAll(),t.fog&&o.enable(0);t.useFog&&o.enable(1);t.flatShading&&o.enable(2);t.logarithmicDepthBuffer&&o.enable(3);t.skinning&&o.enable(4);t.morphTargets&&o.enable(5);t.morphNormals&&o.enable(6);t.morphColors&&o.enable(7);t.premultipliedAlpha&&o.enable(8);t.shadowMapEnabled&&o.enable(9);t.useLegacyLights&&o.enable(10);t.doubleSided&&o.enable(11);t.flipSided&&o.enable(12);t.useDepthPacking&&o.enable(13);t.dithering&&o.enable(14);t.specularIntensityMap&&o.enable(15);t.specularColorMap&&o.enable(16);t.transmission&&o.enable(17);t.transmissionMap&&o.enable(18);t.thicknessMap&&o.enable(19);t.sheen&&o.enable(20);t.sheenColorMap&&o.enable(21);t.sheenRoughnessMap&&o.enable(22);t.decodeVideoTexture&&o.enable(23);t.opaque&&o.enable(24);e.push(o.mask)}(n,t),n.push(e.outputEncoding)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=f[e.type];let n;if(t){const e=Eu[t];n=su.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let i;for(let e=0,r=c.length;e<r;e++){const t=c[e];if(t.cacheKey===n){i=t,++i.usedTimes;break}}return void 0===i&&(i=new _h(e,n,t,s),c.push(i)),i},releaseProgram:function(e){if(0===--e.usedTimes){const t=c.indexOf(e);c[t]=c[c.length-1],c.pop(),e.destroy()}},releaseShaderCache:function(e){l.remove(e)},programs:c,dispose:function(){l.dispose()}}}function Th(){let e=new WeakMap;return{get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,i){e.get(t)[n]=i},dispose:function(){e=new WeakMap}}}function Ch(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Ah(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Ph(){const e=[];let t=0;const n=[],i=[],r=[];function s(n,i,r,s,a,o){let l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:i,material:r,groupOrder:s,renderOrder:n.renderOrder,z:a,group:o},e[t]=l):(l.id=n.id,l.object=n,l.geometry=i,l.material=r,l.groupOrder=s,l.renderOrder=n.renderOrder,l.z=a,l.group=o),t++,l}return{opaque:n,transmissive:i,transparent:r,init:function(){t=0,n.length=0,i.length=0,r.length=0},push:function(e,t,a,o,l,c){const u=s(e,t,a,o,l,c);a.transmission>0?i.push(u):!0===a.transparent?r.push(u):n.push(u)},unshift:function(e,t,a,o,l,c){const u=s(e,t,a,o,l,c);a.transmission>0?i.unshift(u):!0===a.transparent?r.unshift(u):n.unshift(u)},finish:function(){for(let n=t,i=e.length;n<i;n++){const t=e[n];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){n.length>1&&n.sort(e||Ch),i.length>1&&i.sort(t||Ah),r.length>1&&r.sort(t||Ah)}}}function Nh(){let e=new WeakMap;return{get:function(t,n){const i=e.get(t);let r;return void 0===i?(r=new Ph,e.set(t,[r])):n>=i.length?(r=new Ph,i.push(r)):r=i[n],r},dispose:function(){e=new WeakMap}}}function kh(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new Po,color:new mc};break;case"SpotLight":n={position:new Po,direction:new Po,color:new mc,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Po,color:new mc,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Po,skyColor:new mc,groundColor:new mc};break;case"RectAreaLight":n={color:new mc,position:new Po,halfWidth:new Po,halfHeight:new Po}}return e[t.id]=n,n}}}let Rh=0;function Ih(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function Lh(e,t){const n=new kh,i=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new _o};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new _o,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let l=0;l<9;l++)r.probe.push(new Po);const s=new Po,a=new Tl,o=new Tl;return{setup:function(s,a){let o=0,l=0,c=0;for(let e=0;e<9;e++)r.probe[e].set(0,0,0);let u=0,d=0,h=0,p=0,f=0,m=0,g=0,v=0,y=0,x=0;s.sort(Ih);const b=!0===a?Math.PI:1;for(let e=0,t=s.length;e<t;e++){const t=s[e],a=t.color,_=t.intensity,w=t.distance,S=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)o+=a.r*_*b,l+=a.g*_*b,c+=a.b*_*b;else if(t.isLightProbe)for(let e=0;e<9;e++)r.probe[e].addScaledVector(t.sh.coefficients[e],_);else if(t.isDirectionalLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*b),t.castShadow){const e=t.shadow,n=i.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,r.directionalShadow[u]=n,r.directionalShadowMap[u]=S,r.directionalShadowMatrix[u]=t.shadow.matrix,m++}r.directional[u]=e,u++}else if(t.isSpotLight){const e=n.get(t);e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(a).multiplyScalar(_*b),e.distance=w,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,r.spot[h]=e;const s=t.shadow;if(t.map&&(r.spotLightMap[y]=t.map,y++,s.updateMatrices(t),t.castShadow&&x++),r.spotLightMatrix[h]=s.matrix,t.castShadow){const e=i.get(t);e.shadowBias=s.bias,e.shadowNormalBias=s.normalBias,e.shadowRadius=s.radius,e.shadowMapSize=s.mapSize,r.spotShadow[h]=e,r.spotShadowMap[h]=S,v++}h++}else if(t.isRectAreaLight){const e=n.get(t);e.color.copy(a).multiplyScalar(_),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),r.rectArea[p]=e,p++}else if(t.isPointLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*b),e.distance=t.distance,e.decay=t.decay,t.castShadow){const e=t.shadow,n=i.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,n.shadowCameraNear=e.camera.near,n.shadowCameraFar=e.camera.far,r.pointShadow[d]=n,r.pointShadowMap[d]=S,r.pointShadowMatrix[d]=t.shadow.matrix,g++}r.point[d]=e,d++}else if(t.isHemisphereLight){const e=n.get(t);e.skyColor.copy(t.color).multiplyScalar(_*b),e.groundColor.copy(t.groundColor).multiplyScalar(_*b),r.hemi[f]=e,f++}}p>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(r.rectAreaLTC1=Mu.LTC_FLOAT_1,r.rectAreaLTC2=Mu.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=Mu.LTC_HALF_1,r.rectAreaLTC2=Mu.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=o,r.ambient[1]=l,r.ambient[2]=c;const _=r.hash;_.directionalLength===u&&_.pointLength===d&&_.spotLength===h&&_.rectAreaLength===p&&_.hemiLength===f&&_.numDirectionalShadows===m&&_.numPointShadows===g&&_.numSpotShadows===v&&_.numSpotMaps===y||(r.directional.length=u,r.spot.length=h,r.rectArea.length=p,r.point.length=d,r.hemi.length=f,r.directionalShadow.length=m,r.directionalShadowMap.length=m,r.pointShadow.length=g,r.pointShadowMap.length=g,r.spotShadow.length=v,r.spotShadowMap.length=v,r.directionalShadowMatrix.length=m,r.pointShadowMatrix.length=g,r.spotLightMatrix.length=v+y-x,r.spotLightMap.length=y,r.numSpotLightShadowsWithMaps=x,_.directionalLength=u,_.pointLength=d,_.spotLength=h,_.rectAreaLength=p,_.hemiLength=f,_.numDirectionalShadows=m,_.numPointShadows=g,_.numSpotShadows=v,_.numSpotMaps=y,r.version=Rh++)},setupView:function(e,t){let n=0,i=0,l=0,c=0,u=0;const d=t.matrixWorldInverse;for(let h=0,p=e.length;h<p;h++){const t=e[h];if(t.isDirectionalLight){const e=r.directional[n];e.direction.setFromMatrixPosition(t.matrixWorld),s.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(s),e.direction.transformDirection(d),n++}else if(t.isSpotLight){const e=r.spot[l];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(d),e.direction.setFromMatrixPosition(t.matrixWorld),s.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(s),e.direction.transformDirection(d),l++}else if(t.isRectAreaLight){const e=r.rectArea[c];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(d),o.identity(),a.copy(t.matrixWorld),a.premultiply(d),o.extractRotation(a),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),e.halfWidth.applyMatrix4(o),e.halfHeight.applyMatrix4(o),c++}else if(t.isPointLight){const e=r.point[i];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(d),i++}else if(t.isHemisphereLight){const e=r.hemi[u];e.direction.setFromMatrixPosition(t.matrixWorld),e.direction.transformDirection(d),u++}}},state:r}}function jh(e,t){const n=new Lh(e,t),i=[],r=[];return{init:function(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:n},setupLights:function(e){n.setup(i,e)},setupLightsView:function(e){n.setupView(i,e)},pushLight:function(e){i.push(e)},pushShadow:function(e){r.push(e)}}}function Dh(e,t){let n=new WeakMap;return{get:function(i){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const s=n.get(i);let a;return void 0===s?(a=new jh(e,t),n.set(i,[a])):r>=s.length?(a=new jh(e,t),s.push(a)):a=s[r],a},dispose:function(){n=new WeakMap}}}class Oh extends uc{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Sa,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class zh extends uc{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new Po,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const Fh="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",Uh="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function Bh(e,t,n){let i=new xu;const r=new _o,s=new _o,a=new qo,o=new Oh({depthPacking:Ma}),l=new zh,c={},u=n.maxTextureSize,d={[tr]:nr,[nr]:tr,[ir]:ir},h=new au({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new _o},radius:{value:4}},vertexShader:Fh,fragmentShader:Uh}),p=h.clone();p.defines.HORIZONTAL_PASS=1;const f=new zc;f.setAttribute("position",new bc(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new $c(f,h),g=this;function v(n,i){const s=t.update(m);h.defines.VSM_SAMPLES!==n.blurSamples&&(h.defines.VSM_SAMPLES=n.blurSamples,p.defines.VSM_SAMPLES=n.blurSamples,h.needsUpdate=!0,p.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new Xo(r.x,r.y)),h.uniforms.shadow_pass.value=n.map.texture,h.uniforms.resolution.value=n.mapSize,h.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(i,null,s,h,m,null),p.uniforms.shadow_pass.value=n.mapPass.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(i,null,s,p,m,null)}function y(t,n,i,r,s,a){let u=null;const h=!0===i.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==h)u=h;else if(u=!0===i.isPointLight?l:o,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){const e=u.uuid,t=n.uuid;let i=c[e];void 0===i&&(i={},c[e]=i);let r=i[t];void 0===r&&(r=u.clone(),i[t]=r),u=r}return u.visible=n.visible,u.wireframe=n.wireframe,u.side=a===er?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:d[n.side],u.alphaMap=n.alphaMap,u.alphaTest=n.alphaTest,u.map=n.map,u.clipShadows=n.clipShadows,u.clippingPlanes=n.clippingPlanes,u.clipIntersection=n.clipIntersection,u.displacementMap=n.displacementMap,u.displacementScale=n.displacementScale,u.displacementBias=n.displacementBias,u.wireframeLinewidth=n.wireframeLinewidth,u.linewidth=n.linewidth,!0===i.isPointLight&&!0===u.isMeshDistanceMaterial&&(u.referencePosition.setFromMatrixPosition(i.matrixWorld),u.nearDistance=r,u.farDistance=s),u}function x(n,r,s,a,o){if(!1===n.visible)return;if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&o===er)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(s.matrixWorldInverse,n.matrixWorld);const i=t.update(n),r=n.material;if(Array.isArray(r)){const t=i.groups;for(let l=0,c=t.length;l<c;l++){const c=t[l],u=r[c.materialIndex];if(u&&u.visible){const t=y(n,u,a,s.near,s.far,o);e.renderBufferDirect(s,null,i,t,n,c)}}}else if(r.visible){const t=y(n,r,a,s.near,s.far,o);e.renderBufferDirect(s,null,i,t,n,null)}}const l=n.children;for(let e=0,t=l.length;e<t;e++)x(l[e],r,s,a,o)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Qi,this.render=function(t,n,o){if(!1===g.enabled)return;if(!1===g.autoUpdate&&!1===g.needsUpdate)return;if(0===t.length)return;const l=e.getRenderTarget(),c=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),h=e.state;h.setBlending(sr),h.buffers.color.setClear(1,1,1,1),h.buffers.depth.setTest(!0),h.setScissorTest(!1);for(let p=0,f=t.length;p<f;p++){const l=t[p],c=l.shadow;if(void 0===c){console.warn("THREE.WebGLShadowMap:",l,"has no shadow.");continue}if(!1===c.autoUpdate&&!1===c.needsUpdate)continue;r.copy(c.mapSize);const d=c.getFrameExtents();if(r.multiply(d),s.copy(c.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/d.x),r.x=s.x*d.x,c.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/d.y),r.y=s.y*d.y,c.mapSize.y=s.y)),null===c.map){const e=this.type!==er?{minFilter:$r,magFilter:$r}:{};c.map=new Xo(r.x,r.y,e),c.map.texture.name=l.name+".shadowMap",c.camera.updateProjectionMatrix()}e.setRenderTarget(c.map),e.clear();const f=c.getViewportCount();for(let e=0;e<f;e++){const t=c.getViewport(e);a.set(s.x*t.x,s.y*t.y,s.x*t.z,s.y*t.w),h.viewport(a),c.updateMatrices(l,e),i=c.getFrustum(),x(n,o,c.camera,l,this.type)}!0!==c.isPointLightShadow&&this.type===er&&v(c,o),c.needsUpdate=!1}g.needsUpdate=!1,e.setRenderTarget(l,c,d)}}function Vh(e,t,n){const i=n.isWebGL2;const r=new function(){let t=!1;const n=new qo;let i=null;const r=new qo(0,0,0,0);return{setMask:function(n){i===n||t||(e.colorMask(n,n,n,n),i=n)},setLocked:function(e){t=e},setClear:function(t,i,s,a,o){!0===o&&(t*=a,i*=a,s*=a),n.set(t,i,s,a),!1===r.equals(n)&&(e.clearColor(t,i,s,a),r.copy(n))},reset:function(){t=!1,i=null,r.set(-1,0,0,0)}}},s=new function(){let t=!1,n=null,i=null,r=null;return{setTest:function(e){e?U(2929):B(2929)},setMask:function(i){n===i||t||(e.depthMask(i),n=i)},setFunc:function(t){if(i!==t){switch(t){case Cr:e.depthFunc(512);break;case Ar:e.depthFunc(519);break;case Pr:e.depthFunc(513);break;case Nr:e.depthFunc(515);break;case kr:e.depthFunc(514);break;case Rr:e.depthFunc(518);break;case Ir:e.depthFunc(516);break;case Lr:e.depthFunc(517);break;default:e.depthFunc(515)}i=t}},setLocked:function(e){t=e},setClear:function(t){r!==t&&(e.clearDepth(t),r=t)},reset:function(){t=!1,n=null,i=null,r=null}}},a=new function(){let t=!1,n=null,i=null,r=null,s=null,a=null,o=null,l=null,c=null;return{setTest:function(e){t||(e?U(2960):B(2960))},setMask:function(i){n===i||t||(e.stencilMask(i),n=i)},setFunc:function(t,n,a){i===t&&r===n&&s===a||(e.stencilFunc(t,n,a),i=t,r=n,s=a)},setOp:function(t,n,i){a===t&&o===n&&l===i||(e.stencilOp(t,n,i),a=t,o=n,l=i)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,i=null,r=null,s=null,a=null,o=null,l=null,c=null}}},o=new WeakMap,l=new WeakMap;let c={},u={},d=new WeakMap,h=[],p=null,f=!1,m=null,g=null,v=null,y=null,x=null,b=null,_=null,w=!1,S=null,M=null,E=null,T=null,C=null;const A=e.getParameter(35661);let P=!1,N=0;const k=e.getParameter(7938);-1!==k.indexOf("WebGL")?(N=parseFloat(/^WebGL (\d)/.exec(k)[1]),P=N>=1):-1!==k.indexOf("OpenGL ES")&&(N=parseFloat(/^OpenGL ES (\d)/.exec(k)[1]),P=N>=2);let R=null,I={};const L=e.getParameter(3088),j=e.getParameter(2978),D=(new qo).fromArray(L),O=(new qo).fromArray(j);function z(t,n,i){const r=new Uint8Array(4),s=e.createTexture();e.bindTexture(t,s),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(let a=0;a<i;a++)e.texImage2D(n+a,0,6408,1,1,0,6408,5121,r);return s}const F={};function U(t){!0!==c[t]&&(e.enable(t),c[t]=!0)}function B(t){!1!==c[t]&&(e.disable(t),c[t]=!1)}F[3553]=z(3553,3553,1),F[34067]=z(34067,34069,6),r.setClear(0,0,0,1),s.setClear(1),a.setClear(0),U(2929),s.setFunc(Nr),G(!1),q(Yi),U(2884),W(sr);const V={[dr]:32774,[hr]:32778,[pr]:32779};if(i)V[fr]=32775,V[mr]=32776;else{const e=t.get("EXT_blend_minmax");null!==e&&(V[fr]=e.MIN_EXT,V[mr]=e.MAX_EXT)}const H={[gr]:0,[vr]:1,[yr]:768,[br]:770,[Tr]:776,[Mr]:774,[wr]:772,[xr]:769,[_r]:771,[Er]:775,[Sr]:773};function W(t,n,i,r,s,a,o,l){if(t!==sr){if(!1===f&&(U(3042),f=!0),t===ur)s=s||n,a=a||i,o=o||r,n===g&&s===x||(e.blendEquationSeparate(V[n],V[s]),g=n,x=s),i===v&&r===y&&a===b&&o===_||(e.blendFuncSeparate(H[i],H[r],H[a],H[o]),v=i,y=r,b=a,_=o),m=t,w=!1;else if(t!==m||l!==w){if(g===dr&&x===dr||(e.blendEquation(32774),g=dr,x=dr),l)switch(t){case ar:e.blendFuncSeparate(1,771,1,771);break;case or:e.blendFunc(1,1);break;case lr:e.blendFuncSeparate(0,769,0,1);break;case cr:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case ar:e.blendFuncSeparate(770,771,1,771);break;case or:e.blendFunc(770,1);break;case lr:e.blendFuncSeparate(0,769,0,1);break;case cr:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}v=null,y=null,b=null,_=null,m=t,w=l}}else!0===f&&(B(3042),f=!1)}function G(t){S!==t&&(t?e.frontFace(2304):e.frontFace(2305),S=t)}function q(t){t!==Xi?(U(2884),t!==M&&(t===Yi?e.cullFace(1029):t===Ji?e.cullFace(1028):e.cullFace(1032))):B(2884),M=t}function X(t,n,i){t?(U(32823),T===n&&C===i||(e.polygonOffset(n,i),T=n,C=i)):B(32823)}return{buffers:{color:r,depth:s,stencil:a},enable:U,disable:B,bindFramebuffer:function(t,n){return u[t]!==n&&(e.bindFramebuffer(t,n),u[t]=n,i&&(36009===t&&(u[36160]=n),36160===t&&(u[36009]=n)),!0)},drawBuffers:function(i,r){let s=h,a=!1;if(i)if(s=d.get(r),void 0===s&&(s=[],d.set(r,s)),i.isWebGLMultipleRenderTargets){const e=i.texture;if(s.length!==e.length||36064!==s[0]){for(let t=0,n=e.length;t<n;t++)s[t]=36064+t;s.length=e.length,a=!0}}else 36064!==s[0]&&(s[0]=36064,a=!0);else 1029!==s[0]&&(s[0]=1029,a=!0);a&&(n.isWebGL2?e.drawBuffers(s):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(s))},useProgram:function(t){return p!==t&&(e.useProgram(t),p=t,!0)},setBlending:W,setMaterial:function(e,t){e.side===ir?B(2884):U(2884);let n=e.side===nr;t&&(n=!n),G(n),e.blending===ar&&!1===e.transparent?W(sr):W(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),s.setFunc(e.depthFunc),s.setTest(e.depthTest),s.setMask(e.depthWrite),r.setMask(e.colorWrite);const i=e.stencilWrite;a.setTest(i),i&&(a.setMask(e.stencilWriteMask),a.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),a.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),X(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?U(32926):B(32926)},setFlipSided:G,setCullFace:q,setLineWidth:function(t){t!==E&&(P&&e.lineWidth(t),E=t)},setPolygonOffset:X,setScissorTest:function(e){e?U(3089):B(3089)},activeTexture:function(t){void 0===t&&(t=33984+A-1),R!==t&&(e.activeTexture(t),R=t)},bindTexture:function(t,n,i){void 0===i&&(i=null===R?33984+A-1:R);let r=I[i];void 0===r&&(r={type:void 0,texture:void 0},I[i]=r),r.type===t&&r.texture===n||(R!==i&&(e.activeTexture(i),R=i),e.bindTexture(t,n||F[t]),r.type=t,r.texture=n)},unbindTexture:function(){const t=I[R];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(Ib){console.error("THREE.WebGLState:",Ib)}},compressedTexImage3D:function(){try{e.compressedTexImage3D.apply(e,arguments)}catch(Ib){console.error("THREE.WebGLState:",Ib)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(Ib){console.error("THREE.WebGLState:",Ib)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(Ib){console.error("THREE.WebGLState:",Ib)}},updateUBOMapping:function(t,n){let i=l.get(n);void 0===i&&(i=new WeakMap,l.set(n,i));let r=i.get(t);void 0===r&&(r=e.getUniformBlockIndex(n,t.name),i.set(t,r))},uniformBlockBinding:function(t,n){const i=l.get(n).get(t);o.get(n)!==i&&(e.uniformBlockBinding(n,i,t.__bindingPointIndex),o.set(n,i))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(Ib){console.error("THREE.WebGLState:",Ib)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(Ib){console.error("THREE.WebGLState:",Ib)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(Ib){console.error("THREE.WebGLState:",Ib)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(Ib){console.error("THREE.WebGLState:",Ib)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(Ib){console.error("THREE.WebGLState:",Ib)}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(Ib){console.error("THREE.WebGLState:",Ib)}},scissor:function(t){!1===D.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),D.copy(t))},viewport:function(t){!1===O.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),O.copy(t))},reset:function(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===i&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),c={},R=null,I={},u={},d=new WeakMap,h=[],p=null,f=!1,m=null,g=null,v=null,y=null,x=null,b=null,_=null,w=!1,S=null,M=null,E=null,T=null,C=null,D.set(0,0,e.canvas.width,e.canvas.height),O.set(0,0,e.canvas.width,e.canvas.height),r.reset(),s.reset(),a.reset()}}}function Hh(e,t,n,i,r,s,a){const o=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,u=r.maxTextureSize,d=r.maxSamples,h=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,p="undefined"!==typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),f=new WeakMap;let m;const g=new WeakMap;let v=!1;try{v="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(V){}function y(e,t){return v?new OffscreenCanvas(e,t):Co("canvas")}function x(e,t,n,i){let r=1;if((e.width>i||e.height>i)&&(r=i/Math.max(e.width,e.height)),r<1||!0===t){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){const i=t?vo:Math.floor,s=i(r*e.width),a=i(r*e.height);void 0===m&&(m=y(s,a));const o=n?y(s,a):m;o.width=s,o.height=a;return o.getContext("2d").drawImage(e,0,0,s,a),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+s+"x"+a+")."),o}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function b(e){return mo(e.width)&&mo(e.height)}function _(e,t){return e.generateMipmaps&&t&&e.minFilter!==$r&&e.minFilter!==rs}function w(t){e.generateMipmap(t)}function S(n,i,r,s){let a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!1===o)return i;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let l=i;return 6403===i&&(5126===r&&(l=33326),5131===r&&(l=33325),5121===r&&(l=33321)),33319===i&&(5126===r&&(l=33328),5131===r&&(l=33327),5121===r&&(l=33323)),6408===i&&(5126===r&&(l=34836),5131===r&&(l=34842),5121===r&&(l=s===wa&&!1===a?35907:32856),32819===r&&(l=32854),32820===r&&(l=32855)),33325!==l&&33326!==l&&33327!==l&&33328!==l&&34842!==l&&34836!==l||t.get("EXT_color_buffer_float"),l}function M(e,t,n){return!0===_(e,n)||e.isFramebufferTexture&&e.minFilter!==$r&&e.minFilter!==rs?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function E(e){return e===$r||e===es||e===ns?9728:9729}function T(e){const t=e.target;t.removeEventListener("dispose",T),function(e){const t=i.get(e);if(void 0===t.__webglInit)return;const n=e.source,r=g.get(n);if(r){const i=r[t.__cacheKey];i.usedTimes--,0===i.usedTimes&&A(e),0===Object.keys(r).length&&g.delete(n)}i.remove(e)}(t),t.isVideoTexture&&f.delete(t)}function C(t){const n=t.target;n.removeEventListener("dispose",C),function(t){const n=t.texture,r=i.get(t),s=i.get(n);void 0!==s.__webglTexture&&(e.deleteTexture(s.__webglTexture),a.memory.textures--);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(let i=0;i<6;i++)e.deleteFramebuffer(r.__webglFramebuffer[i]),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer[i]);else{if(e.deleteFramebuffer(r.__webglFramebuffer),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer),r.__webglMultisampledFramebuffer&&e.deleteFramebuffer(r.__webglMultisampledFramebuffer),r.__webglColorRenderbuffer)for(let t=0;t<r.__webglColorRenderbuffer.length;t++)r.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(r.__webglColorRenderbuffer[t]);r.__webglDepthRenderbuffer&&e.deleteRenderbuffer(r.__webglDepthRenderbuffer)}if(t.isWebGLMultipleRenderTargets)for(let o=0,l=n.length;o<l;o++){const t=i.get(n[o]);t.__webglTexture&&(e.deleteTexture(t.__webglTexture),a.memory.textures--),i.remove(n[o])}i.remove(n),i.remove(t)}(n)}function A(t){const n=i.get(t);e.deleteTexture(n.__webglTexture);const r=t.source;delete g.get(r)[n.__cacheKey],a.memory.textures--}let P=0;function N(e,t){const r=i.get(e);if(e.isVideoTexture&&function(e){const t=a.render.frame;f.get(e)!==t&&(f.set(e,t),e.update())}(e),!1===e.isRenderTargetTexture&&e.version>0&&r.__version!==e.version){const n=e.image;if(null===n)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==n.complete)return void j(r,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(3553,r.__webglTexture,33984+t)}const k={[Kr]:10497,[Zr]:33071,[Qr]:33648},R={[$r]:9728,[es]:9984,[ns]:9986,[rs]:9729,[ss]:9985,[os]:9987};function I(n,s,a){if(a?(e.texParameteri(n,10242,k[s.wrapS]),e.texParameteri(n,10243,k[s.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,k[s.wrapR]),e.texParameteri(n,10240,R[s.magFilter]),e.texParameteri(n,10241,R[s.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),s.wrapS===Zr&&s.wrapT===Zr||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,E(s.magFilter)),e.texParameteri(n,10241,E(s.minFilter)),s.minFilter!==$r&&s.minFilter!==rs&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){const a=t.get("EXT_texture_filter_anisotropic");if(s.magFilter===$r)return;if(s.minFilter!==ns&&s.minFilter!==os)return;if(s.type===ms&&!1===t.has("OES_texture_float_linear"))return;if(!1===o&&s.type===gs&&!1===t.has("OES_texture_half_float_linear"))return;(s.anisotropy>1||i.get(s).__currentAnisotropy)&&(e.texParameterf(n,a.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(s.anisotropy,r.getMaxAnisotropy())),i.get(s).__currentAnisotropy=s.anisotropy)}}function L(t,n){let i=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",T));const r=n.source;let s=g.get(r);void 0===s&&(s={},g.set(r,s));const o=function(e){const t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.encoding),t.join()}(n);if(o!==t.__cacheKey){void 0===s[o]&&(s[o]={texture:e.createTexture(),usedTimes:0},a.memory.textures++,i=!0),s[o].usedTimes++;const r=s[t.__cacheKey];void 0!==r&&(s[t.__cacheKey].usedTimes--,0===r.usedTimes&&A(n)),t.__cacheKey=o,t.__webglTexture=s[o].texture}return i}function j(t,r,a){let l=3553;(r.isDataArrayTexture||r.isCompressedArrayTexture)&&(l=35866),r.isData3DTexture&&(l=32879);const c=L(t,r),d=r.source;n.bindTexture(l,t.__webglTexture,33984+a);const h=i.get(d);if(d.version!==h.__version||!0===c){n.activeTexture(33984+a),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);const t=function(e){return!o&&(e.wrapS!==Zr||e.wrapT!==Zr||e.minFilter!==$r&&e.minFilter!==rs)}(r)&&!1===b(r.image);let i=x(r.image,t,!1,u);i=B(r,i);const p=b(i)||o,f=s.convert(r.format,r.encoding);let m,g=s.convert(r.type),v=S(r.internalFormat,f,g,r.encoding,r.isVideoTexture);I(l,r,p);const y=r.mipmaps,E=o&&!0!==r.isVideoTexture,T=void 0===h.__version||!0===c,C=M(r,i,p);if(r.isDepthTexture)v=6402,o?v=r.type===ms?36012:r.type===fs?33190:r.type===xs?35056:33189:r.type===ms&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===Ms&&6402===v&&r.type!==hs&&r.type!==fs&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=fs,g=s.convert(r.type)),r.format===Es&&6402===v&&(v=34041,r.type!==xs&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=xs,g=s.convert(r.type))),T&&(E?n.texStorage2D(3553,1,v,i.width,i.height):n.texImage2D(3553,0,v,i.width,i.height,0,f,g,null));else if(r.isDataTexture)if(y.length>0&&p){E&&T&&n.texStorage2D(3553,C,v,y[0].width,y[0].height);for(let e=0,t=y.length;e<t;e++)m=y[e],E?n.texSubImage2D(3553,e,0,0,m.width,m.height,f,g,m.data):n.texImage2D(3553,e,v,m.width,m.height,0,f,g,m.data);r.generateMipmaps=!1}else E?(T&&n.texStorage2D(3553,C,v,i.width,i.height),n.texSubImage2D(3553,0,0,0,i.width,i.height,f,g,i.data)):n.texImage2D(3553,0,v,i.width,i.height,0,f,g,i.data);else if(r.isCompressedTexture)if(r.isCompressedArrayTexture){E&&T&&n.texStorage3D(35866,C,v,y[0].width,y[0].height,i.depth);for(let e=0,t=y.length;e<t;e++)m=y[e],r.format!==_s?null!==f?E?n.compressedTexSubImage3D(35866,e,0,0,0,m.width,m.height,i.depth,f,m.data,0,0):n.compressedTexImage3D(35866,e,v,m.width,m.height,i.depth,0,m.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):E?n.texSubImage3D(35866,e,0,0,0,m.width,m.height,i.depth,f,g,m.data):n.texImage3D(35866,e,v,m.width,m.height,i.depth,0,f,g,m.data)}else{E&&T&&n.texStorage2D(3553,C,v,y[0].width,y[0].height);for(let e=0,t=y.length;e<t;e++)m=y[e],r.format!==_s?null!==f?E?n.compressedTexSubImage2D(3553,e,0,0,m.width,m.height,f,m.data):n.compressedTexImage2D(3553,e,v,m.width,m.height,0,m.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):E?n.texSubImage2D(3553,e,0,0,m.width,m.height,f,g,m.data):n.texImage2D(3553,e,v,m.width,m.height,0,f,g,m.data)}else if(r.isDataArrayTexture)E?(T&&n.texStorage3D(35866,C,v,i.width,i.height,i.depth),n.texSubImage3D(35866,0,0,0,0,i.width,i.height,i.depth,f,g,i.data)):n.texImage3D(35866,0,v,i.width,i.height,i.depth,0,f,g,i.data);else if(r.isData3DTexture)E?(T&&n.texStorage3D(32879,C,v,i.width,i.height,i.depth),n.texSubImage3D(32879,0,0,0,0,i.width,i.height,i.depth,f,g,i.data)):n.texImage3D(32879,0,v,i.width,i.height,i.depth,0,f,g,i.data);else if(r.isFramebufferTexture){if(T)if(E)n.texStorage2D(3553,C,v,i.width,i.height);else{let e=i.width,t=i.height;for(let i=0;i<C;i++)n.texImage2D(3553,i,v,e,t,0,f,g,null),e>>=1,t>>=1}}else if(y.length>0&&p){E&&T&&n.texStorage2D(3553,C,v,y[0].width,y[0].height);for(let e=0,t=y.length;e<t;e++)m=y[e],E?n.texSubImage2D(3553,e,0,0,f,g,m):n.texImage2D(3553,e,v,f,g,m);r.generateMipmaps=!1}else E?(T&&n.texStorage2D(3553,C,v,i.width,i.height),n.texSubImage2D(3553,0,0,0,f,g,i)):n.texImage2D(3553,0,v,f,g,i);_(r,p)&&w(l),h.__version=d.version,r.onUpdate&&r.onUpdate(r)}t.__version=r.version}function D(t,r,a,o,l){const c=s.convert(a.format,a.encoding),u=s.convert(a.type),d=S(a.internalFormat,c,u,a.encoding);i.get(r).__hasExternalTextures||(32879===l||35866===l?n.texImage3D(l,0,d,r.width,r.height,r.depth,0,c,u,null):n.texImage2D(l,0,d,r.width,r.height,0,c,u,null)),n.bindFramebuffer(36160,t),U(r)?h.framebufferTexture2DMultisampleEXT(36160,o,l,i.get(a).__webglTexture,0,F(r)):(3553===l||l>=34069&&l<=34074)&&e.framebufferTexture2D(36160,o,l,i.get(a).__webglTexture,0),n.bindFramebuffer(36160,null)}function O(t,n,i){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){let r=33189;if(i||U(n)){const t=n.depthTexture;t&&t.isDepthTexture&&(t.type===ms?r=36012:t.type===fs&&(r=33190));const i=F(n);U(n)?h.renderbufferStorageMultisampleEXT(36161,i,r,n.width,n.height):e.renderbufferStorageMultisample(36161,i,r,n.width,n.height)}else e.renderbufferStorage(36161,r,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){const r=F(n);i&&!1===U(n)?e.renderbufferStorageMultisample(36161,r,35056,n.width,n.height):U(n)?h.renderbufferStorageMultisampleEXT(36161,r,35056,n.width,n.height):e.renderbufferStorage(36161,34041,n.width,n.height),e.framebufferRenderbuffer(36160,33306,36161,t)}else{const t=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture];for(let r=0;r<t.length;r++){const a=t[r],o=s.convert(a.format,a.encoding),l=s.convert(a.type),c=S(a.internalFormat,o,l,a.encoding),u=F(n);i&&!1===U(n)?e.renderbufferStorageMultisample(36161,u,c,n.width,n.height):U(n)?h.renderbufferStorageMultisampleEXT(36161,u,c,n.width,n.height):e.renderbufferStorage(36161,c,n.width,n.height)}}e.bindRenderbuffer(36161,null)}function z(t){const r=i.get(t),s=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!r.__autoAllocateDepthBuffer){if(s)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,r){if(r&&r.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,t),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(r.depthTexture).__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),N(r.depthTexture,0);const s=i.get(r.depthTexture).__webglTexture,a=F(r);if(r.depthTexture.format===Ms)U(r)?h.framebufferTexture2DMultisampleEXT(36160,36096,3553,s,0,a):e.framebufferTexture2D(36160,36096,3553,s,0);else{if(r.depthTexture.format!==Es)throw new Error("Unknown depthTexture format");U(r)?h.framebufferTexture2DMultisampleEXT(36160,33306,3553,s,0,a):e.framebufferTexture2D(36160,33306,3553,s,0)}}(r.__webglFramebuffer,t)}else if(s){r.__webglDepthbuffer=[];for(let i=0;i<6;i++)n.bindFramebuffer(36160,r.__webglFramebuffer[i]),r.__webglDepthbuffer[i]=e.createRenderbuffer(),O(r.__webglDepthbuffer[i],t,!1)}else n.bindFramebuffer(36160,r.__webglFramebuffer),r.__webglDepthbuffer=e.createRenderbuffer(),O(r.__webglDepthbuffer,t,!1);n.bindFramebuffer(36160,null)}function F(e){return Math.min(d,e.samples)}function U(e){const n=i.get(e);return o&&e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function B(e,n){const i=e.encoding,r=e.format,s=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||e.format===ro||i!==_a&&(i===wa?!1===o?!0===t.has("EXT_sRGB")&&r===_s?(e.format=ro,e.minFilter=rs,e.generateMipmaps=!1):n=Bo.sRGBToLinear(n):r===_s&&s===cs||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",i)),n}this.allocateTextureUnit=function(){const e=P;return e>=l&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+l),P+=1,e},this.resetTextureUnits=function(){P=0},this.setTexture2D=N,this.setTexture2DArray=function(e,t){const r=i.get(e);e.version>0&&r.__version!==e.version?j(r,e,t):n.bindTexture(35866,r.__webglTexture,33984+t)},this.setTexture3D=function(e,t){const r=i.get(e);e.version>0&&r.__version!==e.version?j(r,e,t):n.bindTexture(32879,r.__webglTexture,33984+t)},this.setTextureCube=function(t,r){const a=i.get(t);t.version>0&&a.__version!==t.version?function(t,r,a){if(6!==r.image.length)return;const l=L(t,r),u=r.source;n.bindTexture(34067,t.__webglTexture,33984+a);const d=i.get(u);if(u.version!==d.__version||!0===l){n.activeTexture(33984+a),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);const t=r.isCompressedTexture||r.image[0].isCompressedTexture,i=r.image[0]&&r.image[0].isDataTexture,h=[];for(let e=0;e<6;e++)h[e]=t||i?i?r.image[e].image:r.image[e]:x(r.image[e],!1,!0,c),h[e]=B(r,h[e]);const p=h[0],f=b(p)||o,m=s.convert(r.format,r.encoding),g=s.convert(r.type),v=S(r.internalFormat,m,g,r.encoding),y=o&&!0!==r.isVideoTexture,E=void 0===d.__version||!0===l;let T,C=M(r,p,f);if(I(34067,r,f),t){y&&E&&n.texStorage2D(34067,C,v,p.width,p.height);for(let e=0;e<6;e++){T=h[e].mipmaps;for(let t=0;t<T.length;t++){const i=T[t];r.format!==_s?null!==m?y?n.compressedTexSubImage2D(34069+e,t,0,0,i.width,i.height,m,i.data):n.compressedTexImage2D(34069+e,t,v,i.width,i.height,0,i.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):y?n.texSubImage2D(34069+e,t,0,0,i.width,i.height,m,g,i.data):n.texImage2D(34069+e,t,v,i.width,i.height,0,m,g,i.data)}}}else{T=r.mipmaps,y&&E&&(T.length>0&&C++,n.texStorage2D(34067,C,v,h[0].width,h[0].height));for(let e=0;e<6;e++)if(i){y?n.texSubImage2D(34069+e,0,0,0,h[e].width,h[e].height,m,g,h[e].data):n.texImage2D(34069+e,0,v,h[e].width,h[e].height,0,m,g,h[e].data);for(let t=0;t<T.length;t++){const i=T[t].image[e].image;y?n.texSubImage2D(34069+e,t+1,0,0,i.width,i.height,m,g,i.data):n.texImage2D(34069+e,t+1,v,i.width,i.height,0,m,g,i.data)}}else{y?n.texSubImage2D(34069+e,0,0,0,m,g,h[e]):n.texImage2D(34069+e,0,v,m,g,h[e]);for(let t=0;t<T.length;t++){const i=T[t];y?n.texSubImage2D(34069+e,t+1,0,0,m,g,i.image[e]):n.texImage2D(34069+e,t+1,v,m,g,i.image[e])}}}_(r,f)&&w(34067),d.__version=u.version,r.onUpdate&&r.onUpdate(r)}t.__version=r.version}(a,t,r):n.bindTexture(34067,a.__webglTexture,33984+r)},this.rebindTextures=function(e,t,n){const r=i.get(e);void 0!==t&&D(r.__webglFramebuffer,e,e.texture,36064,3553),void 0!==n&&z(e)},this.setupRenderTarget=function(t){const l=t.texture,c=i.get(t),u=i.get(l);t.addEventListener("dispose",C),!0!==t.isWebGLMultipleRenderTargets&&(void 0===u.__webglTexture&&(u.__webglTexture=e.createTexture()),u.__version=l.version,a.memory.textures++);const d=!0===t.isWebGLCubeRenderTarget,h=!0===t.isWebGLMultipleRenderTargets,p=b(t)||o;if(d){c.__webglFramebuffer=[];for(let t=0;t<6;t++)c.__webglFramebuffer[t]=e.createFramebuffer()}else{if(c.__webglFramebuffer=e.createFramebuffer(),h)if(r.drawBuffers){const n=t.texture;for(let t=0,r=n.length;t<r;t++){const r=i.get(n[t]);void 0===r.__webglTexture&&(r.__webglTexture=e.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(o&&t.samples>0&&!1===U(t)){const i=h?l:[l];c.__webglMultisampledFramebuffer=e.createFramebuffer(),c.__webglColorRenderbuffer=[],n.bindFramebuffer(36160,c.__webglMultisampledFramebuffer);for(let n=0;n<i.length;n++){const r=i[n];c.__webglColorRenderbuffer[n]=e.createRenderbuffer(),e.bindRenderbuffer(36161,c.__webglColorRenderbuffer[n]);const a=s.convert(r.format,r.encoding),o=s.convert(r.type),l=S(r.internalFormat,a,o,r.encoding,!0===t.isXRRenderTarget),u=F(t);e.renderbufferStorageMultisample(36161,u,l,t.width,t.height),e.framebufferRenderbuffer(36160,36064+n,36161,c.__webglColorRenderbuffer[n])}e.bindRenderbuffer(36161,null),t.depthBuffer&&(c.__webglDepthRenderbuffer=e.createRenderbuffer(),O(c.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(36160,null)}}if(d){n.bindTexture(34067,u.__webglTexture),I(34067,l,p);for(let e=0;e<6;e++)D(c.__webglFramebuffer[e],t,l,36064,34069+e);_(l,p)&&w(34067),n.unbindTexture()}else if(h){const e=t.texture;for(let r=0,s=e.length;r<s;r++){const s=e[r],a=i.get(s);n.bindTexture(3553,a.__webglTexture),I(3553,s,p),D(c.__webglFramebuffer,t,s,36064+r,3553),_(s,p)&&w(3553)}n.unbindTexture()}else{let e=3553;(t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(o?e=t.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(e,u.__webglTexture),I(e,l,p),D(c.__webglFramebuffer,t,l,36064,e),_(l,p)&&w(e),n.unbindTexture()}t.depthBuffer&&z(t)},this.updateRenderTargetMipmap=function(e){const t=b(e)||o,r=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture];for(let s=0,a=r.length;s<a;s++){const a=r[s];if(_(a,t)){const t=e.isWebGLCubeRenderTarget?34067:3553,r=i.get(a).__webglTexture;n.bindTexture(t,r),w(t),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(o&&t.samples>0&&!1===U(t)){const r=t.isWebGLMultipleRenderTargets?t.texture:[t.texture],s=t.width,a=t.height;let o=16384;const l=[],c=t.stencilBuffer?33306:36096,u=i.get(t),d=!0===t.isWebGLMultipleRenderTargets;if(d)for(let t=0;t<r.length;t++)n.bindFramebuffer(36160,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+t,36161,null),n.bindFramebuffer(36160,u.__webglFramebuffer),e.framebufferTexture2D(36009,36064+t,3553,null,0);n.bindFramebuffer(36008,u.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,u.__webglFramebuffer);for(let n=0;n<r.length;n++){l.push(36064+n),t.depthBuffer&&l.push(c);const h=void 0!==u.__ignoreDepthValues&&u.__ignoreDepthValues;if(!1===h&&(t.depthBuffer&&(o|=256),t.stencilBuffer&&(o|=1024)),d&&e.framebufferRenderbuffer(36008,36064,36161,u.__webglColorRenderbuffer[n]),!0===h&&(e.invalidateFramebuffer(36008,[c]),e.invalidateFramebuffer(36009,[c])),d){const t=i.get(r[n]).__webglTexture;e.framebufferTexture2D(36009,36064,3553,t,0)}e.blitFramebuffer(0,0,s,a,0,0,s,a,o,9728),p&&e.invalidateFramebuffer(36008,l)}if(n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,null),d)for(let t=0;t<r.length;t++){n.bindFramebuffer(36160,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+t,36161,u.__webglColorRenderbuffer[t]);const s=i.get(r[t]).__webglTexture;n.bindFramebuffer(36160,u.__webglFramebuffer),e.framebufferTexture2D(36009,36064+t,3553,s,0)}n.bindFramebuffer(36009,u.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=z,this.setupFrameBufferTexture=D,this.useMultisampledRTT=U}function Wh(e,t,n){const i=n.isWebGL2;return{convert:function(n){let r,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(n===cs)return 5121;if(n===vs)return 32819;if(n===ys)return 32820;if(n===us)return 5120;if(n===ds)return 5122;if(n===hs)return 5123;if(n===ps)return 5124;if(n===fs)return 5125;if(n===ms)return 5126;if(n===gs)return i?5131:(r=t.get("OES_texture_half_float"),null!==r?r.HALF_FLOAT_OES:null);if(n===bs)return 6406;if(n===_s)return 6408;if(n===ws)return 6409;if(n===Ss)return 6410;if(n===Ms)return 6402;if(n===Es)return 34041;if(n===ro)return r=t.get("EXT_sRGB"),null!==r?r.SRGB_ALPHA_EXT:null;if(n===Ts)return 6403;if(n===Cs)return 36244;if(n===As)return 33319;if(n===Ps)return 33320;if(n===Ns)return 36249;if(n===ks||n===Rs||n===Is||n===Ls)if(s===wa){if(r=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===r)return null;if(n===ks)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Rs)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Is)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Ls)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(r=t.get("WEBGL_compressed_texture_s3tc"),null===r)return null;if(n===ks)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Rs)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Is)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Ls)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===js||n===Ds||n===Os||n===zs){if(r=t.get("WEBGL_compressed_texture_pvrtc"),null===r)return null;if(n===js)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===Ds)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===Os)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===zs)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===Fs)return r=t.get("WEBGL_compressed_texture_etc1"),null!==r?r.COMPRESSED_RGB_ETC1_WEBGL:null;if(n===Us||n===Bs){if(r=t.get("WEBGL_compressed_texture_etc"),null===r)return null;if(n===Us)return s===wa?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(n===Bs)return s===wa?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}if(n===Vs||n===Hs||n===Ws||n===Gs||n===qs||n===Xs||n===Ys||n===Js||n===Ks||n===Zs||n===Qs||n===$s||n===ea||n===ta){if(r=t.get("WEBGL_compressed_texture_astc"),null===r)return null;if(n===Vs)return s===wa?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===Hs)return s===wa?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===Ws)return s===wa?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===Gs)return s===wa?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===qs)return s===wa?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===Xs)return s===wa?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===Ys)return s===wa?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===Js)return s===wa?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===Ks)return s===wa?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===Zs)return s===wa?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===Qs)return s===wa?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===$s)return s===wa?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===ea)return s===wa?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===ta)return s===wa?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===na){if(r=t.get("EXT_texture_compression_bptc"),null===r)return null;if(n===na)return s===wa?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT}if(n===ia||n===ra||n===sa||n===aa){if(r=t.get("EXT_texture_compression_rgtc"),null===r)return null;if(n===na)return r.COMPRESSED_RED_RGTC1_EXT;if(n===ra)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===sa)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===aa)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===xs?i?34042:(r=t.get("WEBGL_depth_texture"),null!==r?r.UNSIGNED_INT_24_8_WEBGL:null):void 0!==e[n]?e[n]:null}}}class Gh extends lu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.isArrayCamera=!0,this.cameras=e}}class qh extends Zl{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Xh={type:"move"};class Yh{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new qh,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new qh,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Po,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Po),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new qh,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Po,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Po),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let i=null,r=null,s=null;const a=this._targetRay,o=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){s=!0;for(const s of e.hand.values()){const e=t.getJointPose(s,n),i=this._getHandJoint(l,s);null!==e&&(i.matrix.fromArray(e.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.jointRadius=e.radius),i.visible=null!==e}const i=l.joints["index-finger-tip"],r=l.joints["thumb-tip"],a=i.position.distanceTo(r.position),o=.02,c=.005;l.inputState.pinching&&a>o+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&a<=o-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==o&&e.gripSpace&&(r=t.getPose(e.gripSpace,n),null!==r&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1));null!==a&&(i=t.getPose(e.targetRaySpace,n),null===i&&null!==r&&(i=r),null!==i&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Xh)))}return null!==a&&(a.visible=null!==i),null!==o&&(o.visible=null!==r),null!==l&&(l.visible=null!==s),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const n=new qh;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class Jh extends Go{constructor(e,t,n,i,r,s,a,o,l,c){if((c=void 0!==c?c:Ms)!==Ms&&c!==Es)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===Ms&&(n=fs),void 0===n&&c===Es&&(n=xs),super(null,i,r,s,a,o,c,n,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==a?a:$r,this.minFilter=void 0!==o?o:$r,this.flipY=!1,this.generateMipmaps=!1}}class Kh extends so{constructor(e,t){super();const n=this;let i=null,r=1,s=null,a="local-floor",o=1,l=null,c=null,u=null,d=null,h=null,p=null;const f=t.getContextAttributes();let m=null,g=null;const v=[],y=[],x=new Set,b=new Map,_=new lu;_.layers.enable(1),_.viewport=new qo;const w=new lu;w.layers.enable(2),w.viewport=new qo;const S=[_,w],M=new Gh;M.layers.enable(1),M.layers.enable(2);let E=null,T=null;function C(e){const t=y.indexOf(e.inputSource);if(-1===t)return;const n=v[t];void 0!==n&&n.dispatchEvent({type:e.type,data:e.inputSource})}function A(){i.removeEventListener("select",C),i.removeEventListener("selectstart",C),i.removeEventListener("selectend",C),i.removeEventListener("squeeze",C),i.removeEventListener("squeezestart",C),i.removeEventListener("squeezeend",C),i.removeEventListener("end",A),i.removeEventListener("inputsourceschange",P);for(let e=0;e<v.length;e++){const t=y[e];null!==t&&(y[e]=null,v[e].disconnect(t))}E=null,T=null,e.setRenderTarget(m),h=null,d=null,u=null,i=null,g=null,L.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function P(e){for(let t=0;t<e.removed.length;t++){const n=e.removed[t],i=y.indexOf(n);i>=0&&(y[i]=null,v[i].disconnect(n))}for(let t=0;t<e.added.length;t++){const n=e.added[t];let i=y.indexOf(n);if(-1===i){for(let e=0;e<v.length;e++){if(e>=y.length){y.push(n),i=e;break}if(null===y[e]){y[e]=n,i=e;break}}if(-1===i)break}const r=v[i];r&&r.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=v[e];return void 0===t&&(t=new Yh,v[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=v[e];return void 0===t&&(t=new Yh,v[e]=t),t.getGripSpace()},this.getHand=function(e){let t=v[e];return void 0===t&&(t=new Yh,v[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){r=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){a=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||s},this.setReferenceSpace=function(e){l=e},this.getBaseLayer=function(){return null!==d?d:h},this.getBinding=function(){return u},this.getFrame=function(){return p},this.getSession=function(){return i},this.setSession=async function(c){if(i=c,null!==i){if(m=e.getRenderTarget(),i.addEventListener("select",C),i.addEventListener("selectstart",C),i.addEventListener("selectend",C),i.addEventListener("squeeze",C),i.addEventListener("squeezestart",C),i.addEventListener("squeezeend",C),i.addEventListener("end",A),i.addEventListener("inputsourceschange",P),!0!==f.xrCompatible&&await t.makeXRCompatible(),void 0===i.renderState.layers||!1===e.capabilities.isWebGL2){const n={antialias:void 0!==i.renderState.layers||f.antialias,alpha:f.alpha,depth:f.depth,stencil:f.stencil,framebufferScaleFactor:r};h=new XRWebGLLayer(i,t,n),i.updateRenderState({baseLayer:h}),g=new Xo(h.framebufferWidth,h.framebufferHeight,{format:_s,type:cs,encoding:e.outputEncoding,stencilBuffer:f.stencil})}else{let n=null,s=null,a=null;f.depth&&(a=f.stencil?35056:33190,n=f.stencil?Es:Ms,s=f.stencil?xs:fs);const o={colorFormat:32856,depthFormat:a,scaleFactor:r};u=new XRWebGLBinding(i,t),d=u.createProjectionLayer(o),i.updateRenderState({layers:[d]}),g=new Xo(d.textureWidth,d.textureHeight,{format:_s,type:cs,depthTexture:new Jh(d.textureWidth,d.textureHeight,s,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:f.stencil,encoding:e.outputEncoding,samples:f.antialias?4:0});e.properties.get(g).__ignoreDepthValues=d.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(o),l=null,s=await i.requestReferenceSpace(a),L.setContext(i),L.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};const N=new Po,k=new Po;function R(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===i)return;M.near=w.near=_.near=e.near,M.far=w.far=_.far=e.far,E===M.near&&T===M.far||(i.updateRenderState({depthNear:M.near,depthFar:M.far}),E=M.near,T=M.far);const t=e.parent,n=M.cameras;R(M,t);for(let i=0;i<n.length;i++)R(n[i],t);M.matrixWorld.decompose(M.position,M.quaternion,M.scale),e.matrix.copy(M.matrix),e.matrix.decompose(e.position,e.quaternion,e.scale);const r=e.children;for(let i=0,s=r.length;i<s;i++)r[i].updateMatrixWorld(!0);2===n.length?function(e,t,n){N.setFromMatrixPosition(t.matrixWorld),k.setFromMatrixPosition(n.matrixWorld);const i=N.distanceTo(k),r=t.projectionMatrix.elements,s=n.projectionMatrix.elements,a=r[14]/(r[10]-1),o=r[14]/(r[10]+1),l=(r[9]+1)/r[5],c=(r[9]-1)/r[5],u=(r[8]-1)/r[0],d=(s[8]+1)/s[0],h=a*u,p=a*d,f=i/(-u+d),m=f*-u;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(f),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();const g=a+f,v=o+f,y=h-m,x=p+(i-m),b=l*o/v*g,_=c*o/v*g;e.projectionMatrix.makePerspective(y,x,b,_,g,v)}(M,_,w):M.projectionMatrix.copy(_.projectionMatrix)},this.getCamera=function(){return M},this.getFoveation=function(){if(null!==d||null!==h)return o},this.setFoveation=function(e){o=e,null!==d&&(d.fixedFoveation=e),null!==h&&void 0!==h.fixedFoveation&&(h.fixedFoveation=e)},this.getPlanes=function(){return x};let I=null;const L=new bu;L.setAnimationLoop((function(t,i){if(c=i.getViewerPose(l||s),p=i,null!==c){const t=c.views;null!==h&&(e.setRenderTargetFramebuffer(g,h.framebuffer),e.setRenderTarget(g));let n=!1;t.length!==M.cameras.length&&(M.cameras.length=0,n=!0);for(let i=0;i<t.length;i++){const r=t[i];let s=null;if(null!==h)s=h.getViewport(r);else{const t=u.getViewSubImage(d,r);s=t.viewport,0===i&&(e.setRenderTargetTextures(g,t.colorTexture,d.ignoreDepthValues?void 0:t.depthStencilTexture),e.setRenderTarget(g))}let a=S[i];void 0===a&&(a=new lu,a.layers.enable(i),a.viewport=new qo,S[i]=a),a.matrix.fromArray(r.transform.matrix),a.projectionMatrix.fromArray(r.projectionMatrix),a.viewport.set(s.x,s.y,s.width,s.height),0===i&&M.matrix.copy(a.matrix),!0===n&&M.cameras.push(a)}}for(let e=0;e<v.length;e++){const t=y[e],n=v[e];null!==t&&void 0!==n&&n.update(t,i,l||s)}if(I&&I(t,i),i.detectedPlanes){n.dispatchEvent({type:"planesdetected",data:i.detectedPlanes});let e=null;for(const t of x)i.detectedPlanes.has(t)||(null===e&&(e=[]),e.push(t));if(null!==e)for(const t of e)x.delete(t),b.delete(t),n.dispatchEvent({type:"planeremoved",data:t});for(const t of i.detectedPlanes)if(x.has(t)){const e=b.get(t);t.lastChangedTime>e&&(b.set(t,t.lastChangedTime),n.dispatchEvent({type:"planechanged",data:t}))}else x.add(t),b.set(t,i.lastChangedTime),n.dispatchEvent({type:"planeadded",data:t})}p=null})),this.setAnimationLoop=function(e){I=e},this.dispose=function(){}}}function Zh(e,t){function n(n,i){n.opacity.value=i.opacity,i.color&&n.diffuse.value.copy(i.color),i.emissive&&n.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),i.map&&(n.map.value=i.map),i.alphaMap&&(n.alphaMap.value=i.alphaMap),i.bumpMap&&(n.bumpMap.value=i.bumpMap,n.bumpScale.value=i.bumpScale,i.side===nr&&(n.bumpScale.value*=-1)),i.displacementMap&&(n.displacementMap.value=i.displacementMap,n.displacementScale.value=i.displacementScale,n.displacementBias.value=i.displacementBias),i.emissiveMap&&(n.emissiveMap.value=i.emissiveMap),i.normalMap&&(n.normalMap.value=i.normalMap,n.normalScale.value.copy(i.normalScale),i.side===nr&&n.normalScale.value.negate()),i.specularMap&&(n.specularMap.value=i.specularMap),i.alphaTest>0&&(n.alphaTest.value=i.alphaTest);const r=t.get(i).envMap;if(r&&(n.envMap.value=r,n.flipEnvMap.value=r.isCubeTexture&&!1===r.isRenderTargetTexture?-1:1,n.reflectivity.value=i.reflectivity,n.ior.value=i.ior,n.refractionRatio.value=i.refractionRatio),i.lightMap){n.lightMap.value=i.lightMap;const t=!0===e.useLegacyLights?Math.PI:1;n.lightMapIntensity.value=i.lightMapIntensity*t}let s,a;i.aoMap&&(n.aoMap.value=i.aoMap,n.aoMapIntensity.value=i.aoMapIntensity),i.map?s=i.map:i.specularMap?s=i.specularMap:i.displacementMap?s=i.displacementMap:i.normalMap?s=i.normalMap:i.bumpMap?s=i.bumpMap:i.roughnessMap?s=i.roughnessMap:i.metalnessMap?s=i.metalnessMap:i.alphaMap?s=i.alphaMap:i.emissiveMap?s=i.emissiveMap:i.clearcoatMap?s=i.clearcoatMap:i.clearcoatNormalMap?s=i.clearcoatNormalMap:i.clearcoatRoughnessMap?s=i.clearcoatRoughnessMap:i.iridescenceMap?s=i.iridescenceMap:i.iridescenceThicknessMap?s=i.iridescenceThicknessMap:i.specularIntensityMap?s=i.specularIntensityMap:i.specularColorMap?s=i.specularColorMap:i.transmissionMap?s=i.transmissionMap:i.thicknessMap?s=i.thicknessMap:i.sheenColorMap?s=i.sheenColorMap:i.sheenRoughnessMap&&(s=i.sheenRoughnessMap),void 0!==s&&(s.isWebGLRenderTarget&&(s=s.texture),!0===s.matrixAutoUpdate&&s.updateMatrix(),n.uvTransform.value.copy(s.matrix)),i.aoMap?a=i.aoMap:i.lightMap&&(a=i.lightMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),n.uv2Transform.value.copy(a.matrix))}return{refreshFogUniforms:function(t,n){n.color.getRGB(t.fogColor.value,ru(e)),n.isFog?(t.fogNear.value=n.near,t.fogFar.value=n.far):n.isFogExp2&&(t.fogDensity.value=n.density)},refreshMaterialUniforms:function(e,i,r,s,a){i.isMeshBasicMaterial||i.isMeshLambertMaterial?n(e,i):i.isMeshToonMaterial?(n(e,i),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,i)):i.isMeshPhongMaterial?(n(e,i),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,i)):i.isMeshStandardMaterial?(n(e,i),function(e,n){e.roughness.value=n.roughness,e.metalness.value=n.metalness,n.roughnessMap&&(e.roughnessMap.value=n.roughnessMap);n.metalnessMap&&(e.metalnessMap.value=n.metalnessMap);const i=t.get(n).envMap;i&&(e.envMapIntensity.value=n.envMapIntensity)}(e,i),i.isMeshPhysicalMaterial&&function(e,t,n){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap));t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,t.side===nr&&e.clearcoatNormalScale.value.negate()));t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap));t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=n.texture,e.transmissionSamplerSize.value.set(n.width,n.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor));e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap);t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap)}(e,i,a)):i.isMeshMatcapMaterial?(n(e,i),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,i)):i.isMeshDepthMaterial?n(e,i):i.isMeshDistanceMaterial?(n(e,i),function(e,t){e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,i)):i.isMeshNormalMaterial?n(e,i):i.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,i),i.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,i)):i.isPointsMaterial?function(e,t,n,i){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*i,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest);let r;t.map?r=t.map:t.alphaMap&&(r=t.alphaMap);void 0!==r&&(!0===r.matrixAutoUpdate&&r.updateMatrix(),e.uvTransform.value.copy(r.matrix))}(e,i,r,s):i.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest);let n;t.map?n=t.map:t.alphaMap&&(n=t.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,i):i.isShadowMaterial?(e.color.value.copy(i.color),e.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1)}}}function Qh(e,t,n,i){let r={},s={},a=[];const o=n.isWebGL2?e.getParameter(35375):0;function l(e,t,n){const i=e.value;if(void 0===n[t]){if("number"===typeof i)n[t]=i;else{const e=Array.isArray(i)?i:[i],r=[];for(let t=0;t<e.length;t++)r.push(e[t].clone());n[t]=r}return!0}if("number"===typeof i){if(n[t]!==i)return n[t]=i,!0}else{const e=Array.isArray(n[t])?n[t]:[n[t]],r=Array.isArray(i)?i:[i];for(let t=0;t<e.length;t++){const n=e[t];if(!1===n.equals(r[t]))return n.copy(r[t]),!0}}return!1}function c(e){const t={boundary:0,storage:0};return"number"===typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),t}function u(t){const n=t.target;n.removeEventListener("dispose",u);const i=a.indexOf(n.__bindingPointIndex);a.splice(i,1),e.deleteBuffer(r[n.id]),delete r[n.id],delete s[n.id]}return{bind:function(e,t){const n=t.program;i.uniformBlockBinding(e,n)},update:function(n,d){let h=r[n.id];void 0===h&&(!function(e){const t=e.uniforms;let n=0;const i=16;let r=0;for(let s=0,a=t.length;s<a;s++){const e=t[s],a={boundary:0,storage:0},o=Array.isArray(e.value)?e.value:[e.value];for(let t=0,n=o.length;t<n;t++){const e=c(o[t]);a.boundary+=e.boundary,a.storage+=e.storage}if(e.__data=new Float32Array(a.storage/Float32Array.BYTES_PER_ELEMENT),e.__offset=n,s>0){r=n%i;0!==r&&i-r-a.boundary<0&&(n+=i-r,e.__offset=n)}n+=a.storage}r=n%i,r>0&&(n+=i-r);e.__size=n,e.__cache={}}(n),h=function(t){const n=function(){for(let e=0;e<o;e++)if(-1===a.indexOf(e))return a.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=n;const i=e.createBuffer(),r=t.__size,s=t.usage;return e.bindBuffer(35345,i),e.bufferData(35345,r,s),e.bindBuffer(35345,null),e.bindBufferBase(35345,n,i),i}(n),r[n.id]=h,n.addEventListener("dispose",u));const p=d.program;i.updateUBOMapping(n,p);const f=t.render.frame;s[n.id]!==f&&(!function(t){const n=r[t.id],i=t.uniforms,s=t.__cache;e.bindBuffer(35345,n);for(let r=0,a=i.length;r<a;r++){const t=i[r];if(!0===l(t,r,s)){const n=t.__offset,i=Array.isArray(t.value)?t.value:[t.value];let r=0;for(let s=0;s<i.length;s++){const a=i[s],o=c(a);"number"===typeof a?(t.__data[0]=a,e.bufferSubData(35345,n+r,t.__data)):a.isMatrix3?(t.__data[0]=a.elements[0],t.__data[1]=a.elements[1],t.__data[2]=a.elements[2],t.__data[3]=a.elements[0],t.__data[4]=a.elements[3],t.__data[5]=a.elements[4],t.__data[6]=a.elements[5],t.__data[7]=a.elements[0],t.__data[8]=a.elements[6],t.__data[9]=a.elements[7],t.__data[10]=a.elements[8],t.__data[11]=a.elements[0]):(a.toArray(t.__data,r),r+=o.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(35345,n,t.__data)}}e.bindBuffer(35345,null)}(n),s[n.id]=f)},dispose:function(){for(const t in r)e.deleteBuffer(r[t]);a=[],r={},s={}}}}function $h(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isWebGLRenderer=!0;const t=void 0!==e.canvas?e.canvas:function(){const e=Co("canvas");return e.style.display="block",e}(),n=void 0!==e.context?e.context:null,i=void 0===e.depth||e.depth,r=void 0===e.stencil||e.stencil,s=void 0!==e.antialias&&e.antialias,a=void 0===e.premultipliedAlpha||e.premultipliedAlpha,o=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,l=void 0!==e.powerPreference?e.powerPreference:"default",c=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;let u;u=null!==n?n.getContextAttributes().alpha:void 0!==e.alpha&&e.alpha;let d=null,h=null;const p=[],f=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=_a,this.useLegacyLights=!0,this.toneMapping=zr,this.toneMappingExposure=1;const m=this;let g=!1,v=0,y=0,x=null,b=-1,_=null;const w=new qo,S=new qo;let M=null,E=t.width,T=t.height,C=1,A=null,P=null;const N=new qo(0,0,E,T),k=new qo(0,0,E,T);let R=!1;const I=new xu;let L=!1,j=!1,D=null;const O=new Tl,z=new Po,F={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function U(){return null===x?C:1}let B,V,H,W,G,q,X,Y,J,K,Z,Q,$,ee,te,ne,ie,re,se,ae,oe,le,ce,ue,de=n;function he(e,n){for(let i=0;i<e.length;i++){const r=e[i],s=t.getContext(r,n);if(null!==s)return s}return null}try{const e={alpha:!0,depth:i,stencil:r,antialias:s,premultipliedAlpha:a,preserveDrawingBuffer:o,powerPreference:l,failIfMajorPerformanceCaveat:c};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r".concat(Wi)),t.addEventListener("webglcontextlost",me,!1),t.addEventListener("webglcontextrestored",ge,!1),t.addEventListener("webglcontextcreationerror",ve,!1),null===de){const t=["webgl2","webgl","experimental-webgl"];if(!0===m.isWebGL1Renderer&&t.shift(),de=he(t,e),null===de)throw he(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===de.getShaderPrecisionFormat&&(de.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Ib){throw console.error("THREE.WebGLRenderer: "+Ib.message),Ib}function pe(){B=new Yu(de),V=new Nu(de,B,e),B.init(V),le=new Wh(de,B,V),H=new Vh(de,B,V),W=new Zu,G=new Th,q=new Hh(de,B,H,G,V,le,W),X=new Ru(m),Y=new Xu(m),J=new _u(de,V),ce=new Au(de,B,J,V),K=new Ju(de,J,W,ce),Z=new td(de,K,J,W),se=new ed(de,V,q),ne=new ku(G),Q=new Eh(m,X,Y,B,V,ce,ne),$=new Zh(m,G),ee=new Nh,te=new Dh(B,V),re=new Cu(m,X,Y,H,Z,u,a),ie=new Bh(m,Z,V),ue=new Qh(de,W,V,H),ae=new Pu(de,B,W,V),oe=new Ku(de,B,W,V),W.programs=Q.programs,m.capabilities=V,m.extensions=B,m.properties=G,m.renderLists=ee,m.shadowMap=ie,m.state=H,m.info=W}pe();const fe=new Kh(m,de);function me(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function ge(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;const e=W.autoReset,t=ie.enabled,n=ie.autoUpdate,i=ie.needsUpdate,r=ie.type;pe(),W.autoReset=e,ie.enabled=t,ie.autoUpdate=n,ie.needsUpdate=i,ie.type=r}function ve(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function ye(e){const t=e.target;t.removeEventListener("dispose",ye),function(e){(function(e){const t=G.get(e).programs;void 0!==t&&(t.forEach((function(e){Q.releaseProgram(e)})),e.isShaderMaterial&&Q.releaseShaderCache(e))})(e),G.remove(e)}(t)}this.xr=fe,this.getContext=function(){return de},this.getContextAttributes=function(){return de.getContextAttributes()},this.forceContextLoss=function(){const e=B.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=B.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return C},this.setPixelRatio=function(e){void 0!==e&&(C=e,this.setSize(E,T,!1))},this.getSize=function(e){return e.set(E,T)},this.setSize=function(e,n){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];fe.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(E=e,T=n,t.width=Math.floor(e*C),t.height=Math.floor(n*C),!0===i&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(E*C,T*C).floor()},this.setDrawingBufferSize=function(e,n,i){E=e,T=n,C=i,t.width=Math.floor(e*i),t.height=Math.floor(n*i),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(w)},this.getViewport=function(e){return e.copy(N)},this.setViewport=function(e,t,n,i){e.isVector4?N.set(e.x,e.y,e.z,e.w):N.set(e,t,n,i),H.viewport(w.copy(N).multiplyScalar(C).floor())},this.getScissor=function(e){return e.copy(k)},this.setScissor=function(e,t,n,i){e.isVector4?k.set(e.x,e.y,e.z,e.w):k.set(e,t,n,i),H.scissor(S.copy(k).multiplyScalar(C).floor())},this.getScissorTest=function(){return R},this.setScissorTest=function(e){H.setScissorTest(R=e)},this.setOpaqueSort=function(e){A=e},this.setTransparentSort=function(e){P=e},this.getClearColor=function(e){return e.copy(re.getClearColor())},this.setClearColor=function(){re.setClearColor.apply(re,arguments)},this.getClearAlpha=function(){return re.getClearAlpha()},this.setClearAlpha=function(){re.setClearAlpha.apply(re,arguments)},this.clear=function(){let e=0;(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(e|=16384),(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(e|=256),(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&(e|=1024),de.clear(e)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",me,!1),t.removeEventListener("webglcontextrestored",ge,!1),t.removeEventListener("webglcontextcreationerror",ve,!1),ee.dispose(),te.dispose(),G.dispose(),X.dispose(),Y.dispose(),Z.dispose(),ce.dispose(),ue.dispose(),Q.dispose(),fe.dispose(),fe.removeEventListener("sessionstart",be),fe.removeEventListener("sessionend",_e),D&&(D.dispose(),D=null),we.stop()},this.renderBufferDirect=function(e,t,n,i,r,s){null===t&&(t=F);const a=r.isMesh&&r.matrixWorld.determinant()<0,o=function(e,t,n,i,r){!0!==t.isScene&&(t=F);q.resetTextureUnits();const s=t.fog,a=i.isMeshStandardMaterial?t.environment:null,o=null===x?m.outputEncoding:!0===x.isXRRenderTarget?x.texture.encoding:_a,l=(i.isMeshStandardMaterial?Y:X).get(i.envMap||a),c=!0===i.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,u=!!i.normalMap&&!!n.attributes.tangent,d=!!n.morphAttributes.position,p=!!n.morphAttributes.normal,f=!!n.morphAttributes.color,g=i.toneMapped?m.toneMapping:zr,v=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,y=void 0!==v?v.length:0,w=G.get(i),S=h.state.lights;if(!0===L&&(!0===j||e!==_)){const t=e===_&&i.id===b;ne.setState(i,e,t)}let M=!1;i.version===w.__version?w.needsLights&&w.lightsStateVersion!==S.state.version||w.outputEncoding!==o||r.isInstancedMesh&&!1===w.instancing?M=!0:r.isInstancedMesh||!0!==w.instancing?r.isSkinnedMesh&&!1===w.skinning?M=!0:r.isSkinnedMesh||!0!==w.skinning?w.envMap!==l||!0===i.fog&&w.fog!==s?M=!0:void 0===w.numClippingPlanes||w.numClippingPlanes===ne.numPlanes&&w.numIntersection===ne.numIntersection?(w.vertexAlphas!==c||w.vertexTangents!==u||w.morphTargets!==d||w.morphNormals!==p||w.morphColors!==f||w.toneMapping!==g||!0===V.isWebGL2&&w.morphTargetsCount!==y)&&(M=!0):M=!0:M=!0:M=!0:(M=!0,w.__version=i.version);let E=w.currentProgram;!0===M&&(E=Ce(i,t,r));let A=!1,P=!1,N=!1;const k=E.getUniforms(),R=w.uniforms;H.useProgram(E.program)&&(A=!0,P=!0,N=!0);i.id!==b&&(b=i.id,P=!0);if(A||_!==e){if(k.setValue(de,"projectionMatrix",e.projectionMatrix),V.logarithmicDepthBuffer&&k.setValue(de,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),_!==e&&(_=e,P=!0,N=!0),i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshStandardMaterial||i.envMap){const t=k.map.cameraPosition;void 0!==t&&t.setValue(de,z.setFromMatrixPosition(e.matrixWorld))}(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial)&&k.setValue(de,"isOrthographic",!0===e.isOrthographicCamera),(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.isShadowMaterial||r.isSkinnedMesh)&&k.setValue(de,"viewMatrix",e.matrixWorldInverse)}if(r.isSkinnedMesh){k.setOptional(de,r,"bindMatrix"),k.setOptional(de,r,"bindMatrixInverse");const e=r.skeleton;e&&(V.floatVertexTextures?(null===e.boneTexture&&e.computeBoneTexture(),k.setValue(de,"boneTexture",e.boneTexture,q),k.setValue(de,"boneTextureSize",e.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const I=n.morphAttributes;(void 0!==I.position||void 0!==I.normal||void 0!==I.color&&!0===V.isWebGL2)&&se.update(r,n,E);(P||w.receiveShadow!==r.receiveShadow)&&(w.receiveShadow=r.receiveShadow,k.setValue(de,"receiveShadow",r.receiveShadow));i.isMeshGouraudMaterial&&null!==i.envMap&&(R.envMap.value=l,R.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1);P&&(k.setValue(de,"toneMappingExposure",m.toneMappingExposure),w.needsLights&&(U=N,(O=R).ambientLightColor.needsUpdate=U,O.lightProbe.needsUpdate=U,O.directionalLights.needsUpdate=U,O.directionalLightShadows.needsUpdate=U,O.pointLights.needsUpdate=U,O.pointLightShadows.needsUpdate=U,O.spotLights.needsUpdate=U,O.spotLightShadows.needsUpdate=U,O.rectAreaLights.needsUpdate=U,O.hemisphereLights.needsUpdate=U),s&&!0===i.fog&&$.refreshFogUniforms(R,s),$.refreshMaterialUniforms(R,i,C,T,D),sh.upload(de,w.uniformsList,R,q));var O,U;i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(sh.upload(de,w.uniformsList,R,q),i.uniformsNeedUpdate=!1);i.isSpriteMaterial&&k.setValue(de,"center",r.center);if(k.setValue(de,"modelViewMatrix",r.modelViewMatrix),k.setValue(de,"normalMatrix",r.normalMatrix),k.setValue(de,"modelMatrix",r.matrixWorld),i.isShaderMaterial||i.isRawShaderMaterial){const e=i.uniformsGroups;for(let t=0,n=e.length;t<n;t++)if(V.isWebGL2){const n=e[t];ue.update(n,E),ue.bind(n,E)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return E}(e,t,n,i,r);H.setMaterial(i,a);let l=n.index,c=1;!0===i.wireframe&&(l=K.getWireframeAttribute(n),c=2);const u=n.drawRange,d=n.attributes.position;let p=u.start*c,f=(u.start+u.count)*c;null!==s&&(p=Math.max(p,s.start*c),f=Math.min(f,(s.start+s.count)*c)),null!==l?(p=Math.max(p,0),f=Math.min(f,l.count)):void 0!==d&&null!==d&&(p=Math.max(p,0),f=Math.min(f,d.count));const g=f-p;if(g<0||g===1/0)return;let v;ce.setup(r,i,o,n,l);let y=ae;if(null!==l&&(v=J.get(l),y=oe,y.setIndex(v)),r.isMesh)!0===i.wireframe?(H.setLineWidth(i.wireframeLinewidth*U()),y.setMode(1)):y.setMode(4);else if(r.isLine){let e=i.linewidth;void 0===e&&(e=1),H.setLineWidth(e*U()),r.isLineSegments?y.setMode(1):r.isLineLoop?y.setMode(2):y.setMode(3)}else r.isPoints?y.setMode(0):r.isSprite&&y.setMode(4);if(r.isInstancedMesh)y.renderInstances(p,g,r.count);else if(n.isInstancedBufferGeometry){const e=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,t=Math.min(n.instanceCount,e);y.renderInstances(p,g,t)}else y.render(p,g)},this.compile=function(e,t){function n(e,t,n){!0===e.transparent&&e.side===ir&&!1===e.forceSinglePass?(e.side=nr,e.needsUpdate=!0,Ce(e,t,n),e.side=tr,e.needsUpdate=!0,Ce(e,t,n),e.side=ir):Ce(e,t,n)}h=te.get(e),h.init(),f.push(h),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(h.pushLight(e),e.castShadow&&h.pushShadow(e))})),h.setupLights(m.useLegacyLights),e.traverse((function(t){const i=t.material;if(i)if(Array.isArray(i))for(let r=0;r<i.length;r++){n(i[r],e,t)}else n(i,e,t)})),f.pop(),h=null};let xe=null;function be(){we.stop()}function _e(){we.start()}const we=new bu;function Se(e,t,n,i){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)h.pushLight(e),e.castShadow&&h.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||I.intersectsSprite(e)){i&&z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(O);const t=Z.update(e),r=e.material;r.visible&&d.push(e,t,r,n,z.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==W.render.frame&&(e.skeleton.update(),e.skeleton.frame=W.render.frame),!e.frustumCulled||I.intersectsObject(e))){i&&z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(O);const t=Z.update(e),r=e.material;if(Array.isArray(r)){const i=t.groups;for(let s=0,a=i.length;s<a;s++){const a=i[s],o=r[a.materialIndex];o&&o.visible&&d.push(e,t,o,n,z.z,a)}}else r.visible&&d.push(e,t,r,n,z.z,null)}const r=e.children;for(let s=0,a=r.length;s<a;s++)Se(r[s],t,n,i)}function Me(e,t,n,i){const r=e.opaque,a=e.transmissive,o=e.transparent;h.setupLightsView(n),!0===L&&ne.setGlobalState(m.clippingPlanes,n),a.length>0&&function(e,t,n){const i=V.isWebGL2;null===D&&(D=new Xo(1024,1024,{generateMipmaps:!0,type:B.has("EXT_color_buffer_half_float")?gs:cs,minFilter:os,samples:i&&!0===s?4:0}));const r=m.getRenderTarget();m.setRenderTarget(D),m.clear();const a=m.toneMapping;m.toneMapping=zr,Ee(e,t,n),m.toneMapping=a,q.updateMultisampleRenderTarget(D),q.updateRenderTargetMipmap(D),m.setRenderTarget(r)}(r,t,n),i&&H.viewport(w.copy(i)),r.length>0&&Ee(r,t,n),a.length>0&&Ee(a,t,n),o.length>0&&Ee(o,t,n),H.buffers.depth.setTest(!0),H.buffers.depth.setMask(!0),H.buffers.color.setMask(!0),H.setPolygonOffset(!1)}function Ee(e,t,n){const i=!0===t.isScene?t.overrideMaterial:null;for(let r=0,s=e.length;r<s;r++){const s=e[r],a=s.object,o=s.geometry,l=null===i?s.material:i,c=s.group;a.layers.test(n.layers)&&Te(a,t,n,o,l,c)}}function Te(e,t,n,i,r,s){e.onBeforeRender(m,t,n,i,r,s),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),r.onBeforeRender(m,t,n,i,e,s),!0===r.transparent&&r.side===ir&&!1===r.forceSinglePass?(r.side=nr,r.needsUpdate=!0,m.renderBufferDirect(n,t,i,r,e,s),r.side=tr,r.needsUpdate=!0,m.renderBufferDirect(n,t,i,r,e,s),r.side=ir):m.renderBufferDirect(n,t,i,r,e,s),e.onAfterRender(m,t,n,i,r,s)}function Ce(e,t,n){!0!==t.isScene&&(t=F);const i=G.get(e),r=h.state.lights,s=h.state.shadowsArray,a=r.state.version,o=Q.getParameters(e,r.state,s,t,n),l=Q.getProgramCacheKey(o);let c=i.programs;i.environment=e.isMeshStandardMaterial?t.environment:null,i.fog=t.fog,i.envMap=(e.isMeshStandardMaterial?Y:X).get(e.envMap||i.environment),void 0===c&&(e.addEventListener("dispose",ye),c=new Map,i.programs=c);let u=c.get(l);if(void 0!==u){if(i.currentProgram===u&&i.lightsStateVersion===a)return Ae(e,o),u}else o.uniforms=Q.getUniforms(e),e.onBuild(n,o,m),e.onBeforeCompile(o,m),u=Q.acquireProgram(o,l),c.set(l,u),i.uniforms=o.uniforms;const d=i.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(d.clippingPlanes=ne.uniform),Ae(e,o),i.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),i.lightsStateVersion=a,i.needsLights&&(d.ambientLightColor.value=r.state.ambient,d.lightProbe.value=r.state.probe,d.directionalLights.value=r.state.directional,d.directionalLightShadows.value=r.state.directionalShadow,d.spotLights.value=r.state.spot,d.spotLightShadows.value=r.state.spotShadow,d.rectAreaLights.value=r.state.rectArea,d.ltc_1.value=r.state.rectAreaLTC1,d.ltc_2.value=r.state.rectAreaLTC2,d.pointLights.value=r.state.point,d.pointLightShadows.value=r.state.pointShadow,d.hemisphereLights.value=r.state.hemi,d.directionalShadowMap.value=r.state.directionalShadowMap,d.directionalShadowMatrix.value=r.state.directionalShadowMatrix,d.spotShadowMap.value=r.state.spotShadowMap,d.spotLightMatrix.value=r.state.spotLightMatrix,d.spotLightMap.value=r.state.spotLightMap,d.pointShadowMap.value=r.state.pointShadowMap,d.pointShadowMatrix.value=r.state.pointShadowMatrix);const p=u.getUniforms(),f=sh.seqWithValue(p.seq,d);return i.currentProgram=u,i.uniformsList=f,u}function Ae(e,t){const n=G.get(e);n.outputEncoding=t.outputEncoding,n.instancing=t.instancing,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}we.setAnimationLoop((function(e){xe&&xe(e)})),"undefined"!==typeof self&&we.setContext(self),this.setAnimationLoop=function(e){xe=e,fe.setAnimationLoop(e),null===e?we.stop():we.start()},fe.addEventListener("sessionstart",be),fe.addEventListener("sessionend",_e),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===g)return;!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===fe.enabled&&!0===fe.isPresenting&&(!0===fe.cameraAutoUpdate&&fe.updateCamera(t),t=fe.getCamera()),!0===e.isScene&&e.onBeforeRender(m,e,t,x),h=te.get(e,f.length),h.init(),f.push(h),O.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),I.setFromProjectionMatrix(O),j=this.localClippingEnabled,L=ne.init(this.clippingPlanes,j),d=ee.get(e,p.length),d.init(),p.push(d),Se(e,t,0,m.sortObjects),d.finish(),!0===m.sortObjects&&d.sort(A,P),!0===L&&ne.beginShadows();const n=h.state.shadowsArray;if(ie.render(n,e,t),!0===L&&ne.endShadows(),!0===this.info.autoReset&&this.info.reset(),re.render(d,e),h.setupLights(m.useLegacyLights),t.isArrayCamera){const n=t.cameras;for(let t=0,i=n.length;t<i;t++){const i=n[t];Me(d,e,i,i.viewport)}}else Me(d,e,t);null!==x&&(q.updateMultisampleRenderTarget(x),q.updateRenderTargetMipmap(x)),!0===e.isScene&&e.onAfterRender(m,e,t),ce.resetDefaultState(),b=-1,_=null,f.pop(),h=f.length>0?f[f.length-1]:null,p.pop(),d=p.length>0?p[p.length-1]:null},this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return x},this.setRenderTargetTextures=function(e,t,n){G.get(e.texture).__webglTexture=t,G.get(e.depthTexture).__webglTexture=n;const i=G.get(e);i.__hasExternalTextures=!0,i.__hasExternalTextures&&(i.__autoAllocateDepthBuffer=void 0===n,i.__autoAllocateDepthBuffer||!0===B.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),i.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(e,t){const n=G.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;x=e,v=t,y=n;let i=!0,r=null,s=!1,a=!1;if(e){const n=G.get(e);void 0!==n.__useDefaultFramebuffer?(H.bindFramebuffer(36160,null),i=!1):void 0===n.__webglFramebuffer?q.setupRenderTarget(e):n.__hasExternalTextures&&q.rebindTextures(e,G.get(e.texture).__webglTexture,G.get(e.depthTexture).__webglTexture);const o=e.texture;(o.isData3DTexture||o.isDataArrayTexture||o.isCompressedArrayTexture)&&(a=!0);const l=G.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(r=l[t],s=!0):r=V.isWebGL2&&e.samples>0&&!1===q.useMultisampledRTT(e)?G.get(e).__webglMultisampledFramebuffer:l,w.copy(e.viewport),S.copy(e.scissor),M=e.scissorTest}else w.copy(N).multiplyScalar(C).floor(),S.copy(k).multiplyScalar(C).floor(),M=R;if(H.bindFramebuffer(36160,r)&&V.drawBuffers&&i&&H.drawBuffers(e,r),H.viewport(w),H.scissor(S),H.setScissorTest(M),s){const i=G.get(e.texture);de.framebufferTexture2D(36160,36064,34069+t,i.__webglTexture,n)}else if(a){const i=G.get(e.texture),r=t||0;de.framebufferTextureLayer(36160,36064,i.__webglTexture,n||0,r)}b=-1},this.readRenderTargetPixels=function(e,t,n,i,r,s,a){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let o=G.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==a&&(o=o[a]),o){H.bindFramebuffer(36160,o);try{const a=e.texture,o=a.format,l=a.type;if(o!==_s&&le.convert(o)!==de.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const c=l===gs&&(B.has("EXT_color_buffer_half_float")||V.isWebGL2&&B.has("EXT_color_buffer_float"));if(l!==cs&&le.convert(l)!==de.getParameter(35738)&&(l!==ms||!(V.isWebGL2||B.has("OES_texture_float")||B.has("WEBGL_color_buffer_float")))&&!c)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-i&&n>=0&&n<=e.height-r&&de.readPixels(t,n,i,r,le.convert(o),le.convert(l),s)}finally{const e=null!==x?G.get(x).__webglFramebuffer:null;H.bindFramebuffer(36160,e)}}},this.copyFramebufferToTexture=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=Math.pow(2,-n),r=Math.floor(t.image.width*i),s=Math.floor(t.image.height*i);q.setTexture2D(t,0),de.copyTexSubImage2D(3553,n,0,0,e.x,e.y,r,s),H.unbindTexture()},this.copyTextureToTexture=function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const r=t.image.width,s=t.image.height,a=le.convert(n.format),o=le.convert(n.type);q.setTexture2D(n,0),de.pixelStorei(37440,n.flipY),de.pixelStorei(37441,n.premultiplyAlpha),de.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?de.texSubImage2D(3553,i,e.x,e.y,r,s,a,o,t.image.data):t.isCompressedTexture?de.compressedTexSubImage2D(3553,i,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,a,t.mipmaps[0].data):de.texSubImage2D(3553,i,e.x,e.y,a,o,t.image),0===i&&n.generateMipmaps&&de.generateMipmap(3553),H.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(m.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const s=e.max.x-e.min.x+1,a=e.max.y-e.min.y+1,o=e.max.z-e.min.z+1,l=le.convert(i.format),c=le.convert(i.type);let u;if(i.isData3DTexture)q.setTexture3D(i,0),u=32879;else{if(!i.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");q.setTexture2DArray(i,0),u=35866}de.pixelStorei(37440,i.flipY),de.pixelStorei(37441,i.premultiplyAlpha),de.pixelStorei(3317,i.unpackAlignment);const d=de.getParameter(3314),h=de.getParameter(32878),p=de.getParameter(3316),f=de.getParameter(3315),g=de.getParameter(32877),v=n.isCompressedTexture?n.mipmaps[0]:n.image;de.pixelStorei(3314,v.width),de.pixelStorei(32878,v.height),de.pixelStorei(3316,e.min.x),de.pixelStorei(3315,e.min.y),de.pixelStorei(32877,e.min.z),n.isDataTexture||n.isData3DTexture?de.texSubImage3D(u,r,t.x,t.y,t.z,s,a,o,l,c,v.data):n.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),de.compressedTexSubImage3D(u,r,t.x,t.y,t.z,s,a,o,l,v.data)):de.texSubImage3D(u,r,t.x,t.y,t.z,s,a,o,l,c,v),de.pixelStorei(3314,d),de.pixelStorei(32878,h),de.pixelStorei(3316,p),de.pixelStorei(3315,f),de.pixelStorei(32877,g),0===r&&i.generateMipmaps&&de.generateMipmap(u),H.unbindTexture()},this.initTexture=function(e){e.isCubeTexture?q.setTextureCube(e,0):e.isData3DTexture?q.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?q.setTexture2DArray(e,0):q.setTexture2D(e,0),H.unbindTexture()},this.resetState=function(){v=0,y=0,x=null,H.reset(),ce.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Object.defineProperties($h.prototype,{physicallyCorrectLights:{get:function(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights},set:function(e){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}}});class ep extends $h{}ep.prototype.isWebGL1Renderer=!0;class tp{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25e-5;this.isFogExp2=!0,this.name="",this.color=new mc(e),this.density=t}clone(){return new tp(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class np{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;this.isFog=!0,this.name="",this.color=new mc(e),this.near=t,this.far=n}clone(){return new np(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class ip extends Zl{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class rp{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=Xa,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=uo()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let i=0,r=this.stride;i<r;i++)this.array[e+i]=t.array[n+i];return this}set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=uo()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=uo()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const sp=new Po;class ap{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)sp.fromBufferAttribute(this,t),sp.applyMatrix4(e),this.setXYZ(t,sp.x,sp.y,sp.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)sp.fromBufferAttribute(this,t),sp.applyNormalMatrix(e),this.setXYZ(t,sp.x,sp.y,sp.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)sp.fromBufferAttribute(this,t),sp.transformDirection(e),this.setXYZ(t,sp.x,sp.y,sp.z);return this}setX(e,t){return this.normalized&&(t=xo(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=xo(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=xo(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=xo(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=yo(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=yo(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=yo(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=yo(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=xo(t,this.array),n=xo(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=xo(t,this.array),n=xo(n,this.array),i=xo(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this}setXYZW(e,t,n,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=xo(t,this.array),n=xo(n,this.array),i=xo(i,this.array),r=xo(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=r,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new bc(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new ap(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class op extends uc{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new mc(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let lp;const cp=new Po,up=new Po,dp=new Po,hp=new _o,pp=new _o,fp=new Tl,mp=new Po,gp=new Po,vp=new Po,yp=new _o,xp=new _o,bp=new _o;class _p extends Zl{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",void 0===lp){lp=new zc;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new rp(e,5);lp.setIndex([0,1,2,0,2,3]),lp.setAttribute("position",new ap(t,3,0,!1)),lp.setAttribute("uv",new ap(t,2,3,!1))}this.geometry=lp,this.material=void 0!==e?e:new op,this.center=new _o(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),up.setFromMatrixScale(this.matrixWorld),fp.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),dp.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&up.multiplyScalar(-dp.z);const n=this.material.rotation;let i,r;0!==n&&(r=Math.cos(n),i=Math.sin(n));const s=this.center;wp(mp.set(-.5,-.5,0),dp,s,up,i,r),wp(gp.set(.5,-.5,0),dp,s,up,i,r),wp(vp.set(.5,.5,0),dp,s,up,i,r),yp.set(0,0),xp.set(1,0),bp.set(1,1);let a=e.ray.intersectTriangle(mp,gp,vp,!1,cp);if(null===a&&(wp(gp.set(-.5,.5,0),dp,s,up,i,r),xp.set(0,1),a=e.ray.intersectTriangle(mp,vp,gp,!1,cp),null===a))return;const o=e.ray.origin.distanceTo(cp);o<e.near||o>e.far||t.push({distance:o,point:cp.clone(),uv:lc.getUV(cp,mp,gp,vp,yp,xp,bp,new _o),face:null,object:this})}copy(e,t){return super.copy(e,t),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}function wp(e,t,n,i,r,s){hp.subVectors(e,n).addScalar(.5).multiply(i),void 0!==r?(pp.x=s*hp.x-r*hp.y,pp.y=r*hp.x+s*hp.y):pp.copy(hp),e.copy(t),e.x+=pp.x,e.y+=pp.y,e.applyMatrix4(fp)}const Sp=new Po,Mp=new Po;class Ep extends Zl{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,i=t.length;n<i;n++){const e=t[n];this.addLevel(e.object.clone(),e.distance,e.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;t=Math.abs(t);const i=this.levels;let r;for(r=0;r<i.length&&!(t<i[r].distance);r++);return i.splice(r,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,i;for(n=1,i=t.length;n<i;n++){let i=t[n].distance;if(t[n].object.visible&&(i-=i*t[n].hysteresis),e<i)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){Sp.setFromMatrixPosition(this.matrixWorld);const n=e.ray.origin.distanceTo(Sp);this.getObjectForDistance(n).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Sp.setFromMatrixPosition(e.matrixWorld),Mp.setFromMatrixPosition(this.matrixWorld);const n=Sp.distanceTo(Mp)/e.zoom;let i,r;for(t[0].object.visible=!0,i=1,r=t.length;i<r;i++){let e=t[i].distance;if(t[i].object.visible&&(e-=e*t[i].hysteresis),!(n>=e))break;t[i-1].object.visible=!1,t[i].object.visible=!0}for(this._currentLevel=i-1;i<r;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let i=0,r=n.length;i<r;i++){const e=n[i];t.object.levels.push({object:e.object.uuid,distance:e.distance,hysteresis:e.hysteresis})}return t}}const Tp=new Po,Cp=new qo,Ap=new qo,Pp=new Po,Np=new Tl;class kp extends $c{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Tl,this.bindMatrixInverse=new Tl}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new qo,t=this.geometry.attributes.skinWeight;for(let n=0,i=t.count;n<i;n++){e.fromBufferAttribute(t,n);const i=1/e.manhattanLength();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const n=this.skeleton,i=this.geometry;Cp.fromBufferAttribute(i.attributes.skinIndex,e),Ap.fromBufferAttribute(i.attributes.skinWeight,e),Tp.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let r=0;r<4;r++){const e=Ap.getComponent(r);if(0!==e){const i=Cp.getComponent(r);Np.multiplyMatrices(n.bones[i].matrixWorld,n.boneInverses[i]),t.addScaledVector(Pp.copy(Tp).applyMatrix4(Np),e)}}return t.applyMatrix4(this.bindMatrixInverse)}}class Rp extends Zl{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Ip extends Go{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(null,arguments.length>5?arguments[5]:void 0,arguments.length>6?arguments[6]:void 0,arguments.length>7?arguments[7]:void 0,arguments.length>8&&void 0!==arguments[8]?arguments[8]:$r,arguments.length>9&&void 0!==arguments[9]?arguments[9]:$r,arguments.length>3?arguments[3]:void 0,arguments.length>4?arguments[4]:void 0,arguments.length>10?arguments[10]:void 0,arguments.length>11?arguments[11]:void 0),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Lp=new Tl,jp=new Tl;class Dp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.uuid=uo(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new Tl)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const t=new Tl;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let r=0,s=e.length;r<s;r++){const i=e[r]?e[r].matrixWorld:jp;Lp.multiplyMatrices(i,t[r]),Lp.toArray(n,16*r)}null!==i&&(i.needsUpdate=!0)}clone(){return new Dp(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=go(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new Ip(t,e,e,_s,ms);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const n=this.bones[t];if(n.name===e)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,i=e.bones.length;n<i;n++){const i=e.bones[n];let r=t[i];void 0===r&&(console.warn("THREE.Skeleton: No bone found with UUID:",i),r=new Rp),this.bones.push(r),this.boneInverses.push((new Tl).fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let i=0,r=t.length;i<r;i++){const r=t[i];e.bones.push(r.uuid);const s=n[i];e.boneInverses.push(s.toArray())}return e}}class Op extends bc{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const zp=new Tl,Fp=new Tl,Up=[],Bp=new Tl,Vp=new $c;class Hp extends $c{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Op(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1;for(let i=0;i<n;i++)this.setMatrixAt(i,Bp)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const n=this.matrixWorld,i=this.count;if(Vp.geometry=this.geometry,Vp.material=this.material,void 0!==Vp.material)for(let r=0;r<i;r++){this.getMatrixAt(r,zp),Fp.multiplyMatrices(n,zp),Vp.matrixWorld=Fp,Vp.raycast(e,Up);for(let e=0,n=Up.length;e<n;e++){const n=Up[e];n.instanceId=r,n.object=this,t.push(n)}Up.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new Op(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Wp extends uc{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new mc(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Gp=new Po,qp=new Po,Xp=new Tl,Yp=new El,Jp=new vl;class Kp extends Zl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new zc,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Wp;super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,i=t.count;e<i;e++)Gp.fromBufferAttribute(t,e-1),qp.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=Gp.distanceTo(qp);e.setAttribute("lineDistance",new Pc(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,r=e.params.Line.threshold,s=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Jp.copy(n.boundingSphere),Jp.applyMatrix4(i),Jp.radius+=r,!1===e.ray.intersectsSphere(Jp))return;Xp.copy(i).invert(),Yp.copy(e.ray).applyMatrix4(Xp);const a=r/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a,l=new Po,c=new Po,u=new Po,d=new Po,h=this.isLineSegments?2:1,p=n.index,f=n.attributes.position;if(null!==p){for(let n=Math.max(0,s.start),i=Math.min(p.count,s.start+s.count)-1;n<i;n+=h){const i=p.getX(n),r=p.getX(n+1);l.fromBufferAttribute(f,i),c.fromBufferAttribute(f,r);if(Yp.distanceSqToSegment(l,c,d,u)>o)continue;d.applyMatrix4(this.matrixWorld);const s=e.ray.origin.distanceTo(d);s<e.near||s>e.far||t.push({distance:s,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else{for(let n=Math.max(0,s.start),i=Math.min(f.count,s.start+s.count)-1;n<i;n+=h){l.fromBufferAttribute(f,n),c.fromBufferAttribute(f,n+1);if(Yp.distanceSqToSegment(l,c,d,u)>o)continue;d.applyMatrix4(this.matrixWorld);const i=e.ray.origin.distanceTo(d);i<e.near||i>e.far||t.push({distance:i,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}const Zp=new Po,Qp=new Po;class $p extends Kp{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,i=t.count;e<i;e+=2)Zp.fromBufferAttribute(t,e),Qp.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+Zp.distanceTo(Qp);e.setAttribute("lineDistance",new Pc(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class ef extends Kp{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class tf extends uc{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new mc(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const nf=new Tl,rf=new El,sf=new vl,af=new Po;class of extends Zl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new zc,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new tf;super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,r=e.params.Points.threshold,s=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),sf.copy(n.boundingSphere),sf.applyMatrix4(i),sf.radius+=r,!1===e.ray.intersectsSphere(sf))return;nf.copy(i).invert(),rf.copy(e.ray).applyMatrix4(nf);const a=r/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a,l=n.index,c=n.attributes.position;if(null!==l){for(let n=Math.max(0,s.start),r=Math.min(l.count,s.start+s.count);n<r;n++){const r=l.getX(n);af.fromBufferAttribute(c,r),lf(af,r,o,i,e,t,this)}}else{for(let n=Math.max(0,s.start),r=Math.min(c.count,s.start+s.count);n<r;n++)af.fromBufferAttribute(c,n),lf(af,n,o,i,e,t,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function lf(e,t,n,i,r,s,a){const o=rf.distanceSqToPoint(e);if(o<n){const n=new Po;rf.closestPointToPoint(e,n),n.applyMatrix4(i);const l=r.ray.origin.distanceTo(n);if(l<r.near||l>r.far)return;s.push({distance:l,distanceToRay:Math.sqrt(o),point:n,index:t,face:null,object:a})}}class cf extends Go{constructor(e,t,n,i,r,s,a,o,l){super(e,t,n,i,r,s,a,o,l),this.isVideoTexture=!0,this.minFilter=void 0!==s?s:rs,this.magFilter=void 0!==r?r:rs,this.generateMipmaps=!1;const c=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){c.needsUpdate=!0,e.requestVideoFrameCallback(t)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class uf extends Go{constructor(e,t,n){super({width:e,height:t}),this.isFramebufferTexture=!0,this.format=n,this.magFilter=$r,this.minFilter=$r,this.generateMipmaps=!1,this.needsUpdate=!0}}class df extends Go{constructor(e,t,n,i,r,s,a,o,l,c,u,d){super(null,s,a,o,l,c,i,r,u,d),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class hf extends df{constructor(e,t,n,i,r,s){super(e,t,n,r,s),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=Zr}}class pf extends Go{constructor(e,t,n,i,r,s,a,o,l){super(e,t,n,i,r,s,a,o,l),this.isCanvasTexture=!0,this.needsUpdate=!0}}class ff{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,i=this.getPoint(0),r=0;t.push(0);for(let s=1;s<=e;s++)n=this.getPoint(s/e),r+=n.distanceTo(i),t.push(r),i=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let i=0;const r=n.length;let s;s=t||e*n[r-1];let a,o=0,l=r-1;for(;o<=l;)if(i=Math.floor(o+(l-o)/2),a=n[i]-s,a<0)o=i+1;else{if(!(a>0)){l=i;break}l=i-1}if(i=l,n[i]===s)return i/(r-1);const c=n[i];return(i+(s-c)/(n[i+1]-c))/(r-1)}getTangent(e,t){const n=1e-4;let i=e-n,r=e+n;i<0&&(i=0),r>1&&(r=1);const s=this.getPoint(i),a=this.getPoint(r),o=t||(s.isVector2?new _o:new Po);return o.copy(a).sub(s).normalize(),o}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new Po,i=[],r=[],s=[],a=new Po,o=new Tl;for(let h=0;h<=e;h++){const t=h/e;i[h]=this.getTangentAt(t,new Po)}r[0]=new Po,s[0]=new Po;let l=Number.MAX_VALUE;const c=Math.abs(i[0].x),u=Math.abs(i[0].y),d=Math.abs(i[0].z);c<=l&&(l=c,n.set(1,0,0)),u<=l&&(l=u,n.set(0,1,0)),d<=l&&n.set(0,0,1),a.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],a),s[0].crossVectors(i[0],r[0]);for(let h=1;h<=e;h++){if(r[h]=r[h-1].clone(),s[h]=s[h-1].clone(),a.crossVectors(i[h-1],i[h]),a.length()>Number.EPSILON){a.normalize();const e=Math.acos(ho(i[h-1].dot(i[h]),-1,1));r[h].applyMatrix4(o.makeRotationAxis(a,e))}s[h].crossVectors(i[h],r[h])}if(!0===t){let t=Math.acos(ho(r[0].dot(r[e]),-1,1));t/=e,i[0].dot(a.crossVectors(r[0],r[e]))>0&&(t=-t);for(let n=1;n<=e;n++)r[n].applyMatrix4(o.makeRotationAxis(i[n],t*n)),s[n].crossVectors(i[n],r[n])}return{tangents:i,normals:r,binormals:s}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class mf extends ff{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=i,this.aStartAngle=r,this.aEndAngle=s,this.aClockwise=a,this.aRotation=o}getPoint(e,t){const n=t||new _o,i=2*Math.PI;let r=this.aEndAngle-this.aStartAngle;const s=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(r=s?0:i),!0!==this.aClockwise||s||(r===i?r=-i:r-=i);const a=this.aStartAngle+e*r;let o=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=o-this.aX,i=l-this.aY;o=n*e-i*t+this.aX,l=n*t+i*e+this.aY}return n.set(o,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class gf extends mf{constructor(e,t,n,i,r,s){super(e,t,n,n,i,r,s),this.isArcCurve=!0,this.type="ArcCurve"}}function vf(){let e=0,t=0,n=0,i=0;function r(r,s,a,o){e=r,t=a,n=-3*r+3*s-2*a-o,i=2*r-2*s+a+o}return{initCatmullRom:function(e,t,n,i,s){r(t,n,s*(n-e),s*(i-t))},initNonuniformCatmullRom:function(e,t,n,i,s,a,o){let l=(t-e)/s-(n-e)/(s+a)+(n-t)/a,c=(n-t)/a-(i-t)/(a+o)+(i-n)/o;l*=a,c*=a,r(t,n,l,c)},calc:function(r){const s=r*r;return e+t*r+n*s+i*(s*r)}}}const yf=new Po,xf=new vf,bf=new vf,_f=new vf;class wf extends ff{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=i}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Po,n=this.points,i=n.length,r=(i-(this.closed?0:1))*e;let s,a,o=Math.floor(r),l=r-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/i)+1)*i:0===l&&o===i-1&&(o=i-2,l=1),this.closed||o>0?s=n[(o-1)%i]:(yf.subVectors(n[0],n[1]).add(n[0]),s=yf);const c=n[o%i],u=n[(o+1)%i];if(this.closed||o+2<i?a=n[(o+2)%i]:(yf.subVectors(n[i-1],n[i-2]).add(n[i-1]),a=yf),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(s.distanceToSquared(c),e),n=Math.pow(c.distanceToSquared(u),e),i=Math.pow(u.distanceToSquared(a),e);n<1e-4&&(n=1),t<1e-4&&(t=n),i<1e-4&&(i=n),xf.initNonuniformCatmullRom(s.x,c.x,u.x,a.x,t,n,i),bf.initNonuniformCatmullRom(s.y,c.y,u.y,a.y,t,n,i),_f.initNonuniformCatmullRom(s.z,c.z,u.z,a.z,t,n,i)}else"catmullrom"===this.curveType&&(xf.initCatmullRom(s.x,c.x,u.x,a.x,this.tension),bf.initCatmullRom(s.y,c.y,u.y,a.y,this.tension),_f.initCatmullRom(s.z,c.z,u.z,a.z,this.tension));return t.set(xf.calc(l),bf.calc(l),_f.calc(l)),t}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new Po).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function Sf(e,t,n,i,r){const s=.5*(i-t),a=.5*(r-n),o=e*e;return(2*n-2*i+s+a)*(e*o)+(-3*n+3*i-2*s-a)*o+s*e+n}function Mf(e,t,n,i){return function(e,t){const n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,i)}function Ef(e,t,n,i,r){return function(e,t){const n=1-e;return n*n*n*t}(e,t)+function(e,t){const n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,i)+function(e,t){return e*e*e*t}(e,r)}class Tf extends ff{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new _o,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new _o,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new _o,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new _o;super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new _o,n=this.v0,i=this.v1,r=this.v2,s=this.v3;return t.set(Ef(e,n.x,i.x,r.x,s.x),Ef(e,n.y,i.y,r.y,s.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Cf extends ff{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Po,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Po,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Po,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Po;super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Po,n=this.v0,i=this.v1,r=this.v2,s=this.v3;return t.set(Ef(e,n.x,i.x,r.x,s.x),Ef(e,n.y,i.y,r.y,s.y),Ef(e,n.z,i.z,r.z,s.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Af extends ff{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new _o,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new _o;super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new _o;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new _o).subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Pf extends ff{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Po,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Po;super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Po;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Po).subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Nf extends ff{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new _o,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new _o,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new _o;super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new _o,n=this.v0,i=this.v1,r=this.v2;return t.set(Mf(e,n.x,i.x,r.x),Mf(e,n.y,i.y,r.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class kf extends ff{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Po,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Po,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Po;super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Po,n=this.v0,i=this.v1,r=this.v2;return t.set(Mf(e,n.x,i.x,r.x),Mf(e,n.y,i.y,r.y),Mf(e,n.z,i.z,r.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Rf extends ff{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new _o,n=this.points,i=(n.length-1)*e,r=Math.floor(i),s=i-r,a=n[0===r?r:r-1],o=n[r],l=n[r>n.length-2?n.length-1:r+1],c=n[r>n.length-3?n.length-1:r+2];return t.set(Sf(s,a.x,o.x,l.x,c.x),Sf(s,a.y,o.y,l.y,c.y)),t}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new _o).fromArray(n))}return this}}var If=Object.freeze({__proto__:null,ArcCurve:gf,CatmullRomCurve3:wf,CubicBezierCurve:Tf,CubicBezierCurve3:Cf,EllipseCurve:mf,LineCurve:Af,LineCurve3:Pf,QuadraticBezierCurve:Nf,QuadraticBezierCurve3:kf,SplineCurve:Rf});class Lf extends ff{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Af(t,e))}getPoint(e,t){const n=e*this.getLength(),i=this.getCurveLengths();let r=0;for(;r<i.length;){if(i[r]>=n){const e=i[r]-n,s=this.curves[r],a=s.getLength(),o=0===a?0:1-e/a;return s.getPointAt(o,t)}r++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40;const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12;const t=[];let n;for(let i=0,r=this.curves;i<r.length;i++){const s=r[i],a=s.isEllipseCurve?2*e:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,o=s.getPoints(a);for(let e=0;e<o.length;e++){const i=o[e];n&&n.equals(i)||(t.push(i),n=i)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const n=this.curves[t];e.curves.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push((new If[n.type]).fromJSON(n))}return this}}class jf extends Lf{constructor(e){super(),this.type="Path",this.currentPoint=new _o,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new Af(this.currentPoint.clone(),new _o(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,i){const r=new Nf(this.currentPoint.clone(),new _o(e,t),new _o(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this}bezierCurveTo(e,t,n,i,r,s){const a=new Tf(this.currentPoint.clone(),new _o(e,t),new _o(n,i),new _o(r,s));return this.curves.push(a),this.currentPoint.set(r,s),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new Rf(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,i,r,s){const a=this.currentPoint.x,o=this.currentPoint.y;return this.absarc(e+a,t+o,n,i,r,s),this}absarc(e,t,n,i,r,s){return this.absellipse(e,t,n,n,i,r,s),this}ellipse(e,t,n,i,r,s,a,o){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+l,t+c,n,i,r,s,a,o),this}absellipse(e,t,n,i,r,s,a,o){const l=new mf(e,t,n,i,r,s,a,o);if(this.curves.length>0){const e=l.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Df extends zc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[new _o(0,-.5),new _o(.5,0),new _o(0,.5)],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},t=Math.floor(t),i=ho(i,0,2*Math.PI);const r=[],s=[],a=[],o=[],l=[],c=1/t,u=new Po,d=new _o,h=new Po,p=new Po,f=new Po;let m=0,g=0;for(let v=0;v<=e.length-1;v++)switch(v){case 0:m=e[v+1].x-e[v].x,g=e[v+1].y-e[v].y,h.x=1*g,h.y=-m,h.z=0*g,f.copy(h),h.normalize(),o.push(h.x,h.y,h.z);break;case e.length-1:o.push(f.x,f.y,f.z);break;default:m=e[v+1].x-e[v].x,g=e[v+1].y-e[v].y,h.x=1*g,h.y=-m,h.z=0*g,p.copy(h),h.x+=f.x,h.y+=f.y,h.z+=f.z,h.normalize(),o.push(h.x,h.y,h.z),f.copy(p)}for(let v=0;v<=t;v++){const r=n+v*c*i,h=Math.sin(r),p=Math.cos(r);for(let n=0;n<=e.length-1;n++){u.x=e[n].x*h,u.y=e[n].y,u.z=e[n].x*p,s.push(u.x,u.y,u.z),d.x=v/t,d.y=n/(e.length-1),a.push(d.x,d.y);const i=o[3*n+0]*h,r=o[3*n+1],c=o[3*n+0]*p;l.push(i,r,c)}}for(let v=0;v<t;v++)for(let t=0;t<e.length-1;t++){const n=t+v*e.length,i=n,s=n+e.length,a=n+e.length+1,o=n+1;r.push(i,s,o),r.push(a,o,s)}this.setIndex(r),this.setAttribute("position",new Pc(s,3)),this.setAttribute("uv",new Pc(a,2)),this.setAttribute("normal",new Pc(l,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Df(e.points,e.segments,e.phiStart,e.phiLength)}}class Of extends Df{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8;const r=new jf;r.absarc(0,-t/2,e,1.5*Math.PI,0),r.absarc(0,t/2,e,0,.5*Math.PI),super(r.getPoints(n),i),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:n,radialSegments:i}}static fromJSON(e){return new Of(e.radius,e.length,e.capSegments,e.radialSegments)}}class zf extends zc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},t=Math.max(3,t);const r=[],s=[],a=[],o=[],l=new Po,c=new _o;s.push(0,0,0),a.push(0,0,1),o.push(.5,.5);for(let u=0,d=3;u<=t;u++,d+=3){const r=n+u/t*i;l.x=e*Math.cos(r),l.y=e*Math.sin(r),s.push(l.x,l.y,l.z),a.push(0,0,1),c.x=(s[d]/e+1)/2,c.y=(s[d+1]/e+1)/2,o.push(c.x,c.y)}for(let u=1;u<=t;u++)r.push(u,u+1,0);this.setIndex(r),this.setAttribute("position",new Pc(s,3)),this.setAttribute("normal",new Pc(a,3)),this.setAttribute("uv",new Pc(o,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new zf(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Ff extends zc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:32,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:a,thetaLength:o};const l=this;i=Math.floor(i),r=Math.floor(r);const c=[],u=[],d=[],h=[];let p=0;const f=[],m=n/2;let g=0;function v(n){const r=p,s=new _o,f=new Po;let v=0;const y=!0===n?e:t,x=!0===n?1:-1;for(let e=1;e<=i;e++)u.push(0,m*x,0),d.push(0,x,0),h.push(.5,.5),p++;const b=p;for(let e=0;e<=i;e++){const t=e/i*o+a,n=Math.cos(t),r=Math.sin(t);f.x=y*r,f.y=m*x,f.z=y*n,u.push(f.x,f.y,f.z),d.push(0,x,0),s.x=.5*n+.5,s.y=.5*r*x+.5,h.push(s.x,s.y),p++}for(let e=0;e<i;e++){const t=r+e,i=b+e;!0===n?c.push(i,i+1,t):c.push(i+1,i,t),v+=3}l.addGroup(g,v,!0===n?1:2),g+=v}!function(){const s=new Po,v=new Po;let y=0;const x=(t-e)/n;for(let l=0;l<=r;l++){const c=[],g=l/r,y=g*(t-e)+e;for(let e=0;e<=i;e++){const t=e/i,r=t*o+a,l=Math.sin(r),f=Math.cos(r);v.x=y*l,v.y=-g*n+m,v.z=y*f,u.push(v.x,v.y,v.z),s.set(l,x,f).normalize(),d.push(s.x,s.y,s.z),h.push(t,1-g),c.push(p++)}f.push(c)}for(let e=0;e<i;e++)for(let t=0;t<r;t++){const n=f[t][e],i=f[t+1][e],r=f[t+1][e+1],s=f[t][e+1];c.push(n,i,s),c.push(i,r,s),y+=6}l.addGroup(g,y,0),g+=y}(),!1===s&&(e>0&&v(!0),t>0&&v(!1)),this.setIndex(c),this.setAttribute("position",new Pc(u,3)),this.setAttribute("normal",new Pc(d,3)),this.setAttribute("uv",new Pc(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ff(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Uf extends Ff{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2*Math.PI;super(0,e,t,n,i,r,s,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:s,thetaLength:a}}static fromJSON(e){return new Uf(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Bf extends zc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i};const r=[],s=[];function a(e,t,n,i){const r=i+1,s=[];for(let a=0;a<=r;a++){s[a]=[];const i=e.clone().lerp(n,a/r),o=t.clone().lerp(n,a/r),l=r-a;for(let e=0;e<=l;e++)s[a][e]=0===e&&a===r?i:i.clone().lerp(o,e/l)}for(let a=0;a<r;a++)for(let e=0;e<2*(r-a)-1;e++){const t=Math.floor(e/2);e%2===0?(o(s[a][t+1]),o(s[a+1][t]),o(s[a][t])):(o(s[a][t+1]),o(s[a+1][t+1]),o(s[a+1][t]))}}function o(e){r.push(e.x,e.y,e.z)}function l(t,n){const i=3*t;n.x=e[i+0],n.y=e[i+1],n.z=e[i+2]}function c(e,t,n,i){i<0&&1===e.x&&(s[t]=e.x-1),0===n.x&&0===n.z&&(s[t]=i/2/Math.PI+.5)}function u(e){return Math.atan2(e.z,-e.x)}!function(e){const n=new Po,i=new Po,r=new Po;for(let s=0;s<t.length;s+=3)l(t[s+0],n),l(t[s+1],i),l(t[s+2],r),a(n,i,r,e)}(i),function(e){const t=new Po;for(let n=0;n<r.length;n+=3)t.x=r[n+0],t.y=r[n+1],t.z=r[n+2],t.normalize().multiplyScalar(e),r[n+0]=t.x,r[n+1]=t.y,r[n+2]=t.z}(n),function(){const e=new Po;for(let n=0;n<r.length;n+=3){e.x=r[n+0],e.y=r[n+1],e.z=r[n+2];const i=u(e)/2/Math.PI+.5,a=(t=e,Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))/Math.PI+.5);s.push(i,1-a)}var t;(function(){const e=new Po,t=new Po,n=new Po,i=new Po,a=new _o,o=new _o,l=new _o;for(let d=0,h=0;d<r.length;d+=9,h+=6){e.set(r[d+0],r[d+1],r[d+2]),t.set(r[d+3],r[d+4],r[d+5]),n.set(r[d+6],r[d+7],r[d+8]),a.set(s[h+0],s[h+1]),o.set(s[h+2],s[h+3]),l.set(s[h+4],s[h+5]),i.copy(e).add(t).add(n).divideScalar(3);const p=u(i);c(a,h+0,e,p),c(o,h+2,t,p),c(l,h+4,n,p)}})(),function(){for(let e=0;e<s.length;e+=6){const t=s[e+0],n=s[e+2],i=s[e+4],r=Math.max(t,n,i),a=Math.min(t,n,i);r>.9&&a<.1&&(t<.2&&(s[e+0]+=1),n<.2&&(s[e+2]+=1),i<.2&&(s[e+4]+=1))}}()}(),this.setAttribute("position",new Pc(r,3)),this.setAttribute("normal",new Pc(r.slice(),3)),this.setAttribute("uv",new Pc(s,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Bf(e.vertices,e.indices,e.radius,e.details)}}class Vf extends Bf{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=(1+Math.sqrt(5))/2,i=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Vf(e.radius,e.detail)}}const Hf=new Po,Wf=new Po,Gf=new Po,qf=new lc;class Xf extends zc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},null!==e){const n=4,i=Math.pow(10,n),r=Math.cos(lo*t),s=e.getIndex(),a=e.getAttribute("position"),o=s?s.count:a.count,l=[0,0,0],c=["a","b","c"],u=new Array(3),d={},h=[];for(let e=0;e<o;e+=3){s?(l[0]=s.getX(e),l[1]=s.getX(e+1),l[2]=s.getX(e+2)):(l[0]=e,l[1]=e+1,l[2]=e+2);const{a:t,b:n,c:o}=qf;if(t.fromBufferAttribute(a,l[0]),n.fromBufferAttribute(a,l[1]),o.fromBufferAttribute(a,l[2]),qf.getNormal(Gf),u[0]="".concat(Math.round(t.x*i),",").concat(Math.round(t.y*i),",").concat(Math.round(t.z*i)),u[1]="".concat(Math.round(n.x*i),",").concat(Math.round(n.y*i),",").concat(Math.round(n.z*i)),u[2]="".concat(Math.round(o.x*i),",").concat(Math.round(o.y*i),",").concat(Math.round(o.z*i)),u[0]!==u[1]&&u[1]!==u[2]&&u[2]!==u[0])for(let e=0;e<3;e++){const t=(e+1)%3,n=u[e],i=u[t],s=qf[c[e]],a=qf[c[t]],o="".concat(n,"_").concat(i),p="".concat(i,"_").concat(n);p in d&&d[p]?(Gf.dot(d[p].normal)<=r&&(h.push(s.x,s.y,s.z),h.push(a.x,a.y,a.z)),d[p]=null):o in d||(d[o]={index0:l[e],index1:l[t],normal:Gf.clone()})}}for(const e in d)if(d[e]){const{index0:t,index1:n}=d[e];Hf.fromBufferAttribute(a,t),Wf.fromBufferAttribute(a,n),h.push(Hf.x,Hf.y,Hf.z),h.push(Wf.x,Wf.y,Wf.z)}this.setAttribute("position",new Pc(h,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Yf extends jf{constructor(e){super(e),this.uuid=uo(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const n=this.holes[t];e.holes.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push((new jf).fromJSON(n))}return this}}const Jf=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const i=t&&t.length,r=i?t[0]*n:e.length;let s=Kf(e,0,r,n,!0);const a=[];if(!s||s.next===s.prev)return a;let o,l,c,u,d,h,p;if(i&&(s=function(e,t,n,i){const r=[];let s,a,o,l,c;for(s=0,a=t.length;s<a;s++)o=t[s]*i,l=s<a-1?t[s+1]*i:e.length,c=Kf(e,o,l,i,!1),c===c.next&&(c.steiner=!0),r.push(om(c));for(r.sort(im),s=0;s<r.length;s++)n=rm(r[s],n);return n}(e,t,s,n)),e.length>80*n){o=c=e[0],l=u=e[1];for(let t=n;t<r;t+=n)d=e[t],h=e[t+1],d<o&&(o=d),h<l&&(l=h),d>c&&(c=d),h>u&&(u=h);p=Math.max(c-o,u-l),p=0!==p?32767/p:0}return Qf(s,a,n,o,l,p,0),a};function Kf(e,t,n,i,r){let s,a;if(r===function(e,t,n,i){let r=0;for(let s=t,a=n-i;s<n;s+=i)r+=(e[a]-e[s])*(e[s+1]+e[a+1]),a=s;return r}(e,t,n,i)>0)for(s=t;s<n;s+=i)a=vm(s,e[s],e[s+1],a);else for(s=n-i;s>=t;s-=i)a=vm(s,e[s],e[s+1],a);return a&&dm(a,a.next)&&(ym(a),a=a.next),a}function Zf(e,t){if(!e)return e;t||(t=e);let n,i=e;do{if(n=!1,i.steiner||!dm(i,i.next)&&0!==um(i.prev,i,i.next))i=i.next;else{if(ym(i),i=t=i.prev,i===i.next)break;n=!0}}while(n||i!==t);return t}function Qf(e,t,n,i,r,s,a){if(!e)return;!a&&s&&function(e,t,n,i){let r=e;do{0===r.z&&(r.z=am(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function(e){let t,n,i,r,s,a,o,l,c=1;do{for(n=e,e=null,s=null,a=0;n;){for(a++,i=n,o=0,t=0;t<c&&(o++,i=i.nextZ,i);t++);for(l=c;o>0||l>0&&i;)0!==o&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,o--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:e=r,r.prevZ=s,s=r;n=i}s.nextZ=null,c*=2}while(a>1)}(r)}(e,i,r,s);let o,l,c=e;for(;e.prev!==e.next;)if(o=e.prev,l=e.next,s?em(e,i,r,s):$f(e))t.push(o.i/n|0),t.push(e.i/n|0),t.push(l.i/n|0),ym(e),e=l.next,c=l.next;else if((e=l)===c){a?1===a?Qf(e=tm(Zf(e),t,n),t,n,i,r,s,2):2===a&&nm(e,t,n,i,r,s):Qf(Zf(e),t,n,i,r,s,1);break}}function $f(e){const t=e.prev,n=e,i=e.next;if(um(t,n,i)>=0)return!1;const r=t.x,s=n.x,a=i.x,o=t.y,l=n.y,c=i.y,u=r<s?r<a?r:a:s<a?s:a,d=o<l?o<c?o:c:l<c?l:c,h=r>s?r>a?r:a:s>a?s:a,p=o>l?o>c?o:c:l>c?l:c;let f=i.next;for(;f!==t;){if(f.x>=u&&f.x<=h&&f.y>=d&&f.y<=p&&lm(r,o,s,l,a,c,f.x,f.y)&&um(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function em(e,t,n,i){const r=e.prev,s=e,a=e.next;if(um(r,s,a)>=0)return!1;const o=r.x,l=s.x,c=a.x,u=r.y,d=s.y,h=a.y,p=o<l?o<c?o:c:l<c?l:c,f=u<d?u<h?u:h:d<h?d:h,m=o>l?o>c?o:c:l>c?l:c,g=u>d?u>h?u:h:d>h?d:h,v=am(p,f,t,n,i),y=am(m,g,t,n,i);let x=e.prevZ,b=e.nextZ;for(;x&&x.z>=v&&b&&b.z<=y;){if(x.x>=p&&x.x<=m&&x.y>=f&&x.y<=g&&x!==r&&x!==a&&lm(o,u,l,d,c,h,x.x,x.y)&&um(x.prev,x,x.next)>=0)return!1;if(x=x.prevZ,b.x>=p&&b.x<=m&&b.y>=f&&b.y<=g&&b!==r&&b!==a&&lm(o,u,l,d,c,h,b.x,b.y)&&um(b.prev,b,b.next)>=0)return!1;b=b.nextZ}for(;x&&x.z>=v;){if(x.x>=p&&x.x<=m&&x.y>=f&&x.y<=g&&x!==r&&x!==a&&lm(o,u,l,d,c,h,x.x,x.y)&&um(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;b&&b.z<=y;){if(b.x>=p&&b.x<=m&&b.y>=f&&b.y<=g&&b!==r&&b!==a&&lm(o,u,l,d,c,h,b.x,b.y)&&um(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function tm(e,t,n){let i=e;do{const r=i.prev,s=i.next.next;!dm(r,s)&&hm(r,i,i.next,s)&&mm(r,s)&&mm(s,r)&&(t.push(r.i/n|0),t.push(i.i/n|0),t.push(s.i/n|0),ym(i),ym(i.next),i=e=s),i=i.next}while(i!==e);return Zf(i)}function nm(e,t,n,i,r,s){let a=e;do{let e=a.next.next;for(;e!==a.prev;){if(a.i!==e.i&&cm(a,e)){let o=gm(a,e);return a=Zf(a,a.next),o=Zf(o,o.next),Qf(a,t,n,i,r,s,0),void Qf(o,t,n,i,r,s,0)}e=e.next}a=a.next}while(a!==e)}function im(e,t){return e.x-t.x}function rm(e,t){const n=function(e,t){let n,i=t,r=-1/0;const s=e.x,a=e.y;do{if(a<=i.y&&a>=i.next.y&&i.next.y!==i.y){const e=i.x+(a-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(e<=s&&e>r&&(r=e,n=i.x<i.next.x?i:i.next,e===s))return n}i=i.next}while(i!==t);if(!n)return null;const o=n,l=n.x,c=n.y;let u,d=1/0;i=n;do{s>=i.x&&i.x>=l&&s!==i.x&&lm(a<c?s:r,a,l,c,a<c?r:s,a,i.x,i.y)&&(u=Math.abs(a-i.y)/(s-i.x),mm(i,e)&&(u<d||u===d&&(i.x>n.x||i.x===n.x&&sm(n,i)))&&(n=i,d=u)),i=i.next}while(i!==o);return n}(e,t);if(!n)return t;const i=gm(n,e);return Zf(i,i.next),Zf(n,n.next)}function sm(e,t){return um(e.prev,e,t.prev)<0&&um(t.next,e,e.next)<0}function am(e,t,n,i,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-i)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function om(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function lm(e,t,n,i,r,s,a,o){return(r-a)*(t-o)>=(e-a)*(s-o)&&(e-a)*(i-o)>=(n-a)*(t-o)&&(n-a)*(s-o)>=(r-a)*(i-o)}function cm(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&hm(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(mm(e,t)&&mm(t,e)&&function(e,t){let n=e,i=!1;const r=(e.x+t.x)/2,s=(e.y+t.y)/2;do{n.y>s!==n.next.y>s&&n.next.y!==n.y&&r<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}(e,t)&&(um(e.prev,e,t.prev)||um(e,t.prev,t))||dm(e,t)&&um(e.prev,e,e.next)>0&&um(t.prev,t,t.next)>0)}function um(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function dm(e,t){return e.x===t.x&&e.y===t.y}function hm(e,t,n,i){const r=fm(um(e,t,n)),s=fm(um(e,t,i)),a=fm(um(n,i,e)),o=fm(um(n,i,t));return r!==s&&a!==o||(!(0!==r||!pm(e,n,t))||(!(0!==s||!pm(e,i,t))||(!(0!==a||!pm(n,e,i))||!(0!==o||!pm(n,t,i)))))}function pm(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function fm(e){return e>0?1:e<0?-1:0}function mm(e,t){return um(e.prev,e,e.next)<0?um(e,t,e.next)>=0&&um(e,e.prev,t)>=0:um(e,t,e.prev)<0||um(e,e.next,t)<0}function gm(e,t){const n=new xm(e.i,e.x,e.y),i=new xm(t.i,t.x,t.y),r=e.next,s=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,s.next=i,i.prev=s,i}function vm(e,t,n,i){const r=new xm(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function ym(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function xm(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class bm{static area(e){const t=e.length;let n=0;for(let i=t-1,r=0;r<t;i=r++)n+=e[i].x*e[r].y-e[r].x*e[i].y;return.5*n}static isClockWise(e){return bm.area(e)<0}static triangulateShape(e,t){const n=[],i=[],r=[];_m(e),wm(n,e);let s=e.length;t.forEach(_m);for(let o=0;o<t.length;o++)i.push(s),s+=t[o].length,wm(n,t[o]);const a=Jf(n,i);for(let o=0;o<a.length;o+=3)r.push(a.slice(o,o+3));return r}}function _m(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function wm(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class Sm extends zc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Yf([new _o(.5,.5),new _o(-.5,.5),new _o(-.5,-.5),new _o(.5,-.5)]),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,i=[],r=[];for(let a=0,o=e.length;a<o;a++){s(e[a])}function s(e){const s=[],a=void 0!==t.curveSegments?t.curveSegments:12,o=void 0!==t.steps?t.steps:1,l=void 0!==t.depth?t.depth:1;let c=void 0===t.bevelEnabled||t.bevelEnabled,u=void 0!==t.bevelThickness?t.bevelThickness:.2,d=void 0!==t.bevelSize?t.bevelSize:u-.1,h=void 0!==t.bevelOffset?t.bevelOffset:0,p=void 0!==t.bevelSegments?t.bevelSegments:3;const f=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:Mm;let g,v,y,x,b,_=!1;f&&(g=f.getSpacedPoints(o),_=!0,c=!1,v=f.computeFrenetFrames(o,!1),y=new Po,x=new Po,b=new Po),c||(p=0,u=0,d=0,h=0);const w=e.extractPoints(a);let S=w.shape;const M=w.holes;if(!bm.isClockWise(S)){S=S.reverse();for(let e=0,t=M.length;e<t;e++){const t=M[e];bm.isClockWise(t)&&(M[e]=t.reverse())}}const E=bm.triangulateShape(S,M),T=S;for(let t=0,n=M.length;t<n;t++){const e=M[t];S=S.concat(e)}function C(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().addScaledVector(t,n)}const A=S.length,P=E.length;function N(e,t,n){let i,r,s;const a=e.x-t.x,o=e.y-t.y,l=n.x-e.x,c=n.y-e.y,u=a*a+o*o,d=a*c-o*l;if(Math.abs(d)>Number.EPSILON){const d=Math.sqrt(u),h=Math.sqrt(l*l+c*c),p=t.x-o/d,f=t.y+a/d,m=((n.x-c/h-p)*c-(n.y+l/h-f)*l)/(a*c-o*l);i=p+a*m-e.x,r=f+o*m-e.y;const g=i*i+r*r;if(g<=2)return new _o(i,r);s=Math.sqrt(g/2)}else{let e=!1;a>Number.EPSILON?l>Number.EPSILON&&(e=!0):a<-Number.EPSILON?l<-Number.EPSILON&&(e=!0):Math.sign(o)===Math.sign(c)&&(e=!0),e?(i=-o,r=a,s=Math.sqrt(u)):(i=a,r=o,s=Math.sqrt(u/2))}return new _o(i/s,r/s)}const k=[];for(let t=0,n=T.length,i=n-1,r=t+1;t<n;t++,i++,r++)i===n&&(i=0),r===n&&(r=0),k[t]=N(T[t],T[i],T[r]);const R=[];let I,L=k.concat();for(let t=0,n=M.length;t<n;t++){const e=M[t];I=[];for(let t=0,n=e.length,i=n-1,r=t+1;t<n;t++,i++,r++)i===n&&(i=0),r===n&&(r=0),I[t]=N(e[t],e[i],e[r]);R.push(I),L=L.concat(I)}for(let t=0;t<p;t++){const e=t/p,n=u*Math.cos(e*Math.PI/2),i=d*Math.sin(e*Math.PI/2)+h;for(let t=0,r=T.length;t<r;t++){const e=C(T[t],k[t],i);O(e.x,e.y,-n)}for(let t=0,r=M.length;t<r;t++){const e=M[t];I=R[t];for(let t=0,r=e.length;t<r;t++){const r=C(e[t],I[t],i);O(r.x,r.y,-n)}}}const j=d+h;for(let t=0;t<A;t++){const e=c?C(S[t],L[t],j):S[t];_?(x.copy(v.normals[0]).multiplyScalar(e.x),y.copy(v.binormals[0]).multiplyScalar(e.y),b.copy(g[0]).add(x).add(y),O(b.x,b.y,b.z)):O(e.x,e.y,0)}for(let t=1;t<=o;t++)for(let e=0;e<A;e++){const n=c?C(S[e],L[e],j):S[e];_?(x.copy(v.normals[t]).multiplyScalar(n.x),y.copy(v.binormals[t]).multiplyScalar(n.y),b.copy(g[t]).add(x).add(y),O(b.x,b.y,b.z)):O(n.x,n.y,l/o*t)}for(let t=p-1;t>=0;t--){const e=t/p,n=u*Math.cos(e*Math.PI/2),i=d*Math.sin(e*Math.PI/2)+h;for(let t=0,r=T.length;t<r;t++){const e=C(T[t],k[t],i);O(e.x,e.y,l+n)}for(let t=0,r=M.length;t<r;t++){const e=M[t];I=R[t];for(let t=0,r=e.length;t<r;t++){const r=C(e[t],I[t],i);_?O(r.x,r.y+g[o-1].y,g[o-1].x+n):O(r.x,r.y,l+n)}}}function D(e,t){let n=e.length;for(;--n>=0;){const i=n;let r=n-1;r<0&&(r=e.length-1);for(let e=0,n=o+2*p;e<n;e++){const n=A*e,s=A*(e+1);F(t+i+n,t+r+n,t+r+s,t+i+s)}}}function O(e,t,n){s.push(e),s.push(t),s.push(n)}function z(e,t,r){U(e),U(t),U(r);const s=i.length/3,a=m.generateTopUV(n,i,s-3,s-2,s-1);B(a[0]),B(a[1]),B(a[2])}function F(e,t,r,s){U(e),U(t),U(s),U(t),U(r),U(s);const a=i.length/3,o=m.generateSideWallUV(n,i,a-6,a-3,a-2,a-1);B(o[0]),B(o[1]),B(o[3]),B(o[1]),B(o[2]),B(o[3])}function U(e){i.push(s[3*e+0]),i.push(s[3*e+1]),i.push(s[3*e+2])}function B(e){r.push(e.x),r.push(e.y)}!function(){const e=i.length/3;if(c){let e=0,t=A*e;for(let n=0;n<P;n++){const e=E[n];z(e[2]+t,e[1]+t,e[0]+t)}e=o+2*p,t=A*e;for(let n=0;n<P;n++){const e=E[n];z(e[0]+t,e[1]+t,e[2]+t)}}else{for(let e=0;e<P;e++){const t=E[e];z(t[2],t[1],t[0])}for(let e=0;e<P;e++){const t=E[e];z(t[0]+A*o,t[1]+A*o,t[2]+A*o)}}n.addGroup(e,i.length/3-e,0)}(),function(){const e=i.length/3;let t=0;D(T,t),t+=T.length;for(let n=0,i=M.length;n<i;n++){const e=M[n];D(e,t),t+=e.length}n.addGroup(e,i.length/3-e,1)}()}this.setAttribute("position",new Pc(i,3)),this.setAttribute("uv",new Pc(r,2)),this.computeVertexNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(let i=0,r=e.length;i<r;i++){const t=e[i];n.shapes.push(t.uuid)}else n.shapes.push(e.uuid);n.options=Object.assign({},t),void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const n=[];for(let r=0,s=e.shapes.length;r<s;r++){const i=t[e.shapes[r]];n.push(i)}const i=e.options.extrudePath;return void 0!==i&&(e.options.extrudePath=(new If[i.type]).fromJSON(i)),new Sm(n,e.options)}}const Mm={generateTopUV:function(e,t,n,i,r){const s=t[3*n],a=t[3*n+1],o=t[3*i],l=t[3*i+1],c=t[3*r],u=t[3*r+1];return[new _o(s,a),new _o(o,l),new _o(c,u)]},generateSideWallUV:function(e,t,n,i,r,s){const a=t[3*n],o=t[3*n+1],l=t[3*n+2],c=t[3*i],u=t[3*i+1],d=t[3*i+2],h=t[3*r],p=t[3*r+1],f=t[3*r+2],m=t[3*s],g=t[3*s+1],v=t[3*s+2];return Math.abs(o-u)<Math.abs(a-c)?[new _o(a,1-l),new _o(c,1-d),new _o(h,1-f),new _o(m,1-v)]:[new _o(o,1-l),new _o(u,1-d),new _o(p,1-f),new _o(g,1-v)]}};class Em extends Bf{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Em(e.radius,e.detail)}}class Tm extends Bf{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Tm(e.radius,e.detail)}}class Cm extends zc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI;super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:s},n=Math.max(3,n),i=Math.max(1,i);const a=[],o=[],l=[],c=[];let u=e;const d=(t-e)/i,h=new Po,p=new _o;for(let f=0;f<=i;f++){for(let e=0;e<=n;e++){const i=r+e/n*s;h.x=u*Math.cos(i),h.y=u*Math.sin(i),o.push(h.x,h.y,h.z),l.push(0,0,1),p.x=(h.x/t+1)/2,p.y=(h.y/t+1)/2,c.push(p.x,p.y)}u+=d}for(let f=0;f<i;f++){const e=f*(n+1);for(let t=0;t<n;t++){const i=t+e,r=i,s=i+n+1,o=i+n+2,l=i+1;a.push(r,s,l),a.push(s,o,l)}}this.setIndex(a),this.setAttribute("position",new Pc(o,3)),this.setAttribute("normal",new Pc(l,3)),this.setAttribute("uv",new Pc(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Cm(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Am extends zc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Yf([new _o(0,.5),new _o(-.5,-.5),new _o(.5,-.5)]),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],i=[],r=[],s=[];let a=0,o=0;if(!1===Array.isArray(e))l(e);else for(let c=0;c<e.length;c++)l(e[c]),this.addGroup(a,o,c),a+=o,o=0;function l(e){const a=i.length/3,l=e.extractPoints(t);let c=l.shape;const u=l.holes;!1===bm.isClockWise(c)&&(c=c.reverse());for(let t=0,n=u.length;t<n;t++){const e=u[t];!0===bm.isClockWise(e)&&(u[t]=e.reverse())}const d=bm.triangulateShape(c,u);for(let t=0,n=u.length;t<n;t++){const e=u[t];c=c.concat(e)}for(let t=0,n=c.length;t<n;t++){const e=c[t];i.push(e.x,e.y,0),r.push(0,0,1),s.push(e.x,e.y)}for(let t=0,i=d.length;t<i;t++){const e=d[t],i=e[0]+a,r=e[1]+a,s=e[2]+a;n.push(i,r,s),o+=3}}this.setIndex(n),this.setAttribute("position",new Pc(i,3)),this.setAttribute("normal",new Pc(r,3)),this.setAttribute("uv",new Pc(s,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return function(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,i=e.length;n<i;n++){const i=e[n];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}static fromJSON(e,t){const n=[];for(let i=0,r=e.shapes.length;i<r;i++){const r=t[e.shapes[i]];n.push(r)}return new Am(n,e.curveSegments)}}class Pm extends zc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:s,thetaLength:a},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const o=Math.min(s+a,Math.PI);let l=0;const c=[],u=new Po,d=new Po,h=[],p=[],f=[],m=[];for(let g=0;g<=n;g++){const h=[],v=g/n;let y=0;0==g&&0==s?y=.5/t:g==n&&o==Math.PI&&(y=-.5/t);for(let n=0;n<=t;n++){const o=n/t;u.x=-e*Math.cos(i+o*r)*Math.sin(s+v*a),u.y=e*Math.cos(s+v*a),u.z=e*Math.sin(i+o*r)*Math.sin(s+v*a),p.push(u.x,u.y,u.z),d.copy(u).normalize(),f.push(d.x,d.y,d.z),m.push(o+y,1-v),h.push(l++)}c.push(h)}for(let g=0;g<n;g++)for(let e=0;e<t;e++){const t=c[g][e+1],i=c[g][e],r=c[g+1][e],a=c[g+1][e+1];(0!==g||s>0)&&h.push(t,i,a),(g!==n-1||o<Math.PI)&&h.push(i,r,a)}this.setIndex(h),this.setAttribute("position",new Pc(p,3)),this.setAttribute("normal",new Pc(f,3)),this.setAttribute("uv",new Pc(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Pm(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Nm extends Bf{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Nm(e.radius,e.detail)}}class km extends zc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:48,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI;super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:r},n=Math.floor(n),i=Math.floor(i);const s=[],a=[],o=[],l=[],c=new Po,u=new Po,d=new Po;for(let h=0;h<=n;h++)for(let s=0;s<=i;s++){const p=s/i*r,f=h/n*Math.PI*2;u.x=(e+t*Math.cos(f))*Math.cos(p),u.y=(e+t*Math.cos(f))*Math.sin(p),u.z=t*Math.sin(f),a.push(u.x,u.y,u.z),c.x=e*Math.cos(p),c.y=e*Math.sin(p),d.subVectors(u,c).normalize(),o.push(d.x,d.y,d.z),l.push(s/i),l.push(h/n)}for(let h=1;h<=n;h++)for(let e=1;e<=i;e++){const t=(i+1)*h+e-1,n=(i+1)*(h-1)+e-1,r=(i+1)*(h-1)+e,a=(i+1)*h+e;s.push(t,n,a),s.push(n,r,a)}this.setIndex(s),this.setAttribute("position",new Pc(a,3)),this.setAttribute("normal",new Pc(o,3)),this.setAttribute("uv",new Pc(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new km(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Rm extends zc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:r,q:s},n=Math.floor(n),i=Math.floor(i);const a=[],o=[],l=[],c=[],u=new Po,d=new Po,h=new Po,p=new Po,f=new Po,m=new Po,g=new Po;for(let y=0;y<=n;++y){const a=y/n*r*Math.PI*2;v(a,r,s,e,h),v(a+.01,r,s,e,p),m.subVectors(p,h),g.addVectors(p,h),f.crossVectors(m,g),g.crossVectors(f,m),f.normalize(),g.normalize();for(let e=0;e<=i;++e){const r=e/i*Math.PI*2,s=-t*Math.cos(r),a=t*Math.sin(r);u.x=h.x+(s*g.x+a*f.x),u.y=h.y+(s*g.y+a*f.y),u.z=h.z+(s*g.z+a*f.z),o.push(u.x,u.y,u.z),d.subVectors(u,h).normalize(),l.push(d.x,d.y,d.z),c.push(y/n),c.push(e/i)}}for(let y=1;y<=n;y++)for(let e=1;e<=i;e++){const t=(i+1)*(y-1)+(e-1),n=(i+1)*y+(e-1),r=(i+1)*y+e,s=(i+1)*(y-1)+e;a.push(t,n,s),a.push(n,r,s)}function v(e,t,n,i,r){const s=Math.cos(e),a=Math.sin(e),o=n/t*e,l=Math.cos(o);r.x=i*(2+l)*.5*s,r.y=i*(2+l)*a*.5,r.z=i*Math.sin(o)*.5}this.setIndex(a),this.setAttribute("position",new Pc(o,3)),this.setAttribute("normal",new Pc(l,3)),this.setAttribute("uv",new Pc(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Rm(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Im extends zc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new kf(new Po(-1,-1,0),new Po(-1,1,0),new Po(1,1,0)),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:r};const s=e.computeFrenetFrames(t,r);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;const a=new Po,o=new Po,l=new _o;let c=new Po;const u=[],d=[],h=[],p=[];function f(r){c=e.getPointAt(r/t,c);const l=s.normals[r],h=s.binormals[r];for(let e=0;e<=i;e++){const t=e/i*Math.PI*2,r=Math.sin(t),s=-Math.cos(t);o.x=s*l.x+r*h.x,o.y=s*l.y+r*h.y,o.z=s*l.z+r*h.z,o.normalize(),d.push(o.x,o.y,o.z),a.x=c.x+n*o.x,a.y=c.y+n*o.y,a.z=c.z+n*o.z,u.push(a.x,a.y,a.z)}}!function(){for(let e=0;e<t;e++)f(e);f(!1===r?t:0),function(){for(let e=0;e<=t;e++)for(let n=0;n<=i;n++)l.x=e/t,l.y=n/i,h.push(l.x,l.y)}(),function(){for(let e=1;e<=t;e++)for(let t=1;t<=i;t++){const n=(i+1)*(e-1)+(t-1),r=(i+1)*e+(t-1),s=(i+1)*e+t,a=(i+1)*(e-1)+t;p.push(n,r,a),p.push(r,s,a)}}()}(),this.setIndex(p),this.setAttribute("position",new Pc(u,3)),this.setAttribute("normal",new Pc(d,3)),this.setAttribute("uv",new Pc(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Im((new If[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class Lm extends zc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},null!==e){const t=[],n=new Set,i=new Po,r=new Po;if(null!==e.index){const s=e.attributes.position,a=e.index;let o=e.groups;0===o.length&&(o=[{start:0,count:a.count,materialIndex:0}]);for(let e=0,l=o.length;e<l;++e){const l=o[e],c=l.start;for(let e=c,o=c+l.count;e<o;e+=3)for(let l=0;l<3;l++){const o=a.getX(e+l),c=a.getX(e+(l+1)%3);i.fromBufferAttribute(s,o),r.fromBufferAttribute(s,c),!0===jm(i,r,n)&&(t.push(i.x,i.y,i.z),t.push(r.x,r.y,r.z))}}}else{const s=e.attributes.position;for(let e=0,a=s.count/3;e<a;e++)for(let o=0;o<3;o++){const a=3*e+o,l=3*e+(o+1)%3;i.fromBufferAttribute(s,a),r.fromBufferAttribute(s,l),!0===jm(i,r,n)&&(t.push(i.x,i.y,i.z),t.push(r.x,r.y,r.z))}}this.setAttribute("position",new Pc(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function jm(e,t,n){const i="".concat(e.x,",").concat(e.y,",").concat(e.z,"-").concat(t.x,",").concat(t.y,",").concat(t.z),r="".concat(t.x,",").concat(t.y,",").concat(t.z,"-").concat(e.x,",").concat(e.y,",").concat(e.z);return!0!==n.has(i)&&!0!==n.has(r)&&(n.add(i),n.add(r),!0)}var Dm=Object.freeze({__proto__:null,BoxGeometry:tu,CapsuleGeometry:Of,CircleGeometry:zf,ConeGeometry:Uf,CylinderGeometry:Ff,DodecahedronGeometry:Vf,EdgesGeometry:Xf,ExtrudeGeometry:Sm,IcosahedronGeometry:Em,LatheGeometry:Df,OctahedronGeometry:Tm,PlaneGeometry:wu,PolyhedronGeometry:Bf,RingGeometry:Cm,ShapeGeometry:Am,SphereGeometry:Pm,TetrahedronGeometry:Nm,TorusGeometry:km,TorusKnotGeometry:Rm,TubeGeometry:Im,WireframeGeometry:Lm});class Om extends uc{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new mc(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class zm extends au{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Fm extends uc{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new mc(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new mc(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ea,this.normalScale=new _o(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Um extends Fm{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new _o(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return ho(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new mc(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new mc(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new mc(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!==e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!==e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!==e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!==e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class Bm extends uc{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new mc(16777215),this.specular=new mc(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new mc(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ea,this.normalScale=new _o(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=jr,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Vm extends uc{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new mc(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new mc(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ea,this.normalScale=new _o(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class Hm extends uc{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ea,this.normalScale=new _o(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class Wm extends uc{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new mc(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new mc(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ea,this.normalScale=new _o(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=jr,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Gm extends uc{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new mc(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ea,this.normalScale=new _o(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class qm extends Wp{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Xm(e,t,n){return Jm(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)}function Ym(e,t,n){return!e||!n&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}function Jm(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Km(e){const t=e.length,n=new Array(t);for(let i=0;i!==t;++i)n[i]=i;return n.sort((function(t,n){return e[t]-e[n]})),n}function Zm(e,t,n){const i=e.length,r=new e.constructor(i);for(let s=0,a=0;a!==i;++s){const i=n[s]*t;for(let n=0;n!==t;++n)r[a++]=e[i+n]}return r}function Qm(e,t,n,i){let r=1,s=e[0];for(;void 0!==s&&void 0===s[i];)s=e[r++];if(void 0===s)return;let a=s[i];if(void 0!==a)if(Array.isArray(a))do{a=s[i],void 0!==a&&(t.push(s.time),n.push.apply(n,a)),s=e[r++]}while(void 0!==s);else if(void 0!==a.toArray)do{a=s[i],void 0!==a&&(t.push(s.time),a.toArray(n,n.length)),s=e[r++]}while(void 0!==s);else do{a=s[i],void 0!==a&&(t.push(s.time),n.push(a)),s=e[r++]}while(void 0!==s)}const $m={arraySlice:Xm,convertArray:Ym,isTypedArray:Jm,getKeyframeOrder:Km,sortedArray:Zm,flattenJSON:Qm,subclip:function(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30;const s=e.clone();s.name=t;const a=[];for(let l=0;l<s.tracks.length;++l){const e=s.tracks[l],t=e.getValueSize(),o=[],c=[];for(let s=0;s<e.times.length;++s){const a=e.times[s]*r;if(!(a<n||a>=i)){o.push(e.times[s]);for(let n=0;n<t;++n)c.push(e.values[s*t+n])}}0!==o.length&&(e.times=Ym(o,e.times.constructor),e.values=Ym(c,e.values.constructor),a.push(e))}s.tracks=a;let o=1/0;for(let l=0;l<s.tracks.length;++l)o>s.tracks[l].times[0]&&(o=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*o);return s.resetDuration(),s},makeClipAdditive:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;i<=0&&(i=30);const r=n.tracks.length,s=t/i;for(let a=0;a<r;++a){const t=n.tracks[a],i=t.ValueTypeName;if("bool"===i||"string"===i)continue;const r=e.tracks.find((function(e){return e.name===t.name&&e.ValueTypeName===i}));if(void 0===r)continue;let o=0;const l=t.getValueSize();t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(o=l/3);let c=0;const u=r.getValueSize();r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=u/3);const d=t.times.length-1;let h;if(s<=t.times[0]){const e=o,n=l-o;h=Xm(t.values,e,n)}else if(s>=t.times[d]){const e=d*l+o,n=e+l-o;h=Xm(t.values,e,n)}else{const e=t.createInterpolant(),n=o,i=l-o;e.evaluate(s),h=Xm(e.resultBuffer,n,i)}if("quaternion"===i){(new Ao).fromArray(h).normalize().conjugate().toArray(h)}const p=r.times.length;for(let e=0;e<p;++e){const t=e*u+c;if("quaternion"===i)Ao.multiplyQuaternionsFlat(r.values,t,h,0,r.values,t);else{const e=u-2*c;for(let n=0;n<e;++n)r.values[t+n]-=h[n]}}}return e.blendMode=va,e}};class eg{constructor(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,i=t[n],r=t[n-1];e:{t:{let s;n:{i:if(!(e<i)){for(let s=n+2;;){if(void 0===i){if(e<r)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===s)break;if(r=i,i=t[++n],e<i)break t}s=t.length;break n}if(e>=r)break e;{const a=t[1];e<a&&(n=2,r=a);for(let s=n-2;;){if(void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(n===s)break;if(i=r,r=t[--n-1],e>=r)break t}s=n,n=0}}for(;n<s;){const i=n+s>>>1;e<t[i]?s=i:n=i+1}if(i=t[n],r=t[n-1],void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===i)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i;for(let s=0;s!==i;++s)t[s]=n[r+s];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class tg extends eg{constructor(e,t,n,i){super(e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:pa,endingEnd:pa}}intervalChanged_(e,t,n){const i=this.parameterPositions;let r=e-2,s=e+1,a=i[r],o=i[s];if(void 0===a)switch(this.getSettings_().endingStart){case fa:r=e,a=2*t-n;break;case ma:r=i.length-2,a=t+i[r]-i[r+1];break;default:r=e,a=n}if(void 0===o)switch(this.getSettings_().endingEnd){case fa:s=e,o=2*n-t;break;case ma:s=1,o=n+i[1]-i[0];break;default:s=e-1,o=t}const l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(o-n),this._offsetPrev=r*c,this._offsetNext=s*c}interpolate_(e,t,n,i){const r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=e*a,l=o-a,c=this._offsetPrev,u=this._offsetNext,d=this._weightPrev,h=this._weightNext,p=(n-t)/(i-t),f=p*p,m=f*p,g=-d*m+2*d*f-d*p,v=(1+d)*m+(-1.5-2*d)*f+(-.5+d)*p+1,y=(-1-h)*m+(1.5+h)*f+.5*p,x=h*m-h*f;for(let b=0;b!==a;++b)r[b]=g*s[c+b]+v*s[l+b]+y*s[o+b]+x*s[u+b];return r}}class ng extends eg{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=e*a,l=o-a,c=(n-t)/(i-t),u=1-c;for(let d=0;d!==a;++d)r[d]=s[l+d]*u+s[o+d]*c;return r}}class ig extends eg{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class rg{constructor(e,t,n,i){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Ym(t,this.TimeBufferType),this.values=Ym(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:Ym(e.times,Array),values:Ym(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new ig(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new ng(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new tg(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case ua:t=this.InterpolantFactoryMethodDiscrete;break;case da:t=this.InterpolantFactoryMethodLinear;break;case ha:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return ua;case this.InterpolantFactoryMethodLinear:return da;case this.InterpolantFactoryMethodSmooth:return ha}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]*=e}return this}trim(e,t){const n=this.times,i=n.length;let r=0,s=i-1;for(;r!==i&&n[r]<e;)++r;for(;-1!==s&&n[s]>t;)--s;if(++s,0!==r||s!==i){r>=s&&(s=Math.max(s,1),r=s-1);const e=this.getValueSize();this.times=Xm(n,r,s),this.values=Xm(this.values,r*e,s*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let a=0;a!==r;a++){const t=n[a];if("number"===typeof t&&isNaN(t)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,t),e=!1;break}if(null!==s&&s>t){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,t,s),e=!1;break}s=t}if(void 0!==i&&Jm(i))for(let a=0,o=i.length;a!==o;++a){const t=i[a];if(isNaN(t)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,t),e=!1;break}}return e}optimize(){const e=Xm(this.times),t=Xm(this.values),n=this.getValueSize(),i=this.getInterpolation()===ha,r=e.length-1;let s=1;for(let a=1;a<r;++a){let r=!1;const o=e[a];if(o!==e[a+1]&&(1!==a||o!==e[0]))if(i)r=!0;else{const e=a*n,i=e-n,s=e+n;for(let a=0;a!==n;++a){const n=t[e+a];if(n!==t[i+a]||n!==t[s+a]){r=!0;break}}}if(r){if(a!==s){e[s]=e[a];const i=a*n,r=s*n;for(let e=0;e!==n;++e)t[r+e]=t[i+e]}++s}}if(r>0){e[s]=e[r];for(let e=r*n,i=s*n,a=0;a!==n;++a)t[i+a]=t[e+a];++s}return s!==e.length?(this.times=Xm(e,0,s),this.values=Xm(t,0,s*n)):(this.times=e,this.values=t),this}clone(){const e=Xm(this.times,0),t=Xm(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}rg.prototype.TimeBufferType=Float32Array,rg.prototype.ValueBufferType=Float32Array,rg.prototype.DefaultInterpolation=da;class sg extends rg{}sg.prototype.ValueTypeName="bool",sg.prototype.ValueBufferType=Array,sg.prototype.DefaultInterpolation=ua,sg.prototype.InterpolantFactoryMethodLinear=void 0,sg.prototype.InterpolantFactoryMethodSmooth=void 0;class ag extends rg{}ag.prototype.ValueTypeName="color";class og extends rg{}og.prototype.ValueTypeName="number";class lg extends eg{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=(n-t)/(i-t);let l=e*a;for(let c=l+a;l!==c;l+=4)Ao.slerpFlat(r,0,s,l-a,s,l,o);return r}}class cg extends rg{InterpolantFactoryMethodLinear(e){return new lg(this.times,this.values,this.getValueSize(),e)}}cg.prototype.ValueTypeName="quaternion",cg.prototype.DefaultInterpolation=da,cg.prototype.InterpolantFactoryMethodSmooth=void 0;class ug extends rg{}ug.prototype.ValueTypeName="string",ug.prototype.ValueBufferType=Array,ug.prototype.DefaultInterpolation=ua,ug.prototype.InterpolantFactoryMethodLinear=void 0,ug.prototype.InterpolantFactoryMethodSmooth=void 0;class dg extends rg{}dg.prototype.ValueTypeName="vector";class hg{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ga;this.name=e,this.tracks=n,this.duration=t,this.blendMode=i,this.uuid=uo(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,i=1/(e.fps||1);for(let s=0,a=n.length;s!==a;++s)t.push(pg(n[s]).scale(i));const r=new this(e.name,e.duration,t,e.blendMode);return r.uuid=e.uuid,r}static toJSON(e){const t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let r=0,s=n.length;r!==s;++r)t.push(rg.toJSON(n[r]));return i}static CreateFromMorphTargetSequence(e,t,n,i){const r=t.length,s=[];for(let a=0;a<r;a++){let e=[],o=[];e.push((a+r-1)%r,a,(a+1)%r),o.push(0,1,0);const l=Km(e);e=Zm(e,1,l),o=Zm(o,1,l),i||0!==e[0]||(e.push(r),o.push(o[0])),s.push(new og(".morphTargetInfluences["+t[a].name+"]",e,o).scale(1/n))}return new this(e,-1,s)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const t=e;n=t.geometry&&t.geometry.animations||t.animations}for(let i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const i={},r=/^([\w-]*?)([\d]+)$/;for(let a=0,o=e.length;a<o;a++){const t=e[a],n=t.name.match(r);if(n&&n.length>1){const e=n[1];let r=i[e];r||(i[e]=r=[]),r.push(t)}}const s=[];for(const a in i)s.push(this.CreateFromMorphTargetSequence(a,i[a],t,n));return s}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(e,t,n,i,r){if(0!==n.length){const s=[],a=[];Qm(n,s,a,i),0!==s.length&&r.push(new e(t,s,a))}},i=[],r=e.name||"default",s=e.fps||30,a=e.blendMode;let o=e.length||-1;const l=e.hierarchy||[];for(let c=0;c<l.length;c++){const e=l[c].keys;if(e&&0!==e.length)if(e[0].morphTargets){const t={};let n;for(n=0;n<e.length;n++)if(e[n].morphTargets)for(let i=0;i<e[n].morphTargets.length;i++)t[e[n].morphTargets[i]]=-1;for(const r in t){const t=[],s=[];for(let i=0;i!==e[n].morphTargets.length;++i){const i=e[n];t.push(i.time),s.push(i.morphTarget===r?1:0)}i.push(new og(".morphTargetInfluence["+r+"]",t,s))}o=t.length*s}else{const r=".bones["+t[c].name+"]";n(dg,r+".position",e,"pos",i),n(cg,r+".quaternion",e,"rot",i),n(dg,r+".scale",e,"scl",i)}}if(0===i.length)return null;return new this(r,o,i,a)}resetDuration(){let e=0;for(let t=0,n=this.tracks.length;t!==n;++t){const n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function pg(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return og;case"vector":case"vector2":case"vector3":case"vector4":return dg;case"color":return ag;case"quaternion":return cg;case"bool":case"boolean":return sg;case"string":return ug}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){const t=[],n=[];Qm(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}const fg={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class mg{constructor(e,t,n){const i=this;let r,s=!1,a=0,o=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){o++,!1===s&&void 0!==i.onStart&&i.onStart(e,a,o),s=!0},this.itemEnd=function(e){a++,void 0!==i.onProgress&&i.onProgress(e,a,o),a===o&&(s=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return r?r(e):e},this.setURLModifier=function(e){return r=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){const n=l[t],i=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return i}return null}}}const gg=new mg;class vg{constructor(e){this.manager=void 0!==e?e:gg,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise((function(i,r){n.load(e,i,t,r)}))}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const yg={};class xg extends Error{constructor(e,t){super(e),this.response=t}}class bg extends vg{constructor(e){super(e)}load(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=fg.get(e);if(void 0!==r)return this.manager.itemStart(e),setTimeout((()=>{t&&t(r),this.manager.itemEnd(e)}),0),r;if(void 0!==yg[e])return void yg[e].push({onLoad:t,onProgress:n,onError:i});yg[e]=[],yg[e].push({onLoad:t,onProgress:n,onError:i});const s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,o=this.responseType;fetch(s).then((t=>{if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"===typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;const n=yg[e],i=t.body.getReader(),r=t.headers.get("Content-Length")||t.headers.get("X-File-Size"),s=r?parseInt(r):0,a=0!==s;let o=0;const l=new ReadableStream({start(e){!function t(){i.read().then((i=>{let{done:r,value:l}=i;if(r)e.close();else{o+=l.byteLength;const i=new ProgressEvent("progress",{lengthComputable:a,loaded:o,total:s});for(let e=0,t=n.length;e<t;e++){const t=n[e];t.onProgress&&t.onProgress(i)}e.enqueue(l),t()}}))}()}});return new Response(l)}throw new xg('fetch for "'.concat(t.url,'" responded with ').concat(t.status,": ").concat(t.statusText),t)})).then((e=>{switch(o){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then((e=>(new DOMParser).parseFromString(e,a)));case"json":return e.json();default:if(void 0===a)return e.text();{const t=/charset="?([^;"\s]*)"?/i.exec(a),n=t&&t[1]?t[1].toLowerCase():void 0,i=new TextDecoder(n);return e.arrayBuffer().then((e=>i.decode(e)))}}})).then((t=>{fg.add(e,t);const n=yg[e];delete yg[e];for(let e=0,i=n.length;e<i;e++){const i=n[e];i.onLoad&&i.onLoad(t)}})).catch((t=>{const n=yg[e];if(void 0===n)throw this.manager.itemError(e),t;delete yg[e];for(let e=0,i=n.length;e<i;e++){const i=n[e];i.onError&&i.onError(t)}this.manager.itemError(e)})).finally((()=>{this.manager.itemEnd(e)})),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class _g extends vg{constructor(e){super(e)}load(e,t,n,i){const r=this,s=new bg(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,(function(n){try{t(r.parse(JSON.parse(n)))}catch(oq){i?i(oq):console.error(oq),r.manager.itemError(e)}}),n,i)}parse(e){const t=[];for(let n=0;n<e.length;n++){const i=hg.parse(e[n]);t.push(i)}return t}}class wg extends vg{constructor(e){super(e)}load(e,t,n,i){const r=this,s=[],a=new df,o=new bg(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(r.withCredentials);let l=0;function c(c){o.load(e[c],(function(e){const n=r.parse(e,!0);s[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},l+=1,6===l&&(1===n.mipmapCount&&(a.minFilter=rs),a.image=s,a.format=n.format,a.needsUpdate=!0,t&&t(a))}),n,i)}if(Array.isArray(e))for(let u=0,d=e.length;u<d;++u)c(u);else o.load(e,(function(e){const n=r.parse(e,!0);if(n.isCubemap){const e=n.mipmaps.length/n.mipmapCount;for(let t=0;t<e;t++){s[t]={mipmaps:[]};for(let e=0;e<n.mipmapCount;e++)s[t].mipmaps.push(n.mipmaps[t*n.mipmapCount+e]),s[t].format=n.format,s[t].width=n.width,s[t].height=n.height}a.image=s}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=rs),a.format=n.format,a.needsUpdate=!0,t&&t(a)}),n,i);return a}}class Sg extends vg{constructor(e){super(e)}load(e,t,n,i){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,s=fg.get(e);if(void 0!==s)return r.manager.itemStart(e),setTimeout((function(){t&&t(s),r.manager.itemEnd(e)}),0),s;const a=Co("img");function o(){c(),fg.add(e,this),t&&t(this),r.manager.itemEnd(e)}function l(t){c(),i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)}function c(){a.removeEventListener("load",o,!1),a.removeEventListener("error",l,!1)}return a.addEventListener("load",o,!1),a.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),r.manager.itemStart(e),a.src=e,a}}class Mg extends vg{constructor(e){super(e)}load(e,t,n,i){const r=new du,s=new Sg(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let a=0;function o(n){s.load(e[n],(function(e){r.images[n]=e,a++,6===a&&(r.needsUpdate=!0,t&&t(r))}),void 0,i)}for(let l=0;l<e.length;++l)o(l);return r}}class Eg extends vg{constructor(e){super(e)}load(e,t,n,i){const r=this,s=new Ip,a=new bg(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(r.withCredentials),a.load(e,(function(e){const n=r.parse(e);n&&(void 0!==n.image?s.image=n.image:void 0!==n.data&&(s.image.width=n.width,s.image.height=n.height,s.image.data=n.data),s.wrapS=void 0!==n.wrapS?n.wrapS:Zr,s.wrapT=void 0!==n.wrapT?n.wrapT:Zr,s.magFilter=void 0!==n.magFilter?n.magFilter:rs,s.minFilter=void 0!==n.minFilter?n.minFilter:rs,s.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.encoding&&(s.encoding=n.encoding),void 0!==n.flipY&&(s.flipY=n.flipY),void 0!==n.format&&(s.format=n.format),void 0!==n.type&&(s.type=n.type),void 0!==n.mipmaps&&(s.mipmaps=n.mipmaps,s.minFilter=os),1===n.mipmapCount&&(s.minFilter=rs),void 0!==n.generateMipmaps&&(s.generateMipmaps=n.generateMipmaps),s.needsUpdate=!0,t&&t(s,n))}),n,i),s}}class Tg extends vg{constructor(e){super(e)}load(e,t,n,i){const r=new Go,s=new Sg(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,(function(e){r.image=e,r.needsUpdate=!0,void 0!==t&&t(r)}),n,i),r}}class Cg extends Zl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;super(),this.isLight=!0,this.type="Light",this.color=new mc(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}class Ag extends Cg{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Zl.DEFAULT_UP),this.updateMatrix(),this.groundColor=new mc(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const Pg=new Tl,Ng=new Po,kg=new Po;class Rg{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new _o(512,512),this.map=null,this.mapPass=null,this.matrix=new Tl,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new xu,this._frameExtents=new _o(1,1),this._viewportCount=1,this._viewports=[new qo(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;Ng.setFromMatrixPosition(e.matrixWorld),t.position.copy(Ng),kg.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(kg),t.updateMatrixWorld(),Pg.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Pg),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(Pg)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Ig extends Rg{constructor(){super(new lu(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=2*co*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;n===t.fov&&i===t.aspect&&r===t.far||(t.fov=n,t.aspect=i,t.far=r,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Lg extends Cg{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2;super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Zl.DEFAULT_UP),this.updateMatrix(),this.target=new Zl,this.distance=n,this.angle=i,this.penumbra=r,this.decay=s,this.map=null,this.shadow=new Ig}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const jg=new Tl,Dg=new Po,Og=new Po;class zg extends Rg{constructor(){super(new lu(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new _o(4,2),this._viewportCount=6,this._viewports=[new qo(2,1,1,1),new qo(0,1,1,1),new qo(3,1,1,1),new qo(1,1,1,1),new qo(3,0,1,1),new qo(1,0,1,1)],this._cubeDirections=[new Po(1,0,0),new Po(-1,0,0),new Po(0,0,1),new Po(0,0,-1),new Po(0,1,0),new Po(0,-1,0)],this._cubeUps=[new Po(0,1,0),new Po(0,1,0),new Po(0,1,0),new Po(0,1,0),new Po(0,0,1),new Po(0,0,-1)]}updateMatrices(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.camera,i=this.matrix,r=e.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),Dg.setFromMatrixPosition(e.matrixWorld),n.position.copy(Dg),Og.copy(n.position),Og.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(Og),n.updateMatrixWorld(),i.makeTranslation(-Dg.x,-Dg.y,-Dg.z),jg.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(jg)}}class Fg extends Cg{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new zg}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Ug extends Rg{constructor(){super(new Iu(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Bg extends Cg{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Zl.DEFAULT_UP),this.updateMatrix(),this.target=new Zl,this.shadow=new Ug}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Vg extends Cg{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class Hg extends Cg{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class Wg{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Po)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,i=e.y,r=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.282095),t.addScaledVector(s[1],.488603*i),t.addScaledVector(s[2],.488603*r),t.addScaledVector(s[3],.488603*n),t.addScaledVector(s[4],n*i*1.092548),t.addScaledVector(s[5],i*r*1.092548),t.addScaledVector(s[6],.315392*(3*r*r-1)),t.addScaledVector(s[7],n*r*1.092548),t.addScaledVector(s[8],.546274*(n*n-i*i)),t}getIrradianceAt(e,t){const n=e.x,i=e.y,r=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.886227),t.addScaledVector(s[1],1.023328*i),t.addScaledVector(s[2],1.023328*r),t.addScaledVector(s[3],1.023328*n),t.addScaledVector(s[4],.858086*n*i),t.addScaledVector(s[5],.858086*i*r),t.addScaledVector(s[6],.743125*r*r-.247708),t.addScaledVector(s[7],.858086*n*r),t.addScaledVector(s[8],.429043*(n*n-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(e,t+3*i);return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(e,t+3*i);return e}static getBasisAt(e,t){const n=e.x,i=e.y,r=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*r,t[3]=.488603*n,t[4]=1.092548*n*i,t[5]=1.092548*i*r,t[6]=.315392*(3*r*r-1),t[7]=1.092548*n*r,t[8]=.546274*(n*n-i*i)}}class Gg extends Cg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Wg;super(void 0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class qg extends vg{constructor(e){super(e),this.textures={}}load(e,t,n,i){const r=this,s=new bg(r.manager);s.setPath(r.path),s.setRequestHeader(r.requestHeader),s.setWithCredentials(r.withCredentials),s.load(e,(function(n){try{t(r.parse(JSON.parse(n)))}catch(oq){i?i(oq):console.error(oq),r.manager.itemError(e)}}),n,i)}parse(e){const t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}const i=qg.createMaterialFromType(e.type);if(void 0!==e.uuid&&(i.uuid=e.uuid),void 0!==e.name&&(i.name=e.name),void 0!==e.color&&void 0!==i.color&&i.color.setHex(e.color),void 0!==e.roughness&&(i.roughness=e.roughness),void 0!==e.metalness&&(i.metalness=e.metalness),void 0!==e.sheen&&(i.sheen=e.sheen),void 0!==e.sheenColor&&(i.sheenColor=(new mc).setHex(e.sheenColor)),void 0!==e.sheenRoughness&&(i.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==i.emissive&&i.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==i.specular&&i.specular.setHex(e.specular),void 0!==e.specularIntensity&&(i.specularIntensity=e.specularIntensity),void 0!==e.specularColor&&void 0!==i.specularColor&&i.specularColor.setHex(e.specularColor),void 0!==e.shininess&&(i.shininess=e.shininess),void 0!==e.clearcoat&&(i.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(i.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.iridescence&&(i.iridescence=e.iridescence),void 0!==e.iridescenceIOR&&(i.iridescenceIOR=e.iridescenceIOR),void 0!==e.iridescenceThicknessRange&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),void 0!==e.transmission&&(i.transmission=e.transmission),void 0!==e.thickness&&(i.thickness=e.thickness),void 0!==e.attenuationDistance&&(i.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==i.attenuationColor&&i.attenuationColor.setHex(e.attenuationColor),void 0!==e.fog&&(i.fog=e.fog),void 0!==e.flatShading&&(i.flatShading=e.flatShading),void 0!==e.blending&&(i.blending=e.blending),void 0!==e.combine&&(i.combine=e.combine),void 0!==e.side&&(i.side=e.side),void 0!==e.shadowSide&&(i.shadowSide=e.shadowSide),void 0!==e.opacity&&(i.opacity=e.opacity),void 0!==e.transparent&&(i.transparent=e.transparent),void 0!==e.alphaTest&&(i.alphaTest=e.alphaTest),void 0!==e.depthTest&&(i.depthTest=e.depthTest),void 0!==e.depthWrite&&(i.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(i.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(i.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(i.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(i.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(i.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(i.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(i.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(i.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(i.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(i.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(i.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(i.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(i.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(i.rotation=e.rotation),1!==e.linewidth&&(i.linewidth=e.linewidth),void 0!==e.dashSize&&(i.dashSize=e.dashSize),void 0!==e.gapSize&&(i.gapSize=e.gapSize),void 0!==e.scale&&(i.scale=e.scale),void 0!==e.polygonOffset&&(i.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(i.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(i.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(i.dithering=e.dithering),void 0!==e.alphaToCoverage&&(i.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(i.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.forceSinglePass&&(i.forceSinglePass=e.forceSinglePass),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.toneMapped&&(i.toneMapped=e.toneMapped),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.vertexColors&&("number"===typeof e.vertexColors?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),void 0!==e.uniforms)for(const r in e.uniforms){const t=e.uniforms[r];switch(i.uniforms[r]={},t.type){case"t":i.uniforms[r].value=n(t.value);break;case"c":i.uniforms[r].value=(new mc).setHex(t.value);break;case"v2":i.uniforms[r].value=(new _o).fromArray(t.value);break;case"v3":i.uniforms[r].value=(new Po).fromArray(t.value);break;case"v4":i.uniforms[r].value=(new qo).fromArray(t.value);break;case"m3":i.uniforms[r].value=(new wo).fromArray(t.value);break;case"m4":i.uniforms[r].value=(new Tl).fromArray(t.value);break;default:i.uniforms[r].value=t.value}}if(void 0!==e.defines&&(i.defines=e.defines),void 0!==e.vertexShader&&(i.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(i.fragmentShader=e.fragmentShader),void 0!==e.glslVersion&&(i.glslVersion=e.glslVersion),void 0!==e.extensions)for(const r in e.extensions)i.extensions[r]=e.extensions[r];if(void 0!==e.size&&(i.size=e.size),void 0!==e.sizeAttenuation&&(i.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(i.map=n(e.map)),void 0!==e.matcap&&(i.matcap=n(e.matcap)),void 0!==e.alphaMap&&(i.alphaMap=n(e.alphaMap)),void 0!==e.bumpMap&&(i.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(i.bumpScale=e.bumpScale),void 0!==e.normalMap&&(i.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(i.normalMapType=e.normalMapType),void 0!==e.normalScale){let t=e.normalScale;!1===Array.isArray(t)&&(t=[t,t]),i.normalScale=(new _o).fromArray(t)}return void 0!==e.displacementMap&&(i.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(i.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(i.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(i.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(i.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(i.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(i.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(i.specularMap=n(e.specularMap)),void 0!==e.specularIntensityMap&&(i.specularIntensityMap=n(e.specularIntensityMap)),void 0!==e.specularColorMap&&(i.specularColorMap=n(e.specularColorMap)),void 0!==e.envMap&&(i.envMap=n(e.envMap)),void 0!==e.envMapIntensity&&(i.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(i.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(i.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(i.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(i.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(i.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(i.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(i.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatMap&&(i.clearcoatMap=n(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(i.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(i.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(i.clearcoatNormalScale=(new _o).fromArray(e.clearcoatNormalScale)),void 0!==e.iridescenceMap&&(i.iridescenceMap=n(e.iridescenceMap)),void 0!==e.iridescenceThicknessMap&&(i.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),void 0!==e.transmissionMap&&(i.transmissionMap=n(e.transmissionMap)),void 0!==e.thicknessMap&&(i.thicknessMap=n(e.thicknessMap)),void 0!==e.sheenColorMap&&(i.sheenColorMap=n(e.sheenColorMap)),void 0!==e.sheenRoughnessMap&&(i.sheenRoughnessMap=n(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){return new{ShadowMaterial:Om,SpriteMaterial:op,RawShaderMaterial:zm,ShaderMaterial:au,PointsMaterial:tf,MeshPhysicalMaterial:Um,MeshStandardMaterial:Fm,MeshPhongMaterial:Bm,MeshToonMaterial:Vm,MeshNormalMaterial:Hm,MeshLambertMaterial:Wm,MeshDepthMaterial:Oh,MeshDistanceMaterial:zh,MeshBasicMaterial:vc,MeshMatcapMaterial:Gm,LineDashedMaterial:qm,LineBasicMaterial:Wp,Material:uc}[e]}}class Xg{static decodeText(e){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let n=0,i=e.length;n<i;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(oq){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!==typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class Yg extends zc{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class Jg extends vg{constructor(e){super(e)}load(e,t,n,i){const r=this,s=new bg(r.manager);s.setPath(r.path),s.setRequestHeader(r.requestHeader),s.setWithCredentials(r.withCredentials),s.load(e,(function(n){try{t(r.parse(JSON.parse(n)))}catch(oq){i?i(oq):console.error(oq),r.manager.itemError(e)}}),n,i)}parse(e){const t={},n={};function i(e,i){if(void 0!==t[i])return t[i];const r=e.interleavedBuffers[i],s=function(e,t){if(void 0!==n[t])return n[t];const i=e.arrayBuffers,r=i[t],s=new Uint32Array(r).buffer;return n[t]=s,s}(e,r.buffer),a=To(r.type,s),o=new rp(a,r.stride);return o.uuid=r.uuid,t[i]=o,o}const r=e.isInstancedBufferGeometry?new Yg:new zc,s=e.data.index;if(void 0!==s){const e=To(s.type,s.array);r.setIndex(new bc(e,1))}const a=e.data.attributes;for(const u in a){const t=a[u];let n;if(t.isInterleavedBufferAttribute){const r=i(e.data,t.data);n=new ap(r,t.itemSize,t.offset,t.normalized)}else{const e=To(t.type,t.array);n=new(t.isInstancedBufferAttribute?Op:bc)(e,t.itemSize,t.normalized)}void 0!==t.name&&(n.name=t.name),void 0!==t.usage&&n.setUsage(t.usage),void 0!==t.updateRange&&(n.updateRange.offset=t.updateRange.offset,n.updateRange.count=t.updateRange.count),r.setAttribute(u,n)}const o=e.data.morphAttributes;if(o)for(const u in o){const t=o[u],n=[];for(let r=0,s=t.length;r<s;r++){const s=t[r];let a;if(s.isInterleavedBufferAttribute){const t=i(e.data,s.data);a=new ap(t,s.itemSize,s.offset,s.normalized)}else{const e=To(s.type,s.array);a=new bc(e,s.itemSize,s.normalized)}void 0!==s.name&&(a.name=s.name),n.push(a)}r.morphAttributes[u]=n}e.data.morphTargetsRelative&&(r.morphTargetsRelative=!0);const l=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==l)for(let u=0,d=l.length;u!==d;++u){const e=l[u];r.addGroup(e.start,e.count,e.materialIndex)}const c=e.data.boundingSphere;if(void 0!==c){const e=new Po;void 0!==c.center&&e.fromArray(c.center),r.boundingSphere=new vl(e,c.radius)}return e.name&&(r.name=e.name),e.userData&&(r.userData=e.userData),r}}class Kg extends vg{constructor(e){super(e)}load(e,t,n,i){const r=this,s=""===this.path?Xg.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const a=new bg(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(n){let s=null;try{s=JSON.parse(n)}catch(Ib){return void 0!==i&&i(Ib),void console.error("THREE:ObjectLoader: Can't parse "+e+".",Ib.message)}const a=s.metadata;if(void 0===a||void 0===a.type||"geometry"===a.type.toLowerCase())return void 0!==i&&i(new Error("THREE.ObjectLoader: Can't load "+e)),void console.error("THREE.ObjectLoader: Can't load "+e);r.parse(s,t)}),n,i)}async loadAsync(e,t){const n=""===this.path?Xg.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||n;const i=new bg(this.manager);i.setPath(this.path),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials);const r=await i.loadAsync(e,t),s=JSON.parse(r),a=s.metadata;if(void 0===a||void 0===a.type||"geometry"===a.type.toLowerCase())throw new Error("THREE.ObjectLoader: Can't load "+e);return await this.parseAsync(s)}parse(e,t){const n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=this.parseImages(e.images,(function(){void 0!==t&&t(l)})),a=this.parseTextures(e.textures,s),o=this.parseMaterials(e.materials,a),l=this.parseObject(e.object,r,o,a,n),c=this.parseSkeletons(e.skeletons,l);if(this.bindSkeletons(l,c),void 0!==t){let e=!1;for(const t in s)if(s[t].data instanceof HTMLImageElement){e=!0;break}!1===e&&t(l)}return l}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,n),r=await this.parseImagesAsync(e.images),s=this.parseTextures(e.textures,r),a=this.parseMaterials(e.materials,s),o=this.parseObject(e.object,i,a,s,t),l=this.parseSkeletons(e.skeletons,o);return this.bindSkeletons(o,l),o}parseShapes(e){const t={};if(void 0!==e)for(let n=0,i=e.length;n<i;n++){const i=(new Yf).fromJSON(e[n]);t[i.uuid]=i}return t}parseSkeletons(e,t){const n={},i={};if(t.traverse((function(e){e.isBone&&(i[e.uuid]=e)})),void 0!==e)for(let r=0,s=e.length;r<s;r++){const t=(new Dp).fromJSON(e[r],i);n[t.uuid]=t}return n}parseGeometries(e,t){const n={};if(void 0!==e){const i=new Jg;for(let r=0,s=e.length;r<s;r++){let s;const a=e[r];switch(a.type){case"BufferGeometry":case"InstancedBufferGeometry":s=i.parse(a);break;default:a.type in Dm?s=Dm[a.type].fromJSON(a,t):console.warn('THREE.ObjectLoader: Unsupported geometry type "'.concat(a.type,'"'))}s.uuid=a.uuid,void 0!==a.name&&(s.name=a.name),void 0!==a.userData&&(s.userData=a.userData),n[a.uuid]=s}}return n}parseMaterials(e,t){const n={},i={};if(void 0!==e){const r=new qg;r.setTextures(t);for(let t=0,s=e.length;t<s;t++){const s=e[t];void 0===n[s.uuid]&&(n[s.uuid]=r.parse(s)),i[s.uuid]=n[s.uuid]}}return i}parseAnimations(e){const t={};if(void 0!==e)for(let n=0;n<e.length;n++){const i=e[n],r=hg.parse(i);t[r.uuid]=r}return t}parseImages(e,t){const n=this,i={};let r;function s(e){if("string"===typeof e){const t=e;return function(e){return n.manager.itemStart(e),r.load(e,(function(){n.manager.itemEnd(e)}),void 0,(function(){n.manager.itemError(e),n.manager.itemEnd(e)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:n.resourcePath+t)}return e.data?{data:To(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){const n=new mg(t);r=new Sg(n),r.setCrossOrigin(this.crossOrigin);for(let t=0,r=e.length;t<r;t++){const n=e[t],r=n.url;if(Array.isArray(r)){const e=[];for(let t=0,n=r.length;t<n;t++){const n=s(r[t]);null!==n&&(n instanceof HTMLImageElement?e.push(n):e.push(new Ip(n.data,n.width,n.height)))}i[n.uuid]=new Vo(e)}else{const e=s(n.url);i[n.uuid]=new Vo(e)}}}return i}async parseImagesAsync(e){const t=this,n={};let i;async function r(e){if("string"===typeof e){const n=e,r=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(n)?n:t.resourcePath+n;return await i.loadAsync(r)}return e.data?{data:To(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){i=new Sg(this.manager),i.setCrossOrigin(this.crossOrigin);for(let t=0,i=e.length;t<i;t++){const i=e[t],s=i.url;if(Array.isArray(s)){const e=[];for(let t=0,n=s.length;t<n;t++){const n=s[t],i=await r(n);null!==i&&(i instanceof HTMLImageElement?e.push(i):e.push(new Ip(i.data,i.width,i.height)))}n[i.uuid]=new Vo(e)}else{const e=await r(i.url);n[i.uuid]=new Vo(e)}}}return n}parseTextures(e,t){function n(e,t){return"number"===typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}const i={};if(void 0!==e)for(let r=0,s=e.length;r<s;r++){const s=e[r];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===t[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image);const a=t[s.image],o=a.data;let l;Array.isArray(o)?(l=new du,6===o.length&&(l.needsUpdate=!0)):(l=o&&o.data?new Ip:new Go,o&&(l.needsUpdate=!0)),l.source=a,l.uuid=s.uuid,void 0!==s.name&&(l.name=s.name),void 0!==s.mapping&&(l.mapping=n(s.mapping,Zg)),void 0!==s.offset&&l.offset.fromArray(s.offset),void 0!==s.repeat&&l.repeat.fromArray(s.repeat),void 0!==s.center&&l.center.fromArray(s.center),void 0!==s.rotation&&(l.rotation=s.rotation),void 0!==s.wrap&&(l.wrapS=n(s.wrap[0],Qg),l.wrapT=n(s.wrap[1],Qg)),void 0!==s.format&&(l.format=s.format),void 0!==s.internalFormat&&(l.internalFormat=s.internalFormat),void 0!==s.type&&(l.type=s.type),void 0!==s.encoding&&(l.encoding=s.encoding),void 0!==s.minFilter&&(l.minFilter=n(s.minFilter,$g)),void 0!==s.magFilter&&(l.magFilter=n(s.magFilter,$g)),void 0!==s.anisotropy&&(l.anisotropy=s.anisotropy),void 0!==s.flipY&&(l.flipY=s.flipY),void 0!==s.generateMipmaps&&(l.generateMipmaps=s.generateMipmaps),void 0!==s.premultiplyAlpha&&(l.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(l.unpackAlignment=s.unpackAlignment),void 0!==s.userData&&(l.userData=s.userData),i[s.uuid]=l}return i}parseObject(e,t,n,i,r){let s,a,o;function l(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function c(e){if(void 0!==e){if(Array.isArray(e)){const t=[];for(let i=0,r=e.length;i<r;i++){const r=e[i];void 0===n[r]&&console.warn("THREE.ObjectLoader: Undefined material",r),t.push(n[r])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}function u(e){return void 0===i[e]&&console.warn("THREE.ObjectLoader: Undefined texture",e),i[e]}switch(e.type){case"Scene":s=new ip,void 0!==e.background&&(Number.isInteger(e.background)?s.background=new mc(e.background):s.background=u(e.background)),void 0!==e.environment&&(s.environment=u(e.environment)),void 0!==e.fog&&("Fog"===e.fog.type?s.fog=new np(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(s.fog=new tp(e.fog.color,e.fog.density))),void 0!==e.backgroundBlurriness&&(s.backgroundBlurriness=e.backgroundBlurriness),void 0!==e.backgroundIntensity&&(s.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":s=new lu(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(s.focus=e.focus),void 0!==e.zoom&&(s.zoom=e.zoom),void 0!==e.filmGauge&&(s.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(s.filmOffset=e.filmOffset),void 0!==e.view&&(s.view=Object.assign({},e.view));break;case"OrthographicCamera":s=new Iu(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(s.zoom=e.zoom),void 0!==e.view&&(s.view=Object.assign({},e.view));break;case"AmbientLight":s=new Vg(e.color,e.intensity);break;case"DirectionalLight":s=new Bg(e.color,e.intensity);break;case"PointLight":s=new Fg(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":s=new Hg(e.color,e.intensity,e.width,e.height);break;case"SpotLight":s=new Lg(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":s=new Ag(e.color,e.groundColor,e.intensity);break;case"LightProbe":s=(new Gg).fromJSON(e);break;case"SkinnedMesh":a=l(e.geometry),o=c(e.material),s=new kp(a,o),void 0!==e.bindMode&&(s.bindMode=e.bindMode),void 0!==e.bindMatrix&&s.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(s.skeleton=e.skeleton);break;case"Mesh":a=l(e.geometry),o=c(e.material),s=new $c(a,o);break;case"InstancedMesh":a=l(e.geometry),o=c(e.material);const t=e.count,n=e.instanceMatrix,i=e.instanceColor;s=new Hp(a,o,t),s.instanceMatrix=new Op(new Float32Array(n.array),16),void 0!==i&&(s.instanceColor=new Op(new Float32Array(i.array),i.itemSize));break;case"LOD":s=new Ep;break;case"Line":s=new Kp(l(e.geometry),c(e.material));break;case"LineLoop":s=new ef(l(e.geometry),c(e.material));break;case"LineSegments":s=new $p(l(e.geometry),c(e.material));break;case"PointCloud":case"Points":s=new of(l(e.geometry),c(e.material));break;case"Sprite":s=new _p(c(e.material));break;case"Group":s=new qh;break;case"Bone":s=new Rp;break;default:s=new Zl}if(s.uuid=e.uuid,void 0!==e.name&&(s.name=e.name),void 0!==e.matrix?(s.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(s.matrixAutoUpdate=e.matrixAutoUpdate),s.matrixAutoUpdate&&s.matrix.decompose(s.position,s.quaternion,s.scale)):(void 0!==e.position&&s.position.fromArray(e.position),void 0!==e.rotation&&s.rotation.fromArray(e.rotation),void 0!==e.quaternion&&s.quaternion.fromArray(e.quaternion),void 0!==e.scale&&s.scale.fromArray(e.scale)),void 0!==e.castShadow&&(s.castShadow=e.castShadow),void 0!==e.receiveShadow&&(s.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(s.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(s.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(s.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&s.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(s.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(s.visible=e.visible),void 0!==e.frustumCulled&&(s.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(s.renderOrder=e.renderOrder),void 0!==e.userData&&(s.userData=e.userData),void 0!==e.layers&&(s.layers.mask=e.layers),void 0!==e.children){const a=e.children;for(let e=0;e<a.length;e++)s.add(this.parseObject(a[e],t,n,i,r))}if(void 0!==e.animations){const t=e.animations;for(let e=0;e<t.length;e++){const n=t[e];s.animations.push(r[n])}}if("LOD"===e.type){void 0!==e.autoUpdate&&(s.autoUpdate=e.autoUpdate);const t=e.levels;for(let e=0;e<t.length;e++){const n=t[e],i=s.getObjectByProperty("uuid",n.object);void 0!==i&&s.addLevel(i,n.distance,n.hysteresis)}}return s}bindSkeletons(e,t){0!==Object.keys(t).length&&e.traverse((function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){const n=t[e.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(n,e.bindMatrix)}}))}}const Zg={UVMapping:Wr,CubeReflectionMapping:Gr,CubeRefractionMapping:qr,EquirectangularReflectionMapping:Xr,EquirectangularRefractionMapping:Yr,CubeUVReflectionMapping:Jr},Qg={RepeatWrapping:Kr,ClampToEdgeWrapping:Zr,MirroredRepeatWrapping:Qr},$g={NearestFilter:$r,NearestMipmapNearestFilter:es,NearestMipmapLinearFilter:ns,LinearFilter:rs,LinearMipmapNearestFilter:ss,LinearMipmapLinearFilter:os};class ev extends vg{constructor(e){super(e),this.isImageBitmapLoader=!0,"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,s=fg.get(e);if(void 0!==s)return r.manager.itemStart(e),setTimeout((function(){t&&t(s),r.manager.itemEnd(e)}),0),s;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(r.options,{colorSpaceConversion:"none"}))})).then((function(n){fg.add(e,n),t&&t(n),r.manager.itemEnd(e)})).catch((function(t){i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)})),r.manager.itemStart(e)}}let tv;class nv{static getContext(){return void 0===tv&&(tv=new(window.AudioContext||window.webkitAudioContext)),tv}static setContext(e){tv=e}}class iv extends vg{constructor(e){super(e)}load(e,t,n,i){const r=this,s=new bg(this.manager);s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,(function(n){try{const e=n.slice(0);nv.getContext().decodeAudioData(e,(function(e){t(e)}))}catch(oq){i?i(oq):console.error(oq),r.manager.itemError(e)}}),n,i)}}class rv extends Gg{constructor(e,t){super(void 0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:1),this.isHemisphereLightProbe=!0;const n=(new mc).set(e),i=(new mc).set(t),r=new Po(n.r,n.g,n.b),s=new Po(i.r,i.g,i.b),a=Math.sqrt(Math.PI),o=a*Math.sqrt(.75);this.sh.coefficients[0].copy(r).add(s).multiplyScalar(a),this.sh.coefficients[1].copy(r).sub(s).multiplyScalar(o)}}class sv extends Gg{constructor(e){super(void 0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),this.isAmbientLightProbe=!0;const t=(new mc).set(e);this.sh.coefficients[0].set(t.r,t.g,t.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const av=new Tl,ov=new Tl,lv=new Tl;class cv{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new lu,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new lu,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,lv.copy(e.projectionMatrix);const n=t.eyeSep/2,i=n*t.near/t.focus,r=t.near*Math.tan(lo*t.fov*.5)/t.zoom;let s,a;ov.elements[12]=-n,av.elements[12]=n,s=-r*t.aspect+i,a=r*t.aspect+i,lv.elements[0]=2*t.near/(a-s),lv.elements[8]=(a+s)/(a-s),this.cameraL.projectionMatrix.copy(lv),s=-r*t.aspect-i,a=r*t.aspect-i,lv.elements[0]=2*t.near/(a-s),lv.elements[8]=(a+s)/(a-s),this.cameraR.projectionMatrix.copy(lv)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(ov),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(av)}}class uv{constructor(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=dv(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=dv();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function dv(){return("undefined"===typeof performance?Date:performance).now()}const hv=new Po,pv=new Ao,fv=new Po,mv=new Po;class gv extends Zl{constructor(){super(),this.type="AudioListener",this.context=nv.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new uv}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(hv,pv,fv),mv.set(0,0,-1).applyQuaternion(pv),t.positionX){const e=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(hv.x,e),t.positionY.linearRampToValueAtTime(hv.y,e),t.positionZ.linearRampToValueAtTime(hv.z,e),t.forwardX.linearRampToValueAtTime(mv.x,e),t.forwardY.linearRampToValueAtTime(mv.y,e),t.forwardZ.linearRampToValueAtTime(mv.z,e),t.upX.linearRampToValueAtTime(n.x,e),t.upY.linearRampToValueAtTime(n.y,e),t.upZ.linearRampToValueAtTime(n.z,e)}else t.setPosition(hv.x,hv.y,hv.z),t.setOrientation(mv.x,mv.y,mv.z,n.x,n.y,n.z)}}class vv extends Zl{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,null!==this.source&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const yv=new Po,xv=new Ao,bv=new Po,_v=new Po;class wv extends vv{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(yv,xv,bv),_v.set(0,0,1).applyQuaternion(xv);const t=this.panner;if(t.positionX){const e=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(yv.x,e),t.positionY.linearRampToValueAtTime(yv.y,e),t.positionZ.linearRampToValueAtTime(yv.z,e),t.orientationX.linearRampToValueAtTime(_v.x,e),t.orientationY.linearRampToValueAtTime(_v.y,e),t.orientationZ.linearRampToValueAtTime(_v.z,e)}else t.setPosition(yv.x,yv.y,yv.z),t.setOrientation(_v.x,_v.y,_v.z)}}class Sv{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048;this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class Mv{constructor(e,t,n){let i,r,s;switch(this.binding=e,this.valueSize=n,t){case"quaternion":i=this._slerp,r=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":i=this._select,r=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:i=this._lerp,r=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=r,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,i=this.valueSize,r=e*i+i;let s=this.cumulativeWeight;if(0===s){for(let e=0;e!==i;++e)n[r+e]=n[e];s=t}else{s+=t;const e=t/s;this._mixBufferRegion(n,r,0,e,i)}this.cumulativeWeight=s}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,i=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,i=e*t+t,r=this.cumulativeWeight,s=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const e=t*this._origIndex;this._mixBufferRegion(n,i,e,1-r,t)}s>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(let o=t,l=t+t;o!==l;++o)if(n[o]!==n[o+t]){a.setValue(n,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,i=n*this._origIndex;e.getValue(t,i);for(let r=n,s=i;r!==s;++r)t[r]=t[i+r%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,i,r){if(i>=.5)for(let s=0;s!==r;++s)e[t+s]=e[n+s]}_slerp(e,t,n,i){Ao.slerpFlat(e,t,e,t,e,n,i)}_slerpAdditive(e,t,n,i,r){const s=this._workIndex*r;Ao.multiplyQuaternionsFlat(e,s,e,t,e,n),Ao.slerpFlat(e,t,e,t,e,s,i)}_lerp(e,t,n,i,r){const s=1-i;for(let a=0;a!==r;++a){const r=t+a;e[r]=e[r]*s+e[n+a]*i}}_lerpAdditive(e,t,n,i,r){for(let s=0;s!==r;++s){const r=t+s;e[r]=e[r]+e[n+s]*i}}}const Ev="\\[\\]\\.:\\/",Tv=new RegExp("["+Ev+"]","g"),Cv="[^"+Ev+"]",Av="[^"+Ev.replace("\\.","")+"]",Pv=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",Cv)+/(WCOD+)?/.source.replace("WCOD",Av)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Cv)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Cv)+"$"),Nv=["material","materials","bones","map"];class kv{constructor(e,t,n){this.path=t,this.parsedPath=n||kv.parseTrackName(t),this.node=kv.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new kv.Composite(e,t,n):new kv(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Tv,"")}static parseTrackName(e){const t=Pv.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){const e=n.nodeName.substring(i+1);-1!==Nv.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let i=0;i<e.length;i++){const r=e[i];if(r.name===t||r.uuid===t)return r;const s=n(r.children);if(s)return s}return null},i=n(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)e[t++]=n[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,i=t.propertyName;let r=t.propertyIndex;if(e||(e=kv.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let i=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===i){i=t;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==i){if(void 0===e[i])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[i]}}const s=e[i];if(void 0===s){const n=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+i+" but it wasn't found.",e)}let a=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?a=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(a=this.Versioning.MatrixWorldNeedsUpdate);let o=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[r]&&(r=e.morphTargetDictionary[r])}o=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=r}else void 0!==s.fromArray&&void 0!==s.toArray?(o=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(o=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[o],this.setValue=this.SetterByBindingTypeAndVersioning[o][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}kv.Composite=class{constructor(e,t,n){const i=n||kv.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},kv.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},kv.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},kv.prototype.GetterByBindingType=[kv.prototype._getValue_direct,kv.prototype._getValue_array,kv.prototype._getValue_arrayElement,kv.prototype._getValue_toArray],kv.prototype.SetterByBindingTypeAndVersioning=[[kv.prototype._setValue_direct,kv.prototype._setValue_direct_setNeedsUpdate,kv.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[kv.prototype._setValue_array,kv.prototype._setValue_array_setNeedsUpdate,kv.prototype._setValue_array_setMatrixWorldNeedsUpdate],[kv.prototype._setValue_arrayElement,kv.prototype._setValue_arrayElement_setNeedsUpdate,kv.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[kv.prototype._setValue_fromArray,kv.prototype._setValue_fromArray_setNeedsUpdate,kv.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Rv{constructor(){this.isAnimationObjectGroup=!0,this.uuid=uo(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,i=arguments.length;n!==i;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,i=this._parsedPaths,r=this._bindings,s=r.length;let a,o=e.length,l=this.nCachedObjects_;for(let c=0,u=arguments.length;c!==u;++c){const u=arguments[c],d=u.uuid;let h=t[d];if(void 0===h){h=o++,t[d]=h,e.push(u);for(let e=0,t=s;e!==t;++e)r[e].push(new kv(u,n[e],i[e]))}else if(h<l){a=e[h];const o=--l,c=e[o];t[c.uuid]=h,e[h]=c,t[d]=o,e[o]=u;for(let e=0,t=s;e!==t;++e){const t=r[e],s=t[o];let a=t[h];t[h]=s,void 0===a&&(a=new kv(u,n[e],i[e])),t[o]=a}}else e[h]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_;for(let s=0,a=arguments.length;s!==a;++s){const a=arguments[s],o=a.uuid,l=t[o];if(void 0!==l&&l>=r){const s=r++,c=e[s];t[c.uuid]=l,e[l]=c,t[o]=s,e[s]=a;for(let e=0,t=i;e!==t;++e){const t=n[e],i=t[s],r=t[l];t[l]=i,t[s]=r}}}this.nCachedObjects_=r}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_,s=e.length;for(let a=0,o=arguments.length;a!==o;++a){const o=arguments[a].uuid,l=t[o];if(void 0!==l)if(delete t[o],l<r){const a=--r,o=e[a],c=--s,u=e[c];t[o.uuid]=l,e[l]=o,t[u.uuid]=a,e[a]=u,e.pop();for(let e=0,t=i;e!==t;++e){const t=n[e],i=t[a],r=t[c];t[l]=i,t[a]=r,t.pop()}}else{const r=--s,a=e[r];r>0&&(t[a.uuid]=l),e[l]=a,e.pop();for(let e=0,t=i;e!==t;++e){const t=n[e];t[l]=t[r],t.pop()}}}this.nCachedObjects_=r}subscribe_(e,t){const n=this._bindingsIndicesByPath;let i=n[e];const r=this._bindings;if(void 0!==i)return r[i];const s=this._paths,a=this._parsedPaths,o=this._objects,l=o.length,c=this.nCachedObjects_,u=new Array(l);i=r.length,n[e]=i,s.push(e),a.push(t),r.push(u);for(let d=c,h=o.length;d!==h;++d){const n=o[d];u[d]=new kv(n,e,t)}return u}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){const i=this._paths,r=this._parsedPaths,s=this._bindings,a=s.length-1,o=s[a];t[e[a]]=n,s[n]=o,s.pop(),r[n]=r[a],r.pop(),i[n]=i[a],i.pop()}}}class Iv{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.blendMode;this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=i;const r=t.tracks,s=r.length,a=new Array(s),o={endingStart:pa,endingEnd:pa};for(let l=0;l!==s;++l){const e=r[l].createInterpolant(null);a[l]=e,e.settings=o}this._interpolantSettings=o,this._interpolants=a,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=la,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const n=this._clip.duration,i=e._clip.duration,r=i/n,s=n/i;e.warp(1,r,t),this.warp(s,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const i=this._mixer,r=i.time,s=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const o=a.parameterPositions,l=a.sampleValues;return o[0]=r,o[1]=r+n,l[0]=e/s,l[1]=t/s,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,i){if(!this.enabled)return void this._updateWeight(e);const r=this._startTime;if(null!==r){const i=(e-r)*n;i<0||0===n?t=0:(this._startTime=null,t=n*i)}t*=this._updateTimeScale(e);const s=this._updateTime(t),a=this._updateWeight(e);if(a>0){const e=this._interpolants,t=this._propertyBindings;if(this.blendMode===va)for(let n=0,i=e.length;n!==i;++n)e[n].evaluate(s),t[n].accumulateAdditive(a);else for(let n=0,r=e.length;n!==r;++n)e[n].evaluate(s),t[n].accumulate(i,a)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(null!==n){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(null!==n){t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let i=this.time+e,r=this._loopCount;const s=n===ca;if(0===e)return-1===r?i:s&&1===(1&r)?t-i:i;if(n===oa){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else{if(!(i<0)){this.time=i;break e}i=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===r&&(e>=0?(r=0,this._setEndings(!0,0===this.repetitions,s)):this._setEndings(0===this.repetitions,!0,s)),i>=t||i<0){const n=Math.floor(i/t);i-=t*n,r+=Math.abs(n);const a=this.repetitions-r;if(a<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===a){const t=e<0;this._setEndings(t,!t,s)}else this._setEndings(!1,!1,s);this._loopCount=r,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=i;if(s&&1===(1&r))return t-i}return i}_setEndings(e,t,n){const i=this._interpolantSettings;n?(i.endingStart=fa,i.endingEnd=fa):(i.endingStart=e?this.zeroSlopeAtStart?fa:pa:ma,i.endingEnd=t?this.zeroSlopeAtEnd?fa:pa:ma)}_scheduleFading(e,t,n){const i=this._mixer,r=i.time;let s=this._weightInterpolant;null===s&&(s=i._lendControlInterpolant(),this._weightInterpolant=s);const a=s.parameterPositions,o=s.sampleValues;return a[0]=r,o[0]=t,a[1]=r+e,o[1]=n,this}}const Lv=new Float32Array(1);class jv extends so{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,i=e._clip.tracks,r=i.length,s=e._propertyBindings,a=e._interpolants,o=n.uuid,l=this._bindingsByRootAndName;let c=l[o];void 0===c&&(c={},l[o]=c);for(let u=0;u!==r;++u){const e=i[u],r=e.name;let l=c[r];if(void 0!==l)++l.referenceCount,s[u]=l;else{if(l=s[u],void 0!==l){null===l._cacheIndex&&(++l.referenceCount,this._addInactiveBinding(l,o,r));continue}const i=t&&t._propertyBindings[u].binding.parsedPath;l=new Mv(kv.create(n,r,i),e.ValueTypeName,e.getValueSize()),++l.referenceCount,this._addInactiveBinding(l,o,r),s[u]=l}a[u].resultBuffer=l.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,n=e._clip.uuid,i=this._actionsByClip[n];this._bindAction(e,i&&i.knownActions[0]),this._addInactiveAction(e,n,t)}const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0===n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0===--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,n){const i=this._actions,r=this._actionsByClip;let s=r[t];if(void 0===s)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=s;else{const t=s.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=i.length,i.push(e),s.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;const r=e._clip.uuid,s=this._actionsByClip,a=s[r],o=a.knownActions,l=o[o.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,o[c]=l,o.pop(),e._byClipCacheIndex=null;delete a.actionByRoot[(e._localRoot||this._root).uuid],0===o.length&&delete s[r],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const e=t[n];0===--e.referenceCount&&this._removeInactiveBinding(e)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_addInactiveBinding(e,t,n){const i=this._bindingsByRootAndName,r=this._bindings;let s=i[t];void 0===s&&(s={},i[t]=s),s[n]=e,e._cacheIndex=r.length,r.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,i=n.rootNode.uuid,r=n.path,s=this._bindingsByRootAndName,a=s[i],o=t[t.length-1],l=e._cacheIndex;o._cacheIndex=l,t[l]=o,t.pop(),delete a[r],0===Object.keys(a).length&&delete s[i]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return void 0===n&&(n=new ng(new Float32Array(2),new Float32Array(2),1,Lv),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,r=t[i];e.__cacheIndex=i,t[i]=e,r.__cacheIndex=n,t[n]=r}clipAction(e,t,n){const i=t||this._root,r=i.uuid;let s="string"===typeof e?hg.findByName(i,e):e;const a=null!==s?s.uuid:e,o=this._actionsByClip[a];let l=null;if(void 0===n&&(n=null!==s?s.blendMode:ga),void 0!==o){const e=o.actionByRoot[r];if(void 0!==e&&e.blendMode===n)return e;l=o.knownActions[0],null===s&&(s=l._clip)}if(null===s)return null;const c=new Iv(this,s,t,n);return this._bindAction(c,l),this._addInactiveAction(c,a,r),c}existingAction(e,t){const n=t||this._root,i=n.uuid,r="string"===typeof e?hg.findByName(n,e):e,s=r?r.uuid:e,a=this._actionsByClip[s];return void 0!==a&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,i=this.time+=e,r=Math.sign(e),s=this._accuIndex^=1;for(let l=0;l!==n;++l){t[l]._update(i,e,r,s)}const a=this._bindings,o=this._nActiveBindings;for(let l=0;l!==o;++l)a[l].apply(s);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){const e=r.knownActions;for(let n=0,i=e.length;n!==i;++n){const i=e[n];this._deactivateAction(i);const r=i._cacheIndex,s=t[t.length-1];i._cacheIndex=null,i._byClipCacheIndex=null,s._cacheIndex=r,t[r]=s,t.pop(),this._removeInactiveBindingsForAction(i)}delete i[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const r in n){const e=n[r].actionByRoot[t];void 0!==e&&(this._deactivateAction(e),this._removeInactiveAction(e))}const i=this._bindingsByRootAndName[t];if(void 0!==i)for(const r in i){const e=i[r];e.restoreOriginalState(),this._removeInactiveBinding(e)}}uncacheAction(e,t){const n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class Dv{constructor(e){this.value=e}clone(){return new Dv(void 0===this.value.clone?this.value:this.value.clone())}}let Ov=0;class zv extends so{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Ov++}),this.name="",this.usage=Xa,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return-1!==t&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,i=t.length;n<i;n++)this.uniforms.push(t[n].clone());return this}clone(){return(new this.constructor).copy(this)}}class Fv extends rp{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class Uv{constructor(e,t,n,i,r){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=i,this.count=r,this.version=0}set needsUpdate(e){!0===e&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class Bv{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;this.ray=new El(e,t),this.near=n,this.far=i,this.camera=null,this.layers=new Ol,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return Hv(e,this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1]),t.sort(Vv),t}intersectObjects(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];for(let i=0,r=e.length;i<r;i++)Hv(e[i],this,n,t);return n.sort(Vv),n}}function Vv(e,t){return e.distance-t.distance}function Hv(e,t,n,i){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===i){const i=e.children;for(let e=0,r=i.length;e<r;e++)Hv(i[e],t,n,!0)}}class Wv{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(ho(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class Gv{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.radius=e,this.theta=t,this.y=n,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return(new this.constructor).copy(this)}}const qv=new _o;class Xv{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new _o(1/0,1/0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new _o(-1/0,-1/0);this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=qv.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,qv).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Yv=new Po,Jv=new Po;class Kv{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Po,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Po;this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){Yv.subVectors(e,this.start),Jv.subVectors(this.end,this.start);const n=Jv.dot(Jv);let i=Jv.dot(Yv)/n;return t&&(i=ho(i,0,1)),i}closestPointToPoint(e,t,n){const i=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}const Zv=new Po;class Qv extends Zl{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new zc,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let s=0,a=1,o=32;s<o;s++,a++){const e=s/o*Math.PI*2,t=a/o*Math.PI*2;i.push(Math.cos(e),Math.sin(e),1,Math.cos(t),Math.sin(t),1)}n.setAttribute("position",new Pc(i,3));const r=new Wp({fog:!1,toneMapped:!1});this.cone=new $p(n,r),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),Zv.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Zv),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const $v=new Po,ey=new Tl,ty=new Tl;class ny extends $p{constructor(e){const t=iy(e),n=new zc,i=[],r=[],s=new mc(0,0,1),a=new mc(0,1,0);for(let o=0;o<t.length;o++){const e=t[o];e.parent&&e.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(s.r,s.g,s.b),r.push(a.r,a.g,a.b))}n.setAttribute("position",new Pc(i,3)),n.setAttribute("color",new Pc(r,3));super(n,new Wp({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,i=n.getAttribute("position");ty.copy(this.root.matrixWorld).invert();for(let r=0,s=0;r<t.length;r++){const e=t[r];e.parent&&e.parent.isBone&&(ey.multiplyMatrices(ty,e.matrixWorld),$v.setFromMatrixPosition(ey),i.setXYZ(s,$v.x,$v.y,$v.z),ey.multiplyMatrices(ty,e.parent.matrixWorld),$v.setFromMatrixPosition(ey),i.setXYZ(s+1,$v.x,$v.y,$v.z),s+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function iy(e){const t=[];!0===e.isBone&&t.push(e);for(let n=0;n<e.children.length;n++)t.push.apply(t,iy(e.children[n]));return t}class ry extends $c{constructor(e,t,n){super(new Pm(t,4,2),new vc({wireframe:!0,fog:!1,toneMapped:!1})),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const sy=new Po,ay=new mc,oy=new mc;class ly extends Zl{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const i=new Tm(t);i.rotateY(.5*Math.PI),this.material=new vc({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const r=i.getAttribute("position"),s=new Float32Array(3*r.count);i.setAttribute("color",new bc(s,3)),this.add(new $c(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");ay.copy(this.light.color),oy.copy(this.light.groundColor);for(let e=0,n=t.count;e<n;e++){const i=e<n/2?ay:oy;t.setXYZ(e,i.r,i.g,i.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(sy.setFromMatrixPosition(this.light.matrixWorld).negate())}}class cy extends $p{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;n=new mc(n),i=new mc(i);const r=t/2,s=e/t,a=e/2,o=[],l=[];for(let u=0,d=0,h=-a;u<=t;u++,h+=s){o.push(-a,0,h,a,0,h),o.push(h,0,-a,h,0,a);const e=u===r?n:i;e.toArray(l,d),d+=3,e.toArray(l,d),d+=3,e.toArray(l,d),d+=3,e.toArray(l,d),d+=3}const c=new zc;c.setAttribute("position",new Pc(o,3)),c.setAttribute("color",new Pc(l,3));super(c,new Wp({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class uy extends $p{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4473924,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:8947848;r=new mc(r),s=new mc(s);const a=[],o=[];if(t>1)for(let c=0;c<t;c++){const n=c/t*(2*Math.PI),i=Math.sin(n)*e,l=Math.cos(n)*e;a.push(0,0,0),a.push(i,0,l);const u=1&c?r:s;o.push(u.r,u.g,u.b),o.push(u.r,u.g,u.b)}for(let c=0;c<n;c++){const t=1&c?r:s,l=e-e/n*c;for(let e=0;e<i;e++){let n=e/i*(2*Math.PI),r=Math.sin(n)*l,s=Math.cos(n)*l;a.push(r,0,s),o.push(t.r,t.g,t.b),n=(e+1)/i*(2*Math.PI),r=Math.sin(n)*l,s=Math.cos(n)*l,a.push(r,0,s),o.push(t.r,t.g,t.b)}}const l=new zc;l.setAttribute("position",new Pc(a,3)),l.setAttribute("color",new Pc(o,3));super(l,new Wp({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const dy=new Po,hy=new Po,py=new Po;class fy extends Zl{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",void 0===t&&(t=1);let i=new zc;i.setAttribute("position",new Pc([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const r=new Wp({fog:!1,toneMapped:!1});this.lightPlane=new Kp(i,r),this.add(this.lightPlane),i=new zc,i.setAttribute("position",new Pc([0,0,0,0,0,1],3)),this.targetLine=new Kp(i,r),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),dy.setFromMatrixPosition(this.light.matrixWorld),hy.setFromMatrixPosition(this.light.target.matrixWorld),py.subVectors(hy,dy),this.lightPlane.lookAt(hy),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(hy),this.targetLine.scale.z=py.length()}}const my=new Po,gy=new ou;class vy extends $p{constructor(e){const t=new zc,n=new Wp({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],r=[],s={};function a(e,t){o(e),o(t)}function o(e){i.push(0,0,0),r.push(0,0,0),void 0===s[e]&&(s[e]=[]),s[e].push(i.length/3-1)}a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4"),t.setAttribute("position",new Pc(i,3)),t.setAttribute("color",new Pc(r,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update();const l=new mc(16755200),c=new mc(16711680),u=new mc(43775),d=new mc(16777215),h=new mc(3355443);this.setColors(l,c,u,d,h)}setColors(e,t,n,i,r){const s=this.geometry.getAttribute("color");s.setXYZ(0,e.r,e.g,e.b),s.setXYZ(1,e.r,e.g,e.b),s.setXYZ(2,e.r,e.g,e.b),s.setXYZ(3,e.r,e.g,e.b),s.setXYZ(4,e.r,e.g,e.b),s.setXYZ(5,e.r,e.g,e.b),s.setXYZ(6,e.r,e.g,e.b),s.setXYZ(7,e.r,e.g,e.b),s.setXYZ(8,e.r,e.g,e.b),s.setXYZ(9,e.r,e.g,e.b),s.setXYZ(10,e.r,e.g,e.b),s.setXYZ(11,e.r,e.g,e.b),s.setXYZ(12,e.r,e.g,e.b),s.setXYZ(13,e.r,e.g,e.b),s.setXYZ(14,e.r,e.g,e.b),s.setXYZ(15,e.r,e.g,e.b),s.setXYZ(16,e.r,e.g,e.b),s.setXYZ(17,e.r,e.g,e.b),s.setXYZ(18,e.r,e.g,e.b),s.setXYZ(19,e.r,e.g,e.b),s.setXYZ(20,e.r,e.g,e.b),s.setXYZ(21,e.r,e.g,e.b),s.setXYZ(22,e.r,e.g,e.b),s.setXYZ(23,e.r,e.g,e.b),s.setXYZ(24,t.r,t.g,t.b),s.setXYZ(25,t.r,t.g,t.b),s.setXYZ(26,t.r,t.g,t.b),s.setXYZ(27,t.r,t.g,t.b),s.setXYZ(28,t.r,t.g,t.b),s.setXYZ(29,t.r,t.g,t.b),s.setXYZ(30,t.r,t.g,t.b),s.setXYZ(31,t.r,t.g,t.b),s.setXYZ(32,n.r,n.g,n.b),s.setXYZ(33,n.r,n.g,n.b),s.setXYZ(34,n.r,n.g,n.b),s.setXYZ(35,n.r,n.g,n.b),s.setXYZ(36,n.r,n.g,n.b),s.setXYZ(37,n.r,n.g,n.b),s.setXYZ(38,i.r,i.g,i.b),s.setXYZ(39,i.r,i.g,i.b),s.setXYZ(40,r.r,r.g,r.b),s.setXYZ(41,r.r,r.g,r.b),s.setXYZ(42,r.r,r.g,r.b),s.setXYZ(43,r.r,r.g,r.b),s.setXYZ(44,r.r,r.g,r.b),s.setXYZ(45,r.r,r.g,r.b),s.setXYZ(46,r.r,r.g,r.b),s.setXYZ(47,r.r,r.g,r.b),s.setXYZ(48,r.r,r.g,r.b),s.setXYZ(49,r.r,r.g,r.b),s.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap;gy.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),yy("c",t,e,gy,0,0,-1),yy("t",t,e,gy,0,0,1),yy("n1",t,e,gy,-1,-1,-1),yy("n2",t,e,gy,1,-1,-1),yy("n3",t,e,gy,-1,1,-1),yy("n4",t,e,gy,1,1,-1),yy("f1",t,e,gy,-1,-1,1),yy("f2",t,e,gy,1,-1,1),yy("f3",t,e,gy,-1,1,1),yy("f4",t,e,gy,1,1,1),yy("u1",t,e,gy,.7,1.1,-1),yy("u2",t,e,gy,-.7,1.1,-1),yy("u3",t,e,gy,0,2,-1),yy("cf1",t,e,gy,-1,0,1),yy("cf2",t,e,gy,1,0,1),yy("cf3",t,e,gy,0,-1,1),yy("cf4",t,e,gy,0,1,1),yy("cn1",t,e,gy,-1,0,-1),yy("cn2",t,e,gy,1,0,-1),yy("cn3",t,e,gy,0,-1,-1),yy("cn4",t,e,gy,0,1,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function yy(e,t,n,i,r,s,a){my.set(r,s,a).unproject(i);const o=t[e];if(void 0!==o){const e=n.getAttribute("position");for(let t=0,n=o.length;t<n;t++)e.setXYZ(o[t],my.x,my.y,my.z)}}const xy=new $o;class by extends $p{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),r=new zc;r.setIndex(new bc(n,1)),r.setAttribute("position",new bc(i,3)),super(r,new Wp({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&xy.setFromObject(this.object),xy.isEmpty())return;const t=xy.min,n=xy.max,i=this.geometry.attributes.position,r=i.array;r[0]=n.x,r[1]=n.y,r[2]=n.z,r[3]=t.x,r[4]=n.y,r[5]=n.z,r[6]=t.x,r[7]=t.y,r[8]=n.z,r[9]=n.x,r[10]=t.y,r[11]=n.z,r[12]=n.x,r[13]=n.y,r[14]=t.z,r[15]=t.x,r[16]=n.y,r[17]=t.z,r[18]=t.x,r[19]=t.y,r[20]=t.z,r[21]=n.x,r[22]=t.y,r[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class _y extends $p{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new zc;i.setIndex(new bc(n,1)),i.setAttribute("position",new Pc([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(i,new Wp({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class wy extends Kp{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16776960,i=new zc;i.setAttribute("position",new Pc([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),i.computeBoundingSphere(),super(i,new Wp({color:n,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const r=new zc;r.setAttribute("position",new Pc([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),r.computeBoundingSphere(),this.add(new $c(r,new vc({color:n,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const Sy=new Po;let My,Ey;class Ty extends Zl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Po(0,0,1),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Po(0,0,0),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16776960,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.2*n,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.2*r;super(),this.type="ArrowHelper",void 0===My&&(My=new zc,My.setAttribute("position",new Pc([0,0,0,0,1,0],3)),Ey=new Ff(0,.5,1,5,1),Ey.translate(0,-.5,0)),this.position.copy(t),this.line=new Kp(My,new Wp({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new $c(Ey,new vc({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,r,s)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{Sy.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(Sy,t)}}setLength(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2*e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.2*t;this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class Cy extends $p{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new zc;n.setAttribute("position",new Pc(t,3)),n.setAttribute("color",new Pc([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));super(n,new Wp({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,n){const i=new mc,r=this.geometry.attributes.color.array;return i.set(e),i.toArray(r,0),i.toArray(r,3),i.set(t),i.toArray(r,6),i.toArray(r,9),i.set(n),i.toArray(r,12),i.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Ay{constructor(){this.type="ShapePath",this.color=new mc,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new jf,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,i){return this.currentPath.quadraticCurveTo(e,t,n,i),this}bezierCurveTo(e,t,n,i,r,s){return this.currentPath.bezierCurveTo(e,t,n,i,r,s),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(e,t){const n=t.length;let i=!1;for(let r=n-1,s=0;s<n;r=s++){let n=t[r],a=t[s],o=a.x-n.x,l=a.y-n.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(n=t[s],o=-o,a=t[r],l=-l),e.y<n.y||e.y>a.y)continue;if(e.y===n.y){if(e.x===n.x)return!0}else{const t=l*(e.x-n.x)-o*(e.y-n.y);if(0===t)return!0;if(t<0)continue;i=!i}}else{if(e.y!==n.y)continue;if(a.x<=e.x&&e.x<=n.x||n.x<=e.x&&e.x<=a.x)return!0}}return i}const n=bm.isClockWise,i=this.subPaths;if(0===i.length)return[];let r,s,a;const o=[];if(1===i.length)return s=i[0],a=new Yf,a.curves=s.curves,o.push(a),o;let l=!n(i[0].getPoints());l=e?!l:l;const c=[],u=[];let d,h,p=[],f=0;u[f]=void 0,p[f]=[];for(let m=0,g=i.length;m<g;m++)s=i[m],d=s.getPoints(),r=n(d),r=e?!r:r,r?(!l&&u[f]&&f++,u[f]={s:new Yf,p:d},u[f].s.curves=s.curves,l&&f++,p[f]=[]):p[f].push({h:s,p:d[0]});if(!u[0])return function(e){const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n],r=new Yf;r.curves=i.curves,t.push(r)}return t}(i);if(u.length>1){let e=!1,n=0;for(let t=0,i=u.length;t<i;t++)c[t]=[];for(let i=0,r=u.length;i<r;i++){const r=p[i];for(let s=0;s<r.length;s++){const a=r[s];let o=!0;for(let r=0;r<u.length;r++)t(a.p,u[r].p)&&(i!==r&&n++,o?(o=!1,c[r].push(a)):e=!0);o&&c[i].push(a)}}n>0&&!1===e&&(p=c)}for(let m=0,g=u.length;m<g;m++){a=u[m].s,o.push(a),h=p[m];for(let e=0,t=h.length;e<t;e++)a.holes.push(h[e].h)}return o}}const Py=Ny();function Ny(){const e=new ArrayBuffer(4),t=new Float32Array(e),n=new Uint32Array(e),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const e=l-127;e<-27?(i[l]=0,i[256|l]=32768,r[l]=24,r[256|l]=24):e<-14?(i[l]=1024>>-e-14,i[256|l]=1024>>-e-14|32768,r[l]=-e-1,r[256|l]=-e-1):e<=15?(i[l]=e+15<<10,i[256|l]=e+15<<10|32768,r[l]=13,r[256|l]=13):e<128?(i[l]=31744,i[256|l]=64512,r[l]=24,r[256|l]=24):(i[l]=31744,i[256|l]=64512,r[l]=13,r[256|l]=13)}const s=new Uint32Array(2048),a=new Uint32Array(64),o=new Uint32Array(64);for(let l=1;l<1024;++l){let e=l<<13,t=0;for(;0===(8388608&e);)e<<=1,t-=8388608;e&=-8388609,t+=947912704,s[l]=e|t}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)a[l]=l<<23;a[31]=1199570944,a[32]=2147483648;for(let l=33;l<63;++l)a[l]=2147483648+(l-32<<23);a[63]=3347054592;for(let l=1;l<64;++l)32!==l&&(o[l]=1024);return{floatView:t,uint32View:n,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:a,offsetTable:o}}const ky={toHalfFloat:function(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=ho(e,-65504,65504),Py.floatView[0]=e;const t=Py.uint32View[0],n=t>>23&511;return Py.baseTable[n]+((8388607&t)>>Py.shiftTable[n])},fromHalfFloat:function(e){const t=e>>10;return Py.uint32View[0]=Py.mantissaTable[Py.offsetTable[t]+(1023&e)]+Py.exponentTable[t],Py.floatView[0]}};class Ry extends tu{constructor(e,t,n,i,r,s){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(e,t,n,i,r,s)}}class Iy extends Of{constructor(e,t,n,i){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(e,t,n,i)}}class Ly extends zf{constructor(e,t,n,i){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(e,t,n,i)}}class jy extends Uf{constructor(e,t,n,i,r,s,a){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(e,t,n,i,r,s,a)}}class Dy extends Ff{constructor(e,t,n,i,r,s,a,o){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(e,t,n,i,r,s,a,o)}}class Oy extends Vf{constructor(e,t){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(e,t)}}class zy extends Sm{constructor(e,t){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(e,t)}}class Fy extends Em{constructor(e,t){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(e,t)}}class Uy extends Df{constructor(e,t,n,i){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(e,t,n,i)}}class By extends Tm{constructor(e,t){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(e,t)}}class Vy extends wu{constructor(e,t,n,i){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(e,t,n,i)}}class Hy extends Bf{constructor(e,t,n,i){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(e,t,n,i)}}class Wy extends Cm{constructor(e,t,n,i,r,s){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(e,t,n,i,r,s)}}class Gy extends Am{constructor(e,t){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(e,t)}}class qy extends Pm{constructor(e,t,n,i,r,s,a){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(e,t,n,i,r,s,a)}}class Xy extends Nm{constructor(e,t){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(e,t)}}class Yy extends km{constructor(e,t,n,i,r){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(e,t,n,i,r)}}class Jy extends Rm{constructor(e,t,n,i,r,s){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(e,t,n,i,r,s)}}class Ky extends Im{constructor(e,t,n,i,r){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(e,t,n,i,r)}}"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Wi}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Wi);var Zy=n(878);function Qy(e){let t;const n=new Set,i=(e,i)=>{const r="function"===typeof e?e(t):e;if(r!==t){const e=t;t=i?r:Object.assign({},t,r),n.forEach((n=>n(t,e)))}},r=()=>t,s={setState:i,getState:r,subscribe:(e,i,s)=>i||s?function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.is;console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let a=i(t);function o(){const n=i(t);if(!s(a,n)){const t=a;e(a=n,t)}}return n.add(o),()=>n.delete(o)}(e,i,s):(n.add(e),()=>n.delete(e)),destroy:()=>n.clear()};return t=e(i,r,s),s}const $y="undefined"===typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?r.useEffect:r.useLayoutEffect;var ex=n(235),tx=n.n(ex),nx=n(773);function ix(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(e,t)=>e===t;if(e===t)return!0;if(!e||!t)return!1;const i=e.length;if(t.length!==i)return!1;for(let r=0;r<i;r++)if(!n(e[r],t[r]))return!1;return!0}const rx=[];function sx(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};for(const s of rx)if(ix(t,s.keys,s.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return s.response;if(!n)throw s.promise}const r={keys:t,equal:i.equal,promise:e(...t).then((e=>r.response=e)).then((()=>{i.lifespan&&i.lifespan>0&&setTimeout((()=>{const e=rx.indexOf(r);-1!==e&&rx.splice(e,1)}),i.lifespan)})).catch((e=>r.error=e))};if(rx.push(r),!n)throw r.promise}const ax=["args","attach"],ox=["args","children"],lx=["args","children"],cx=["children","key","ref"],ux=["children","key","ref"],dx=["params"];const hx={};var px,fx;const mx=e=>"colorSpace"in e||"outputColorSpace"in e,gx=()=>{var e;return null!=(e=hx.ColorManagement)?e:null},vx=e=>e&&e.isOrthographicCamera,yx="undefined"!==typeof window&&(null!=(px=window.document)&&px.createElement||"ReactNative"===(null==(fx=window.navigator)?void 0:fx.product))?r.useLayoutEffect:r.useEffect;function xx(e){const t=r.useRef(e);return yx((()=>{t.current=e}),[e]),t}function bx(e){let{set:t}=e;return yx((()=>(t(new Promise((()=>null))),()=>t(!1))),[t]),null}class _x extends r.Component{constructor(){super(...arguments),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}_x.getDerivedStateFromError=()=>({error:!0});const wx="__default",Sx=new Map,Mx=e=>e&&!!e.memoized&&!!e.changes;function Ex(e){var t;const n="undefined"!==typeof window?null!=(t=window.devicePixelRatio)?t:2:1;return Array.isArray(e)?Math.min(Math.max(e[0],n),e[1]):e}const Tx=e=>{var t;return null==(t=e.__r3f)?void 0:t.root.getState()},Cx={obj:e=>e===Object(e)&&!Cx.arr(e)&&"function"!==typeof e,fun:e=>"function"===typeof e,str:e=>"string"===typeof e,num:e=>"number"===typeof e,boo:e=>"boolean"===typeof e,und:e=>void 0===e,arr:e=>Array.isArray(e),equ(e,t){let{arrays:n="shallow",objects:i="reference",strict:r=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(typeof e!==typeof t||!!e!==!!t)return!1;if(Cx.str(e)||Cx.num(e))return e===t;const s=Cx.obj(e);if(s&&"reference"===i)return e===t;const a=Cx.arr(e);if(a&&"reference"===n)return e===t;if((a||s)&&e===t)return!0;let o;for(o in e)if(!(o in t))return!1;if(s&&"shallow"===n&&"shallow"===i){for(o in r?t:e)if(!Cx.equ(e[o],t[o],{strict:r,objects:"reference"}))return!1}else for(o in r?t:e)if(e[o]!==t[o])return!1;if(Cx.und(o)){if(a&&0===e.length&&0===t.length)return!0;if(s&&0===Object.keys(e).length&&0===Object.keys(t).length)return!0;if(e!==t)return!1}return!0}};function Ax(e){const t={nodes:{},materials:{}};return e&&e.traverse((e=>{e.name&&(t.nodes[e.name]=e),e.material&&!t.materials[e.material.name]&&(t.materials[e.material.name]=e.material)})),t}function Px(e,t){const n=e;return(null!=t&&t.primitive||!n.__r3f)&&(n.__r3f=He({type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null},t)),e}function Nx(e,t){let n=e;if(t.includes("-")){const i=t.split("-"),r=i.pop();return n=i.reduce(((e,t)=>e[t]),e),{target:n,key:r}}return{target:n,key:t}}const kx=/-\d+$/;function Rx(e,t,n){if(Cx.str(n)){if(kx.test(n)){const t=n.replace(kx,""),{target:i,key:r}=Nx(e,t);Array.isArray(i[r])||(i[r]=[])}const{target:i,key:r}=Nx(e,n);t.__r3f.previousAttach=i[r],i[r]=t}else t.__r3f.previousAttach=n(e,t)}function Ix(e,t,n){var i,r;if(Cx.str(n)){const{target:i,key:r}=Nx(e,n),s=t.__r3f.previousAttach;void 0===s?delete i[r]:i[r]=s}else null==(i=t.__r3f)||null==i.previousAttach||i.previousAttach(e,t);null==(r=t.__r3f)||delete r.previousAttach}function Lx(e,t){let{children:n,key:i,ref:r}=t,s=Hi(t,cx),a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{children:o,key:l,ref:c}=a,u=Hi(a,ux),d=arguments.length>3&&void 0!==arguments[3]&&arguments[3];var h;const p=null!=(h=null==e?void 0:e.__r3f)?h:{},f=Object.entries(s),m=[];if(d){const e=Object.keys(u);for(let t=0;t<e.length;t++)s.hasOwnProperty(e[t])||f.unshift([e[t],wx+"remove"])}f.forEach((t=>{let[n,i]=t;var r;if(null!=(r=e.__r3f)&&r.primitive&&"object"===n)return;if(Cx.equ(i,u[n]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(n))return m.push([n,i,!0,[]]);let a=[];n.includes("-")&&(a=n.split("-")),m.push([n,i,!1,a]);for(const e in s){const t=s[e];e.startsWith("".concat(n,"-"))&&m.push([e,t,!1,e.split("-")])}}));const g=He({},s);return p.memoizedProps&&p.memoizedProps.args&&(g.args=p.memoizedProps.args),p.memoizedProps&&p.memoizedProps.attach&&(g.attach=p.memoizedProps.attach),{memoized:g,changes:m}}function jx(e,t){var n,i,r;const s=null!=(n=e.__r3f)?n:{},a=s.root,o=null!=(i=null==a||null==a.getState?void 0:a.getState())?i:{},{memoized:l,changes:c}=Mx(t)?t:Lx(e,t),u=s.eventCount;e.__r3f&&(e.__r3f.memoizedProps=l);for(let d=0;d<c.length;d++){let[t,n,i,r]=c[d];if(mx(e)){const e=3001,i="srgb",r="srgb-linear";"encoding"===t?(t="colorSpace",n=n===e?i:r):"outputEncoding"===t&&(t="outputColorSpace",n=n===e?i:r)}let a=e,l=a[t];if(r.length&&(l=r.reduce(((e,t)=>e[t]),e),!l||!l.set)){const[n,...i]=r.reverse();a=i.reverse().reduce(((e,t)=>e[t]),e),t=n}if(n===wx+"remove")if(a.constructor){let e=Sx.get(a.constructor);e||(e=new a.constructor,Sx.set(a.constructor,e)),n=e[t]}else n=0;if(i)n?s.handlers[t]=n:delete s.handlers[t],s.eventCount=Object.keys(s.handlers).length;else if(l&&l.set&&(l.copy||l instanceof Ol)){if(Array.isArray(n))l.fromArray?l.fromArray(n):l.set(...n);else if(l.copy&&n&&n.constructor&&l.constructor===n.constructor)l.copy(n);else if(void 0!==n){const e=l instanceof mc;!e&&l.setScalar?l.setScalar(n):l instanceof Ol&&n instanceof Ol?l.mask=n.mask:l.set(n),gx()||o.linear||!e||l.convertSRGBToLinear()}}else if(a[t]=n,a[t]instanceof Go&&a[t].format===_s&&a[t].type===cs){const e=a[t];mx(e)&&mx(o.gl)?e.colorSpace=o.gl.outputColorSpace:e.encoding=o.gl.outputEncoding}Dx(e)}if(s.parent&&o.internal&&e.raycast&&u!==s.eventCount){const t=o.internal.interaction.indexOf(e);t>-1&&o.internal.interaction.splice(t,1),s.eventCount&&o.internal.interaction.push(e)}return!(1===c.length&&"onUpdate"===c[0][0])&&c.length&&null!=(r=e.__r3f)&&r.parent&&Ox(e),e}function Dx(e){var t,n;const i=null==(t=e.__r3f)||null==(n=t.root)||null==n.getState?void 0:n.getState();i&&0===i.internal.frames&&i.invalidate()}function Ox(e){null==e.onUpdate||e.onUpdate(e)}function zx(e,t){e.manual||(vx(e)?(e.left=t.width/-2,e.right=t.width/2,e.top=t.height/2,e.bottom=t.height/-2):e.aspect=t.width/t.height,e.updateProjectionMatrix(),e.updateMatrixWorld())}function Fx(e){return(e.eventObject||e.object).uuid+"/"+e.index+e.instanceId}function Ux(e,t,n,i){const r=n.get(t);r&&(n.delete(t),0===n.size&&(e.delete(i),r.target.releasePointerCapture(i)))}function Bx(e){function t(e){return e.filter((e=>["Move","Over","Enter","Out","Leave"].some((t=>{var n;return null==(n=e.__r3f)?void 0:n.handlers["onPointer"+t]}))))}function n(t){const{internal:n}=e.getState();for(const e of n.hovered.values())if(!t.length||!t.find((t=>t.object===e.object&&t.index===e.index&&t.instanceId===e.instanceId))){const i=e.eventObject.__r3f,r=null==i?void 0:i.handlers;if(n.hovered.delete(Fx(e)),null!=i&&i.eventCount){const n=He(He({},e),{},{intersections:t});null==r.onPointerOut||r.onPointerOut(n),null==r.onPointerLeave||r.onPointerLeave(n)}}}function i(e,t){for(let n=0;n<t.length;n++){const i=t[n].__r3f;null==i||null==i.handlers.onPointerMissed||i.handlers.onPointerMissed(e)}}return{handlePointer:function(r){switch(r){case"onPointerLeave":case"onPointerCancel":return()=>n([]);case"onLostPointerCapture":return t=>{const{internal:i}=e.getState();"pointerId"in t&&i.capturedMap.has(t.pointerId)&&requestAnimationFrame((()=>{i.capturedMap.has(t.pointerId)&&(i.capturedMap.delete(t.pointerId),n([]))}))}}return function(s){const{onPointerMissed:a,internal:o}=e.getState();o.lastEvent.current=s;const l="onPointerMove"===r,c="onClick"===r||"onContextMenu"===r||"onDoubleClick"===r,u=function(t,n){const i=e.getState(),r=new Set,s=[],a=n?n(i.internal.interaction):i.internal.interaction;for(let e=0;e<a.length;e++){const t=Tx(a[e]);t&&(t.raycaster.camera=void 0)}i.previousRoot||null==i.events.compute||i.events.compute(t,i);let o=a.flatMap((function(e){const n=Tx(e);return n&&n.events.enabled&&null!==n.raycaster.camera?(void 0===n.raycaster.camera&&(null==n.events.compute||n.events.compute(t,n,null==(i=n.previousRoot)?void 0:i.getState()),void 0===n.raycaster.camera&&(n.raycaster.camera=null)),n.raycaster.camera?n.raycaster.intersectObject(e,!0):[]):[];var i})).sort(((e,t)=>{const n=Tx(e.object),i=Tx(t.object);return n&&i&&i.events.priority-n.events.priority||e.distance-t.distance})).filter((e=>{const t=Fx(e);return!r.has(t)&&(r.add(t),!0)}));i.events.filter&&(o=i.events.filter(o,i));for(const e of o){let t=e.object;for(;t;){var l;null!=(l=t.__r3f)&&l.eventCount&&s.push(He(He({},e),{},{eventObject:t})),t=t.parent}}if("pointerId"in t&&i.internal.capturedMap.has(t.pointerId))for(let e of i.internal.capturedMap.get(t.pointerId).values())r.has(Fx(e.intersection))||s.push(e.intersection);return s}(s,l?t:void 0),d=c?function(t){const{internal:n}=e.getState(),i=t.offsetX-n.initialClick[0],r=t.offsetY-n.initialClick[1];return Math.round(Math.sqrt(i*i+r*r))}(s):0;"onPointerDown"===r&&(o.initialClick=[s.offsetX,s.offsetY],o.initialHits=u.map((e=>e.eventObject))),c&&!u.length&&d<=2&&(i(s,o.interaction),a&&a(s)),l&&n(u),function(t,i,r,s){const a=e.getState();if(t.length){const e={stopped:!1};for(const o of t){const l=Tx(o.object)||a,{raycaster:c,pointer:u,camera:d,internal:h}=l,p=new Po(u.x,u.y,0).unproject(d),f=e=>{var t,n;return null!=(t=null==(n=h.capturedMap.get(e))?void 0:n.has(o.eventObject))&&t},m=e=>{const t={intersection:o,target:i.target};h.capturedMap.has(e)?h.capturedMap.get(e).set(o.eventObject,t):h.capturedMap.set(e,new Map([[o.eventObject,t]])),i.target.setPointerCapture(e)},g=e=>{const t=h.capturedMap.get(e);t&&Ux(h.capturedMap,o.eventObject,t,e)};let v={};for(let e in i){let t=i[e];"function"!==typeof t&&(v[e]=t)}let y=He(He(He({},o),v),{},{pointer:u,intersections:t,stopped:e.stopped,delta:r,unprojectedPoint:p,ray:c.ray,camera:d,stopPropagation(){const r="pointerId"in i&&h.capturedMap.get(i.pointerId);(!r||r.has(o.eventObject))&&(y.stopped=e.stopped=!0,h.hovered.size&&Array.from(h.hovered.values()).find((e=>e.eventObject===o.eventObject)))&&n([...t.slice(0,t.indexOf(o)),o])},target:{hasPointerCapture:f,setPointerCapture:m,releasePointerCapture:g},currentTarget:{hasPointerCapture:f,setPointerCapture:m,releasePointerCapture:g},nativeEvent:i});if(s(y),!0===e.stopped)break}}}(u,s,d,(function(e){const t=e.eventObject,n=t.__r3f,a=null==n?void 0:n.handlers;if(null!=n&&n.eventCount)if(l){if(a.onPointerOver||a.onPointerEnter||a.onPointerOut||a.onPointerLeave){const t=Fx(e),n=o.hovered.get(t);n?n.stopped&&e.stopPropagation():(o.hovered.set(t,e),null==a.onPointerOver||a.onPointerOver(e),null==a.onPointerEnter||a.onPointerEnter(e))}null==a.onPointerMove||a.onPointerMove(e)}else{const n=a[r];n?c&&!o.initialHits.includes(t)||(i(s,o.interaction.filter((e=>!o.initialHits.includes(e)))),n(e)):c&&o.initialHits.includes(t)&&i(s,o.interaction.filter((e=>!o.initialHits.includes(e))))}}))}}}}const Vx=e=>!(null==e||!e.render),Hx=r.createContext(null),Wx=(e,t)=>{const n=function(e){const t="function"===typeof e?Qy(e):e,n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.getState,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.is;const[,i]=(0,r.useReducer)((e=>e+1),0),s=t.getState(),a=(0,r.useRef)(s),o=(0,r.useRef)(e),l=(0,r.useRef)(n),c=(0,r.useRef)(!1),u=(0,r.useRef)();let d;void 0===u.current&&(u.current=e(s));let h=!1;(a.current!==s||o.current!==e||l.current!==n||c.current)&&(d=e(s),h=!n(u.current,d)),$y((()=>{h&&(u.current=d),a.current=s,o.current=e,l.current=n,c.current=!1}));const p=(0,r.useRef)(s);$y((()=>{const e=()=>{try{const e=t.getState(),n=o.current(e);l.current(u.current,n)||(a.current=e,u.current=n,i())}catch(Ib){c.current=!0,i()}},n=t.subscribe(e);return t.getState()!==p.current&&e(),n}),[]);const f=h?d:u.current;return(0,r.useDebugValue)(f),f};return Object.assign(n,t),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const e=[n,t];return{next(){const t=e.length<=0;return{value:e.shift(),done:t}}}},n}(((n,i)=>{const s=new Po,a=new Po,o=new Po;function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i().camera,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i().size;const{width:r,height:l,top:c,left:u}=n,d=r/l;t instanceof Po?o.copy(t):o.set(...t);const h=e.getWorldPosition(s).distanceTo(o);if(vx(e))return{width:r/e.zoom,height:l/e.zoom,top:c,left:u,factor:1,distance:h,aspect:d};{const t=e.fov*Math.PI/180,n=2*Math.tan(t/2)*h,i=n*(r/l);return{width:i,height:n,top:c,left:u,factor:r/i,distance:h,aspect:d}}}let c;const u=e=>n((t=>({performance:He(He({},t.performance),{},{current:e})}))),d=new _o,h={set:n,get:i,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return e(i(),t)},advance:(e,n)=>t(e,n,i()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new uv,pointer:d,mouse:d,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const e=i();c&&clearTimeout(c),e.performance.current!==e.performance.min&&u(e.performance.min),c=setTimeout((()=>u(i().performance.max)),e.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:l},setEvents:e=>n((t=>He(He({},t),{},{events:He(He({},t.events),e)}))),setSize:(e,t,r,s,o)=>{const c=i().camera,u={width:e,height:t,top:s||0,left:o||0,updateStyle:r};n((e=>({size:u,viewport:He(He({},e.viewport),l(c,a,u))})))},setDpr:e=>n((t=>{const n=Ex(e);return{viewport:He(He({},t.viewport),{},{dpr:n,initialDpr:t.viewport.initialDpr||n})}})),setFrameloop:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"always";const t=i().clock;t.stop(),t.elapsedTime=0,"never"!==e&&(t.start(),t.elapsedTime=0),n((()=>({frameloop:e})))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:r.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(e,t,n)=>{const r=i().internal;return r.priority=r.priority+(t>0?1:0),r.subscribers.push({ref:e,priority:t,store:n}),r.subscribers=r.subscribers.sort(((e,t)=>e.priority-t.priority)),()=>{const n=i().internal;null!=n&&n.subscribers&&(n.priority=n.priority-(t>0?1:0),n.subscribers=n.subscribers.filter((t=>t.ref!==e)))}}}};return h})),i=n.getState();let s=i.size,a=i.viewport.dpr,o=i.camera;return n.subscribe((()=>{const{camera:e,size:t,viewport:i,gl:r,set:l}=n.getState();if(t!==s||i.dpr!==a){var c;s=t,a=i.dpr,zx(e,t),r.setPixelRatio(i.dpr);const n=null!=(c=t.updateStyle)?c:"undefined"!==typeof HTMLCanvasElement&&r.domElement instanceof HTMLCanvasElement;r.setSize(t.width,t.height,n)}e!==o&&(o=e,l((t=>({viewport:He(He({},t.viewport),t.viewport.getCurrentViewport(e))}))))})),n.subscribe((t=>e(t))),n};let Gx,qx=new Set,Xx=new Set,Yx=new Set;function Jx(e,t){if(e.size)for(const{callback:n}of e.values())n(t)}function Kx(e,t){switch(e){case"before":return Jx(qx,t);case"after":return Jx(Xx,t);case"tail":return Jx(Yx,t)}}let Zx,Qx;function $x(e,t,n){let i=t.clock.getDelta();for("never"===t.frameloop&&"number"===typeof e&&(i=e-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=e),Zx=t.internal.subscribers,Gx=0;Gx<Zx.length;Gx++)Qx=Zx[Gx],Qx.ref.current(Qx.store.getState(),i,n);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),"always"===t.frameloop?1:t.internal.frames}function eb(){const e=r.useContext(Hx);if(!e)throw new Error("R3F: Hooks can only be used within the Canvas component!");return e}function tb(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e=>e,t=arguments.length>1?arguments[1]:void 0;return eb()(e,t)}function nb(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=eb(),i=n.getState().internal.subscribe,r=xx(e);return yx((()=>i(r,t,n)),[t,i,n]),null}function ib(e,t){return function(n){const i=new n;e&&e(i);for(var r=arguments.length,s=new Array(r>1?r-1:0),a=1;a<r;a++)s[a-1]=arguments[a];return Promise.all(s.map((e=>new Promise(((n,r)=>i.load(e,(e=>{e.scene&&Object.assign(e,Ax(e.scene)),n(e)}),t,(t=>r(new Error("Could not load ".concat(e,": ").concat(t.message,")"))))))))))}}function rb(e,t,n,i){const r=Array.isArray(t)?t:[t],s=((e,t,n)=>sx(e,t,!1,n))(ib(n,i),[e,...r],{equal:Cx.equ});return Array.isArray(t)?s:s[0]}rb.preload=function(e,t,n){const i=Array.isArray(t)?t:[t];return((e,t,n)=>{sx(e,t,!0,n)})(ib(n),[e,...i])},rb.clear=function(e,t){return(e=>{if(void 0===e||0===e.length)rx.splice(0,rx.length);else{const t=rx.find((t=>ix(e,t.keys,t.equal)));if(t){const e=rx.indexOf(t);-1!==e&&rx.splice(e,1)}}})([e,...Array.isArray(t)?t:[t]])};const sb=new Map,{invalidate:ab,advance:ob}=function(e){let t,n,i,r=!1;function s(a){n=requestAnimationFrame(s),r=!0,t=0,Kx("before",a);for(const n of e.values()){var o;i=n.store.getState(),!i.internal.active||!("always"===i.frameloop||i.internal.frames>0)||null!=(o=i.gl.xr)&&o.isPresenting||(t+=$x(a,i))}if(Kx("after",a),0===t)return Kx("tail",a),r=!1,cancelAnimationFrame(n)}return{loop:s,invalidate:function t(n){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;var a;if(!n)return e.forEach((e=>t(e.store.getState())),i);null!=(a=n.gl.xr)&&a.isPresenting||!n.internal.active||"never"===n.frameloop||(n.internal.frames=Math.min(60,n.internal.frames+i),r||(r=!0,requestAnimationFrame(s)))},advance:function(t){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(n&&Kx("before",t),i)$x(t,i,r);else for(const s of e.values())$x(t,s.store.getState());n&&Kx("after",t)}}}(sb),{reconciler:lb,applyProps:cb}=function(e,t){function n(e,t,n){let i,{args:r=[],attach:s}=t,a=Hi(t,ax),o="".concat(e[0].toUpperCase()).concat(e.slice(1));if("primitive"===e){if(void 0===a.object)throw new Error("R3F: Primitives without 'object' are invalid!");i=Px(a.object,{type:e,root:n,attach:s,primitive:!0})}else{const t=hx[o];if(!t)throw new Error("R3F: ".concat(o," is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively"));if(!Array.isArray(r))throw new Error("R3F: The args prop must be an array!");i=Px(new t(...r),{type:e,root:n,attach:s,memoizedProps:{args:r}})}return void 0===i.__r3f.attach&&(i instanceof zc?i.__r3f.attach="geometry":i instanceof uc&&(i.__r3f.attach="material")),"inject"!==o&&jx(i,a),i}function i(e,t){let n=!1;var i,r;t&&(null!=(i=t.__r3f)&&i.attach?Rx(e,t,t.__r3f.attach):t.isObject3D&&e.isObject3D&&(e.add(t),n=!0),n||null==(r=e.__r3f)||r.objects.push(t),t.__r3f||Px(t,{}),t.__r3f.parent=e,Ox(t),Dx(t))}function r(e,t,n){let i=!1;if(t){var r,s;if(null!=(r=t.__r3f)&&r.attach)Rx(e,t,t.__r3f.attach);else if(t.isObject3D&&e.isObject3D){t.parent=e,t.dispatchEvent({type:"added"});const r=e.children.filter((e=>e!==t)),s=r.indexOf(n);e.children=[...r.slice(0,s),t,...r.slice(s)],i=!0}i||null==(s=e.__r3f)||s.objects.push(t),t.__r3f||Px(t,{}),t.__r3f.parent=e,Ox(t),Dx(t)}}function s(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e&&[...e].forEach((e=>a(t,e,n)))}function a(e,t,n){if(t){var i,r,a;if(t.__r3f&&(t.__r3f.parent=null),null!=(i=e.__r3f)&&i.objects&&(e.__r3f.objects=e.__r3f.objects.filter((e=>e!==t))),null!=(r=t.__r3f)&&r.attach)Ix(e,t,t.__r3f.attach);else if(t.isObject3D&&e.isObject3D){var o;e.remove(t),null!=(o=t.__r3f)&&o.root&&function(e,t){const{internal:n}=e.getState();n.interaction=n.interaction.filter((e=>e!==t)),n.initialHits=n.initialHits.filter((e=>e!==t)),n.hovered.forEach(((e,i)=>{e.eventObject!==t&&e.object!==t||n.hovered.delete(i)})),n.capturedMap.forEach(((e,i)=>{Ux(n.capturedMap,t,e,i)}))}(t.__r3f.root,t)}const c=null==(a=t.__r3f)?void 0:a.primitive,u=void 0===n?null!==t.dispose&&!c:n;var l;if(!c)s(null==(l=t.__r3f)?void 0:l.objects,t,u),s(t.children,t,u);t.__r3f&&(delete t.__r3f.root,delete t.__r3f.objects,delete t.__r3f.handlers,delete t.__r3f.memoizedProps,c||delete t.__r3f),u&&t.dispose&&"Scene"!==t.type&&(0,nx.unstable_scheduleCallback)(nx.unstable_IdlePriority,(()=>{try{t.dispose()}catch(oq){}})),Dx(e)}}const o=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters."),l=tx()({createInstance:n,removeChild:a,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(e,t)=>{if(!t)return;const n=e.getState().scene;n.__r3f&&(n.__r3f.root=e,i(n,t))},removeChildFromContainer:(e,t)=>{t&&a(e.getState().scene,t)},insertInContainerBefore:(e,t,n)=>{if(!t||!n)return;const i=e.getState().scene;i.__r3f&&r(i,t,n)},getRootHostContext:()=>null,getChildHostContext:e=>e,finalizeInitialChildren(e){var t;const n=null!=(t=null==e?void 0:e.__r3f)?t:{};return Boolean(n.handlers)},prepareUpdate(e,t,n,i){if(e.__r3f.primitive&&i.object&&i.object!==e)return[!0];{const{args:t=[],children:r}=i,s=Hi(i,ox),{args:a=[],children:o}=n,l=Hi(n,lx);if(!Array.isArray(t))throw new Error("R3F: the args prop must be an array!");if(t.some(((e,t)=>e!==a[t])))return[!0];const c=Lx(e,s,l,!0);return c.changes.length?[!1,c]:null}},commitUpdate(e,t,r,s,o,l){let[c,u]=t;c?function(e,t,r,s){var o;const l=null==(o=e.__r3f)?void 0:o.parent;if(!l)return;const c=n(t,r,e.__r3f.root);if(e.children){for(const t of e.children)t.__r3f&&i(c,t);e.children=e.children.filter((e=>!e.__r3f))}e.__r3f.objects.forEach((e=>i(c,e))),e.__r3f.objects=[],e.__r3f.autoRemovedBeforeAppend||a(l,e),c.parent&&(c.__r3f.autoRemovedBeforeAppend=!0),i(l,c),c.raycast&&c.__r3f.eventCount&&c.__r3f.root.getState().internal.interaction.push(c);[s,s.alternate].forEach((e=>{null!==e&&(e.stateNode=c,e.ref&&("function"===typeof e.ref?e.ref(c):e.ref.current=c))}))}(e,r,o,l):jx(e,u)},commitMount(e,t,n,i){var r;const s=null!=(r=e.__r3f)?r:{};e.raycast&&s.handlers&&s.eventCount&&e.__r3f.root.getState().internal.interaction.push(e)},getPublicInstance:e=>e,prepareForCommit:()=>null,preparePortalMount:e=>Px(e.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(e){var t;const{attach:n,parent:i}=null!=(t=e.__r3f)?t:{};n&&i&&Ix(i,e,n),e.isObject3D&&(e.visible=!1),Dx(e)},unhideInstance(e,t){var n;const{attach:i,parent:r}=null!=(n=e.__r3f)?n:{};i&&r&&Rx(r,e,i),(e.isObject3D&&null==t.visible||t.visible)&&(e.visible=!0),Dx(e)},createTextInstance:o,hideTextInstance:o,unhideTextInstance:o,getCurrentEventPriority:()=>t?t():Zy.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:"undefined"!==typeof performance&&Cx.fun(performance.now)?performance.now:Cx.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Cx.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Cx.fun(clearTimeout)?clearTimeout:void 0});return{reconciler:l,applyProps:jx}}(0,(function(){var e;const t="undefined"!==typeof self&&self||"undefined"!==typeof window&&window;if(!t)return Zy.DefaultEventPriority;switch(null==(e=t.event)?void 0:e.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Zy.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Zy.ContinuousEventPriority;default:return Zy.DefaultEventPriority}})),ub={objects:"shallow",strict:!1},db=(e,t)=>{const n="function"===typeof e?e(t):e;return Vx(n)?n:new $h(He({powerPreference:"high-performance",canvas:t,antialias:!0,alpha:!0},e))};function hb(e){const t=sb.get(e),n=null==t?void 0:t.fiber,i=null==t?void 0:t.store;t&&console.warn("R3F.createRoot should only be called once!");const s="function"===typeof reportError?reportError:console.error,a=i||Wx(ab,ob),o=n||lb.createContainer(a,Zy.ConcurrentRoot,null,!1,null,"",s,null);let l;t||sb.set(e,{fiber:o,store:a});let c,u=!1;return{configure(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{gl:n,size:i,scene:r,events:s,onCreated:o,shadows:d=!1,linear:h=!1,flat:p=!1,legacy:f=!1,orthographic:m=!1,frameloop:g="always",dpr:v=[1,2],performance:y,raycaster:x,camera:b,onPointerMissed:_}=t,w=a.getState(),S=w.gl;w.gl||w.set({gl:S=db(n,e)});let M=w.raycaster;M||w.set({raycaster:M=new Bv});const E=x||{},{params:T}=E,C=Hi(E,dx);if(Cx.equ(C,M,ub)||cb(M,He({},C)),Cx.equ(T,M.params,ub)||cb(M,{params:He(He({},M.params),T)}),!w.camera||w.camera===c&&!Cx.equ(c,b,ub)){c=b;const e=b instanceof ou,t=e?b:m?new Iu(0,0,0,0,.1,1e3):new lu(75,0,.1,1e3);e||(t.position.z=5,b&&cb(t,b),w.camera||null!=b&&b.rotation||t.lookAt(0,0,0)),w.set({camera:t})}if(!w.scene){let e;r instanceof ip?e=r:(e=new ip,r&&cb(e,r)),w.set({scene:Px(e)})}if(!w.xr){const e=(e,t)=>{const n=a.getState();"never"!==n.frameloop&&ob(e,!0,n,t)},t=()=>{const t=a.getState();t.gl.xr.enabled=t.gl.xr.isPresenting,t.gl.xr.setAnimationLoop(t.gl.xr.isPresenting?e:null),t.gl.xr.isPresenting||ab(t)},n={connect(){const e=a.getState().gl;e.xr.addEventListener("sessionstart",t),e.xr.addEventListener("sessionend",t)},disconnect(){const e=a.getState().gl;e.xr.removeEventListener("sessionstart",t),e.xr.removeEventListener("sessionend",t)}};S.xr&&n.connect(),w.set({xr:n})}if(S.shadowMap){const e=S.shadowMap.enabled,t=S.shadowMap.type;if(S.shadowMap.enabled=!!d,Cx.boo(d))S.shadowMap.type=$i;else if(Cx.str(d)){var A;const e={basic:Zi,percentage:Qi,soft:$i,variance:er};S.shadowMap.type=null!=(A=e[d])?A:$i}else Cx.obj(d)&&Object.assign(S.shadowMap,d);e===S.shadowMap.enabled&&t===S.shadowMap.type||(S.shadowMap.needsUpdate=!0)}const P=gx();P&&("enabled"in P?P.enabled=!f:"legacyMode"in P&&(P.legacyMode=f));cb(S,{outputEncoding:h?3e3:3001,toneMapping:p?zr:Vr}),w.legacy!==f&&w.set((()=>({legacy:f}))),w.linear!==h&&w.set((()=>({linear:h}))),w.flat!==p&&w.set((()=>({flat:p}))),!n||Cx.fun(n)||Vx(n)||Cx.equ(n,S,ub)||cb(S,n),s&&!w.events.handlers&&w.set({events:s(a)});const N=function(e,t){if(t)return t;if("undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement&&e.parentElement){const{width:t,height:n,top:i,left:r}=e.parentElement.getBoundingClientRect();return{width:t,height:n,top:i,left:r}}return"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?{width:e.width,height:e.height,top:0,left:0}:{width:0,height:0,top:0,left:0}}(e,i);return Cx.equ(N,w.size,ub)||w.setSize(N.width,N.height,N.updateStyle,N.top,N.left),v&&w.viewport.dpr!==Ex(v)&&w.setDpr(v),w.frameloop!==g&&w.setFrameloop(g),w.onPointerMissed||w.set({onPointerMissed:_}),y&&!Cx.equ(y,w.performance,ub)&&w.set((e=>({performance:He(He({},e.performance),y)}))),l=o,u=!0,this},render(t){return u||this.configure(),lb.updateContainer(r.createElement(pb,{store:a,children:t,onCreated:l,rootElement:e}),o,null,(()=>{})),a},unmount(){fb(e)}}}function pb(e){let{store:t,children:n,onCreated:i,rootElement:s}=e;return yx((()=>{const e=t.getState();e.set((e=>({internal:He(He({},e.internal),{},{active:!0})}))),i&&i(e),t.getState().events.connected||null==e.events.connect||e.events.connect(s)}),[]),r.createElement(Hx.Provider,{value:t},n)}function fb(e,t){const n=sb.get(e),i=null==n?void 0:n.fiber;if(i){const r=null==n?void 0:n.store.getState();r&&(r.internal.active=!1),lb.updateContainer(null,i,null,(()=>{r&&setTimeout((()=>{try{var n,i,s,a;null==r.events.disconnect||r.events.disconnect(),null==(n=r.gl)||null==(i=n.renderLists)||null==i.dispose||i.dispose(),null==(s=r.gl)||null==s.forceContextLoss||s.forceContextLoss(),null!=(a=r.gl)&&a.xr&&r.xr.disconnect(),function(e){e.dispose&&"Scene"!==e.type&&e.dispose();for(const t in e)null==t.dispose||t.dispose(),delete e[t]}(r),sb.delete(e),t&&t(e)}catch(oq){}}),500)}))}}lb.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:r.version});r.unstable_act;function mb(){return mb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},mb.apply(null,arguments)}function gb(e,t){let n;return function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];window.clearTimeout(n),n=window.setTimeout((()=>e(...r)),t)}}function vb(){let{debounce:e,scroll:t,polyfill:n,offsetSize:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{debounce:0,scroll:!1,offsetSize:!1};const s=n||("undefined"==typeof window?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[a,o]=(0,r.useState)({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=(0,r.useRef)({element:null,scrollContainers:null,resizeObserver:null,lastBounds:a,orientationHandler:null}),c=e?"number"==typeof e?e:e.scroll:null,u=e?"number"==typeof e?e:e.resize:null,d=(0,r.useRef)(!1);(0,r.useEffect)((()=>(d.current=!0,()=>{d.current=!1})));const[h,p,f]=(0,r.useMemo)((()=>{const e=()=>{if(!l.current.element)return;const{left:e,top:t,width:n,height:r,bottom:s,right:a,x:c,y:u}=l.current.element.getBoundingClientRect(),h={left:e,top:t,width:n,height:r,bottom:s,right:a,x:c,y:u};l.current.element instanceof HTMLElement&&i&&(h.height=l.current.element.offsetHeight,h.width=l.current.element.offsetWidth),Object.freeze(h),d.current&&!bb(l.current.lastBounds,h)&&o(l.current.lastBounds=h)};return[e,u?gb(e,u):e,c?gb(e,c):e]}),[o,i,c,u]);function m(){l.current.scrollContainers&&(l.current.scrollContainers.forEach((e=>e.removeEventListener("scroll",f,!0))),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null),l.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",l.current.orientationHandler))}function g(){l.current.element&&(l.current.resizeObserver=new s(f),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach((e=>e.addEventListener("scroll",f,{capture:!0,passive:!0}))),l.current.orientationHandler=()=>{f()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",l.current.orientationHandler))}return function(e,t){(0,r.useEffect)((()=>{if(t){const t=e;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>{window.removeEventListener("scroll",t,!0)}}}),[e,t])}(f,!!t),function(e){(0,r.useEffect)((()=>{const t=e;return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}}),[e])}(p),(0,r.useEffect)((()=>{m(),g()}),[t,f,p]),(0,r.useEffect)((()=>m),[]),[e=>{!e||e===l.current.element||(m(),l.current.element=e,l.current.scrollContainers=yb(e),g())},a,h]}function yb(e){const t=[];if(!e||e===document.body)return t;const{overflow:n,overflowX:i,overflowY:r}=window.getComputedStyle(e);return[n,i,r].some((e=>"auto"===e||"scroll"===e))&&t.push(e),[...t,...yb(e.parentElement)]}const xb=["x","y","top","bottom","left","right","width","height"],bb=(e,t)=>xb.every((n=>e[n]===t[n]));var _b,wb,Sb=Object.defineProperty,Mb=Object.defineProperties,Eb=Object.getOwnPropertyDescriptors,Tb=Object.getOwnPropertySymbols,Cb=Object.prototype.hasOwnProperty,Ab=Object.prototype.propertyIsEnumerable,Pb=(e,t,n)=>t in e?Sb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Nb=(e,t)=>{for(var n in t||(t={}))Cb.call(t,n)&&Pb(e,n,t[n]);if(Tb)for(var n of Tb(t))Ab.call(t,n)&&Pb(e,n,t[n]);return e};"undefined"===typeof window||!(null==(_b=window.document)?void 0:_b.createElement)&&"ReactNative"!==(null==(wb=window.navigator)?void 0:wb.product)?r.useEffect:r.useLayoutEffect;function kb(e,t,n){if(!e)return;if(!0===n(e))return e;let i=t?e.return:e.child;for(;i;){const e=kb(i,t,n);if(e)return e;i=t?null:i.sibling}}function Rb(e){try{return Object.defineProperties(e,{_currentRenderer:{get:()=>null,set(){}},_currentRenderer2:{get:()=>null,set(){}}})}catch(t){return e}}const Ib=console.error;console.error=function(){const e=[...arguments].join("");if(!(null==e?void 0:e.startsWith("Warning:"))||!e.includes("useContext"))return Ib.apply(this,arguments);console.error=Ib};const Lb=Rb(r.createContext(null));class jb extends r.Component{render(){return r.createElement(Lb.Provider,{value:this._reactInternals},this.props.children)}}function Db(){const e=r.useContext(Lb);if(null===e)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=r.useId();return r.useMemo((()=>{for(const n of[e,null==e?void 0:e.alternate]){if(!n)continue;const e=kb(n,!1,(e=>{let n=e.memoizedState;for(;n;){if(n.memoizedState===t)return!0;n=n.next}}));if(e)return e}}),[e,t])}function Ob(){const e=function(){const e=Db(),[t]=r.useState((()=>new Map));t.clear();let n=e;for(;n;){if(n.type&&"object"===typeof n.type){const e=void 0===n.type._context&&n.type.Provider===n.type?n.type:n.type._context;e&&e!==Lb&&!t.has(e)&&t.set(e,r.useContext(Rb(e)))}n=n.return}return t}();return r.useMemo((()=>Array.from(e.keys()).reduce(((t,n)=>i=>r.createElement(t,null,r.createElement(n.Provider,((e,t)=>Mb(e,Eb(t)))(Nb({},i),{value:e.get(n)})))),(e=>r.createElement(jb,Nb({},e))))),[e])}const zb=["children","fallback","resize","style","gl","events","eventSource","eventPrefix","shadows","linear","flat","legacy","orthographic","frameloop","dpr","performance","raycaster","camera","onPointerMissed","onCreated"],Fb={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Ub(e){const{handlePointer:t}=Bx(e);return{priority:1,enabled:!0,compute(e,t,n){t.pointer.set(e.offsetX/t.size.width*2-1,-e.offsetY/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)},connected:void 0,handlers:Object.keys(Fb).reduce(((e,n)=>He(He({},e),{},{[n]:t(n)})),{}),update:()=>{var t;const{events:n,internal:i}=e.getState();null!=(t=i.lastEvent)&&t.current&&n.handlers&&n.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{var n;const{set:i,events:r}=e.getState();null==r.disconnect||r.disconnect(),i((e=>({events:He(He({},e.events),{},{connected:t})}))),Object.entries(null!=(n=r.handlers)?n:[]).forEach((e=>{let[n,i]=e;const[r,s]=Fb[n];t.addEventListener(r,i,{passive:s})}))},disconnect:()=>{const{set:t,events:n}=e.getState();var i;n.connected&&(Object.entries(null!=(i=n.handlers)?i:[]).forEach((e=>{let[t,i]=e;if(n&&n.connected instanceof HTMLElement){const[e]=Fb[t];n.connected.removeEventListener(e,i)}})),t((e=>({events:He(He({},e.events),{},{connected:void 0})}))))}}}const Bb=r.forwardRef((function(e,n){let{children:i,fallback:s,resize:a,style:o,gl:l,events:c=Ub,eventSource:u,eventPrefix:d,shadows:h,linear:p,flat:f,legacy:m,orthographic:g,frameloop:v,dpr:y,performance:x,raycaster:b,camera:_,onPointerMissed:w,onCreated:S}=e,M=Hi(e,zb);r.useMemo((()=>{return e=t,void Object.assign(hx,e);var e}),[]);const E=Ob(),[T,C]=vb(He({scroll:!0,debounce:{scroll:50,resize:0}},a)),A=r.useRef(null),P=r.useRef(null);r.useImperativeHandle(n,(()=>A.current));const N=xx(w),[k,R]=r.useState(!1),[I,L]=r.useState(!1);if(k)throw k;if(I)throw I;const j=r.useRef(null);yx((()=>{const e=A.current;C.width>0&&C.height>0&&e&&(j.current||(j.current=hb(e)),j.current.configure({gl:l,events:c,shadows:h,linear:p,flat:f,legacy:m,orthographic:g,frameloop:v,dpr:y,performance:x,raycaster:b,camera:_,size:C,onPointerMissed:function(){return null==N.current?void 0:N.current(...arguments)},onCreated:e=>{var t;null==e.events.connect||e.events.connect(u?(t=u)&&t.hasOwnProperty("current")?u.current:u:P.current),d&&e.setEvents({compute:(e,t)=>{const n=e[d+"X"],i=e[d+"Y"];t.pointer.set(n/t.size.width*2-1,-i/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)}}),null==S||S(e)}}),j.current.render(r.createElement(E,null,r.createElement(_x,{set:L},r.createElement(r.Suspense,{fallback:r.createElement(bx,{set:R})},i)))))})),r.useEffect((()=>{const e=A.current;if(e)return()=>fb(e)}),[]);const D=u?"none":"auto";return r.createElement("div",mb({ref:P,style:He({position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:D},o)},M),r.createElement("div",{ref:T,style:{width:"100%",height:"100%"}},r.createElement("canvas",{ref:A,style:{display:"block"}},s)))})),Vb=r.forwardRef((function(e,t){return r.createElement(jb,null,r.createElement(Bb,mb({},e,{ref:t})))}));var Hb=function(e){return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};try{URL.revokeObjectURL(Hb(""))}catch(oq){Hb=function(e){return"data:application/javascript;charset=UTF-8,"+encodeURI(e)}}var Wb=Uint8Array,Gb=Uint16Array,qb=Uint32Array,Xb=new Wb([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Yb=new Wb([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Jb=new Wb([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Kb=function(e,t){for(var n=new Gb(31),i=0;i<31;++i)n[i]=t+=1<<e[i-1];var r=new qb(n[30]);for(i=1;i<30;++i)for(var s=n[i];s<n[i+1];++s)r[s]=s-n[i]<<5|i;return[n,r]},Zb=Kb(Xb,2),Qb=Zb[0],$b=Zb[1];Qb[28]=258,$b[258]=28;for(var e_=Kb(Yb,0),t_=e_[0],n_=(e_[1],new Gb(32768)),i_=0;i_<32768;++i_){var r_=(43690&i_)>>>1|(21845&i_)<<1;r_=(61680&(r_=(52428&r_)>>>2|(13107&r_)<<2))>>>4|(3855&r_)<<4,n_[i_]=((65280&r_)>>>8|(255&r_)<<8)>>>1}var s_=function(e,t,n){for(var i=e.length,r=0,s=new Gb(t);r<i;++r)++s[e[r]-1];var a,o=new Gb(t);for(r=0;r<t;++r)o[r]=o[r-1]+s[r-1]<<1;if(n){a=new Gb(1<<t);var l=15-t;for(r=0;r<i;++r)if(e[r])for(var c=r<<4|e[r],u=t-e[r],d=o[e[r]-1]++<<u,h=d|(1<<u)-1;d<=h;++d)a[n_[d]>>>l]=c}else for(a=new Gb(i),r=0;r<i;++r)e[r]&&(a[r]=n_[o[e[r]-1]++]>>>15-e[r]);return a},a_=new Wb(288);for(i_=0;i_<144;++i_)a_[i_]=8;for(i_=144;i_<256;++i_)a_[i_]=9;for(i_=256;i_<280;++i_)a_[i_]=7;for(i_=280;i_<288;++i_)a_[i_]=8;var o_=new Wb(32);for(i_=0;i_<32;++i_)o_[i_]=5;var l_=s_(a_,9,1),c_=s_(o_,5,1),u_=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},d_=function(e,t,n){var i=t/8|0;return(e[i]|e[i+1]<<8)>>(7&t)&n},h_=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},p_=function(e){return(e/8|0)+(7&e&&1)},f_=function(e,t,n){(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length);var i=new(e instanceof Gb?Gb:e instanceof qb?qb:Wb)(n-t);return i.set(e.subarray(t,n)),i},m_=function(e,t,n){var i=e.length;if(!i||n&&!n.l&&i<5)return t||new Wb(0);var r=!t||n,s=!n||n.i;n||(n={}),t||(t=new Wb(3*i));var a=function(e){var n=t.length;if(e>n){var i=new Wb(Math.max(2*n,e));i.set(t),t=i}},o=n.f||0,l=n.p||0,c=n.b||0,u=n.l,d=n.d,h=n.m,p=n.n,f=8*i;do{if(!u){n.f=o=d_(e,l,1);var m=d_(e,l+1,3);if(l+=3,!m){var g=e[(C=p_(l)+4)-4]|e[C-3]<<8,v=C+g;if(v>i){if(s)throw"unexpected EOF";break}r&&a(c+g),t.set(e.subarray(C,v),c),n.b=c+=g,n.p=l=8*v;continue}if(1==m)u=l_,d=c_,h=9,p=5;else{if(2!=m)throw"invalid block type";var y=d_(e,l,31)+257,x=d_(e,l+10,15)+4,b=y+d_(e,l+5,31)+1;l+=14;for(var _=new Wb(b),w=new Wb(19),S=0;S<x;++S)w[Jb[S]]=d_(e,l+3*S,7);l+=3*x;var M=u_(w),E=(1<<M)-1,T=s_(w,M,1);for(S=0;S<b;){var C,A=T[d_(e,l,E)];if(l+=15&A,(C=A>>>4)<16)_[S++]=C;else{var P=0,N=0;for(16==C?(N=3+d_(e,l,3),l+=2,P=_[S-1]):17==C?(N=3+d_(e,l,7),l+=3):18==C&&(N=11+d_(e,l,127),l+=7);N--;)_[S++]=P}}var k=_.subarray(0,y),R=_.subarray(y);h=u_(k),p=u_(R),u=s_(k,h,1),d=s_(R,p,1)}if(l>f){if(s)throw"unexpected EOF";break}}r&&a(c+131072);for(var I=(1<<h)-1,L=(1<<p)-1,j=l;;j=l){var D=(P=u[h_(e,l)&I])>>>4;if((l+=15&P)>f){if(s)throw"unexpected EOF";break}if(!P)throw"invalid length/literal";if(D<256)t[c++]=D;else{if(256==D){j=l,u=null;break}var O=D-254;if(D>264){var z=Xb[S=D-257];O=d_(e,l,(1<<z)-1)+Qb[S],l+=z}var F=d[h_(e,l)&L],U=F>>>4;if(!F)throw"invalid distance";l+=15&F;R=t_[U];if(U>3){z=Yb[U];R+=h_(e,l)&(1<<z)-1,l+=z}if(l>f){if(s)throw"unexpected EOF";break}r&&a(c+131072);for(var B=c+O;c<B;c+=4)t[c]=t[c-R],t[c+1]=t[c+1-R],t[c+2]=t[c+2-R],t[c+3]=t[c+3-R];c=B}}n.l=u,n.p=j,n.b=c,u&&(o=1,n.m=h,n.d=d,n.n=p)}while(!o);return c==t.length?t:f_(t,0,c)},g_=new Wb(0),v_=function(e){if(8!=(15&e[0])||e[0]>>>4>7||(e[0]<<8|e[1])%31)throw"invalid zlib data";if(32&e[1])throw"invalid zlib data: preset dictionaries not supported"};function y_(e,t){return m_((v_(e),e.subarray(2,-4)),t)}var x_="undefined"!=typeof TextDecoder&&new TextDecoder;try{x_.decode(g_,{stream:!0})}catch(oq){}function b_(e,t,n){const i=n.length-e-1;if(t>=n[i])return i-1;if(t<=n[e])return e;let r=e,s=i,a=Math.floor((r+s)/2);for(;t<n[a]||t>=n[a+1];)t<n[a]?s=a:r=a,a=Math.floor((r+s)/2);return a}function __(e,t,n,i){const r=[],s=[],a=[];r[0]=1;for(let o=1;o<=n;++o){s[o]=t-i[e+1-o],a[o]=i[e+o]-t;let n=0;for(let e=0;e<o;++e){const t=a[e+1],i=s[o-e],l=r[e]/(t+i);r[e]=n+t*l,n=i*l}r[o]=n}return r}function w_(e,t){let n=1;for(let r=2;r<=e;++r)n*=r;let i=1;for(let r=2;r<=t;++r)i*=r;for(let r=2;r<=e-t;++r)i*=r;return n/i}function S_(e,t,n,i,r){const s=function(e,t,n,i,r){const s=r<e?r:e,a=[],o=b_(e,i,t),l=function(e,t,n,i,r){const s=[];for(let d=0;d<=n;++d)s[d]=0;const a=[];for(let d=0;d<=i;++d)a[d]=s.slice(0);const o=[];for(let d=0;d<=n;++d)o[d]=s.slice(0);o[0][0]=1;const l=s.slice(0),c=s.slice(0);for(let d=1;d<=n;++d){l[d]=t-r[e+1-d],c[d]=r[e+d]-t;let n=0;for(let e=0;e<d;++e){const t=c[e+1],i=l[d-e];o[d][e]=t+i;const r=o[e][d-1]/o[d][e];o[e][d]=n+t*r,n=i*r}o[d][d]=n}for(let d=0;d<=n;++d)a[0][d]=o[d][n];for(let d=0;d<=n;++d){let e=0,t=1;const r=[];for(let i=0;i<=n;++i)r[i]=s.slice(0);r[0][0]=1;for(let s=1;s<=i;++s){let i=0;const l=d-s,c=n-s;d>=s&&(r[t][0]=r[e][0]/o[c+1][l],i=r[t][0]*o[l][c]);const u=d-1<=c?s-1:n-d;for(let n=l>=-1?1:-l;n<=u;++n)r[t][n]=(r[e][n]-r[e][n-1])/o[c+1][l+n],i+=r[t][n]*o[l+n][c];d<=c&&(r[t][s]=-r[e][s-1]/o[c+1][d],i+=r[t][s]*o[d][c]),a[s][d]=i;const h=e;e=t,t=h}}let u=n;for(let d=1;d<=i;++d){for(let e=0;e<=n;++e)a[d][e]*=u;u*=n-d}return a}(o,i,e,s,t),c=[];for(let u=0;u<n.length;++u){const e=n[u].clone(),t=e.w;e.x*=t,e.y*=t,e.z*=t,c[u]=e}for(let u=0;u<=s;++u){const t=c[o-e].clone().multiplyScalar(l[u][0]);for(let n=1;n<=e;++n)t.add(c[o-e+n].clone().multiplyScalar(l[u][n]));a[u]=t}for(let u=s+1;u<=r+1;++u)a[u]=new qo(0,0,0);return a}(e,t,n,i,r);return function(e){const t=e.length,n=[],i=[];for(let s=0;s<t;++s){const t=e[s];n[s]=new Po(t.x,t.y,t.z),i[s]=t.w}const r=[];for(let s=0;s<t;++s){const e=n[s].clone();for(let t=1;t<=s;++t)e.sub(r[s-t].clone().multiplyScalar(w_(s,t)*i[t]));r[s]=e.divideScalar(i[0])}return r}(s)}class M_ extends ff{constructor(e,t,n,i,r){super(),this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=i||0,this.endKnot=r||this.knots.length-1;for(let s=0;s<n.length;++s){const e=n[s];this.controlPoints[s]=new qo(e.x,e.y,e.z,e.w)}}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Po,n=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),i=function(e,t,n,i){const r=b_(e,i,t),s=__(r,i,e,t),a=new qo(0,0,0,0);for(let o=0;o<=e;++o){const t=n[r-e+o],i=s[o],l=t.w*i;a.x+=t.x*l,a.y+=t.y*l,a.z+=t.z*l,a.w+=t.w*i}return a}(this.degree,this.knots,this.controlPoints,n);return 1!==i.w&&i.divideScalar(i.w),t.set(i.x,i.y,i.z)}getTangent(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Po,n=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),i=S_(this.degree,this.knots,this.controlPoints,n,1);return t.copy(i[1]).normalize(),t}}let E_,T_,C_;class A_ extends vg{constructor(e){super(e)}load(e,t,n,i){const r=this,s=""===r.path?Xg.extractUrlBase(e):r.path,a=new bg(this.manager);a.setPath(r.path),a.setResponseType("arraybuffer"),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(e,(function(n){try{t(r.parse(n,s))}catch(oq){i?i(oq):console.error(oq),r.manager.itemError(e)}}),n,i)}parse(e,t){if(function(e){const t="Kaydara FBX Binary  \0";return e.byteLength>=t.length&&t===G_(e,0,t.length)}(e))E_=(new I_).parse(e);else{const t=G_(e);if(!function(e){const t=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let n=0;function i(t){const i=e[t-1];return e=e.slice(n+t),n++,i}for(let r=0;r<t.length;++r){if(i(1)===t[r])return!1}return!0}(t))throw new Error("THREE.FBXLoader: Unknown format.");if(D_(t)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+D_(t));E_=(new R_).parse(t)}const n=new Tg(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new P_(n,this.manager).parse(E_)}}class P_{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){T_=this.parseConnections();const e=this.parseImages(),t=this.parseTextures(e),n=this.parseMaterials(t),i=this.parseDeformers(),r=(new N_).parse(i);return this.parseScene(i,r,n),C_}parseConnections(){const e=new Map;if("Connections"in E_){E_.Connections.connections.forEach((function(t){const n=t[0],i=t[1],r=t[2];e.has(n)||e.set(n,{parents:[],children:[]});const s={ID:i,relationship:r};e.get(n).parents.push(s),e.has(i)||e.set(i,{parents:[],children:[]});const a={ID:n,relationship:r};e.get(i).children.push(a)}))}return e}parseImages(){const e={},t={};if("Video"in E_.Objects){const n=E_.Objects.Video;for(const i in n){const r=n[i];if(e[parseInt(i)]=r.RelativeFilename||r.Filename,"Content"in r){const e=r.Content instanceof ArrayBuffer&&r.Content.byteLength>0,s="string"===typeof r.Content&&""!==r.Content;if(e||s){const e=this.parseImage(n[i]);t[r.RelativeFilename||r.Filename]=e}}}}for(const n in e){const i=e[n];void 0!==t[i]?e[n]=t[i]:e[n]=e[n].split("\\").pop()}return e}parseImage(e){const t=e.Content,n=e.RelativeFilename||e.Filename,i=n.slice(n.lastIndexOf(".")+1).toLowerCase();let r;switch(i){case"bmp":r="image/bmp";break;case"jpg":case"jpeg":r="image/jpeg";break;case"png":r="image/png";break;case"tif":r="image/tiff";break;case"tga":null===this.manager.getHandler(".tga")&&console.warn("FBXLoader: TGA loader not found, skipping ",n),r="image/tga";break;default:return void console.warn('FBXLoader: Image type "'+i+'" is not supported.')}if("string"===typeof t)return"data:"+r+";base64,"+t;{const e=new Uint8Array(t);return window.URL.createObjectURL(new Blob([e],{type:r}))}}parseTextures(e){const t=new Map;if("Texture"in E_.Objects){const n=E_.Objects.Texture;for(const i in n){const r=this.parseTexture(n[i],e);t.set(parseInt(i),r)}}return t}parseTexture(e,t){const n=this.loadTexture(e,t);n.ID=e.id,n.name=e.attrName;const i=e.WrapModeU,r=e.WrapModeV,s=void 0!==i?i.value:0,a=void 0!==r?r.value:0;if(n.wrapS=0===s?Kr:Zr,n.wrapT=0===a?Kr:Zr,"Scaling"in e){const t=e.Scaling.value;n.repeat.x=t[0],n.repeat.y=t[1]}if("Translation"in e){const t=e.Translation.value;n.offset.x=t[0],n.offset.y=t[1]}return n}loadTexture(e,t){let n;const i=this.textureLoader.path,r=T_.get(e.id).children;let s;void 0!==r&&r.length>0&&void 0!==t[r[0].ID]&&(n=t[r[0].ID],0!==n.indexOf("blob:")&&0!==n.indexOf("data:")||this.textureLoader.setPath(void 0));const a=e.FileName.slice(-3).toLowerCase();if("tga"===a){const t=this.manager.getHandler(".tga");null===t?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),s=new Go):(t.setPath(this.textureLoader.path),s=t.load(n))}else"psd"===a?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),s=new Go):s=this.textureLoader.load(n);return this.textureLoader.setPath(i),s}parseMaterials(e){const t=new Map;if("Material"in E_.Objects){const n=E_.Objects.Material;for(const i in n){const r=this.parseMaterial(n[i],e);null!==r&&t.set(parseInt(i),r)}}return t}parseMaterial(e,t){const n=e.id,i=e.attrName;let r=e.ShadingModel;if("object"===typeof r&&(r=r.value),!T_.has(n))return null;const s=this.parseParameters(e,t,n);let a;switch(r.toLowerCase()){case"phong":a=new Bm;break;case"lambert":a=new Wm;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',r),a=new Bm}return a.setValues(s),a.name=i,a}parseParameters(e,t,n){const i={};e.BumpFactor&&(i.bumpScale=e.BumpFactor.value),e.Diffuse?i.color=(new mc).fromArray(e.Diffuse.value):!e.DiffuseColor||"Color"!==e.DiffuseColor.type&&"ColorRGB"!==e.DiffuseColor.type||(i.color=(new mc).fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(i.displacementScale=e.DisplacementFactor.value),e.Emissive?i.emissive=(new mc).fromArray(e.Emissive.value):!e.EmissiveColor||"Color"!==e.EmissiveColor.type&&"ColorRGB"!==e.EmissiveColor.type||(i.emissive=(new mc).fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(i.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(i.opacity=parseFloat(e.Opacity.value)),i.opacity<1&&(i.transparent=!0),e.ReflectionFactor&&(i.reflectivity=e.ReflectionFactor.value),e.Shininess&&(i.shininess=e.Shininess.value),e.Specular?i.specular=(new mc).fromArray(e.Specular.value):e.SpecularColor&&"Color"===e.SpecularColor.type&&(i.specular=(new mc).fromArray(e.SpecularColor.value));const r=this;return T_.get(n).children.forEach((function(e){const n=e.relationship;switch(n){case"Bump":i.bumpMap=r.getTexture(t,e.ID);break;case"Maya|TEX_ao_map":i.aoMap=r.getTexture(t,e.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":i.map=r.getTexture(t,e.ID),void 0!==i.map&&(i.map.encoding=wa);break;case"DisplacementColor":i.displacementMap=r.getTexture(t,e.ID);break;case"EmissiveColor":i.emissiveMap=r.getTexture(t,e.ID),void 0!==i.emissiveMap&&(i.emissiveMap.encoding=wa);break;case"NormalMap":case"Maya|TEX_normal_map":i.normalMap=r.getTexture(t,e.ID);break;case"ReflectionColor":i.envMap=r.getTexture(t,e.ID),void 0!==i.envMap&&(i.envMap.mapping=Xr,i.envMap.encoding=wa);break;case"SpecularColor":i.specularMap=r.getTexture(t,e.ID),void 0!==i.specularMap&&(i.specularMap.encoding=wa);break;case"TransparentColor":case"TransparencyFactor":i.alphaMap=r.getTexture(t,e.ID),i.transparent=!0;break;default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",n)}})),i}getTexture(e,t){return"LayeredTexture"in E_.Objects&&t in E_.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=T_.get(t).children[0].ID),e.get(t)}parseDeformers(){const e={},t={};if("Deformer"in E_.Objects){const n=E_.Objects.Deformer;for(const i in n){const r=n[i],s=T_.get(parseInt(i));if("Skin"===r.attrType){const t=this.parseSkeleton(s,n);t.ID=i,s.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),t.geometryID=s.parents[0].ID,e[i]=t}else if("BlendShape"===r.attrType){const e={id:i};e.rawTargets=this.parseMorphTargets(s,n),e.id=i,s.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[i]=e}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){const n=[];return e.children.forEach((function(e){const i=t[e.ID];if("Cluster"!==i.attrType)return;const r={ID:e.ID,indices:[],weights:[],transformLink:(new Tl).fromArray(i.TransformLink.a)};"Indexes"in i&&(r.indices=i.Indexes.a,r.weights=i.Weights.a),n.push(r)})),{rawBones:n,bones:[]}}parseMorphTargets(e,t){const n=[];for(let i=0;i<e.children.length;i++){const r=e.children[i],s=t[r.ID],a={name:s.attrName,initialWeight:s.DeformPercent,id:s.id,fullWeights:s.FullWeights.a};if("BlendShapeChannel"!==s.attrType)return;a.geoID=T_.get(parseInt(r.ID)).children.filter((function(e){return void 0===e.relationship}))[0].ID,n.push(a)}return n}parseScene(e,t,n){C_=new qh;const i=this.parseModels(e.skeletons,t,n),r=E_.Objects.Model,s=this;i.forEach((function(e){const t=r[e.ID];s.setLookAtProperties(e,t);T_.get(e.ID).parents.forEach((function(t){const n=i.get(t.ID);void 0!==n&&n.add(e)})),null===e.parent&&C_.add(e)})),this.bindSkeleton(e.skeletons,t,i),this.createAmbientLight(),C_.traverse((function(e){if(e.userData.transformData){e.parent&&(e.userData.transformData.parentMatrix=e.parent.matrix,e.userData.transformData.parentMatrixWorld=e.parent.matrixWorld);const t=V_(e.userData.transformData);e.applyMatrix4(t),e.updateWorldMatrix()}}));const a=(new k_).parse();1===C_.children.length&&C_.children[0].isGroup&&(C_.children[0].animations=a,C_=C_.children[0]),C_.animations=a}parseModels(e,t,n){const i=new Map,r=E_.Objects.Model;for(const s in r){const a=parseInt(s),o=r[s],l=T_.get(a);let c=this.buildSkeleton(l,e,a,o.attrName);if(!c){switch(o.attrType){case"Camera":c=this.createCamera(l);break;case"Light":c=this.createLight(l);break;case"Mesh":c=this.createMesh(l,t,n);break;case"NurbsCurve":c=this.createCurve(l,t);break;case"LimbNode":case"Root":c=new Rp;break;default:c=new qh}c.name=o.attrName?kv.sanitizeNodeName(o.attrName):"",c.ID=a}this.getTransformData(c,o),i.set(a,c)}return i}buildSkeleton(e,t,n,i){let r=null;return e.parents.forEach((function(e){for(const s in t){const a=t[s];a.rawBones.forEach((function(t,s){if(t.ID===e.ID){const e=r;r=new Rp,r.matrixWorld.copy(t.transformLink),r.name=i?kv.sanitizeNodeName(i):"",r.ID=n,a.bones[s]=r,null!==e&&r.add(e)}}))}})),r}createCamera(e){let t,n;if(e.children.forEach((function(e){const t=E_.Objects.NodeAttribute[e.ID];void 0!==t&&(n=t)})),void 0===n)t=new Zl;else{let e=0;void 0!==n.CameraProjectionType&&1===n.CameraProjectionType.value&&(e=1);let i=1;void 0!==n.NearPlane&&(i=n.NearPlane.value/1e3);let r=1e3;void 0!==n.FarPlane&&(r=n.FarPlane.value/1e3);let s=window.innerWidth,a=window.innerHeight;void 0!==n.AspectWidth&&void 0!==n.AspectHeight&&(s=n.AspectWidth.value,a=n.AspectHeight.value);const o=s/a;let l=45;void 0!==n.FieldOfView&&(l=n.FieldOfView.value);const c=n.FocalLength?n.FocalLength.value:null;switch(e){case 0:t=new lu(l,o,i,r),null!==c&&t.setFocalLength(c);break;case 1:t=new Iu(-s/2,s/2,a/2,-a/2,i,r);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+e+"."),t=new Zl}}return t}createLight(e){let t,n;if(e.children.forEach((function(e){const t=E_.Objects.NodeAttribute[e.ID];void 0!==t&&(n=t)})),void 0===n)t=new Zl;else{let e;e=void 0===n.LightType?0:n.LightType.value;let i=16777215;void 0!==n.Color&&(i=(new mc).fromArray(n.Color.value));let r=void 0===n.Intensity?1:n.Intensity.value/100;void 0!==n.CastLightOnObject&&0===n.CastLightOnObject.value&&(r=0);let s=0;void 0!==n.FarAttenuationEnd&&(s=void 0!==n.EnableFarAttenuation&&0===n.EnableFarAttenuation.value?0:n.FarAttenuationEnd.value);const a=1;switch(e){case 0:t=new Fg(i,r,s,a);break;case 1:t=new Bg(i,r);break;case 2:let e=Math.PI/3;void 0!==n.InnerAngle&&(e=bo.degToRad(n.InnerAngle.value));let o=0;void 0!==n.OuterAngle&&(o=bo.degToRad(n.OuterAngle.value),o=Math.max(o,1)),t=new Lg(i,r,s,e,o,a);break;default:console.warn("THREE.FBXLoader: Unknown light type "+n.LightType.value+", defaulting to a PointLight."),t=new Fg(i,r)}void 0!==n.CastShadows&&1===n.CastShadows.value&&(t.castShadow=!0)}return t}createMesh(e,t,n){let i,r=null,s=null;const a=[];return e.children.forEach((function(e){t.has(e.ID)&&(r=t.get(e.ID)),n.has(e.ID)&&a.push(n.get(e.ID))})),a.length>1?s=a:a.length>0?s=a[0]:(s=new Bm({color:13421772}),a.push(s)),"color"in r.attributes&&a.forEach((function(e){e.vertexColors=!0})),r.FBX_Deformer?(i=new kp(r,s),i.normalizeSkinWeights()):i=new $c(r,s),i}createCurve(e,t){const n=e.children.reduce((function(e,n){return t.has(n.ID)&&(e=t.get(n.ID)),e}),null),i=new Wp({color:3342591,linewidth:1});return new Kp(n,i)}getTransformData(e,t){const n={};"InheritType"in t&&(n.inheritType=parseInt(t.InheritType.value)),n.eulerOrder="RotationOrder"in t?H_(t.RotationOrder.value):"ZYX","Lcl_Translation"in t&&(n.translation=t.Lcl_Translation.value),"PreRotation"in t&&(n.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(n.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(n.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(n.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(n.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(n.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(n.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(n.rotationPivot=t.RotationPivot.value),e.userData.transformData=n}setLookAtProperties(e,t){if("LookAtProperty"in t){T_.get(e.ID).children.forEach((function(t){if("LookAtProperty"===t.relationship){const n=E_.Objects.Model[t.ID];if("Lcl_Translation"in n){const t=n.Lcl_Translation.value;void 0!==e.target?(e.target.position.fromArray(t),C_.add(e.target)):e.lookAt((new Po).fromArray(t))}}}))}}bindSkeleton(e,t,n){const i=this.parsePoseNodes();for(const r in e){const s=e[r];T_.get(parseInt(s.ID)).parents.forEach((function(e){if(t.has(e.ID)){const t=e.ID;T_.get(t).parents.forEach((function(e){if(n.has(e.ID)){n.get(e.ID).bind(new Dp(s.bones),i[e.ID])}}))}}))}}parsePoseNodes(){const e={};if("Pose"in E_.Objects){const t=E_.Objects.Pose;for(const n in t)if("BindPose"===t[n].attrType&&t[n].NbPoseNodes>0){const i=t[n].PoseNode;Array.isArray(i)?i.forEach((function(t){e[t.Node]=(new Tl).fromArray(t.Matrix.a)})):e[i.Node]=(new Tl).fromArray(i.Matrix.a)}}return e}createAmbientLight(){if("GlobalSettings"in E_&&"AmbientColor"in E_.GlobalSettings){const e=E_.GlobalSettings.AmbientColor.value,t=e[0],n=e[1],i=e[2];if(0!==t||0!==n||0!==i){const e=new mc(t,n,i);C_.add(new Vg(e,1))}}}}class N_{constructor(){this.negativeMaterialIndices=!1}parse(e){const t=new Map;if("Geometry"in E_.Objects){const n=E_.Objects.Geometry;for(const i in n){const r=T_.get(parseInt(i)),s=this.parseGeometry(r,n[i],e);t.set(parseInt(i),s)}}return!0===this.negativeMaterialIndices&&console.warn("THREE.FBXLoader: The FBX file contains invalid (negative) material indices. The asset might not render as expected."),t}parseGeometry(e,t,n){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,n);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,n){const i=n.skeletons,r=[],s=e.parents.map((function(e){return E_.Objects.Model[e.ID]}));if(0===s.length)return;const a=e.children.reduce((function(e,t){return void 0!==i[t.ID]&&(e=i[t.ID]),e}),null);e.children.forEach((function(e){void 0!==n.morphTargets[e.ID]&&r.push(n.morphTargets[e.ID])}));const o=s[0],l={};"RotationOrder"in o&&(l.eulerOrder=H_(o.RotationOrder.value)),"InheritType"in o&&(l.inheritType=parseInt(o.InheritType.value)),"GeometricTranslation"in o&&(l.translation=o.GeometricTranslation.value),"GeometricRotation"in o&&(l.rotation=o.GeometricRotation.value),"GeometricScaling"in o&&(l.scale=o.GeometricScaling.value);const c=V_(l);return this.genGeometry(t,a,r,c)}genGeometry(e,t,n,i){const r=new zc;e.attrName&&(r.name=e.attrName);const s=this.parseGeoNode(e,t),a=this.genBuffers(s),o=new Pc(a.vertex,3);if(o.applyMatrix4(i),r.setAttribute("position",o),a.colors.length>0&&r.setAttribute("color",new Pc(a.colors,3)),t&&(r.setAttribute("skinIndex",new Ec(a.weightsIndices,4)),r.setAttribute("skinWeight",new Pc(a.vertexWeights,4)),r.FBX_Deformer=t),a.normal.length>0){const e=(new wo).getNormalMatrix(i),t=new Pc(a.normal,3);t.applyNormalMatrix(e),r.setAttribute("normal",t)}if(a.uvs.forEach((function(e,t){let n="uv"+(t+1).toString();0===t&&(n="uv"),r.setAttribute(n,new Pc(a.uvs[t],2))})),s.material&&"AllSame"!==s.material.mappingType){let e=a.materialIndex[0],t=0;if(a.materialIndex.forEach((function(n,i){n!==e&&(r.addGroup(t,i-t,e),e=n,t=i)})),r.groups.length>0){const t=r.groups[r.groups.length-1],n=t.start+t.count;n!==a.materialIndex.length&&r.addGroup(n,a.materialIndex.length-n,e)}0===r.groups.length&&r.addGroup(0,a.materialIndex.length,a.materialIndex[0])}return this.addMorphTargets(r,e,n,i),r}parseGeoNode(e,t){const n={};if(n.vertexPositions=void 0!==e.Vertices?e.Vertices.a:[],n.vertexIndices=void 0!==e.PolygonVertexIndex?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(n.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(n.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(n.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){n.uv=[];let t=0;for(;e.LayerElementUV[t];)e.LayerElementUV[t].UV&&n.uv.push(this.parseUVs(e.LayerElementUV[t])),t++}return n.weightTable={},null!==t&&(n.skeleton=t,t.rawBones.forEach((function(e,t){e.indices.forEach((function(i,r){void 0===n.weightTable[i]&&(n.weightTable[i]=[]),n.weightTable[i].push({id:t,weight:e.weights[r]})}))}))),n}genBuffers(e){const t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let n=0,i=0,r=!1,s=[],a=[],o=[],l=[],c=[],u=[];const d=this;return e.vertexIndices.forEach((function(h,p){let f,m=!1;h<0&&(h=~h,m=!0);let g=[],v=[];if(s.push(3*h,3*h+1,3*h+2),e.color){const t=F_(p,n,h,e.color);o.push(t[0],t[1],t[2])}if(e.skeleton){if(void 0!==e.weightTable[h]&&e.weightTable[h].forEach((function(e){v.push(e.weight),g.push(e.id)})),v.length>4){r||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),r=!0);const e=[0,0,0,0],t=[0,0,0,0];v.forEach((function(n,i){let r=n,s=g[i];t.forEach((function(t,n,i){if(r>t){i[n]=r,r=t;const a=e[n];e[n]=s,s=a}}))})),g=e,v=t}for(;v.length<4;)v.push(0),g.push(0);for(let e=0;e<4;++e)c.push(v[e]),u.push(g[e])}if(e.normal){const t=F_(p,n,h,e.normal);a.push(t[0],t[1],t[2])}e.material&&"AllSame"!==e.material.mappingType&&(f=F_(p,n,h,e.material)[0],f<0&&(d.negativeMaterialIndices=!0,f=0)),e.uv&&e.uv.forEach((function(e,t){const i=F_(p,n,h,e);void 0===l[t]&&(l[t]=[]),l[t].push(i[0]),l[t].push(i[1])})),i++,m&&(i>4&&console.warn("THREE.FBXLoader: Polygons with more than four sides are not supported. Make sure to triangulate the geometry during export."),d.genFace(t,e,s,f,a,o,l,c,u,i),n++,i=0,s=[],a=[],o=[],l=[],c=[],u=[])})),t}genFace(e,t,n,i,r,s,a,o,l,c){for(let u=2;u<c;u++)e.vertex.push(t.vertexPositions[n[0]]),e.vertex.push(t.vertexPositions[n[1]]),e.vertex.push(t.vertexPositions[n[2]]),e.vertex.push(t.vertexPositions[n[3*(u-1)]]),e.vertex.push(t.vertexPositions[n[3*(u-1)+1]]),e.vertex.push(t.vertexPositions[n[3*(u-1)+2]]),e.vertex.push(t.vertexPositions[n[3*u]]),e.vertex.push(t.vertexPositions[n[3*u+1]]),e.vertex.push(t.vertexPositions[n[3*u+2]]),t.skeleton&&(e.vertexWeights.push(o[0]),e.vertexWeights.push(o[1]),e.vertexWeights.push(o[2]),e.vertexWeights.push(o[3]),e.vertexWeights.push(o[4*(u-1)]),e.vertexWeights.push(o[4*(u-1)+1]),e.vertexWeights.push(o[4*(u-1)+2]),e.vertexWeights.push(o[4*(u-1)+3]),e.vertexWeights.push(o[4*u]),e.vertexWeights.push(o[4*u+1]),e.vertexWeights.push(o[4*u+2]),e.vertexWeights.push(o[4*u+3]),e.weightsIndices.push(l[0]),e.weightsIndices.push(l[1]),e.weightsIndices.push(l[2]),e.weightsIndices.push(l[3]),e.weightsIndices.push(l[4*(u-1)]),e.weightsIndices.push(l[4*(u-1)+1]),e.weightsIndices.push(l[4*(u-1)+2]),e.weightsIndices.push(l[4*(u-1)+3]),e.weightsIndices.push(l[4*u]),e.weightsIndices.push(l[4*u+1]),e.weightsIndices.push(l[4*u+2]),e.weightsIndices.push(l[4*u+3])),t.color&&(e.colors.push(s[0]),e.colors.push(s[1]),e.colors.push(s[2]),e.colors.push(s[3*(u-1)]),e.colors.push(s[3*(u-1)+1]),e.colors.push(s[3*(u-1)+2]),e.colors.push(s[3*u]),e.colors.push(s[3*u+1]),e.colors.push(s[3*u+2])),t.material&&"AllSame"!==t.material.mappingType&&(e.materialIndex.push(i),e.materialIndex.push(i),e.materialIndex.push(i)),t.normal&&(e.normal.push(r[0]),e.normal.push(r[1]),e.normal.push(r[2]),e.normal.push(r[3*(u-1)]),e.normal.push(r[3*(u-1)+1]),e.normal.push(r[3*(u-1)+2]),e.normal.push(r[3*u]),e.normal.push(r[3*u+1]),e.normal.push(r[3*u+2])),t.uv&&t.uv.forEach((function(t,n){void 0===e.uvs[n]&&(e.uvs[n]=[]),e.uvs[n].push(a[n][0]),e.uvs[n].push(a[n][1]),e.uvs[n].push(a[n][2*(u-1)]),e.uvs[n].push(a[n][2*(u-1)+1]),e.uvs[n].push(a[n][2*u]),e.uvs[n].push(a[n][2*u+1])}))}addMorphTargets(e,t,n,i){if(0===n.length)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const r=this;n.forEach((function(n){n.rawTargets.forEach((function(n){const s=E_.Objects.Geometry[n.geoID];void 0!==s&&r.genMorphGeometry(e,t,s,i,n.name)}))}))}genMorphGeometry(e,t,n,i,r){const s=void 0!==t.PolygonVertexIndex?t.PolygonVertexIndex.a:[],a=void 0!==n.Vertices?n.Vertices.a:[],o=void 0!==n.Indexes?n.Indexes.a:[],l=3*e.attributes.position.count,c=new Float32Array(l);for(let p=0;p<o.length;p++){const e=3*o[p];c[e]=a[3*p],c[e+1]=a[3*p+1],c[e+2]=a[3*p+2]}const u={vertexIndices:s,vertexPositions:c},d=this.genBuffers(u),h=new Pc(d.vertex,3);h.name=r||n.attrName,h.applyMatrix4(i),e.morphAttributes.position.push(h)}parseNormals(e){const t=e.MappingInformationType,n=e.ReferenceInformationType,i=e.Normals.a;let r=[];return"IndexToDirect"===n&&("NormalIndex"in e?r=e.NormalIndex.a:"NormalsIndex"in e&&(r=e.NormalsIndex.a)),{dataSize:3,buffer:i,indices:r,mappingType:t,referenceType:n}}parseUVs(e){const t=e.MappingInformationType,n=e.ReferenceInformationType,i=e.UV.a;let r=[];return"IndexToDirect"===n&&(r=e.UVIndex.a),{dataSize:2,buffer:i,indices:r,mappingType:t,referenceType:n}}parseVertexColors(e){const t=e.MappingInformationType,n=e.ReferenceInformationType,i=e.Colors.a;let r=[];return"IndexToDirect"===n&&(r=e.ColorIndex.a),{dataSize:4,buffer:i,indices:r,mappingType:t,referenceType:n}}parseMaterialIndices(e){const t=e.MappingInformationType,n=e.ReferenceInformationType;if("NoMappingInformation"===t)return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:n};const i=e.Materials.a,r=[];for(let s=0;s<i.length;++s)r.push(s);return{dataSize:1,buffer:i,indices:r,mappingType:t,referenceType:n}}parseNurbsGeometry(e){const t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new zc;const n=t-1,i=e.KnotVector.a,r=[],s=e.Points.a;for(let c=0,u=s.length;c<u;c+=4)r.push((new qo).fromArray(s,c));let a,o;if("Closed"===e.Form)r.push(r[0]);else if("Periodic"===e.Form){a=n,o=i.length-1-a;for(let e=0;e<n;++e)r.push(r[e])}const l=new M_(n,i,r,a,o).getPoints(12*r.length);return(new zc).setFromPoints(l)}}class k_{parse(){const e=[],t=this.parseClips();if(void 0!==t)for(const n in t){const i=t[n],r=this.addClip(i);e.push(r)}return e}parseClips(){if(void 0===E_.Objects.AnimationCurve)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){const e=E_.Objects.AnimationCurveNode,t=new Map;for(const n in e){const i=e[n];if(null!==i.attrName.match(/S|R|T|DeformPercent/)){const e={id:i.id,attr:i.attrName,curves:{}};t.set(e.id,e)}}return t}parseAnimationCurves(e){const t=E_.Objects.AnimationCurve;for(const n in t){const i={id:t[n].id,times:t[n].KeyTime.a.map(O_),values:t[n].KeyValueFloat.a},r=T_.get(i.id);if(void 0!==r){const t=r.parents[0].ID,n=r.parents[0].relationship;n.match(/X/)?e.get(t).curves.x=i:n.match(/Y/)?e.get(t).curves.y=i:n.match(/Z/)?e.get(t).curves.z=i:n.match(/d|DeformPercent/)&&e.has(t)&&(e.get(t).curves.morph=i)}}}parseAnimationLayers(e){const t=E_.Objects.AnimationLayer,n=new Map;for(const i in t){const t=[],r=T_.get(parseInt(i));if(void 0!==r){r.children.forEach((function(n,i){if(e.has(n.ID)){const r=e.get(n.ID);if(void 0!==r.curves.x||void 0!==r.curves.y||void 0!==r.curves.z){if(void 0===t[i]){const e=T_.get(n.ID).parents.filter((function(e){return void 0!==e.relationship}))[0].ID;if(void 0!==e){const r=E_.Objects.Model[e.toString()];if(void 0===r)return void console.warn("THREE.FBXLoader: Encountered a unused curve.",n);const s={modelName:r.attrName?kv.sanitizeNodeName(r.attrName):"",ID:r.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};C_.traverse((function(e){e.ID===r.id&&(s.transform=e.matrix,e.userData.transformData&&(s.eulerOrder=e.userData.transformData.eulerOrder))})),s.transform||(s.transform=new Tl),"PreRotation"in r&&(s.preRotation=r.PreRotation.value),"PostRotation"in r&&(s.postRotation=r.PostRotation.value),t[i]=s}}t[i]&&(t[i][r.attr]=r)}else if(void 0!==r.curves.morph){if(void 0===t[i]){const e=T_.get(n.ID).parents.filter((function(e){return void 0!==e.relationship}))[0].ID,r=T_.get(e).parents[0].ID,s=T_.get(r).parents[0].ID,a=T_.get(s).parents[0].ID,o=E_.Objects.Model[a],l={modelName:o.attrName?kv.sanitizeNodeName(o.attrName):"",morphName:E_.Objects.Deformer[e].attrName};t[i]=l}t[i][r.attr]=r}}})),n.set(parseInt(i),t)}}return n}parseAnimStacks(e){const t=E_.Objects.AnimationStack,n={};for(const i in t){const r=T_.get(parseInt(i)).children;r.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const s=e.get(r[0].ID);n[i]={name:t[i].attrName,layer:s}}return n}addClip(e){let t=[];const n=this;return e.layer.forEach((function(e){t=t.concat(n.generateTracks(e))})),new hg(e.name,-1,t)}generateTracks(e){const t=[];let n=new Po,i=new Ao,r=new Po;if(e.transform&&e.transform.decompose(n,i,r),n=n.toArray(),i=(new Dl).setFromQuaternion(i,e.eulerOrder).toArray(),r=r.toArray(),void 0!==e.T&&Object.keys(e.T.curves).length>0){const i=this.generateVectorTrack(e.modelName,e.T.curves,n,"position");void 0!==i&&t.push(i)}if(void 0!==e.R&&Object.keys(e.R.curves).length>0){const n=this.generateRotationTrack(e.modelName,e.R.curves,i,e.preRotation,e.postRotation,e.eulerOrder);void 0!==n&&t.push(n)}if(void 0!==e.S&&Object.keys(e.S.curves).length>0){const n=this.generateVectorTrack(e.modelName,e.S.curves,r,"scale");void 0!==n&&t.push(n)}if(void 0!==e.DeformPercent){const n=this.generateMorphTrack(e);void 0!==n&&t.push(n)}return t}generateVectorTrack(e,t,n,i){const r=this.getTimesForAllAxes(t),s=this.getKeyframeTrackValues(r,t,n);return new dg(e+"."+i,r,s)}generateRotationTrack(e,t,n,i,r,s){void 0!==t.x&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map(bo.degToRad)),void 0!==t.y&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map(bo.degToRad)),void 0!==t.z&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map(bo.degToRad));const a=this.getTimesForAllAxes(t),o=this.getKeyframeTrackValues(a,t,n);void 0!==i&&((i=i.map(bo.degToRad)).push(s),i=(new Dl).fromArray(i),i=(new Ao).setFromEuler(i)),void 0!==r&&((r=r.map(bo.degToRad)).push(s),r=(new Dl).fromArray(r),r=(new Ao).setFromEuler(r).invert());const l=new Ao,c=new Dl,u=[];for(let d=0;d<o.length;d+=3)c.set(o[d],o[d+1],o[d+2],s),l.setFromEuler(c),void 0!==i&&l.premultiply(i),void 0!==r&&l.multiply(r),l.toArray(u,d/3*4);return new cg(e+".quaternion",a,u)}generateMorphTrack(e){const t=e.DeformPercent.curves.morph,n=t.values.map((function(e){return e/100})),i=C_.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new og(e.modelName+".morphTargetInfluences["+i+"]",t.times,n)}getTimesForAllAxes(e){let t=[];if(void 0!==e.x&&(t=t.concat(e.x.times)),void 0!==e.y&&(t=t.concat(e.y.times)),void 0!==e.z&&(t=t.concat(e.z.times)),t=t.sort((function(e,t){return e-t})),t.length>1){let e=1,n=t[0];for(let i=1;i<t.length;i++){const r=t[i];r!==n&&(t[e]=r,n=r,e++)}t=t.slice(0,e)}return t}getKeyframeTrackValues(e,t,n){const i=n,r=[];let s=-1,a=-1,o=-1;return e.forEach((function(e){if(t.x&&(s=t.x.times.indexOf(e)),t.y&&(a=t.y.times.indexOf(e)),t.z&&(o=t.z.times.indexOf(e)),-1!==s){const e=t.x.values[s];r.push(e),i[0]=e}else r.push(i[0]);if(-1!==a){const e=t.y.values[a];r.push(e),i[1]=e}else r.push(i[1]);if(-1!==o){const e=t.z.values[o];r.push(e),i[2]=e}else r.push(i[2])})),r}interpolateRotations(e){for(let t=1;t<e.values.length;t++){const n=e.values[t-1],i=e.values[t]-n,r=Math.abs(i);if(r>=180){const s=r/180,a=i/s;let o=n+a;const l=e.times[t-1],c=(e.times[t]-l)/s;let u=l+c;const d=[],h=[];for(;u<e.times[t];)d.push(u),u+=c,h.push(o),o+=a;e.times=q_(e.times,t,d),e.values=q_(e.values,t,h)}}}}class R_{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new j_,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const t=this,n=e.split(/[\r\n]+/);return n.forEach((function(e,i){const r=e.match(/^[\s\t]*;/),s=e.match(/^[\s\t]*$/);if(r||s)return;const a=e.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),o=e.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),l=e.match("^\\t{"+(t.currentIndent-1)+"}}");a?t.parseNodeBegin(e,a):o?t.parseNodeProperty(e,o,n[++i]):l?t.popStack():e.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(e)})),this.allNodes}parseNodeBegin(e,t){const n=t[1].trim().replace(/^"/,"").replace(/"$/,""),i=t[2].split(",").map((function(e){return e.trim().replace(/^"/,"").replace(/"$/,"")})),r={name:n},s=this.parseNodeAttr(i),a=this.getCurrentNode();0===this.currentIndent?this.allNodes.add(n,r):n in a?("PoseNode"===n?a.PoseNode.push(r):void 0!==a[n].id&&(a[n]={},a[n][a[n].id]=a[n]),""!==s.id&&(a[n][s.id]=r)):"number"===typeof s.id?(a[n]={},a[n][s.id]=r):"Properties70"!==n&&(a[n]="PoseNode"===n?[r]:r),"number"===typeof s.id&&(r.id=s.id),""!==s.name&&(r.attrName=s.name),""!==s.type&&(r.attrType=s.type),this.pushStack(r)}parseNodeAttr(e){let t=e[0];""!==e[0]&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let n="",i="";return e.length>1&&(n=e[1].replace(/^(\w+)::/,""),i=e[2]),{id:t,name:n,type:i}}parseNodeProperty(e,t,n){let i=t[1].replace(/^"/,"").replace(/"$/,"").trim(),r=t[2].replace(/^"/,"").replace(/"$/,"").trim();"Content"===i&&","===r&&(r=n.replace(/"/g,"").replace(/,$/,"").trim());const s=this.getCurrentNode();if("Properties70"!==s.name){if("C"===i){const e=r.split(",").slice(1),t=parseInt(e[0]),n=parseInt(e[1]);let a=r.split(",").slice(3);a=a.map((function(e){return e.trim().replace(/^"/,"")})),i="connections",r=[t,n],function(e,t){for(let n=0,i=e.length,r=t.length;n<r;n++,i++)e[i]=t[n]}(r,a),void 0===s[i]&&(s[i]=[])}"Node"===i&&(s.id=r),i in s&&Array.isArray(s[i])?s[i].push(r):"a"!==i?s[i]=r:s.a=r,this.setCurrentProp(s,i),"a"===i&&","!==r.slice(-1)&&(s.a=W_(r))}else this.parseNodeSpecialProperty(e,i,r)}parseNodePropertyContinued(e){const t=this.getCurrentNode();t.a+=e,","!==e.slice(-1)&&(t.a=W_(t.a))}parseNodeSpecialProperty(e,t,n){const i=n.split('",').map((function(e){return e.trim().replace(/^\"/,"").replace(/\s/,"_")})),r=i[0],s=i[1],a=i[2],o=i[3];let l=i[4];switch(s){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":l=parseFloat(l);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":l=W_(l)}this.getPrevNode()[r]={type:s,type2:a,flag:o,value:l},this.setCurrentProp(this.getPrevNode(),r)}}class I_{parse(e){const t=new L_(e);t.skip(23);const n=t.getUint32();if(n<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+n);const i=new j_;for(;!this.endOfContent(t);){const e=this.parseNode(t,n);null!==e&&i.add(e.name,e)}return i}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){const n={},i=t>=7500?e.getUint64():e.getUint32(),r=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();const s=e.getUint8(),a=e.getString(s);if(0===i)return null;const o=[];for(let d=0;d<r;d++)o.push(this.parseProperty(e));const l=o.length>0?o[0]:"",c=o.length>1?o[1]:"",u=o.length>2?o[2]:"";for(n.singleProperty=1===r&&e.getOffset()===i;i>e.getOffset();){const i=this.parseNode(e,t);null!==i&&this.parseSubNode(a,n,i)}return n.propertyList=o,"number"===typeof l&&(n.id=l),""!==c&&(n.attrName=c),""!==u&&(n.attrType=u),""!==a&&(n.name=a),n}parseSubNode(e,t,n){if(!0===n.singleProperty){const e=n.propertyList[0];Array.isArray(e)?(t[n.name]=n,n.a=e):t[n.name]=e}else if("Connections"===e&&"C"===n.name){const e=[];n.propertyList.forEach((function(t,n){0!==n&&e.push(t)})),void 0===t.connections&&(t.connections=[]),t.connections.push(e)}else if("Properties70"===n.name){Object.keys(n).forEach((function(e){t[e]=n[e]}))}else if("Properties70"===e&&"P"===n.name){let e=n.propertyList[0],i=n.propertyList[1];const r=n.propertyList[2],s=n.propertyList[3];let a;0===e.indexOf("Lcl ")&&(e=e.replace("Lcl ","Lcl_")),0===i.indexOf("Lcl ")&&(i=i.replace("Lcl ","Lcl_")),a="Color"===i||"ColorRGB"===i||"Vector"===i||"Vector3D"===i||0===i.indexOf("Lcl_")?[n.propertyList[4],n.propertyList[5],n.propertyList[6]]:n.propertyList[4],t[e]={type:i,type2:r,flag:s,value:a}}else void 0===t[n.name]?"number"===typeof n.id?(t[n.name]={},t[n.name][n.id]=n):t[n.name]=n:"PoseNode"===n.name?(Array.isArray(t[n.name])||(t[n.name]=[t[n.name]]),t[n.name].push(n)):void 0===t[n.name][n.id]&&(t[n.name][n.id]=n)}parseProperty(e){const t=e.getString(1);let n;switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return n=e.getUint32(),e.getArrayBuffer(n);case"S":return n=e.getUint32(),e.getString(n);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const i=e.getUint32(),r=e.getUint32(),s=e.getUint32();if(0===r)switch(t){case"b":case"c":return e.getBooleanArray(i);case"d":return e.getFloat64Array(i);case"f":return e.getFloat32Array(i);case"i":return e.getInt32Array(i);case"l":return e.getInt64Array(i)}const a=y_(new Uint8Array(e.getArrayBuffer(s))),o=new L_(a.buffer);switch(t){case"b":case"c":return o.getBooleanArray(i);case"d":return o.getFloat64Array(i);case"f":return o.getFloat32Array(i);case"i":return o.getInt32Array(i);case"l":return o.getInt64Array(i)}break;default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}}class L_{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=void 0===t||t,this._textDecoder=new TextDecoder}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return 1===(1&this.getUint8())}getBooleanArray(e){const t=[];for(let n=0;n<e;n++)t.push(this.getBoolean());return t}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getInt32());return t}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),2147483648&t?(t=4294967295&~t,e=4294967295&~e,4294967295===e&&(t=t+1&4294967295),e=e+1&4294967295,-(4294967296*t+e)):4294967296*t+e}getInt64Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),4294967296*t+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getFloat32());return t}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getFloat64());return t}getArrayBuffer(e){const t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){const t=this.offset;let n=new Uint8Array(this.dv.buffer,t,e);this.skip(e);const i=n.indexOf(0);return i>=0&&(n=new Uint8Array(this.dv.buffer,t,i)),this._textDecoder.decode(n)}}class j_{add(e,t){this[e]=t}}function D_(e){const t=e.match(/FBXVersion: (\d+)/);if(t){return parseInt(t[1])}throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function O_(e){return e/46186158e3}const z_=[];function F_(e,t,n,i){let r;switch(i.mappingType){case"ByPolygonVertex":r=e;break;case"ByPolygon":r=t;break;case"ByVertice":r=n;break;case"AllSame":r=i.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+i.mappingType)}"IndexToDirect"===i.referenceType&&(r=i.indices[r]);const s=r*i.dataSize,a=s+i.dataSize;return function(e,t,n,i){for(let r=n,s=0;r<i;r++,s++)e[s]=t[r];return e}(z_,i.buffer,s,a)}const U_=new Dl,B_=new Po;function V_(e){const t=new Tl,n=new Tl,i=new Tl,r=new Tl,s=new Tl,a=new Tl,o=new Tl,l=new Tl,c=new Tl,u=new Tl,d=new Tl,h=new Tl,p=e.inheritType?e.inheritType:0;if(e.translation&&t.setPosition(B_.fromArray(e.translation)),e.preRotation){const t=e.preRotation.map(bo.degToRad);t.push(e.eulerOrder||Dl.DEFAULT_ORDER),n.makeRotationFromEuler(U_.fromArray(t))}if(e.rotation){const t=e.rotation.map(bo.degToRad);t.push(e.eulerOrder||Dl.DEFAULT_ORDER),i.makeRotationFromEuler(U_.fromArray(t))}if(e.postRotation){const t=e.postRotation.map(bo.degToRad);t.push(e.eulerOrder||Dl.DEFAULT_ORDER),r.makeRotationFromEuler(U_.fromArray(t)),r.invert()}e.scale&&s.scale(B_.fromArray(e.scale)),e.scalingOffset&&o.setPosition(B_.fromArray(e.scalingOffset)),e.scalingPivot&&a.setPosition(B_.fromArray(e.scalingPivot)),e.rotationOffset&&l.setPosition(B_.fromArray(e.rotationOffset)),e.rotationPivot&&c.setPosition(B_.fromArray(e.rotationPivot)),e.parentMatrixWorld&&(d.copy(e.parentMatrix),u.copy(e.parentMatrixWorld));const f=n.clone().multiply(i).multiply(r),m=new Tl;m.extractRotation(u);const g=new Tl;g.copyPosition(u);const v=g.clone().invert().multiply(u),y=m.clone().invert().multiply(v),x=s,b=new Tl;if(0===p)b.copy(m).multiply(f).multiply(y).multiply(x);else if(1===p)b.copy(m).multiply(y).multiply(f).multiply(x);else{const e=(new Tl).scale((new Po).setFromMatrixScale(d)).clone().invert(),t=y.clone().multiply(e);b.copy(m).multiply(f).multiply(t).multiply(x)}const _=c.clone().invert(),w=a.clone().invert();let S=t.clone().multiply(l).multiply(c).multiply(n).multiply(i).multiply(r).multiply(_).multiply(o).multiply(a).multiply(s).multiply(w);const M=(new Tl).copyPosition(S),E=u.clone().multiply(M);return h.copyPosition(E),S=h.clone().multiply(b),S.premultiply(u.invert()),S}function H_(e){const t=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return 6===(e=e||0)?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),t[0]):t[e]}function W_(e){return e.split(",").map((function(e){return parseFloat(e)}))}function G_(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=e.byteLength),(new TextDecoder).decode(new Uint8Array(e,t,n))}function q_(e,t,n){return e.slice(0,t).concat(n).concat(e.slice(t))}const X_=["children","eps","style","className","prepend","center","fullscreen","portal","distanceFactor","sprite","transform","occlude","onOcclude","castShadow","receiveShadow","material","geometry","zIndexRange","calculatePosition","as","wrapperClass","pointerEvents"],Y_=new Po,J_=new Po,K_=new Po;function Z_(e,t,n){const i=Y_.setFromMatrixPosition(e.matrixWorld);i.project(t);const r=n.width/2,s=n.height/2;return[i.x*r+r,-i.y*s+s]}const Q_=e=>Math.abs(e)<1e-10?0:e;function $_(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i="matrix3d(";for(let r=0;16!==r;r++)i+=Q_(t[r]*e.elements[r])+(15!==r?",":")");return n+i}const ew=(tw=[1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1],e=>$_(e,tw));var tw;const nw=(e,t)=>{return $_(e,[1/(n=t),1/n,1/n,1,-1/n,-1/n,-1/n,-1,1/n,1/n,1/n,1,1,1,1,1],"translate(-50%,-50%)");var n};const iw=r.forwardRef(((e,t)=>{let{children:n,eps:i=.001,style:s,className:o,prepend:l,center:c,fullscreen:u,portal:d,distanceFactor:h,sprite:p=!1,transform:f=!1,occlude:m,onOcclude:g,castShadow:v,receiveShadow:y,material:x,geometry:b,zIndexRange:_=[16777271,0],calculatePosition:w=Z_,as:S="div",wrapperClass:M,pointerEvents:E="auto"}=e,T=Hi(e,X_);const{gl:C,camera:A,scene:P,size:N,raycaster:k,events:R,viewport:I}=tb(),[L]=r.useState((()=>document.createElement(S))),j=r.useRef(),D=r.useRef(null),O=r.useRef(0),z=r.useRef([0,0]),F=r.useRef(null),U=r.useRef(null),B=(null==d?void 0:d.current)||R.connected||C.domElement.parentNode,V=r.useRef(null),H=r.useRef(!1),W=r.useMemo((()=>m&&"blending"!==m||Array.isArray(m)&&m.length&&function(e){return e&&"object"===typeof e&&"current"in e}(m[0])),[m]);r.useLayoutEffect((()=>{const e=C.domElement;m&&"blending"===m?(e.style.zIndex="".concat(Math.floor(_[0]/2)),e.style.position="absolute",e.style.pointerEvents="none"):(e.style.zIndex=null,e.style.position=null,e.style.pointerEvents=null)}),[m]),r.useLayoutEffect((()=>{if(D.current){const e=j.current=a.createRoot(L);if(P.updateMatrixWorld(),f)L.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const e=w(D.current,A,N);L.style.cssText="position:absolute;top:0;left:0;transform:translate3d(".concat(e[0],"px,").concat(e[1],"px,0);transform-origin:0 0;")}return B&&(l?B.prepend(L):B.appendChild(L)),()=>{B&&B.removeChild(L),e.unmount()}}}),[B,f]),r.useLayoutEffect((()=>{M&&(L.className=M)}),[M]);const G=r.useMemo((()=>f?{position:"absolute",top:0,left:0,width:N.width,height:N.height,transformStyle:"preserve-3d",pointerEvents:"none"}:He(He({position:"absolute",transform:c?"translate3d(-50%,-50%,0)":"none"},u&&{top:-N.height/2,left:-N.width/2,width:N.width,height:N.height}),s)),[s,c,u,N,f]),q=r.useMemo((()=>({position:"absolute",pointerEvents:E})),[E]);r.useLayoutEffect((()=>{var e,i;(H.current=!1,f)?null==(e=j.current)||e.render(r.createElement("div",{ref:F,style:G},r.createElement("div",{ref:U,style:q},r.createElement("div",{ref:t,className:o,style:s,children:n})))):null==(i=j.current)||i.render(r.createElement("div",{ref:t,style:G,className:o,children:n}))}));const X=r.useRef(!0);nb((e=>{if(D.current){A.updateMatrixWorld(),D.current.updateWorldMatrix(!0,!1);const e=f?z.current:w(D.current,A,N);if(f||Math.abs(O.current-A.zoom)>i||Math.abs(z.current[0]-e[0])>i||Math.abs(z.current[1]-e[1])>i){const t=function(e,t){const n=Y_.setFromMatrixPosition(e.matrixWorld),i=J_.setFromMatrixPosition(t.matrixWorld),r=n.sub(i),s=t.getWorldDirection(K_);return r.angleTo(s)>Math.PI/2}(D.current,A);let n=!1;W&&("blending"!==m?n=[P]:Array.isArray(m)&&(n=m.map((e=>e.current))));const i=X.current;if(n){const e=function(e,t,n,i){const r=Y_.setFromMatrixPosition(e.matrixWorld),s=r.clone();s.project(t),n.setFromCamera(s,t);const a=n.intersectObjects(i,!0);if(a.length){const e=a[0].distance;return r.distanceTo(n.ray.origin)<e}return!0}(D.current,A,k,n);X.current=e&&!t}else X.current=!t;i!==X.current&&(g?g(!X.current):L.style.display=X.current?"block":"none");const r=Math.floor(_[0]/2),s=m?W?[_[0],r]:[r-1,0]:_;if(L.style.zIndex="".concat(function(e,t,n){if(t instanceof lu||t instanceof Iu){const i=Y_.setFromMatrixPosition(e.matrixWorld),r=J_.setFromMatrixPosition(t.matrixWorld),s=i.distanceTo(r),a=(n[1]-n[0])/(t.far-t.near),o=n[1]-a*t.far;return Math.round(a*s+o)}}(D.current,A,s)),f){const[e,t]=[N.width/2,N.height/2],n=A.projectionMatrix.elements[5]*t,{isOrthographicCamera:i,top:r,left:s,bottom:a,right:o}=A,l=ew(A.matrixWorldInverse),c=i?"scale(".concat(n,")translate(").concat(Q_(-(o+s)/2),"px,").concat(Q_((r+a)/2),"px)"):"translateZ(".concat(n,"px)");let u=D.current.matrixWorld;p&&(u=A.matrixWorldInverse.clone().transpose().copyPosition(u).scale(D.current.scale),u.elements[3]=u.elements[7]=u.elements[11]=0,u.elements[15]=1),L.style.width=N.width+"px",L.style.height=N.height+"px",L.style.perspective=i?"":"".concat(n,"px"),F.current&&U.current&&(F.current.style.transform="".concat(c).concat(l,"translate(").concat(e,"px,").concat(t,"px)"),U.current.style.transform=nw(u,1/((h||10)/400)))}else{const t=void 0===h?1:function(e,t){if(t instanceof Iu)return t.zoom;if(t instanceof lu){const n=Y_.setFromMatrixPosition(e.matrixWorld),i=J_.setFromMatrixPosition(t.matrixWorld),r=t.fov*Math.PI/180,s=n.distanceTo(i);return 1/(2*Math.tan(r/2)*s)}return 1}(D.current,A)*h;L.style.transform="translate3d(".concat(e[0],"px,").concat(e[1],"px,0) scale(").concat(t,")")}z.current=e,O.current=A.zoom}}if(!W&&V.current&&!H.current)if(f){if(F.current){const e=F.current.children[0];if(null!=e&&e.clientWidth&&null!=e&&e.clientHeight){const{isOrthographicCamera:t}=A;if(t||b)T.scale&&(Array.isArray(T.scale)?T.scale instanceof Po?V.current.scale.copy(T.scale.clone().divideScalar(1)):V.current.scale.set(1/T.scale[0],1/T.scale[1],1/T.scale[2]):V.current.scale.setScalar(1/T.scale));else{const t=(h||10)/400,n=e.clientWidth*t,i=e.clientHeight*t;V.current.scale.set(n,i,1)}H.current=!0}}}else{const t=L.children[0];if(null!=t&&t.clientWidth&&null!=t&&t.clientHeight){const e=1/I.factor,n=t.clientWidth*e,i=t.clientHeight*e;V.current.scale.set(n,i,1),H.current=!0}V.current.lookAt(e.camera.position)}}));const Y=r.useMemo((()=>({vertexShader:f?void 0:'\n          /*\n            This shader is from the THREE\'s SpriteMaterial.\n            We need to turn the backing plane into a Sprite\n            (make it always face the camera) if "transfrom" \n            is false. \n          */\n          #include <common>\n\n          void main() {\n            vec2 center = vec2(0., 1.);\n            float rotation = 0.0;\n            \n            // This is somewhat arbitrary, but it seems to work well\n            // Need to figure out how to derive this dynamically if it even matters\n            float size = 0.03;\n\n            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n            vec2 scale;\n            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\n            bool isPerspective = isPerspectiveMatrix( projectionMatrix );\n            if ( isPerspective ) scale *= - mvPosition.z;\n\n            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;\n            vec2 rotatedPosition;\n            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n            mvPosition.xy += rotatedPosition;\n\n            gl_Position = projectionMatrix * mvPosition;\n          }\n      ',fragmentShader:"\n        void main() {\n          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n        }\n      "})),[f]);return r.createElement("group",mb({},T,{ref:D}),m&&!W&&r.createElement("mesh",{castShadow:v,receiveShadow:y,ref:V},b||r.createElement("planeGeometry",null),x||r.createElement("shaderMaterial",{side:ir,vertexShader:Y.vertexShader,fragmentShader:Y.fragmentShader})))}));var rw=Object.defineProperty,sw=(e,t,n)=>(((e,t,n)=>{t in e?rw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!==typeof t?t+"":t,n),n);class aw{constructor(){sw(this,"_listeners")}addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,i=n.length;t<i;t++)n[t].call(this,e);e.target=null}}}var ow=Object.defineProperty,lw=(e,t,n)=>(((e,t,n)=>{t in e?ow(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!==typeof t?t+"":t,n),n);const cw=new El,uw=new gu,dw=Math.cos(Math.PI/180*70),hw=(e,t)=>(e%t+t)%t;class pw extends aw{constructor(e,t){super(),lw(this,"object"),lw(this,"domElement"),lw(this,"enabled",!0),lw(this,"target",new Po),lw(this,"minDistance",0),lw(this,"maxDistance",1/0),lw(this,"minZoom",0),lw(this,"maxZoom",1/0),lw(this,"minPolarAngle",0),lw(this,"maxPolarAngle",Math.PI),lw(this,"minAzimuthAngle",-1/0),lw(this,"maxAzimuthAngle",1/0),lw(this,"enableDamping",!1),lw(this,"dampingFactor",.05),lw(this,"enableZoom",!0),lw(this,"zoomSpeed",1),lw(this,"enableRotate",!0),lw(this,"rotateSpeed",1),lw(this,"enablePan",!0),lw(this,"panSpeed",1),lw(this,"screenSpacePanning",!0),lw(this,"keyPanSpeed",7),lw(this,"zoomToCursor",!1),lw(this,"autoRotate",!1),lw(this,"autoRotateSpeed",2),lw(this,"reverseOrbit",!1),lw(this,"reverseHorizontalOrbit",!1),lw(this,"reverseVerticalOrbit",!1),lw(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),lw(this,"mouseButtons",{LEFT:Gi.ROTATE,MIDDLE:Gi.DOLLY,RIGHT:Gi.PAN}),lw(this,"touches",{ONE:qi.ROTATE,TWO:qi.DOLLY_PAN}),lw(this,"target0"),lw(this,"position0"),lw(this,"zoom0"),lw(this,"_domElementKeyEvents",null),lw(this,"getPolarAngle"),lw(this,"getAzimuthalAngle"),lw(this,"setPolarAngle"),lw(this,"setAzimuthalAngle"),lw(this,"getDistance"),lw(this,"getZoomScale"),lw(this,"listenToKeyEvents"),lw(this,"stopListenToKeyEvents"),lw(this,"saveState"),lw(this,"reset"),lw(this,"update"),lw(this,"connect"),lw(this,"dispose"),lw(this,"dollyIn"),lw(this,"dollyOut"),lw(this,"getScale"),lw(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>c.phi,this.getAzimuthalAngle=()=>c.theta,this.setPolarAngle=e=>{let t=hw(e,2*Math.PI),i=c.phi;i<0&&(i+=2*Math.PI),t<0&&(t+=2*Math.PI);let r=Math.abs(t-i);2*Math.PI-r<r&&(t<i?t+=2*Math.PI:i+=2*Math.PI),u.phi=t-i,n.update()},this.setAzimuthalAngle=e=>{let t=hw(e,2*Math.PI),i=c.theta;i<0&&(i+=2*Math.PI),t<0&&(t+=2*Math.PI);let r=Math.abs(t-i);2*Math.PI-r<r&&(t<i?t+=2*Math.PI:i+=2*Math.PI),u.theta=t-i,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=e=>{e.addEventListener("keydown",K),this._domElementKeyEvents=e},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",K),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(i),n.update(),o=a.NONE},this.update=(()=>{const t=new Po,r=new Po(0,1,0),s=(new Ao).setFromUnitVectors(e.up,r),p=s.clone().invert(),f=new Po,m=new Ao,g=2*Math.PI;return function(){const v=n.object.position;s.setFromUnitVectors(e.up,r),p.copy(s).invert(),t.copy(v).sub(n.target),t.applyQuaternion(s),c.setFromVector3(t),n.autoRotate&&o===a.NONE&&A(2*Math.PI/60/60*n.autoRotateSpeed),n.enableDamping?(c.theta+=u.theta*n.dampingFactor,c.phi+=u.phi*n.dampingFactor):(c.theta+=u.theta,c.phi+=u.phi);let y=n.minAzimuthAngle,x=n.maxAzimuthAngle;isFinite(y)&&isFinite(x)&&(y<-Math.PI?y+=g:y>Math.PI&&(y-=g),x<-Math.PI?x+=g:x>Math.PI&&(x-=g),c.theta=y<=x?Math.max(y,Math.min(x,c.theta)):c.theta>(y+x)/2?Math.max(y,c.theta):Math.min(x,c.theta)),c.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,c.phi)),c.makeSafe(),!0===n.enableDamping?n.target.addScaledVector(h,n.dampingFactor):n.target.add(h),n.zoomToCursor&&M||n.object.isOrthographicCamera?c.radius=O(c.radius):c.radius=O(c.radius*d),t.setFromSpherical(c),t.applyQuaternion(p),v.copy(n.target).add(t),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),!0===n.enableDamping?(u.theta*=1-n.dampingFactor,u.phi*=1-n.dampingFactor,h.multiplyScalar(1-n.dampingFactor)):(u.set(0,0,0),h.set(0,0,0));let b=!1;if(n.zoomToCursor&&M){let i=null;if(n.object instanceof lu&&n.object.isPerspectiveCamera){const e=t.length();i=O(e*d);const r=e-i;n.object.position.addScaledVector(w,r),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const e=new Po(S.x,S.y,0);e.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/d)),n.object.updateProjectionMatrix(),b=!0;const r=new Po(S.x,S.y,0);r.unproject(n.object),n.object.position.sub(r).add(e),n.object.updateMatrixWorld(),i=t.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;null!==i&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(i).add(n.object.position):(cw.origin.copy(n.object.position),cw.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(cw.direction))<dw?e.lookAt(n.target):(uw.setFromNormalAndCoplanarPoint(n.object.up,n.target),cw.intersectPlane(uw,n.target))))}else n.object instanceof Iu&&n.object.isOrthographicCamera&&(b=1!==d,b&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/d)),n.object.updateProjectionMatrix()));return d=1,M=!1,!!(b||f.distanceToSquared(n.object.position)>l||8*(1-m.dot(n.object.quaternion))>l)&&(n.dispatchEvent(i),f.copy(n.object.position),m.copy(n.object.quaternion),b=!1,!0)}})(),this.connect=e=>{n.domElement=e,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",Z),n.domElement.addEventListener("pointerdown",q),n.domElement.addEventListener("pointercancel",Y),n.domElement.addEventListener("wheel",J)},this.dispose=()=>{var e,t,i,r,s,a;n.domElement&&(n.domElement.style.touchAction="auto"),null==(e=n.domElement)||e.removeEventListener("contextmenu",Z),null==(t=n.domElement)||t.removeEventListener("pointerdown",q),null==(i=n.domElement)||i.removeEventListener("pointercancel",Y),null==(r=n.domElement)||r.removeEventListener("wheel",J),null==(s=n.domElement)||s.ownerDocument.removeEventListener("pointermove",X),null==(a=n.domElement)||a.ownerDocument.removeEventListener("pointerup",Y),null!==n._domElementKeyEvents&&n._domElementKeyEvents.removeEventListener("keydown",K)};const n=this,i={type:"change"},r={type:"start"},s={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let o=a.NONE;const l=1e-6,c=new Wv,u=new Wv;let d=1;const h=new Po,p=new _o,f=new _o,m=new _o,g=new _o,v=new _o,y=new _o,x=new _o,b=new _o,_=new _o,w=new Po,S=new _o;let M=!1;const E=[],T={};function C(){return Math.pow(.95,n.zoomSpeed)}function A(e){n.reverseOrbit||n.reverseHorizontalOrbit?u.theta+=e:u.theta-=e}function P(e){n.reverseOrbit||n.reverseVerticalOrbit?u.phi+=e:u.phi-=e}const N=(()=>{const e=new Po;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),h.add(e)}})(),k=(()=>{const e=new Po;return function(t,i){!0===n.screenSpacePanning?e.setFromMatrixColumn(i,1):(e.setFromMatrixColumn(i,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),h.add(e)}})(),R=(()=>{const e=new Po;return function(t,i){const r=n.domElement;if(r&&n.object instanceof lu&&n.object.isPerspectiveCamera){const s=n.object.position;e.copy(s).sub(n.target);let a=e.length();a*=Math.tan(n.object.fov/2*Math.PI/180),N(2*t*a/r.clientHeight,n.object.matrix),k(2*i*a/r.clientHeight,n.object.matrix)}else r&&n.object instanceof Iu&&n.object.isOrthographicCamera?(N(t*(n.object.right-n.object.left)/n.object.zoom/r.clientWidth,n.object.matrix),k(i*(n.object.top-n.object.bottom)/n.object.zoom/r.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function I(e){n.object instanceof lu&&n.object.isPerspectiveCamera||n.object instanceof Iu&&n.object.isOrthographicCamera?d=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function L(e){I(d/e)}function j(e){I(d*e)}function D(e){if(!n.zoomToCursor||!n.domElement)return;M=!0;const t=n.domElement.getBoundingClientRect(),i=e.clientX-t.left,r=e.clientY-t.top,s=t.width,a=t.height;S.x=i/s*2-1,S.y=-r/a*2+1,w.set(S.x,S.y,1).unproject(n.object).sub(n.object.position).normalize()}function O(e){return Math.max(n.minDistance,Math.min(n.maxDistance,e))}function z(e){p.set(e.clientX,e.clientY)}function F(e){g.set(e.clientX,e.clientY)}function U(){if(1==E.length)p.set(E[0].pageX,E[0].pageY);else{const e=.5*(E[0].pageX+E[1].pageX),t=.5*(E[0].pageY+E[1].pageY);p.set(e,t)}}function B(){if(1==E.length)g.set(E[0].pageX,E[0].pageY);else{const e=.5*(E[0].pageX+E[1].pageX),t=.5*(E[0].pageY+E[1].pageY);g.set(e,t)}}function V(){const e=E[0].pageX-E[1].pageX,t=E[0].pageY-E[1].pageY,n=Math.sqrt(e*e+t*t);x.set(0,n)}function H(e){if(1==E.length)f.set(e.pageX,e.pageY);else{const t=$(e),n=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);f.set(n,i)}m.subVectors(f,p).multiplyScalar(n.rotateSpeed);const t=n.domElement;t&&(A(2*Math.PI*m.x/t.clientHeight),P(2*Math.PI*m.y/t.clientHeight)),p.copy(f)}function W(e){if(1==E.length)v.set(e.pageX,e.pageY);else{const t=$(e),n=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);v.set(n,i)}y.subVectors(v,g).multiplyScalar(n.panSpeed),R(y.x,y.y),g.copy(v)}function G(e){const t=$(e),i=e.pageX-t.x,r=e.pageY-t.y,s=Math.sqrt(i*i+r*r);b.set(0,s),_.set(0,Math.pow(b.y/x.y,n.zoomSpeed)),L(_.y),x.copy(b)}function q(e){var t,i;!1!==n.enabled&&(0===E.length&&(null==(t=n.domElement)||t.ownerDocument.addEventListener("pointermove",X),null==(i=n.domElement)||i.ownerDocument.addEventListener("pointerup",Y)),function(e){E.push(e)}(e),"touch"===e.pointerType?function(e){switch(Q(e),E.length){case 1:switch(n.touches.ONE){case qi.ROTATE:if(!1===n.enableRotate)return;U(),o=a.TOUCH_ROTATE;break;case qi.PAN:if(!1===n.enablePan)return;B(),o=a.TOUCH_PAN;break;default:o=a.NONE}break;case 2:switch(n.touches.TWO){case qi.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;n.enableZoom&&V(),n.enablePan&&B(),o=a.TOUCH_DOLLY_PAN;break;case qi.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;n.enableZoom&&V(),n.enableRotate&&U(),o=a.TOUCH_DOLLY_ROTATE;break;default:o=a.NONE}break;default:o=a.NONE}o!==a.NONE&&n.dispatchEvent(r)}(e):function(e){let t;switch(e.button){case 0:t=n.mouseButtons.LEFT;break;case 1:t=n.mouseButtons.MIDDLE;break;case 2:t=n.mouseButtons.RIGHT;break;default:t=-1}switch(t){case Gi.DOLLY:if(!1===n.enableZoom)return;!function(e){D(e),x.set(e.clientX,e.clientY)}(e),o=a.DOLLY;break;case Gi.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enablePan)return;F(e),o=a.PAN}else{if(!1===n.enableRotate)return;z(e),o=a.ROTATE}break;case Gi.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enableRotate)return;z(e),o=a.ROTATE}else{if(!1===n.enablePan)return;F(e),o=a.PAN}break;default:o=a.NONE}o!==a.NONE&&n.dispatchEvent(r)}(e))}function X(e){!1!==n.enabled&&("touch"===e.pointerType?function(e){switch(Q(e),o){case a.TOUCH_ROTATE:if(!1===n.enableRotate)return;H(e),n.update();break;case a.TOUCH_PAN:if(!1===n.enablePan)return;W(e),n.update();break;case a.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){n.enableZoom&&G(e),n.enablePan&&W(e)}(e),n.update();break;case a.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(e){n.enableZoom&&G(e),n.enableRotate&&H(e)}(e),n.update();break;default:o=a.NONE}}(e):function(e){if(!1===n.enabled)return;switch(o){case a.ROTATE:if(!1===n.enableRotate)return;!function(e){f.set(e.clientX,e.clientY),m.subVectors(f,p).multiplyScalar(n.rotateSpeed);const t=n.domElement;t&&(A(2*Math.PI*m.x/t.clientHeight),P(2*Math.PI*m.y/t.clientHeight)),p.copy(f),n.update()}(e);break;case a.DOLLY:if(!1===n.enableZoom)return;!function(e){b.set(e.clientX,e.clientY),_.subVectors(b,x),_.y>0?L(C()):_.y<0&&j(C()),x.copy(b),n.update()}(e);break;case a.PAN:if(!1===n.enablePan)return;!function(e){v.set(e.clientX,e.clientY),y.subVectors(v,g).multiplyScalar(n.panSpeed),R(y.x,y.y),g.copy(v),n.update()}(e)}}(e))}function Y(e){var t,i,r;!function(e){delete T[e.pointerId];for(let t=0;t<E.length;t++)if(E[t].pointerId==e.pointerId)return void E.splice(t,1)}(e),0===E.length&&(null==(t=n.domElement)||t.releasePointerCapture(e.pointerId),null==(i=n.domElement)||i.ownerDocument.removeEventListener("pointermove",X),null==(r=n.domElement)||r.ownerDocument.removeEventListener("pointerup",Y)),n.dispatchEvent(s),o=a.NONE}function J(e){!1===n.enabled||!1===n.enableZoom||o!==a.NONE&&o!==a.ROTATE||(e.preventDefault(),n.dispatchEvent(r),function(e){D(e),e.deltaY<0?j(C()):e.deltaY>0&&L(C()),n.update()}(e),n.dispatchEvent(s))}function K(e){!1!==n.enabled&&!1!==n.enablePan&&function(e){let t=!1;switch(e.code){case n.keys.UP:R(0,n.keyPanSpeed),t=!0;break;case n.keys.BOTTOM:R(0,-n.keyPanSpeed),t=!0;break;case n.keys.LEFT:R(n.keyPanSpeed,0),t=!0;break;case n.keys.RIGHT:R(-n.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),n.update())}(e)}function Z(e){!1!==n.enabled&&e.preventDefault()}function Q(e){let t=T[e.pointerId];void 0===t&&(t=new _o,T[e.pointerId]=t),t.set(e.pageX,e.pageY)}function $(e){const t=e.pointerId===E[0].pointerId?E[1]:E[0];return T[t.pointerId]}this.dollyIn=function(){j(arguments.length>0&&void 0!==arguments[0]?arguments[0]:C()),n.update()},this.dollyOut=function(){L(arguments.length>0&&void 0!==arguments[0]?arguments[0]:C()),n.update()},this.getScale=()=>d,this.setScale=e=>{I(e),n.update()},this.getZoomScale=()=>C(),void 0!==t&&this.connect(t),this.update()}}const fw=["makeDefault","camera","regress","domElement","enableDamping","keyEvents","onChange","onStart","onEnd"],mw=r.forwardRef(((e,t)=>{let{makeDefault:n,camera:i,regress:s,domElement:a,enableDamping:o=!0,keyEvents:l=!1,onChange:c,onStart:u,onEnd:d}=e,h=Hi(e,fw);const p=tb((e=>e.invalidate)),f=tb((e=>e.camera)),m=tb((e=>e.gl)),g=tb((e=>e.events)),v=tb((e=>e.setEvents)),y=tb((e=>e.set)),x=tb((e=>e.get)),b=tb((e=>e.performance)),_=i||f,w=a||g.connected||m.domElement,S=r.useMemo((()=>new pw(_)),[_]);return nb((()=>{S.enabled&&S.update()}),-1),r.useEffect((()=>(l&&S.connect(!0===l?w:l),S.connect(w),()=>{S.dispose()})),[l,w,s,S,p]),r.useEffect((()=>{const e=e=>{p(),s&&b.regress(),c&&c(e)},t=e=>{u&&u(e)},n=e=>{d&&d(e)};return S.addEventListener("change",e),S.addEventListener("start",t),S.addEventListener("end",n),()=>{S.removeEventListener("start",t),S.removeEventListener("end",n),S.removeEventListener("change",e)}}),[c,u,d,S,p,v]),r.useEffect((()=>{if(n){const e=x().controls;return y({controls:S}),()=>y({controls:e})}}),[n,S]),r.createElement("primitive",mb({ref:t,object:S,enableDamping:o},h))})),gw=new Map,vw=r.memo((()=>(0,De.jsxs)("mesh",{children:[(0,De.jsx)("boxGeometry",{args:[1,1,1]}),(0,De.jsx)("meshStandardMaterial",{color:"gray",wireframe:!0})]})));class yw extends r.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.error("Error loading 3D model:",e,t)}render(){return this.state.hasError?this.props.fallback:this.props.children}}const xw=e=>{let{onRotateLeft:t,onRotateRight:n,onRotateFront:i}=e;return(0,De.jsx)(iw,{position:[0,-2,0],center:!0,children:(0,De.jsxs)("div",{className:"rotation-controls",children:[(0,De.jsx)("button",{onClick:t,className:"rotation-btn left-btn",children:"\u27f2"}),(0,De.jsx)("button",{onClick:i,className:"rotation-btn front-btn",children:"\u27f3"}),(0,De.jsx)("button",{onClick:n,className:"rotation-btn right-btn",children:"\u27f3"})]})})};function bw(e){let{url:t,animation:n,position:i,scale:s,rotation:a,initialFacingFront:o=!0}=e;const l=(0,r.useRef)(),[c,u]=(0,r.useState)(null),[d,h]=(0,r.useState)(null),[p,f]=(0,r.useState)(null),[m,g]=(0,r.useState)(null),{camera:v}=tb(),y=e=>{d&&(d.rotation.y+=e)},x=()=>{d&&(d.rotation.y=o?Math.PI:0)};return(0,r.useEffect)((()=>{l.current&&(l.current.rotateLeft=()=>y(-Math.PI/4),l.current.rotateRight=()=>y(Math.PI/4),l.current.faceFront=x)}),[d,o]),(0,r.useEffect)((()=>{if(gw.has(t)){const e=gw.get(t).clone();return void h(e)}return(new A_).load(t,(e=>{gw.set(t,e.clone()),h(e)}),(e=>{if(e.lengthComputable&&e.loaded%(e.total/4)<1){const t=Math.round(e.loaded/e.total*100);console.log("".concat(t,"% loaded"))}}),(e=>{console.error("Error loading model:",e),u(e)})),()=>{m&&m.stop(),p&&p.stopAllAction()}}),[t]),(0,r.useEffect)((()=>{if(d&&n&&d.animations&&d.animations.length>0){const e=p||new jv(d);p||f(e),m&&m.stop();const t=d.animations.find((e=>e.name.toLowerCase()===n.toLowerCase()))||d.animations[0];if(t){e.stopAllAction();const n=e.clipAction(t);n.reset().fadeIn(.5).play(),g(n)}}}),[d,n,p,m]),nb(((e,t)=>{if(p){const e=Math.min(t,.05);p.update(e)}})),c?(0,De.jsxs)("mesh",{children:[(0,De.jsx)("sphereGeometry",{args:[1,16,16]}),(0,De.jsx)("meshStandardMaterial",{color:"red"})]}):d?(d.position.set(i[0],i[1],i[2]),d.scale.set(s,s,s),d.initialRotationApplied||(d.rotation.set(a[0],o?Math.PI:a[1],a[2]),d.initialRotationApplied=!0),d.shadowsApplied||(d.traverse((e=>{e.isMesh&&(e.castShadow=!0,e.receiveShadow=!0,e.material&&(e.material.needsUpdate=!0,e.material.flatShading=!0))})),d.shadowsApplied=!0),(0,De.jsxs)("group",{ref:l,children:[(0,De.jsx)("primitive",{object:d}),(0,De.jsx)(xw,{onRotateLeft:()=>y(-Math.PI/4),onRotateRight:()=>y(Math.PI/4),onRotateFront:x})]})):null}const _w=r.memo((()=>(0,De.jsxs)("mesh",{rotation:[-Math.PI/2,0,0],position:[0,-.5,0],receiveShadow:!0,children:[(0,De.jsx)("planeGeometry",{args:[10,10]}),(0,De.jsx)("shadowMaterial",{opacity:.2})]}))),ww=r.memo((e=>{let{shadowMapSize:t=512}=e;return(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)("ambientLight",{intensity:.5}),(0,De.jsx)("directionalLight",{position:[10,10,5],intensity:1,castShadow:!0,"shadow-mapSize-width":t,"shadow-mapSize-height":t})]})})),Sw=e=>{let{url:t="/assets/models/character.fbx",animation:n="idle",position:i=[0,0,0],scale:s=.01,rotation:a=[0,0,0],style:o={},onClick:l,enableControls:c=!0,showGround:u=!0,backgroundColor:d=null,highPerformance:h=!1,shadowMapSize:p=1024,initialFacingFront:f=!0}=e;const m=(0,r.useRef)(),g=(0,r.useMemo)((()=>({shadows:!0,camera:{position:[0,1,2],fov:50},gl:{antialias:!h,alpha:!d,preserveDrawingBuffer:!0,powerPreference:"high-performance",precision:h?"lowp":"highp"},style:d?{background:d}:void 0,frameloop:"none"===n?"demand":"always"})),[d,h,n]),v=h?Math.min(p,512):p;return(0,r.useEffect)((()=>{const e=document.createElement("style");return e.textContent="\n      .rotation-controls {\n        display: flex;\n        gap: 10px;\n        background: rgba(0, 0, 0, 0.2);\n        padding: 5px;\n        border-radius: 20px;\n      }\n      .rotation-btn {\n        width: 30px;\n        height: 30px;\n        border-radius: 50%;\n        background: white;\n        border: none;\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        font-size: 16px;\n        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);\n      }\n      .rotation-btn:hover {\n        background: #f0f0f0;\n      }\n      .left-btn {\n        transform: scaleX(-1);\n      }\n    ",document.head.appendChild(e),()=>{document.head.removeChild(e)}}),[]),(0,De.jsx)("div",{className:"character-3d-container",style:He({width:"100%",height:"100%"},o),onClick:l,children:(0,De.jsxs)(Vb,He(He({},g),{},{children:[(0,De.jsx)(ww,{shadowMapSize:v}),u&&(0,De.jsx)(_w,{}),(0,De.jsx)(yw,{fallback:(0,De.jsxs)("mesh",{children:[(0,De.jsx)("sphereGeometry",{args:[1,16,16]}),(0,De.jsx)("meshStandardMaterial",{color:"red",wireframe:!0})]}),children:(0,De.jsx)(r.Suspense,{fallback:(0,De.jsx)(vw,{}),children:(0,De.jsx)(bw,{ref:m,url:t,animation:n,position:i,scale:s,rotation:a,initialFacingFront:f})})}),c&&(0,De.jsx)(mw,{makeDefault:!0,enableDamping:!h,enableZoom:!0,enablePan:!0,enableRotate:!0,minDistance:1,maxDistance:10})]}))})},Mw=r.memo(Sw),Ew=()=>{const[e,t]=(0,r.useState)("idle"),n=(0,r.useRef)(null);return(0,r.useEffect)((()=>{const e=setTimeout((()=>{n.current&&n.current.faceFront&&n.current.faceFront()}),500);return()=>clearTimeout(e)}),[]),(0,De.jsxs)("section",{className:"hero-section",children:[(0,De.jsxs)("div",{className:"hero-content",children:[(0,De.jsxs)("h1",{className:"hero-title",children:[(0,De.jsx)("span",{className:"gradient-text",children:"Simplifiez"})," vos rendez-vous professionnels"]}),(0,De.jsx)("p",{className:"hero-subtitle",children:"La plateforme innovante qui transforme la gestion des rendez-vous pour les professionnels et leurs clients"}),(0,De.jsxs)("div",{className:"hero-buttons",children:[(0,De.jsxs)(Ie,{to:"/register",className:"btn btn-primary",children:["Cr\xe9er un compte",(0,De.jsx)("span",{className:"btn-arrow",children:"\u2192"})]}),(0,De.jsx)(Ie,{to:"/login",className:"btn btn-secondary",children:"Se connecter"})]}),(0,De.jsxs)("div",{className:"hero-features",children:[(0,De.jsxs)("div",{className:"hero-feature",children:[(0,De.jsx)("div",{className:"feature-icon",children:(0,De.jsx)("span",{role:"img","aria-label":"Validation",children:"\u2713"})}),(0,De.jsx)("span",{children:"Prise de RDV simplifi\xe9e"})]}),(0,De.jsxs)("div",{className:"hero-feature",children:[(0,De.jsx)("div",{className:"feature-icon",children:(0,De.jsx)("span",{role:"img","aria-label":"Validation",children:"\u2713"})}),(0,De.jsx)("span",{children:"Disponibilit\xe9 en temps r\xe9el"})]}),(0,De.jsxs)("div",{className:"hero-feature",children:[(0,De.jsx)("div",{className:"feature-icon",children:(0,De.jsx)("span",{role:"img","aria-label":"Validation",children:"\u2713"})}),(0,De.jsx)("span",{children:"Notification en temps r\xe9el"})]})]})]}),(0,De.jsxs)("div",{className:"hero-visual",children:[(0,De.jsx)("div",{className:"hero-image",children:(0,De.jsx)("img",{src:"/assets/images/hero-illustration.svg",alt:"Plateforme de rendez-vous"})}),(0,De.jsxs)("div",{className:"floating-elements",children:[(0,De.jsxs)("div",{className:"floating-card card-1",children:[(0,De.jsx)("div",{className:"card-icon",children:(0,De.jsx)("span",{role:"img","aria-label":"Calendrier",children:"\ud83d\udcc5"})}),(0,De.jsx)("div",{className:"card-text",children:"Rendez-vous confirm\xe9"})]}),(0,De.jsxs)("div",{className:"floating-card card-2",children:[(0,De.jsx)("div",{className:"card-icon",children:(0,De.jsx)("span",{role:"img","aria-label":"Horloge",children:"\u23f0"})}),(0,De.jsx)("div",{className:"card-text",children:"Notification en temps r\xe9el"})]}),(0,De.jsxs)("div",{className:"floating-card card-3",children:[(0,De.jsx)("div",{className:"card-icon",children:(0,De.jsx)("span",{role:"img","aria-label":"Validation",children:"\u2705"})}),(0,De.jsx)("div",{className:"card-text",children:"Disponibilit\xe9 mise \xe0 jour"})]})]})]}),(0,De.jsx)("div",{className:"person-3d-header",children:(0,De.jsx)(Mw,{ref:n,url:"/assets/models/character.fbx",animation:e,position:[0,-1.2,0],scale:.012,rotation:[0,0,0],enableControls:!0,initialFacingFront:!1,onClick:()=>{t("dance"),setTimeout((()=>{t("idle")}),3e3)},style:{width:"100%",height:"100%"},showGround:!1})}),(0,De.jsx)("div",{className:"hero-wave",children:(0,De.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1440 320",children:(0,De.jsx)("path",{fill:"#ffffff",fillOpacity:"1",d:"M0,96L48,112C96,128,192,160,288,160C384,160,480,128,576,122.7C672,117,768,139,864,149.3C960,160,1056,160,1152,138.7C1248,117,1344,75,1392,53.3L1440,32L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"})})})]})};var Tw={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Cw=["color","size","strokeWidth","absoluteStrokeWidth","children"],Aw=(e,t)=>{const n=(0,r.forwardRef)(((n,i)=>{let{color:s="currentColor",size:a=24,strokeWidth:o=2,absoluteStrokeWidth:l,children:c}=n,u=Hi(n,Cw);return(0,r.createElement)("svg",He(He({ref:i},Tw),{},{width:a,height:a,stroke:s,strokeWidth:l?24*Number(o)/Number(a):o,className:"lucide lucide-".concat((d=e,d.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()))},u),[...t.map((e=>{let[t,n]=e;return(0,r.createElement)(t,n)})),...(Array.isArray(c)?c:[c])||[]]);var d}));return n.displayName="".concat(e),n},Pw=Aw("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Nw=Aw("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),kw=Aw("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Rw=Aw("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),Iw=Aw("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]),Lw=Aw("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),jw=()=>{const e=[{icon:(0,De.jsx)(Pw,{size:32}),title:"Gestion intelligente des rendez-vous",description:"Planifiez, modifiez et annulez vos rendez-vous en quelques clics avec synchronisation automatique sur tous vos appareils."},{icon:(0,De.jsx)(Nw,{size:32}),title:"Disponibilit\xe9 en temps r\xe9el",description:"Consultez les disponibilit\xe9s des professionnels en temps r\xe9el et r\xe9servez instantan\xe9ment sans attente ni appel t\xe9l\xe9phonique."},{icon:(0,De.jsx)(kw,{size:32}),title:"Profils personnalis\xe9s",description:"Cr\xe9ez votre profil d\xe9taill\xe9, que vous soyez utilisateur ou professionnel, avec toutes vos informations importantes."},{icon:(0,De.jsx)(Rw,{size:32}),title:"Notifications automatiques",description:"Recevez des rappels automatiques par email ou SMS pour ne jamais manquer un rendez-vous important."},{icon:(0,De.jsx)(Iw,{size:32}),title:"Tableaux de bord analytiques",description:"Acc\xe9dez \xe0 des statistiques d\xe9taill\xe9es sur vos rendez-vous, votre taux d'occupation et vos performances."},{icon:(0,De.jsx)(Lw,{size:32}),title:"S\xe9curit\xe9 garantie",description:"Vos donn\xe9es personnelles sont prot\xe9g\xe9es par des syst\xe8mes de s\xe9curit\xe9 avanc\xe9s et conformes au RGPD."}];return(0,De.jsxs)("section",{className:"features-section",children:[(0,De.jsxs)("div",{className:"section-header animate-on-scroll",children:[(0,De.jsx)("h2",{className:"section-title",children:"Solutions innovantes"}),(0,De.jsx)("p",{className:"section-subtitle",children:"Notre plateforme propose des fonctionnalit\xe9s avanc\xe9es pour optimiser votre gestion de rendez-vous"})]}),(0,De.jsx)("div",{className:"features-grid",children:e.map(((e,t)=>(0,De.jsxs)("div",{className:"feature-card animate-on-scroll",style:{animationDelay:"".concat(.1*t,"s")},children:[(0,De.jsx)("div",{className:"feature-icon-container",children:e.icon}),(0,De.jsx)("h3",{className:"feature-title",children:e.title}),(0,De.jsx)("p",{className:"feature-description",children:e.description}),(0,De.jsx)("div",{className:"feature-hover-effect"})]},t)))})]})},Dw=()=>(0,De.jsxs)("section",{className:"benefits-section",children:[(0,De.jsxs)("div",{className:"benefits-content",children:[(0,De.jsxs)("div",{className:"section-header animate-on-scroll",children:[(0,De.jsx)("h2",{className:"section-title",children:"Pourquoi nous choisir ?"}),(0,De.jsx)("p",{className:"section-subtitle",children:"Des avantages uniques qui font la diff\xe9rence"})]}),(0,De.jsxs)("div",{className:"benefits-list",children:[(0,De.jsxs)("div",{className:"benefit-item animate-on-scroll",children:[(0,De.jsx)("div",{className:"benefit-number",children:"01"}),(0,De.jsxs)("div",{className:"benefit-details",children:[(0,De.jsx)("h3",{children:"Interface intuitive et moderne"}),(0,De.jsx)("p",{children:"Une exp\xe9rience utilisateur fluide et agr\xe9able, accessible \xe0 tous, sans formation n\xe9cessaire."})]})]}),(0,De.jsxs)("div",{className:"benefit-item animate-on-scroll",children:[(0,De.jsx)("div",{className:"benefit-number",children:"02"}),(0,De.jsxs)("div",{className:"benefit-details",children:[(0,De.jsx)("h3",{children:"Gain de temps consid\xe9rable"}),(0,De.jsx)("p",{children:"R\xe9duisez de 80% le temps consacr\xe9 \xe0 la gestion de vos rendez-vous et concentrez-vous sur votre c\u0153ur de m\xe9tier."})]})]}),(0,De.jsxs)("div",{className:"benefit-item animate-on-scroll",children:[(0,De.jsx)("div",{className:"benefit-number",children:"03"}),(0,De.jsxs)("div",{className:"benefit-details",children:[(0,De.jsx)("h3",{children:"R\xe9duction des rendez-vous manqu\xe9s"}),(0,De.jsx)("p",{children:"Gr\xe2ce aux rappels automatiques, diminuez drastiquement le taux d'absent\xe9isme et optimisez votre planning."})]})]}),(0,De.jsxs)("div",{className:"benefit-item animate-on-scroll",children:[(0,De.jsx)("div",{className:"benefit-number",children:"04"}),(0,De.jsxs)("div",{className:"benefit-details",children:[(0,De.jsx)("h3",{children:"Support client r\xe9actif"}),(0,De.jsx)("p",{children:"Une \xe9quipe d\xe9di\xe9e pour r\xe9pondre \xe0 toutes vos questions et vous accompagner dans l'utilisation de la plateforme."})]})]})]})]}),(0,De.jsxs)("div",{className:"benefits-image animate-on-scroll",children:[(0,De.jsx)("img",{src:"/assets/images/benefits-illustration.svg",alt:"Avantages de la plateforme"}),(0,De.jsxs)("div",{className:"benefits-decoration",children:[(0,De.jsx)("div",{className:"decoration-circle circle-1"}),(0,De.jsx)("div",{className:"decoration-circle circle-2"}),(0,De.jsx)("div",{className:"decoration-circle circle-3"})]})]})]}),Ow=()=>(0,De.jsxs)("section",{className:"user-types-section",children:[(0,De.jsxs)("div",{className:"section-header animate-on-scroll",children:[(0,De.jsx)("h2",{className:"section-title",children:"Une solution pour tous"}),(0,De.jsx)("p",{className:"section-subtitle",children:"Que vous soyez client ou professionnel, notre plateforme s'adapte \xe0 vos besoins"})]}),(0,De.jsxs)("div",{className:"user-types-container",children:[(0,De.jsxs)("div",{className:"user-type-card animate-on-scroll",children:[(0,De.jsxs)("div",{className:"card-header",children:[(0,De.jsx)("div",{className:"card-icon",children:(0,De.jsx)("span",{role:"img","aria-label":"Utilisateur",children:"\ud83d\udc64"})}),(0,De.jsx)("h3",{children:"Pour les utilisateurs"})]}),(0,De.jsxs)("ul",{className:"card-features",children:[(0,De.jsx)("li",{children:"Trouvez rapidement le professionnel id\xe9al"}),(0,De.jsx)("li",{children:"R\xe9servez en quelques clics 24h/24 et 7j/7"}),(0,De.jsx)("li",{children:"G\xe9rez tous vos rendez-vous en un seul endroit"}),(0,De.jsx)("li",{children:"Recevez des rappels automatiques"}),(0,De.jsx)("li",{children:"Acc\xe9dez \xe0 votre historique complet"}),(0,De.jsx)("li",{children:"\xc9valuez vos exp\xe9riences"})]}),(0,De.jsxs)(Ie,{to:"/register",className:"card-button",children:["S'inscrire comme utilisateur",(0,De.jsx)("span",{className:"btn-arrow",children:"\u2192"})]})]}),(0,De.jsxs)("div",{className:"divider animate-on-scroll",children:[(0,De.jsx)("div",{className:"divider-line"}),(0,De.jsx)("div",{className:"divider-text",children:"OU"}),(0,De.jsx)("div",{className:"divider-line"})]}),(0,De.jsxs)("div",{className:"user-type-card animate-on-scroll",children:[(0,De.jsxs)("div",{className:"card-header",children:[(0,De.jsx)("div",{className:"card-icon",children:(0,De.jsx)("span",{role:"img","aria-label":"Professionnel",children:"\ud83d\udc54"})}),(0,De.jsx)("h3",{children:"Pour les professionnels"})]}),(0,De.jsxs)("ul",{className:"card-features",children:[(0,De.jsx)("li",{children:"Optimisez votre planning et votre temps"}),(0,De.jsx)("li",{children:"R\xe9duisez les rendez-vous manqu\xe9s"}),(0,De.jsx)("li",{children:"G\xe9rez facilement vos disponibilit\xe9s"}),(0,De.jsx)("li",{children:"D\xe9veloppez votre client\xe8le"}),(0,De.jsx)("li",{children:"Acc\xe9dez \xe0 des statistiques d\xe9taill\xe9es"}),(0,De.jsx)("li",{children:"Personnalisez votre profil professionnel"})]}),(0,De.jsxs)(Ie,{to:"/register",className:"card-button",children:["S'inscrire comme professionnel",(0,De.jsx)("span",{className:"btn-arrow",children:"\u2192"})]})]})]})]}),zw=()=>(0,De.jsxs)("section",{className:"map-section",children:[(0,De.jsxs)("div",{className:"section-header animate-on-scroll",children:[(0,De.jsx)("h2",{className:"section-title",children:"Nous trouver"}),(0,De.jsx)("p",{className:"section-subtitle",children:"Rendez-nous visite au Minist\xe8re de l'\xc9ducation \xe0 Atsimbazaza, Antananarivo, Madagascar"})]}),(0,De.jsx)("div",{className:"map-container animate-on-scroll",children:(0,De.jsx)("iframe",{src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3774.8896160235384!2d47.52148491489868!3d-18.91391998717629!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x21f07de34f1f8abf%3A0xb3d758c585be93c8!2sMinist%C3%A8re%20de%20l'%C3%89ducation%20Nationale!5e0!3m2!1sfr!2sfr!4v1652345678901!5m2!1sfr!2sfr",width:"100%",height:"450",style:{border:0},allowFullScreen:"",loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",title:"Minist\xe8re de l'\xc9ducation Nationale \xe0 Atsimbazaza, Antananarivo, Madagascar"})}),(0,De.jsxs)("div",{className:"contact-info",children:[(0,De.jsxs)("div",{className:"contact-card animate-on-scroll",children:[(0,De.jsx)("div",{className:"contact-icon",children:(0,De.jsx)("span",{role:"img","aria-label":"Adresse",children:"\ud83d\udccd"})}),(0,De.jsxs)("div",{className:"contact-details",children:[(0,De.jsx)("h3",{children:"Adresse"}),(0,De.jsx)("p",{children:"Minist\xe8re de l'\xc9ducation Nationale, Atsimbazaza, Antananarivo, Madagascar"})]})]}),(0,De.jsxs)("div",{className:"contact-card animate-on-scroll",children:[(0,De.jsx)("div",{className:"contact-icon",children:(0,De.jsx)("span",{role:"img","aria-label":"T\xe9l\xe9phone",children:"\ud83d\udcde"})}),(0,De.jsxs)("div",{className:"contact-details",children:[(0,De.jsx)("h3",{children:"T\xe9l\xe9phone"}),(0,De.jsx)("p",{children:"+261 34 22 550 00"})]})]}),(0,De.jsxs)("div",{className:"contact-card animate-on-scroll",children:[(0,De.jsx)("div",{className:"contact-icon",children:(0,De.jsx)("span",{role:"img","aria-label":"Email",children:"\u2709\ufe0f"})}),(0,De.jsxs)("div",{className:"contact-details",children:[(0,De.jsx)("h3",{children:"Email"}),(0,De.jsx)("p",{children:"mesupresst@gmail.com"})]})]})]})]}),Fw=()=>(0,De.jsxs)("section",{className:"cta-section",children:[(0,De.jsxs)("div",{className:"cta-container animate-on-scroll",children:[(0,De.jsx)("h2",{className:"cta-title",children:"Pr\xeat \xe0 r\xe9volutionner votre gestion de rendez-vous ?"}),(0,De.jsx)("p",{className:"cta-subtitle",children:"Rejoignez des milliers d'utilisateurs satisfaits et transformez votre exp\xe9rience d\xe8s aujourd'hui. Inscription gratuite et sans engagement."}),(0,De.jsxs)("div",{className:"cta-buttons",children:[(0,De.jsxs)(Ie,{to:"/register",className:"cta-button primary",children:["Cr\xe9er un compte gratuitement",(0,De.jsx)("span",{className:"btn-arrow",children:"\u2192"})]}),(0,De.jsx)(Ie,{to:"/login",className:"cta-button secondary",children:"Se connecter"})]}),(0,De.jsxs)("div",{className:"cta-features",children:[(0,De.jsxs)("div",{className:"cta-feature",children:[(0,De.jsx)("div",{className:"feature-check",children:"\u2713"}),(0,De.jsx)("span",{children:"Configuration en 2 minutes"})]}),(0,De.jsxs)("div",{className:"cta-feature",children:[(0,De.jsx)("div",{className:"feature-check",children:"\u2713"}),(0,De.jsx)("span",{children:"Sans engagement"})]}),(0,De.jsxs)("div",{className:"cta-feature",children:[(0,De.jsx)("div",{className:"feature-check",children:"\u2713"}),(0,De.jsx)("span",{children:"Support gratuit"})]})]})]}),(0,De.jsxs)("div",{className:"cta-background",children:[(0,De.jsx)("div",{className:"cta-shape shape-1"}),(0,De.jsx)("div",{className:"cta-shape shape-2"}),(0,De.jsx)("div",{className:"cta-shape shape-3"})]})]}),Uw=()=>((0,r.useEffect)((()=>{const e=new IntersectionObserver((e=>{if(e[0].isIntersecting){const e=document.querySelector(".animation-container");e&&e.classList.add("animate")}}),{threshold:.2}),t=document.querySelector(".animation-section");return t&&e.observe(t),()=>{t&&e.unobserve(t)}}),[]),(0,De.jsxs)("section",{className:"animation-section",children:[(0,De.jsxs)("div",{className:"section-header",children:[(0,De.jsx)("h2",{className:"section-title",children:"Exp\xe9rience visuelle"}),(0,De.jsx)("p",{className:"section-subtitle",children:"Une nouvelle exp\xe9riences visuelle pour une gestion de rendez-vous simplifi\xe9e"})]}),(0,De.jsxs)("div",{className:"animation-container",children:[(0,De.jsx)("div",{className:"animation-element circle"}),(0,De.jsx)("div",{className:"animation-element square"}),(0,De.jsx)("div",{className:"animation-element triangle"}),(0,De.jsx)("div",{className:"animation-element wave"}),(0,De.jsxs)("div",{className:"animation-element dots",children:[(0,De.jsx)("div",{className:"dot"}),(0,De.jsx)("div",{className:"dot"}),(0,De.jsx)("div",{className:"dot"}),(0,De.jsx)("div",{className:"dot"}),(0,De.jsx)("div",{className:"dot"})]})]})]})),Bw=()=>{const[e,t]=(0,r.useState)(!1),n=(0,r.useRef)(null);(0,r.useRef)({});return(0,r.useEffect)((()=>{setTimeout((()=>{t(!0)}),300);const e=()=>{n.current&&clearTimeout(n.current);document.querySelectorAll(".animate-on-scroll:not(.observed)").forEach((e=>{e.classList.add("observed");const t=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&(e.target.classList.add("animated"),t.unobserve(e.target))}))}),{threshold:.2});t.observe(e)}))};return window.addEventListener("scroll",e,{passive:!0}),e(),()=>{window.removeEventListener("scroll",e),n.current&&clearTimeout(n.current)}}),[]),(0,De.jsxs)("div",{className:"home-container ".concat(e?"loaded":""),children:[(0,De.jsx)(Ew,{}),(0,De.jsx)(Uw,{}),(0,De.jsx)(jw,{}),(0,De.jsx)(Dw,{}),(0,De.jsx)(Ow,{}),(0,De.jsx)(zw,{}),(0,De.jsx)(Fw,{})]})},Vw=Aw("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Hw=Aw("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),Ww=Aw("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),Gw=Aw("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),qw=Aw("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Xw=Aw("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),Yw=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296===(64512&r)&&i+1<e.length&&56320===(64512&e.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++i)),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t},Jw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<e.length;r+=3){const t=e[r],s=r+1<e.length,a=s?e[r+1]:0,o=r+2<e.length,l=o?e[r+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;o||(h=64,s||(d=64)),i.push(n[c],n[u],n[d],n[h])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Yw(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=((7&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[i++]=String.fromCharCode(55296+(s>>10)),t[i++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],a=e[n++];t[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<e.length;){const t=n[e.charAt(r++)],s=r<e.length?n[e.charAt(r)]:0;++r;const a=r<e.length?n[e.charAt(r)]:64;++r;const o=r<e.length?n[e.charAt(r)]:64;if(++r,null==t||null==s||null==a||null==o)throw new Kw;const l=t<<2|s>>4;if(i.push(l),64!==a){const e=s<<4&240|a>>2;if(i.push(e),64!==o){const e=a<<6&192|o;i.push(e)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Kw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Zw=function(e){return function(e){const t=Yw(e);return Jw.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Qw=function(e){try{return Jw.decodeString(e,!0)}catch(oq){console.error("base64Decode failed: ",oq)}return null};const $w=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,eS=()=>{try{return $w()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyAvU9kEEeWjQ7IAqBYbGgC42AdkWLES81M",REACT_APP_FIREBASE_APP_ID:"1:572769350923:web:4583cdf7d3de12a6769e0e",REACT_APP_FIREBASE_AUTH_DOMAIN:"rdv-project-7ba0a.firebaseapp.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-2E561CDQNN",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"572769350923",REACT_APP_FIREBASE_PROJECT_ID:"rdv-project-7ba0a",REACT_APP_FIREBASE_STORAGE_BUCKET:"rdv-project-7ba0a.firebasestorage.app"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(oq){return}const t=e&&Qw(e[1]);return t&&JSON.parse(t)})()}catch(oq){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(oq))}},tS=e=>{var t,n;return null===(n=null===(t=eS())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},nS=()=>{var e;return null===(e=eS())||void 0===e?void 0:e.config},iS=e=>{var t;return null===(t=eS())||void 0===t?void 0:t["_".concat(e)]};class rS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function sS(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}class aS extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,aS.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,oS.prototype.create)}}class oS{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),i=this.errors[e],r=i?function(e,t){return e.replace(lS,((e,n)=>{const i=t[n];return null!=i?String(i):"<".concat(n,"?>")}))}(i,t):"Error",s="".concat(this.serviceName,": ").concat(r," (").concat(n,").");return new aS(n,s,t)}}const lS=/\{\$([^}]+)}/g;function cS(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const n=e[r],s=t[r];if(uS(n)&&uS(s)){if(!cS(n,s))return!1}else if(n!==s)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function uS(e){return null!==e&&"object"===typeof e}function dS(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function hS(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,i]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(i)}})),t}function pS(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class fS{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let i;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");i=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===i.next&&(i.next=mS),void 0===i.error&&(i.error=mS),void 0===i.complete&&(i.complete=mS);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(oq){}})),this.observers.push(i),r}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(oq){"undefined"!==typeof console&&console.error&&console.error(oq)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function mS(){}function gS(e){return e&&e._delegate?e._delegate:e}class vS{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const yS="[DEFAULT]";class xS{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new rS;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(oq){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),i=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(oq){if(i)return null;throw oq}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:yS})}catch(oq){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(oq){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yS;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yS;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yS;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[r,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(r)&&s.resolve(i)}return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(e),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&e(s,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(_b){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:(r=t,r===yS?void 0:r),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch(_b){}var r;return i||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yS;return this.component?this.component.multipleInstances?e:yS:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class bS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new xS(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const _S=[];var wS;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(wS||(wS={}));const SS={debug:wS.DEBUG,verbose:wS.VERBOSE,info:wS.INFO,warn:wS.WARN,error:wS.ERROR,silent:wS.SILENT},MS=wS.INFO,ES={[wS.DEBUG]:"log",[wS.VERBOSE]:"log",[wS.INFO]:"info",[wS.WARN]:"warn",[wS.ERROR]:"error"},TS=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),i=ES[t];if(!i)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var r=arguments.length,s=new Array(r>2?r-2:0),a=2;a<r;a++)s[a-2]=arguments[a];console[i]("[".concat(n,"]  ").concat(e.name,":"),...s)};class CS{constructor(e){this.name=e,this._logLevel=MS,this._logHandler=TS,this._userLogHandler=null,_S.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in wS))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?SS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,wS.DEBUG,...t),this._logHandler(this,wS.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,wS.VERBOSE,...t),this._logHandler(this,wS.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,wS.INFO,...t),this._logHandler(this,wS.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,wS.WARN,...t),this._logHandler(this,wS.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,wS.ERROR,...t),this._logHandler(this,wS.ERROR,...t)}}let AS,PS;const NS=new WeakMap,kS=new WeakMap,RS=new WeakMap,IS=new WeakMap,LS=new WeakMap;let jS={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return kS.get(e);if("objectStoreNames"===t)return e.objectStoreNames||RS.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return zS(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function DS(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(PS||(PS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.apply(FS(this),n),zS(NS.get(this))}:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return zS(e.apply(FS(this),n))}:function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];const s=e.call(FS(this),t,...i);return RS.set(s,t.sort?t.sort():[t]),zS(s)}}function OS(e){return"function"===typeof e?DS(e):(e instanceof IDBTransaction&&function(e){if(kS.has(e))return;const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",s),e.removeEventListener("abort",s)},r=()=>{t(),i()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",s),e.addEventListener("abort",s)}));kS.set(e,t)}(e),t=e,(AS||(AS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,jS):e);var t}function zS(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",s)},r=()=>{t(zS(e.result)),i()},s=()=>{n(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&NS.set(t,e)})).catch((()=>{})),LS.set(t,e),t}(e);if(IS.has(e))return IS.get(e);const t=OS(e);return t!==e&&(IS.set(e,t),LS.set(t,e)),t}const FS=e=>LS.get(e);const US=["get","getKey","getAll","getAllKeys","count"],BS=["put","add","delete","clear"],VS=new Map;function HS(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(VS.get(t))return VS.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=BS.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!US.includes(n))return;const s=async function(e){const t=this.transaction(e,r?"readwrite":"readonly");let s=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return i&&(s=s.index(o.shift())),(await Promise.all([s[n](...o),r&&t.done]))[0]};return VS.set(t,s),s}!function(e){jS=e(jS)}((e=>He(He({},e),{},{get:(t,n,i)=>HS(t,n)||e.get(t,n,i),has:(t,n)=>!!HS(t,n)||e.has(t,n)})));class WS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const GS="@firebase/app",qS="0.11.4",XS=new CS("@firebase/app"),YS="@firebase/app-compat",JS="@firebase/analytics-compat",KS="@firebase/analytics",ZS="@firebase/app-check-compat",QS="@firebase/app-check",$S="@firebase/auth",eM="@firebase/auth-compat",tM="@firebase/database",nM="@firebase/data-connect",iM="@firebase/database-compat",rM="@firebase/functions",sM="@firebase/functions-compat",aM="@firebase/installations",oM="@firebase/installations-compat",lM="@firebase/messaging",cM="@firebase/messaging-compat",uM="@firebase/performance",dM="@firebase/performance-compat",hM="@firebase/remote-config",pM="@firebase/remote-config-compat",fM="@firebase/storage",mM="@firebase/storage-compat",gM="@firebase/firestore",vM="@firebase/vertexai",yM="@firebase/firestore-compat",xM="firebase",bM="[DEFAULT]",_M={[GS]:"fire-core",[YS]:"fire-core-compat",[KS]:"fire-analytics",[JS]:"fire-analytics-compat",[QS]:"fire-app-check",[ZS]:"fire-app-check-compat",[$S]:"fire-auth",[eM]:"fire-auth-compat",[tM]:"fire-rtdb",[nM]:"fire-data-connect",[iM]:"fire-rtdb-compat",[rM]:"fire-fn",[sM]:"fire-fn-compat",[aM]:"fire-iid",[oM]:"fire-iid-compat",[lM]:"fire-fcm",[cM]:"fire-fcm-compat",[uM]:"fire-perf",[dM]:"fire-perf-compat",[hM]:"fire-rc",[pM]:"fire-rc-compat",[fM]:"fire-gcs",[mM]:"fire-gcs-compat",[gM]:"fire-fst",[yM]:"fire-fst-compat",[vM]:"fire-vertex","fire-js":"fire-js",[xM]:"fire-js-all"},wM=new Map,SM=new Map,MM=new Map;function EM(e,t){try{e.container.addComponent(t)}catch(oq){XS.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),oq)}}function TM(e){const t=e.name;if(MM.has(t))return XS.debug("There were multiple attempts to register component ".concat(t,".")),!1;MM.set(t,e);for(const n of wM.values())EM(n,e);for(const n of SM.values())EM(n,e);return!0}function CM(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function AM(e){return null!==e&&void 0!==e&&void 0!==e.settings}const PM=new oS("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class NM{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new vS("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw PM.create("app-deleted",{appName:this._name})}}const kM="11.6.0";function RM(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const i=Object.assign({name:bM,automaticDataCollectionEnabled:!1},t),r=i.name;if("string"!==typeof r||!r)throw PM.create("bad-app-name",{appName:String(r)});if(n||(n=nS()),!n)throw PM.create("no-options");const s=wM.get(r);if(s){if(cS(n,s.options)&&cS(i,s.config))return s;throw PM.create("duplicate-app",{appName:r})}const a=new bS(r);for(const l of MM.values())a.addComponent(l);const o=new NM(n,i,a);return wM.set(r,o),o}function IM(e,t,n){var i;let r=null!==(i=_M[e])&&void 0!==i?i:e;n&&(r+="-".concat(n));const s=r.match(/\s|\//),a=t.match(/\s|\//);if(s||a){const e=['Unable to register library "'.concat(r,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(r,'" contains illegal characters (whitespace or "/")')),s&&a&&e.push("and"),a&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void XS.warn(e.join(" "))}TM(new vS("".concat(r,"-version"),(()=>({library:r,version:t})),"VERSION"))}const LM="firebase-heartbeat-store";let jM=null;function DM(){return jM||(jM=function(e,t){let{blocked:n,upgrade:i,blocking:r,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=zS(a);return i&&a.addEventListener("upgradeneeded",(e=>{i(zS(a.result),e.oldVersion,e.newVersion,zS(a.transaction),e)})),n&&a.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),o.then((e=>{s&&e.addEventListener("close",(()=>s())),r&&e.addEventListener("versionchange",(e=>r(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(LM)}catch(oq){console.warn(oq)}}}).catch((e=>{throw PM.create("idb-open",{originalErrorMessage:e.message})}))),jM}async function OM(e,t){try{const n=(await DM()).transaction(LM,"readwrite"),i=n.objectStore(LM);await i.put(t,zM(e)),await n.done}catch(oq){if(oq instanceof aS)XS.warn(oq.message);else{const t=PM.create("idb-set",{originalErrorMessage:null===oq||void 0===oq?void 0:oq.message});XS.warn(t.message)}}}function zM(e){return"".concat(e.name,"!").concat(e.options.appId)}class FM{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new BM(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=UM();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some((e=>e.date===i)))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let i=1;i<e.length;i++)e[i].date<n&&(n=e[i].date,t=i);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(oq){XS.warn(oq)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=UM(),{heartbeatsToSend:n,unsentEntries:i}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let i=e.slice();for(const r of e){const e=n.find((e=>e.agent===r.agent));if(e){if(e.dates.push(r.date),VM(n)>t){e.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),VM(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),r=Zw(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(oq){return XS.warn(oq),""}}}function UM(){return(new Date).toISOString().substring(0,10)}class BM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"===typeof indexedDB}catch(oq){return!1}}()&&new Promise(((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var e;t((null===(e=r.error)||void 0===e?void 0:e.message)||"")}}catch(Ib){t(Ib)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await DM()).transaction(LM),n=await t.objectStore(LM).get(zM(e));return await t.done,n}catch(oq){if(oq instanceof aS)XS.warn(oq.message);else{const t=PM.create("idb-get",{originalErrorMessage:null===oq||void 0===oq?void 0:oq.message});XS.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return OM(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return OM(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function VM(e){return Zw(JSON.stringify({version:2,heartbeats:e})).length}var HM;HM="",TM(new vS("platform-logger",(e=>new WS(e)),"PRIVATE")),TM(new vS("heartbeat",(e=>new FM(e)),"PRIVATE")),IM(GS,qS,HM),IM(GS,qS,"esm2017"),IM("fire-js","");IM("firebase","11.6.0","app");var WM=function(e,t){return WM=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},WM(e,t)};function GM(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}WM(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var qM=function(){return qM=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},qM.apply(this,arguments)};function XM(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}Object.create;function YM(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function JM(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,s=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=s.next()).done;)a.push(i.value)}catch(Ib){r={error:Ib}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return a}function KM(e,t,n){if(n||2===arguments.length)for(var i,r=0,s=t.length;r<s;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}Object.create;"function"===typeof SuppressedError&&SuppressedError;function ZM(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const QM=ZM,$M=new oS("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),eE=new CS("@firebase/auth");function tE(e){if(eE.logLevel<=wS.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];eE.error("Auth (".concat(kM,"): ").concat(e),...n)}}function nE(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];throw oE(e,...n)}function iE(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return oE(e,...n)}function rE(e,t,n){const i=Object.assign(Object.assign({},QM()),{[t]:n});return new oS("auth","Firebase",i).create(t,{appName:e.name})}function sE(e){return rE(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function aE(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&nE(e,"argument-error"),rE(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function oE(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if("string"!==typeof e){const t=n[0],i=[...n.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(t,...i)}return $M.create(e,...n)}function lE(e,t){if(!e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];throw oE(t,...i)}}function cE(e){const t="INTERNAL ASSERTION FAILED: "+e;throw tE(t),new Error(t)}function uE(e,t){e||cE(t)}function dE(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function hE(){return"http:"===pE()||"https:"===pE()}function pE(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function fE(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(hE()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class mE{constructor(e,t){this.shortDelay=e,this.longDelay=t,uE(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(sS())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return fE()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function gE(e,t){uE(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class vE{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void cE("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void cE("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void cE("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const yE={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},xE=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],bE=new mE(3e4,6e4);function _E(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function wE(e,t,n,i){return SE(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let r={},s={};i&&("GET"===t?s=i:r={body:JSON.stringify(i)});const a=dS(Object.assign({key:e.config.apiKey},s)).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:o},r);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),vE.fetch()(await EE(e,e.config.apiHost,n,a),l)}))}async function SE(e,t,n){e._canInitEmulator=!1;const i=Object.assign(Object.assign({},yE),t);try{const t=new CE(e),r=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await r.json();if("needConfirmation"in s)throw AE(e,"account-exists-with-different-credential",s);if(r.ok&&!("errorMessage"in s))return s;{const t=r.ok?s.errorMessage:s.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw AE(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw AE(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw AE(e,"user-disabled",s);const o=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw rE(e,o,a);nE(e,o)}}catch(oq){if(oq instanceof aS)throw oq;nE(e,"network-request-failed",{message:String(oq)})}}async function ME(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await wE(e,t,n,i,r);return"mfaPendingCredential"in s&&nE(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function EE(e,t,n,i){const r="".concat(t).concat(n,"?").concat(i),s=e,a=s.config.emulator?gE(e.config,r):"".concat(e.config.apiScheme,"://").concat(r);if(xE.includes(n)&&(await s._persistenceManagerAvailable,"COOKIE"===s._getPersistenceType())){return s._getPersistence()._getFinalTarget(a).toString()}return a}function TE(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class CE{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(iE(this.auth,"network-request-failed"))),bE.get())}))}}function AE(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=iE(e,t,i);return r.customData._tokenResponse=n,r}function PE(e){return void 0!==e&&void 0!==e.enterprise}class NE{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return TE(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function kE(e,t){return wE(e,"GET","/v2/recaptchaConfig",_E(e,t))}async function RE(e,t){return wE(e,"POST","/v1/accounts:lookup",t)}function IE(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(oq){}}function LE(e){return 1e3*Number(e)}function jE(e){const[t,n,i]=e.split(".");if(void 0===t||void 0===n||void 0===i)return tE("JWT malformed, contained fewer than 3 sections"),null;try{const e=Qw(n);return e?JSON.parse(e):(tE("Failed to decode base64 JWT payload"),null)}catch(oq){return tE("Caught error parsing JWT payload as JSON",null===oq||void 0===oq?void 0:oq.toString()),null}}function DE(e){const t=jE(e);return lE(t,"internal-error"),lE("undefined"!==typeof t.exp,"internal-error"),lE("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function OE(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(oq){throw oq instanceof aS&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(oq)&&e.auth.currentUser===e&&await e.auth.signOut(),oq}}class zE{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(oq){return void((null===oq||void 0===oq?void 0:oq.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class FE{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=IE(this.lastLoginAt),this.creationTime=IE(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function UE(e){var t;const n=e.auth,i=await e.getIdToken(),r=await OE(e,RE(n,{idToken:i}));lE(null===r||void 0===r?void 0:r.users.length,n,"internal-error");const s=r.users[0];e._notifyReloadListener(s);const a=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?BE(s.providerUserInfo):[],o=(l=e.providerData,c=a,[...l.filter((e=>!c.some((t=>t.providerId===e.providerId)))),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&s.passwordHash)&&!(null===o||void 0===o?void 0:o.length),h=!!u&&d,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new FE(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,p)}function BE(e){return e.map((e=>{var{providerId:t}=e,n=XM(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class VE{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){lE(e.idToken,"internal-error"),lE("undefined"!==typeof e.idToken,"internal-error"),lE("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):DE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){lE(0!==e.length,"internal-error");const t=DE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(lE(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:r}=await async function(e,t){const n=await SE(e,{},(async()=>{const n=dS({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:r}=e.config,s=await EE(e,i,"/v1/token","key=".concat(r)),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",vE.fetch()(s,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,i,Number(r))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:i,expirationTime:r}=t,s=new VE;return n&&(lE("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),i&&(lE("string"===typeof i,"internal-error",{appName:e}),s.accessToken=i),r&&(lE("number"===typeof r,"internal-error",{appName:e}),s.expirationTime=r),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new VE,this.toJSON())}_performRefresh(){return cE("not implemented")}}function HE(e,t){lE("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class WE{constructor(e){var{uid:t,auth:n,stsTokenManager:i}=e,r=XM(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new FE(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await OE(this,this.stsTokenManager.getToken(this.auth,e));return lE(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=gS(e),i=await n.getIdToken(t),r=jE(i);lE(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s="object"===typeof r.firebase?r.firebase:void 0,a=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:IE(LE(r.auth_time)),issuedAtTime:IE(LE(r.iat)),expirationTime:IE(LE(r.exp)),signInProvider:a||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=gS(e);await UE(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(lE(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new WE(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){lE(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await UE(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(AM(this.auth.app))return Promise.reject(sE(this.auth));const e=await this.getIdToken();return await OE(this,async function(e,t){return wE(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,i,r,s,a,o,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(i=t.email)&&void 0!==i?i:void 0,h=null!==(r=t.phoneNumber)&&void 0!==r?r:void 0,p=null!==(s=t.photoURL)&&void 0!==s?s:void 0,f=null!==(a=t.tenantId)&&void 0!==a?a:void 0,m=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:y,emailVerified:x,isAnonymous:b,providerData:_,stsTokenManager:w}=t;lE(y&&w,e,"internal-error");const S=VE.fromJSON(this.name,w);lE("string"===typeof y,e,"internal-error"),HE(u,e.name),HE(d,e.name),lE("boolean"===typeof x,e,"internal-error"),lE("boolean"===typeof b,e,"internal-error"),HE(h,e.name),HE(p,e.name),HE(f,e.name),HE(m,e.name),HE(g,e.name),HE(v,e.name);const M=new WE({uid:y,auth:e,email:d,emailVerified:x,displayName:u,isAnonymous:b,photoURL:p,phoneNumber:h,tenantId:f,stsTokenManager:S,createdAt:g,lastLoginAt:v});return _&&Array.isArray(_)&&(M.providerData=_.map((e=>Object.assign({},e)))),m&&(M._redirectEventId=m),M}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=new VE;i.updateFromServerResponse(t);const r=new WE({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await UE(r),r}static async _fromGetAccountInfoResponse(e,t,n){const i=t.users[0];lE(void 0!==i.localId,"internal-error");const r=void 0!==i.providerUserInfo?BE(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(null===r||void 0===r?void 0:r.length),a=new VE;a.updateFromIdToken(n);const o=new WE({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:r,metadata:new FE(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(null===r||void 0===r?void 0:r.length)};return Object.assign(o,l),o}}const GE=new Map;function qE(e){uE(e instanceof Function,"Expected a class definition");let t=GE.get(e);return t?(uE(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,GE.set(e,t),t)}class XE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}XE.type="NONE";const YE=XE;function JE(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class KE{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:i,name:r}=this.auth;this.fullUserKey=JE(this.userKey,i.apiKey,r),this.fullPersistenceKey=JE("persistence",i.apiKey,r),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await RE(this.auth,{idToken:e}).catch((()=>{}));return t?WE._fromGetAccountInfoResponse(this.auth,t,e):null}return WE._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new KE(qE(YE),e,n);const i=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let r=i[0]||qE(YE);const s=JE(n,e.config.apiKey,e.name);let a=null;for(const l of t)try{const t=await l._get(s);if(t){let n;if("string"===typeof t){const i=await RE(e,{idToken:t}).catch((()=>{}));if(!i)break;n=await WE._fromGetAccountInfoResponse(e,i,t)}else n=WE._fromJSON(e,t);l!==r&&(a=n),r=l;break}}catch(_b){}const o=i.filter((e=>e._shouldAllowMigration));return r._shouldAllowMigration&&o.length?(r=o[0],a&&await r._set(s,a.toJSON()),await Promise.all(t.map((async e=>{if(e!==r)try{await e._remove(s)}catch(_b){}}))),new KE(r,e,n)):new KE(r,e,n)}}function ZE(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(tT(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(QE(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(iT(t))return"Blackberry";if(rT(t))return"Webos";if($E(t))return"Safari";if((t.includes("chrome/")||eT(t))&&!t.includes("edge/"))return"Chrome";if(nT(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function QE(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sS();return/firefox\//i.test(e)}function $E(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:sS()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function eT(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sS();return/crios\//i.test(e)}function tT(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sS();return/iemobile/i.test(e)}function nT(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sS();return/android/i.test(e)}function iT(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sS();return/blackberry/i.test(e)}function rT(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sS();return/webos/i.test(e)}function sT(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sS();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function aT(){return function(){const e=sS();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function oT(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sS();return sT(e)||nT(e)||rT(e)||iT(e)||/windows phone/i.test(e)||tT(e)}function lT(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=ZE(sS());break;case"Worker":t="".concat(ZE(sS()),"-").concat(e);break;default:t=e}const i=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(kM,"/").concat(i)}class cT{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,i)=>{try{n(e(t))}catch(oq){i(oq)}}));n.onAbort=t,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(oq){t.reverse();for(const i of t)try{i()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===oq||void 0===oq?void 0:oq.message})}}}class uT{constructor(e){var t,n,i,r;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(r=e.forceUpgradeOnSignin)&&void 0!==r&&r,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,i,r,s,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(i=o.containsLowercaseLetter)||void 0===i||i),o.isValid&&(o.isValid=null===(r=o.containsUppercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(s=o.containsNumericCharacter)||void 0===s||s),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,i,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}class dT{constructor(e,t,n,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pT(this),this.idTokenSubscription=new pT(this),this.beforeStateQueue=new cT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$M,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise((e=>this._resolvePersistenceManagerAvailable=e))}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=qE(t)),this._initializationPromise=this.queue((async()=>{var n,i,r;if(!this._deleted&&(this.persistenceManager=await KE.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null===(i=this._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(oq){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await RE(this,{idToken:e}),n=await WE._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(AM(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===i||void 0===i?void 0:i._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==s||!(null===a||void 0===a?void 0:a.user)||(i=a.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(oq){i=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(oq)))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return lE(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(oq){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await UE(e)}catch(oq){if((null===oq||void 0===oq?void 0:oq.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(AM(this.app))return Promise.reject(sE(this));const t=e?gS(e):null;return t&&lE(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&lE(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return AM(this.app)?Promise.reject(sE(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return AM(this.app)?Promise.reject(sE(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(qE(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return wE(e,"GET","/v2/passwordPolicy",_E(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new uT(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new oS("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return wE(e,"POST","/v2/accounts:revokeToken",_E(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&qE(e)||this._popupRedirectResolver;lE(t,this,"argument-error"),this.redirectPersistenceManager=await KE.create(this,[qE(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};const r="function"===typeof t?t:t.next.bind(t);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(lE(a,this,"internal-error"),a.then((()=>{s||r(this.currentUser)})),"function"===typeof t){const r=e.addObserver(t,n,i);return()=>{s=!0,r()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return lE(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=lT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(AM(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(eE.logLevel<=wS.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];eE.warn("Auth (".concat(kM,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function hT(e){return gS(e)}class pT{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new fS(e,t);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return lE(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let fT={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function mT(e){return fT.loadJS(e)}function gT(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class vT{constructor(){this.enterprise=new yT}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class yT{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const xT="NO_RECAPTCHA";class bT{constructor(e){this.type="recaptcha-enterprise",this.auth=hT(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,i){const r=window.grecaptcha;PE(r)?r.enterprise.ready((()=>{r.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n(xT)}))})):i(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new vT).execute("siteKey",{action:"verify"})}return new Promise(((e,i)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{kE(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((i=>{if(void 0!==i.recaptchaKey){const n=new NE(i);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((r=>{if(!t&&PE(window.grecaptcha))n(r,e,i);else{if("undefined"===typeof window)return void i(new Error("RecaptchaVerifier is only supported in browser"));let t=fT.recaptchaEnterpriseScript;0!==t.length&&(t+=r),mT(t).then((()=>{n(r,e,i)})).catch((e=>{i(e)}))}})).catch((e=>{i(e)}))}))}}async function _T(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=new bT(e);let a;if(r)a=xT;else try{a=await s.verify(n)}catch(Ib){a=await s.verify(n,!0)}const o=Object.assign({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in o){const e=o.phoneEnrollmentInfo.phoneNumber,t=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const e=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return i?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function wT(e,t,n,i,r){var s,a;if("EMAIL_PASSWORD_PROVIDER"===r){if(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const r=await _T(e,t,n,"getOobCode"===n);return i(e,r)}return i(e,t).catch((async r=>{if(r.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const r=await _T(e,t,n,"getOobCode"===n);return i(e,r)}return Promise.reject(r)}))}if("PHONE_PROVIDER"===r){if(null===(a=e._getRecaptchaConfig())||void 0===a?void 0:a.isProviderEnabled("PHONE_PROVIDER")){const r=await _T(e,t,n);return i(e,r).catch((async r=>{var s;if("AUDIT"===(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.getProviderEnforcementState("PHONE_PROVIDER"))&&(r.code==="auth/".concat("missing-recaptcha-token")||r.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const r=await _T(e,t,n,!1,!0);return i(e,r)}return Promise.reject(r)}))}{const r=await _T(e,t,n,!1,!0);return i(e,r)}}return Promise.reject(r+" provider is not supported.")}async function ST(e){const t=hT(e),n=await kE(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),i=new NE(n);if(null==t.tenantId?t._agentRecaptchaConfig=i:t._tenantRecaptchaConfigs[t.tenantId]=i,i.isAnyProviderEnabled()){new bT(t).verify()}}function MT(e,t,n){const i=hT(e);lE(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!!(null===n||void 0===n?void 0:n.disableWarnings),s=ET(t),{host:a,port:o}=function(e){const t=ET(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const e=r[1];return{host:e,port:TT(i.substr(e.length+1))}}{const[e,t]=i.split(":");return{host:e,port:TT(t)}}}(t),l=null===o?"":":".concat(o),c={url:"".concat(s,"//").concat(a).concat(l,"/")},u=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator)return lE(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),void lE(cS(c,i.config.emulator)&&cS(u,i.emulatorConfig),i,"emulator-config-failed");i.config.emulator=c,i.emulatorConfig=u,i.settings.appVerificationDisabledForTesting=!0,r||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function ET(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function TT(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class CT{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return cE("not implemented")}_getIdTokenResponse(e){return cE("not implemented")}_linkToIdToken(e,t){return cE("not implemented")}_getReauthenticationResolver(e){return cE("not implemented")}}async function AT(e,t){return wE(e,"POST","/v1/accounts:signUp",t)}async function PT(e,t){return ME(e,"POST","/v1/accounts:signInWithPassword",_E(e,t))}class NT extends CT{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new NT(e,t,"password")}static _fromEmailAndCode(e,t){return new NT(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return wT(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",PT,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return ME(e,"POST","/v1/accounts:signInWithEmailLink",_E(e,t))}(e,{email:this._email,oobCode:this._password});default:nE(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return wT(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",AT,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return ME(e,"POST","/v1/accounts:signInWithEmailLink",_E(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:nE(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function kT(e,t){return ME(e,"POST","/v1/accounts:signInWithIdp",_E(e,t))}class RT extends CT{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new RT(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):nE("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:i}=t,r=XM(t,["providerId","signInMethod"]);if(!n||!i)return null;const s=new RT(n,i);return s.idToken=r.idToken||void 0,s.accessToken=r.accessToken||void 0,s.secret=r.secret,s.nonce=r.nonce,s.pendingToken=r.pendingToken||null,s}_getIdTokenResponse(e){return kT(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,kT(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,kT(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=dS(t)}return e}}async function IT(e,t){return wE(e,"POST","/v1/accounts:sendVerificationCode",_E(e,t))}const LT={USER_NOT_FOUND:"user-not-found"};class jT extends CT{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new jT({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new jT({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return ME(e,"POST","/v1/accounts:signInWithPhoneNumber",_E(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await ME(e,"POST","/v1/accounts:signInWithPhoneNumber",_E(e,t));if(n.temporaryProof)throw AE(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return ME(e,"POST","/v1/accounts:signInWithPhoneNumber",_E(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),LT)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}=e;return n||t||i||r?new jT({verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}):null}}class DT{constructor(e){var t,n,i,r,s,a;const o=hS(pS(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=o.mode)&&void 0!==i?i:null);lE(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(r=o.continueUrl)&&void 0!==r?r:null,this.languageCode=null!==(s=o.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=hS(pS(e)).link,n=t?hS(pS(t)).deep_link_id:null,i=hS(pS(e)).deep_link_id;return(i?hS(pS(i)).link:null)||i||n||t||e}(e);try{return new DT(t)}catch(_b){return null}}}class OT{constructor(){this.providerId=OT.PROVIDER_ID}static credential(e,t){return NT._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=DT.parseLink(t);return lE(n,"argument-error"),NT._fromEmailAndCode(e,n.code,n.tenantId)}}OT.PROVIDER_ID="password",OT.EMAIL_PASSWORD_SIGN_IN_METHOD="password",OT.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class zT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class FT extends zT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class UT extends FT{constructor(){super("facebook.com")}static credential(e){return RT._fromParams({providerId:UT.PROVIDER_ID,signInMethod:UT.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return UT.credentialFromTaggedObject(e)}static credentialFromError(e){return UT.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return UT.credential(t.oauthAccessToken)}catch(_b){return null}}}UT.FACEBOOK_SIGN_IN_METHOD="facebook.com",UT.PROVIDER_ID="facebook.com";class BT extends FT{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return RT._fromParams({providerId:BT.PROVIDER_ID,signInMethod:BT.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return BT.credentialFromTaggedObject(e)}static credentialFromError(e){return BT.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return BT.credential(n,i)}catch(_b){return null}}}BT.GOOGLE_SIGN_IN_METHOD="google.com",BT.PROVIDER_ID="google.com";class VT extends FT{constructor(){super("github.com")}static credential(e){return RT._fromParams({providerId:VT.PROVIDER_ID,signInMethod:VT.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return VT.credentialFromTaggedObject(e)}static credentialFromError(e){return VT.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return VT.credential(t.oauthAccessToken)}catch(_b){return null}}}VT.GITHUB_SIGN_IN_METHOD="github.com",VT.PROVIDER_ID="github.com";class HT extends FT{constructor(){super("twitter.com")}static credential(e,t){return RT._fromParams({providerId:HT.PROVIDER_ID,signInMethod:HT.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return HT.credentialFromTaggedObject(e)}static credentialFromError(e){return HT.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return HT.credential(n,i)}catch(_b){return null}}}HT.TWITTER_SIGN_IN_METHOD="twitter.com",HT.PROVIDER_ID="twitter.com";class WT{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=await WE._fromIdTokenResponse(e,n,i),s=GT(n);return new WT({user:r,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const i=GT(n);return new WT({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function GT(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class qT extends aS{constructor(e,t,n,i){var r;super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,qT.prototype),this.customData={appName:e.name,tenantId:null!==(r=e.tenantId)&&void 0!==r?r:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new qT(e,t,n,i)}}function XT(e,t,n,i){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw qT._fromErrorAndOperation(e,n,t,i);throw n}))}async function YT(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=await OE(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return WT._forOperation(e,"link",i)}async function JT(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:i}=e;if(AM(i.app))return Promise.reject(sE(i));const r="reauthenticate";try{const s=await OE(e,XT(i,r,t,e),n);lE(s.idToken,i,"internal-error");const a=jE(s.idToken);lE(a,i,"internal-error");const{sub:o}=a;return lE(e.uid===o,i,"user-mismatch"),WT._forOperation(e,r,s)}catch(oq){throw(null===oq||void 0===oq?void 0:oq.code)==="auth/".concat("user-not-found")&&nE(i,"user-mismatch"),oq}}async function KT(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(AM(e.app))return Promise.reject(sE(e));const i="signIn",r=await XT(e,i,t),s=await WT._fromIdTokenResponse(e,i,r);return n||await e._updateCurrentUser(s.user),s}function ZT(e,t){return wE(e,"POST","/v2/accounts/mfaEnrollment:start",_E(e,t))}new WeakMap;const QT="__sak";class $T{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(QT,"1"),this.storage.removeItem(QT),Promise.resolve(!0)):Promise.resolve(!1)}catch(_b){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class eC extends $T{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=oT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},r=this.storage.getItem(n);aT()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,10):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}eC.type="LOCAL";const tC=eC;function nC(e){var t,n;const i=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),r=RegExp("".concat(i,"=([^;]+)"));return null!==(n=null===(t=document.cookie.match(r))||void 0===t?void 0:t[1])&&void 0!==n?n:null}function iC(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class rC{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=iC(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return nC(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=iC(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch((()=>{}))}_addListener(e,t){if(!this._isAvailable())return;const n=iC(e);if(window.cookieStore){const e=e=>{const i=e.changed.find((e=>e.name===n));i&&t(i.value);e.deleted.find((e=>e.name===n))&&t(null)},i=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,i),window.cookieStore.addEventListener("change",e)}let i=nC(n);const r=setInterval((()=>{const e=nC(n);e!==i&&(t(e),i=e)}),1e3);this.listenerUnsubscribes.set(t,(()=>clearInterval(r)))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}rC.type="COOKIE";class sC extends $T{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}sC.type="SESSION";const aC=sC;class oC{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new oC(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:i,data:r}=t.data,s=this.handlersMap[i];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const a=Array.from(s).map((async e=>e(t.origin,r))),o=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function lC(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let i=0;i<t;i++)n+=Math.floor(10*Math.random());return e+n}oC.receivers=[];class cC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const i="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,s;return new Promise(((a,o)=>{const l=lC("",20);i.port1.start();const c=setTimeout((()=>{o(new Error("unsupported_event"))}),n);s={messageChannel:i,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),r=setTimeout((()=>{o(new Error("timeout"))}),3e3);break;case"done":clearTimeout(r),a(t.data.response);break;default:clearTimeout(c),clearTimeout(r),o(new Error("invalid_response"))}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function uC(){return window}function dC(){return"undefined"!==typeof uC().WorkerGlobalScope&&"function"===typeof uC().importScripts}const hC="firebaseLocalStorageDb",pC="firebaseLocalStorage",fC="fbase_key";class mC{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function gC(e,t){return e.transaction([pC],t?"readwrite":"readonly").objectStore(pC)}function vC(){const e=indexedDB.open(hC,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(pC,{keyPath:fC})}catch(oq){n(oq)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(pC)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(hC);return new mC(e).toPromise()}(),t(await vC()))}))}))}async function yC(e,t,n){const i=gC(e,!0).put({[fC]:t,value:n});return new mC(i).toPromise()}function xC(e,t){const n=gC(e,!0).delete(t);return new mC(n).toPromise()}class bC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await vC()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(oq){if(t++>3)throw oq;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return dC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=oC._getInstance(dC()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new cC(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(_b){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await vC();return await yC(e,QT,"1"),await xC(e,QT),!0}catch(_b){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>yC(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=gC(e,!1).get(t),i=await new mC(n).toPromise();return void 0===i?null:i.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>xC(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=gC(e,!1).getAll();return new mC(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:i,value:r}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}bC.type="LOCAL";const _C=bC;function wC(e,t){return wE(e,"POST","/v2/accounts/mfaSignIn:start",_E(e,t))}gT("rcb"),new mE(3e4,6e4);const SC="recaptcha";async function MC(e,t,n){var i;if(!e._getRecaptchaConfig())try{await ST(e)}catch(Ib){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let r;if(r="string"===typeof t?{phoneNumber:t}:t,"session"in r){const t=r.session;if("phoneNumber"in r){lE("enroll"===t.type,e,"internal-error");const i={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=wT(e,i,"mfaSmsEnrollment",(async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===xT){lE((null===n||void 0===n?void 0:n.type)===SC,e,"argument-error");return ZT(e,await EC(e,t,n))}return ZT(e,t)}),"PHONE_PROVIDER"),a=await s.catch((e=>Promise.reject(e)));return a.phoneSessionInfo.sessionInfo}{lE("signin"===t.type,e,"internal-error");const s=(null===(i=r.multiFactorHint)||void 0===i?void 0:i.uid)||r.multiFactorUid;lE(s,e,"missing-multi-factor-info");const a={mfaPendingCredential:t.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},o=wT(e,a,"mfaSmsSignIn",(async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===xT){lE((null===n||void 0===n?void 0:n.type)===SC,e,"argument-error");return wC(e,await EC(e,t,n))}return wC(e,t)}),"PHONE_PROVIDER"),l=await o.catch((e=>Promise.reject(e)));return l.phoneResponseInfo.sessionInfo}}{const t={phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"},i=wT(e,t,"sendVerificationCode",(async(e,t)=>{if(t.captchaResponse===xT){lE((null===n||void 0===n?void 0:n.type)===SC,e,"argument-error");return IT(e,await EC(e,t,n))}return IT(e,t)}),"PHONE_PROVIDER"),s=await i.catch((e=>Promise.reject(e)));return s.sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function EC(e,t,n){lE(n.type===SC,e,"argument-error");const i=await n.verify();lE("string"===typeof i,e,"argument-error");const r=Object.assign({},t);if("phoneEnrollmentInfo"in r){const e=r.phoneEnrollmentInfo.phoneNumber,t=r.phoneEnrollmentInfo.captchaResponse,n=r.phoneEnrollmentInfo.clientType,s=r.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(r,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:i,captchaResponse:t,clientType:n,recaptchaVersion:s}}),r}if("phoneSignInInfo"in r){const e=r.phoneSignInInfo.captchaResponse,t=r.phoneSignInInfo.clientType,n=r.phoneSignInInfo.recaptchaVersion;return Object.assign(r,{phoneSignInInfo:{recaptchaToken:i,captchaResponse:e,clientType:t,recaptchaVersion:n}}),r}return Object.assign(r,{recaptchaToken:i}),r}class TC{constructor(e){this.providerId=TC.PROVIDER_ID,this.auth=hT(e)}verifyPhoneNumber(e,t){return MC(this.auth,e,gS(t))}static credential(e,t){return jT._fromVerification(e,t)}static credentialFromResult(e){const t=e;return TC.credentialFromTaggedObject(t)}static credentialFromError(e){return TC.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:i}=t;return n&&i?jT._fromTokenResponse(n,i):null}}function CC(e,t){return t?qE(t):(lE(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}TC.PROVIDER_ID="phone",TC.PHONE_SIGN_IN_METHOD="phone";class AC extends CT{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return kT(e,this._buildIdpRequest())}_linkToIdToken(e,t){return kT(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return kT(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function PC(e){return KT(e.auth,new AC(e),e.bypassAuthState)}function NC(e){const{auth:t,user:n}=e;return lE(n,t,"internal-error"),JT(n,new AC(e),e.bypassAuthState)}async function kC(e){const{auth:t,user:n}=e;return lE(n,t,"internal-error"),YT(n,new AC(e),e.bypassAuthState)}class RC{constructor(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(oq){this.reject(oq)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:i,tenantId:r,error:s,type:a}=e;if(s)return void this.reject(s);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(oq){this.reject(oq)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return PC;case"linkViaPopup":case"linkViaRedirect":return kC;case"reauthViaPopup":case"reauthViaRedirect":return NC;default:nE(this.auth,"internal-error")}}resolve(e){uE(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){uE(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const IC=new mE(2e3,1e4);async function LC(e,t,n){if(AM(e.app))return Promise.reject(iE(e,"operation-not-supported-in-this-environment"));const i=hT(e);aE(e,t,zT);const r=CC(i,n);return new jC(i,"signInViaPopup",t,r).executeNotNull()}class jC extends RC{constructor(e,t,n,i,r){super(e,t,i,r),this.provider=n,this.authWindow=null,this.pollId=null,jC.currentPopupAction&&jC.currentPopupAction.cancel(),jC.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return lE(e,this.auth,"internal-error"),e}async onExecution(){uE(1===this.filter.length,"Popup operations only handle one event");const e=lC();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(iE(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(iE(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,jC.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(iE(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,IC.get())};e()}}jC.currentPopupAction=null;const DC=new Map;class OC extends RC{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=DC.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=UC(t),i=FC(e);if(!await i._isAvailable())return!1;const r="true"===await i._get(n);return await i._remove(n),r}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(oq){e=()=>Promise.reject(oq)}DC.set(this.auth._key(),e)}return this.bypassAuthState||DC.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function zC(e,t){DC.set(e._key(),t)}function FC(e){return qE(e._redirectPersistence)}function UC(e){return JE("pendingRedirect",e.config.apiKey,e.name)}async function BC(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(AM(e.app))return Promise.reject(sE(e));const i=hT(e),r=CC(i,t),s=new OC(i,r,n),a=await s.execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,t)),a}class VC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return WC(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!WC(e)){const i=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(iE(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(HC(e))}saveEventToCache(e){this.cachedEventUids.add(HC(e)),this.lastProcessedEventTime=Date.now()}}function HC(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function WC(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const GC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qC=/^https?/;async function XC(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return wE(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const n of t)try{if(YC(n))return}catch(_b){}nE(e,"unauthorized-domain")}function YC(e){const t=dE(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const r=new URL(e);return""===r.hostname&&""===i?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&r.hostname===i}if(!qC.test(n))return!1;if(GC.test(e))return i===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}const JC=new mE(3e4,6e4);function KC(){const e=uC().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function ZC(e){return new Promise(((t,n)=>{var i,r,s;function a(){KC(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{KC(),n(iE(e,"network-request-failed"))},timeout:JC.get()})}if(null===(r=null===(i=uC().gapi)||void 0===i?void 0:i.iframes)||void 0===r?void 0:r.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=uC().gapi)||void 0===s?void 0:s.load)){const t=gT("iframefcb");return uC()[t]=()=>{gapi.load?a():n(iE(e,"network-request-failed"))},mT("".concat(fT.gapiScript,"?onload=").concat(t)).catch((e=>n(e)))}a()}})).catch((e=>{throw QC=null,e}))}let QC=null;const $C=new mE(5e3,15e3),eA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nA(e){const t=e.config;lE(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?gE(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),i={apiKey:t.apiKey,appName:e.name,v:kM},r=tA.get(e.config.apiHost);r&&(i.eid=r);const s=e._getFrameworks();return s.length&&(i.fw=s.join(",")),"".concat(n,"?").concat(dS(i).slice(1))}async function iA(e){const t=await function(e){return QC=QC||ZC(e),QC}(e),n=uC().gapi;return lE(n,e,"internal-error"),t.open({where:document.body,url:nA(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:eA,dontclear:!0},(t=>new Promise((async(n,i)=>{await t.restyle({setHideOnLeave:!1});const r=iE(e,"network-request-failed"),s=uC().setTimeout((()=>{i(r)}),$C.get());function a(){uC().clearTimeout(s),n(t)}t.ping(a).then(a,(()=>{i(r)}))}))))}const rA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class sA{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(oq){}}}function aA(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let o="";const l=Object.assign(Object.assign({},rA),{width:i.toString(),height:r.toString(),top:s,left:a}),c=sS().toLowerCase();n&&(o=eT(c)?"_blank":n),QE(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,i]=t;return"".concat(e).concat(n,"=").concat(i,",")}),"");if(function(){var e;return sT(arguments.length>0&&void 0!==arguments[0]?arguments[0]:sS())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}(t||"",o),new sA(null);const d=window.open(t||"",o,u);lE(d,e,"popup-blocked");try{d.focus()}catch(oq){}return new sA(d)}const oA="__/auth/handler",lA="emulator/auth/handler",cA=encodeURIComponent("fac");async function uA(e,t,n,i,r,s){lE(e.config.authDomain,e,"auth-domain-config-required"),lE(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:kM,eventId:r};if(t instanceof zT){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))a[e]=t}if(t instanceof FT){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?"#".concat(cA,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(oA);return gE(t,lA)}(e),"?").concat(dS(o).slice(1)).concat(c)}const dA="webStorageSupport";const hA=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=aC,this._completeRedirectFn=BC,this._overrideRedirectResult=zC}async _openPopup(e,t,n,i){var r;uE(null===(r=this.eventManagers[e._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()");return aA(e,await uA(e,t,n,dE(),i),lC())}async _openRedirect(e,t,n,i){await this._originValidation(e);return function(e){uC().location.href=e}(await uA(e,t,n,dE(),i)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(uE(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await iA(e),n=new VC(e);return t.register("authEvent",(t=>{lE(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(dA,{type:dA},(n=>{var i;const r=null===(i=null===n||void 0===n?void 0:n[0])||void 0===i?void 0:i[dA];void 0!==r&&t(!!r),nE(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=XC(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return oT()||$E()||sT()}};var pA="@firebase/auth",fA="1.10.0";class mA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){lE(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const gA=iS("authIdTokenMaxAge")||300;let vA=null;var yA,xA;yA={loadJS:e=>new Promise(((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=e=>{const t=iE("internal-error");t.customData=e,n(t)},i.type="text/javascript",i.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(i)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},fT=yA,xA="Browser",TM(new vS("auth",((e,t)=>{let{options:n}=t;const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=i.options;lE(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:a,authDomain:o,clientPlatform:xA,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:lT(xA)},c=new dT(i,r,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(qE);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),TM(new vS("auth-internal",(e=>(e=>new mA(e))(hT(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),IM(pA,fA,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(xA)),IM(pA,fA,"esm2017");const bA=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bM;const t=wM.get(e);if(!t&&e===bM&&nS())return RM();if(!t)throw PM.create("no-app",{appName:e});return t}();const t=CM(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=CM(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(cS(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;nE(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:hA,persistence:[_C,tC,aC]}),i=iS("authTokenSyncURL");if(i&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(i,location.origin);if(location.origin===e.origin){const t=(r=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>gA)return;const i=null===t||void 0===t?void 0:t.token;vA!==i&&(vA=i,await fetch(r,{method:i?"POST":"DELETE",headers:i?{Authorization:"Bearer ".concat(i)}:{}}))});!function(e,t,n){gS(e).beforeAuthStateChanged(t,n)}(n,t,(()=>t(n.currentUser))),function(e,t,n,i){gS(e).onIdTokenChanged(t,n,i)}(n,(e=>t(e)))}}var r;const s=tS("auth");return s&&MT(n,"http://".concat(s)),n}(RM({apiKey:"AIzaSyAvU9kEEeWjQ7IAqBYbGgC42AdkWLES81M",authDomain:"rdv-project-7ba0a.firebaseapp.com",projectId:"rdv-project-7ba0a",storageBucket:"rdv-project-7ba0a.firebasestorage.app",messagingSenderId:"572769350923",appId:"1:572769350923:web:4583cdf7d3de12a6769e0e"})),_A=new BT,wA=new UT,SA={inputWrapper:{position:"relative",display:"flex",alignItems:"center",width:"100%"},inputIcon:{position:"absolute",left:"15px",color:"#666666",zIndex:5,pointerEvents:"none"},passwordToggle:{position:"absolute",right:"15px",zIndex:5,background:"transparent",border:"none",cursor:"pointer",padding:"8px",display:"flex",alignItems:"center",justifyContent:"center",color:"#666666"},input:{width:"100%",padding:"15px 15px 15px 45px",border:"1px solid #e1e1e1",borderRadius:"8px",fontSize:"1rem",transition:"all 0.3s ease",position:"relative",zIndex:1},passwordInput:{width:"100%",padding:"15px 45px 15px 45px",border:"1px solid #e1e1e1",borderRadius:"8px",fontSize:"1rem",transition:"all 0.3s ease",position:"relative",zIndex:1}},MA=()=>{const e=ne(),{login:t}=(0,r.useContext)(Oe),[n,i]=(0,r.useState)({email:"",password:""}),[s,a]=(0,r.useState)(""),[o,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)(!1),[d,h]=(0,r.useState)(!1),[p,f]=(0,r.useState)(!1),[m,g]=(0,r.useState)(!1),[v,y]=(0,r.useState)({google:!1,facebook:!1});(0,r.useEffect)((()=>{setTimeout((()=>g(!0)),300)}),[]),(0,r.useEffect)((()=>{n.password.length>0?h(!0):h(!1)}),[n.password]);return(0,De.jsxs)("div",{className:"login-container ".concat(m?"loaded":""),children:[c&&!s&&(0,De.jsx)(Bi,{message:"Connexion r\xe9ussie ! Redirection...",type:"success",duration:2e3,onClose:()=>u(!1)}),(0,De.jsxs)("div",{className:"login-card",children:[s&&(0,De.jsxs)("div",{className:"error-message",children:[(0,De.jsx)(Vw,{size:18}),(0,De.jsx)("span",{children:s})]}),(0,De.jsxs)("div",{className:"login-header",children:[(0,De.jsx)("h2",{className:"form-title",children:"Connexion"}),(0,De.jsx)("p",{className:"form-subtitle",children:"Heureux de vous revoir ! Connectez-vous \xe0 votre compte."})]}),(0,De.jsx)("div",{className:"avatar ".concat(d?"closed":"open"),children:(0,De.jsxs)("div",{className:"eyes",children:[(0,De.jsx)("div",{className:"eye"}),(0,De.jsx)("div",{className:"eye"})]})}),(0,De.jsxs)("form",{onSubmit:async i=>{i.preventDefault();try{if(l(!0),a(""),!n.email||!n.password)return void a("Veuillez remplir tous les champs");const i=await xi.login(n);if(i.data&&i.data.token&&i.data.user){const{token:n,user:r}=i.data;await t({token:n,user:r}),u(!0),setTimeout((()=>{const t="PROF"===r.role?"/professional/dashboard":"ADMIN"===r.role?"/admin/dashboard":"/user/dashboard";e(t)}),1500)}}catch(o){var r,s;console.error("Erreur de connexion:",o),a((null===(r=o.response)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.message)||"Email ou mot de passe incorrect");const e=document.querySelector(".error-message");e&&(e.classList.add("shake"),setTimeout((()=>e.classList.remove("shake")),500))}finally{l(!1)}},className:"login-form",children:[(0,De.jsxs)("div",{className:"form-group",children:[(0,De.jsx)("label",{htmlFor:"email",children:"Email"}),(0,De.jsxs)("div",{style:SA.inputWrapper,children:[(0,De.jsx)(Hw,{size:18,style:SA.inputIcon}),(0,De.jsx)("input",{id:"email",type:"email",value:n.email,onChange:e=>i(He(He({},n),{},{email:e.target.value})),placeholder:"Entrez votre email",required:!0,style:SA.input})]})]}),(0,De.jsxs)("div",{className:"form-group",children:[(0,De.jsx)("label",{htmlFor:"password",children:"Mot de passe"}),(0,De.jsxs)("div",{style:SA.inputWrapper,children:[(0,De.jsx)(Ww,{size:18,style:SA.inputIcon}),(0,De.jsx)("input",{id:"password",type:p?"text":"password",value:n.password,onChange:e=>i(He(He({},n),{},{password:e.target.value})),placeholder:"Entrez votre mot de passe",required:!0,style:SA.passwordInput}),(0,De.jsx)("button",{type:"button",onClick:()=>{h(!1),setTimeout((()=>{n.password.length>0&&h(!0)}),300),f((e=>!e))},"aria-label":p?"Masquer le mot de passe":"Afficher le mot de passe",style:SA.passwordToggle,children:p?(0,De.jsx)(Gw,{size:18}):(0,De.jsx)(qw,{size:18})})]})]}),(0,De.jsxs)("div",{className:"form-options",children:[(0,De.jsxs)("div",{className:"remember-me",children:[(0,De.jsx)("input",{type:"checkbox",id:"remember"}),(0,De.jsx)("label",{htmlFor:"remember",children:"Se souvenir de moi"})]}),(0,De.jsx)(Ie,{to:"/forgot-password",className:"forgot-password",children:"Mot de passe oubli\xe9 ?"})]}),(0,De.jsx)("button",{type:"submit",disabled:o,className:"btn-submit",children:o?(0,De.jsx)("span",{className:"loading-spinner"}):(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)(Xw,{size:18}),(0,De.jsx)("span",{children:"Se connecter"})]})})]}),(0,De.jsx)("div",{className:"form-footer",children:(0,De.jsxs)("p",{children:["Vous n'avez pas de compte ? ",(0,De.jsx)(Ie,{to:"/register",children:"Inscrivez-vous"})]})}),(0,De.jsxs)("div",{className:"social-login",children:[(0,De.jsx)("p",{className:"social-text",children:"Ou connectez-vous avec"}),(0,De.jsxs)("div",{className:"social-buttons",children:[(0,De.jsxs)("button",{type:"button",className:"social-btn google",onClick:async()=>{try{var n,i;y(He(He({},v),{},{google:!0})),a("");const r=await LC(bA,_A),{user:s}=r,o={email:s.email,nom:(null===(n=s.displayName)||void 0===n?void 0:n.split(" ")[1])||"",prenom:(null===(i=s.displayName)||void 0===i?void 0:i.split(" ")[0])||"",providerId:"google",providerUserId:s.uid,photoURL:s.photoURL};console.log("Donn\xe9es utilisateur Google:",o);const l=await xi.socialLogin(o);if(l.data&&l.data.token&&l.data.user){const{token:n,user:i}=l.data;await t({token:n,user:i}),u(!0),setTimeout((()=>{const t="PROF"===i.role?"/professional/dashboard":"ADMIN"===i.role?"/admin/dashboard":"/user/dashboard";e(t)}),1500)}}catch(o){var r,s;console.error("Erreur de connexion avec Google:",o),a((null===(r=o.response)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.message)||"\xc9chec de la connexion avec Google. Veuillez r\xe9essayer.");const e=document.querySelector(".error-message");e&&(e.classList.add("shake"),setTimeout((()=>e.classList.remove("shake")),500))}finally{y(He(He({},v),{},{google:!1}))}},disabled:v.google,children:[v.google?(0,De.jsx)("span",{className:"loading-spinner small"}):(0,De.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,De.jsx)("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),(0,De.jsx)("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),(0,De.jsx)("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),(0,De.jsx)("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),(0,De.jsx)("span",{children:"Google"})]}),(0,De.jsxs)("button",{type:"button",className:"social-btn facebook",onClick:async()=>{try{var n,i;y(He(He({},v),{},{facebook:!0})),a("");const r=await LC(bA,wA),{user:s}=r,o={email:s.email,nom:(null===(n=s.displayName)||void 0===n?void 0:n.split(" ")[1])||"",prenom:(null===(i=s.displayName)||void 0===i?void 0:i.split(" ")[0])||"",providerId:"facebook",providerUserId:s.uid,photoURL:s.photoURL},l=await xi.socialLogin(o);if(l.data&&l.data.token&&l.data.user){const{token:n,user:i}=l.data;await t({token:n,user:i}),u(!0),setTimeout((()=>{const t="PROF"===i.role?"/professional/dashboard":"ADMIN"===i.role?"/admin/dashboard":"/user/dashboard";e(t)}),1500)}}catch(r){console.error("Erreur de connexion avec Facebook:",r),a("\xc9chec de la connexion avec Facebook. Veuillez r\xe9essayer.");const e=document.querySelector(".error-message");e&&(e.classList.add("shake"),setTimeout((()=>e.classList.remove("shake")),500))}finally{y(He(He({},v),{},{facebook:!1}))}},disabled:v.facebook,children:[v.facebook?(0,De.jsx)("span",{className:"loading-spinner small"}):(0,De.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"#1877F2",stroke:"#1877F2",strokeWidth:"0",strokeLinecap:"round",strokeLinejoin:"round",children:(0,De.jsx)("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),(0,De.jsx)("span",{children:"Facebook"})]})]})]})]}),(0,De.jsxs)("div",{className:"login-decoration",children:[(0,De.jsx)("div",{className:"decoration-circle circle-1"}),(0,De.jsx)("div",{className:"decoration-circle circle-2"}),(0,De.jsx)("div",{className:"decoration-circle circle-3"})]})]})},EA=Aw("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),TA=Aw("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),CA=Aw("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),AA={inputWrapper:{position:"relative",display:"flex",alignItems:"center",width:"100%"},inputIcon:{position:"absolute",left:"15px",color:"#666666",zIndex:5,pointerEvents:"none"},input:{width:"100%",padding:"15px 15px 15px 45px",border:"1px solid #e1e1e1",borderRadius:"8px",fontSize:"1rem",transition:"all 0.3s ease",position:"relative",zIndex:1}},PA=()=>{const[e,t]=(0,r.useState)({nom:"",prenom:"",email:"",motDePasse:"",confirmMotDePasse:"",role:"UTILISATEUR"}),[n,i]=(0,r.useState)(""),[s,a]=(0,r.useState)(""),[o,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)(0),[d,h]=(0,r.useState)(1),p=ne(),[f,m]=(0,r.useState)(!1);(0,r.useEffect)((()=>{setTimeout((()=>m(!0)),300)}),[]),(0,r.useEffect)((()=>{const{motDePasse:t}=e;let n=0;t.length>0&&(n+=1),t.length>=8&&(n+=1),/[A-Z]/.test(t)&&(n+=1),/[0-9]/.test(t)&&(n+=1),/[^A-Za-z0-9]/.test(t)&&(n+=1),u(n)}),[e.motDePasse]);const g=e=>{const{name:n,value:r}=e.target;t((e=>He(He({},e),{},{[n]:r}))),i("")},v=()=>{1===d&&(e.nom&&e.prenom||(i("Veuillez remplir tous les champs"),0))?h(2):2===d&&(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email)||(i("Veuillez entrer une adresse email valide"),0))&&h(3)},y=()=>{h(d-1),i("")},x=()=>0===c?"":c<=2?"red":c<=4?"orange":"green";return(0,De.jsxs)("div",{className:"register-container ".concat(f?"loaded":""),children:[(0,De.jsxs)("div",{className:"register-card",children:[n&&(0,De.jsxs)("div",{className:"error-message",children:[(0,De.jsx)(Vw,{size:18})," ",n]}),s&&(0,De.jsxs)("div",{className:"success-message",children:[(0,De.jsx)(CA,{size:18})," ",s]}),(0,De.jsx)("form",{onSubmit:async t=>{if(t.preventDefault(),!(e.motDePasse.length<8?(i("Le mot de passe doit contenir au moins 8 caract\xe8res"),0):e.motDePasse===e.confirmMotDePasse||(i("Les mots de passe ne correspondent pas"),0)))return;l(!0),i("");const n={nom:e.nom,prenom:e.prenom,email:e.email,password:e.motDePasse,role:e.role};try{(await xi.register(n)).data&&(a("Inscription r\xe9ussie! Redirection vers la page de connexion..."),setTimeout((()=>{p("/login")}),2e3))}catch(o){var r,s;const e=(null===(r=o.response)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.message)||"Erreur lors de l'inscription";i(e);const t=document.querySelector(".error-message");t&&(t.classList.add("shake"),setTimeout((()=>t.classList.remove("shake")),500))}finally{l(!1)}},children:(()=>{switch(d){case 1:return(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)("h2",{className:"form-title",children:"Cr\xe9ez votre compte"}),(0,De.jsx)("p",{className:"form-subtitle",children:"\xc9tape 1 : Informations personnelles"}),(0,De.jsx)("div",{className:"form-group",children:(0,De.jsxs)("div",{style:AA.inputWrapper,children:[(0,De.jsx)(kw,{style:AA.inputIcon}),(0,De.jsx)("input",{type:"text",name:"nom",value:e.nom,onChange:g,placeholder:"Nom",required:!0,style:AA.input})]})}),(0,De.jsx)("div",{className:"form-group",children:(0,De.jsxs)("div",{style:AA.inputWrapper,children:[(0,De.jsx)(kw,{style:AA.inputIcon}),(0,De.jsx)("input",{type:"text",name:"prenom",value:e.prenom,onChange:g,placeholder:"Pr\xe9nom",required:!0,style:AA.input})]})}),(0,De.jsx)("div",{className:"form-actions",children:(0,De.jsxs)("button",{type:"button",className:"btn-next",onClick:v,children:["Suivant ",(0,De.jsx)(EA,{size:18})]})})]});case 2:return(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)("h2",{className:"form-title",children:"Cr\xe9ez votre compte"}),(0,De.jsx)("p",{className:"form-subtitle",children:"\xc9tape 2 : Adresse email"}),(0,De.jsx)("div",{className:"form-group",children:(0,De.jsxs)("div",{style:AA.inputWrapper,children:[(0,De.jsx)(Hw,{style:AA.inputIcon}),(0,De.jsx)("input",{type:"email",name:"email",value:e.email,onChange:g,placeholder:"Email",required:!0,style:AA.input})]})}),(0,De.jsxs)("div",{className:"form-group",children:[(0,De.jsx)("label",{className:"select-label",children:"Type de compte"}),(0,De.jsxs)("div",{className:"role-selector",children:[(0,De.jsxs)("div",{className:"role-option ".concat("UTILISATEUR"===e.role?"selected":""),onClick:()=>t(He(He({},e),{},{role:"UTILISATEUR"})),children:[(0,De.jsx)(kw,{size:24}),(0,De.jsx)("span",{children:"Utilisateur"})]}),(0,De.jsxs)("div",{className:"role-option ".concat("PROF"===e.role?"selected":""),onClick:()=>t(He(He({},e),{},{role:"PROF"})),children:[(0,De.jsx)(TA,{size:24}),(0,De.jsx)("span",{children:"Professionnel"})]})]})]}),(0,De.jsxs)("div",{className:"form-actions",children:[(0,De.jsx)("button",{type:"button",className:"btn-prev",onClick:y,children:"Retour"}),(0,De.jsxs)("button",{type:"button",className:"btn-next",onClick:v,children:["Suivant ",(0,De.jsx)(EA,{size:18})]})]})]});case 3:return(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)("h2",{className:"form-title",children:"Cr\xe9ez votre compte"}),(0,De.jsx)("p",{className:"form-subtitle",children:"\xc9tape 3 : S\xe9curit\xe9"}),(0,De.jsxs)("div",{className:"form-group",children:[(0,De.jsxs)("div",{style:AA.inputWrapper,children:[(0,De.jsx)(Ww,{style:AA.inputIcon}),(0,De.jsx)("input",{type:"password",name:"motDePasse",value:e.motDePasse,onChange:g,placeholder:"Mot de passe",required:!0,style:AA.input})]}),e.motDePasse&&(0,De.jsxs)("div",{className:"password-strength",children:[(0,De.jsx)("div",{className:"strength-bars",children:[1,2,3,4,5].map((e=>(0,De.jsx)("div",{className:"strength-bar ".concat(c>=e?"active":""),style:{backgroundColor:c>=e?x():""}},e)))}),(0,De.jsx)("span",{className:"strength-text",style:{color:x()},children:0===c?"":c<=2?"Faible":c<=4?"Moyen":"Fort"})]})]}),(0,De.jsxs)("div",{className:"form-group",children:[(0,De.jsxs)("div",{style:AA.inputWrapper,children:[(0,De.jsx)(Ww,{style:AA.inputIcon}),(0,De.jsx)("input",{type:"password",name:"confirmMotDePasse",value:e.confirmMotDePasse,onChange:g,placeholder:"Confirmer le mot de passe",required:!0,style:AA.input})]}),e.motDePasse&&e.confirmMotDePasse&&(0,De.jsx)("div",{className:"password-match",children:e.motDePasse===e.confirmMotDePasse?(0,De.jsxs)("span",{className:"match-success",children:[(0,De.jsx)(CA,{size:16})," Les mots de passe correspondent"]}):(0,De.jsxs)("span",{className:"match-error",children:[(0,De.jsx)(Vw,{size:16})," Les mots de passe ne correspondent pas"]})})]}),(0,De.jsxs)("div",{className:"form-actions",children:[(0,De.jsx)("button",{type:"button",className:"btn-prev",onClick:y,children:"Retour"}),(0,De.jsx)("button",{type:"submit",className:"btn-submit",disabled:o,children:o?"Inscription en cours...":"S'inscrire"})]})]});default:return null}})()}),(0,De.jsx)("div",{className:"form-steps",children:[1,2,3].map((e=>(0,De.jsx)("div",{className:"step-indicator ".concat(d===e?"active":""," ").concat(d>e?"completed":"")},e)))}),(0,De.jsx)("div",{className:"form-footer",children:(0,De.jsxs)("p",{children:["Vous avez d\xe9j\xe0 un compte ? ",(0,De.jsx)(Ie,{to:"/login",children:"Connectez-vous"})]})})]}),(0,De.jsxs)("div",{className:"register-decoration",children:[(0,De.jsx)("div",{className:"decoration-circle circle-1"}),(0,De.jsx)("div",{className:"decoration-circle circle-2"}),(0,De.jsx)("div",{className:"decoration-circle circle-3"})]})]})},NA=Aw("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),kA=()=>{const e=ne(),{login:t}=(0,r.useContext)(Oe),[n,i]=(0,r.useState)({email:"",motDePasse:""}),[s,a]=(0,r.useState)(""),[o,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)(!1),[d,h]=(0,r.useState)(""),[p,f]=(0,r.useState)(!1),[m,g]=(0,r.useState)(""),[v,y]=(0,r.useState)(!1),x=(0,r.useRef)(null),b="Ensemble, faisons avancer votre entreprise aujourd'hui !";(0,r.useEffect)((()=>{setTimeout((()=>f(!0)),100),setTimeout((()=>{y(!0);let e=0;const t=setInterval((()=>{e<56?(g(b.substring(0,e+1)),e++):clearInterval(t)}),50)}),1e3)}),[]);const _=e=>{const{name:t,value:r}=e.target;i(He(He({},n),{},{[t]:r}))};return(0,De.jsxs)("div",{className:"admin-login-container",children:[c&&(0,De.jsx)(Bi,{message:d,type:s?"error":"success",duration:3e3,onClose:()=>u(!1)}),(0,De.jsxs)("div",{ref:x,className:"admin-login-wrapper ".concat(p?"animate-in":"animate-out"),children:[(0,De.jsxs)("div",{className:"admin-login-background",children:[(0,De.jsx)("div",{className:"shape shape-1"}),(0,De.jsx)("div",{className:"shape shape-2"}),(0,De.jsx)("div",{className:"shape shape-3"}),(0,De.jsx)("div",{className:"shape shape-4"})]}),(0,De.jsxs)("div",{className:"admin-login-left",children:[v&&(0,De.jsxs)("div",{className:"admin-typing-message",children:[(0,De.jsx)("div",{className:"typing-indicator"}),(0,De.jsx)("p",{children:m})]}),(0,De.jsx)("div",{className:"admin-login-logo",children:(0,De.jsx)(Lw,{size:40})}),(0,De.jsx)("h1",{children:"Centre de Contr\xf4le"}),(0,De.jsxs)("div",{className:"admin-features",children:[(0,De.jsxs)("div",{className:"admin-feature",children:[(0,De.jsx)(Iw,{size:24}),(0,De.jsx)("p",{children:"Suivez vos performances et analysez vos donn\xe9es en temps r\xe9el"})]}),(0,De.jsxs)("div",{className:"admin-feature",children:[(0,De.jsx)(NA,{size:24}),(0,De.jsx)("p",{children:"G\xe9rez vos utilisateurs et leurs permissions en toute s\xe9curit\xe9"})]}),(0,De.jsxs)("div",{className:"admin-feature",children:[(0,De.jsx)(Pw,{size:24}),(0,De.jsx)("p",{children:"Planifiez et organisez vos rendez-vous efficacement"})]})]}),(0,De.jsx)("p",{className:"admin-tagline",children:"Votre portail d'administration"})]}),(0,De.jsxs)("div",{className:"admin-login-card",children:[(0,De.jsxs)("div",{className:"admin-login-header",children:[(0,De.jsx)("div",{className:"admin-icon",children:(0,De.jsx)(Ww,{size:32})}),(0,De.jsx)("h2",{children:"Connexion Admin"}),(0,De.jsx)("p",{children:"Acc\xe9dez \xe0 votre espace d'administration pour g\xe9rer votre entreprise"})]}),s&&(0,De.jsxs)("div",{className:"error-message",children:[(0,De.jsx)(Vw,{size:24}),(0,De.jsx)("span",{children:s})]}),(0,De.jsxs)("form",{onSubmit:async i=>{i.preventDefault(),l(!0),a("");try{const i=(await Ui.post("/admin/connexion",n)).data;i.token&&i.admin&&(f(!1),await t({token:i.token,user:He(He({},i.admin),{},{role:"ADMIN"})}),h("Connexion r\xe9ussie"),u(!0),setTimeout((()=>{e("/admin/dashboard")}),800))}catch(o){var r,s;const e=(null===(r=o.response)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.message)||"Identifiants invalides";a(e),h(e),u(!0);const t=document.querySelector(".admin-login-card");t.classList.add("shake"),setTimeout((()=>{t.classList.remove("shake")}),500)}finally{l(!1)}},children:[(0,De.jsxs)("div",{className:"form-group",children:[(0,De.jsxs)("label",{htmlFor:"email",children:[(0,De.jsx)(Hw,{size:20}),"Adresse email"]}),(0,De.jsx)("input",{type:"email",id:"email",name:"email",value:n.email,onChange:_,placeholder:"Entrez votre adresse email",required:!0,className:s?"input-error":""})]}),(0,De.jsxs)("div",{className:"form-group",children:[(0,De.jsxs)("label",{htmlFor:"motDePasse",children:[(0,De.jsx)(Ww,{size:20}),"Mot de passe"]}),(0,De.jsx)("input",{type:"password",id:"motDePasse",name:"motDePasse",value:n.motDePasse,onChange:_,placeholder:"Entrez votre mot de passe",required:!0,className:s?"input-error":""})]}),(0,De.jsx)("button",{type:"submit",className:"submit-button ".concat(o?"loading":""),disabled:o,children:o?(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)("div",{className:"loader"}),(0,De.jsx)("span",{children:"Connexion en cours..."})]}):(0,De.jsx)("span",{children:"Se connecter"})})]})]})]})]})};var RA={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IA=r.createContext&&r.createContext(RA),LA=function(){return LA=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},LA.apply(this,arguments)},jA=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};function DA(e){return e&&e.map((function(e,t){return r.createElement(e.tag,LA({key:t},e.attr),DA(e.child))}))}function OA(e){return function(t){return r.createElement(zA,LA({attr:LA({},e.attr)},t),DA(e.child))}}function zA(e){var t=function(t){var n,i=e.attr,s=e.size,a=e.title,o=jA(e,["attr","size","title"]),l=s||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),r.createElement("svg",LA({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,o,{className:n,style:LA(LA({color:e.color||t.color},t.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),a&&r.createElement("title",null,a),e.children)};return void 0!==IA?r.createElement(IA.Consumer,null,(function(e){return t(e)})):t(RA)}function FA(e){return OA({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"}}]})(e)}function UA(e){return OA({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"}}]})(e)}function BA(e){return OA({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"}}]})(e)}function VA(e){return OA({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"}}]})(e)}function HA(e){return OA({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"}}]})(e)}function WA(e){return OA({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm64-192c0-8.8 7.2-16 16-16h96c8.8 0 16 7.2 16 16v96c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16v-96zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"}}]})(e)}function GA(e){return OA({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"}}]})(e)}function qA(e){return OA({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"}}]})(e)}function XA(e){return OA({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"}}]})(e)}function YA(e){return OA({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM96 424c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm96-192c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zm128 368c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16z"}}]})(e)}function JA(e){return OA({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"}}]})(e)}function KA(e){return OA({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 32C114.6 32 0 125.1 0 240c0 49.6 21.4 95 57 130.7C44.5 421.1 2.7 466 2.2 466.5c-2.2 2.3-2.8 5.7-1.5 8.7S4.8 480 8 480c66.3 0 116-31.8 140.6-51.4 32.7 12.3 69 19.4 107.4 19.4 141.4 0 256-93.1 256-208S397.4 32 256 32z"}}]})(e)}function ZA(e){return OA({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"}}]})(e)}function QA(e){return OA({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"}}]})(e)}function $A(e){return OA({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 255.531c.253 136.64-111.18 248.372-247.82 248.468-59.015.042-113.223-20.53-155.822-54.911-11.077-8.94-11.905-25.541-1.839-35.607l11.267-11.267c8.609-8.609 22.353-9.551 31.891-1.984C173.062 425.135 212.781 440 256 440c101.705 0 184-82.311 184-184 0-101.705-82.311-184-184-184-48.814 0-93.149 18.969-126.068 49.932l50.754 50.754c10.08 10.08 2.941 27.314-11.313 27.314H24c-8.837 0-16-7.163-16-16V38.627c0-14.254 17.234-21.393 27.314-11.314l49.372 49.372C129.209 34.136 189.552 8 256 8c136.81 0 247.747 110.78 248 247.531zm-180.912 78.784l9.823-12.63c8.138-10.463 6.253-25.542-4.21-33.679L288 256.349V152c0-13.255-10.745-24-24-24h-16c-13.255 0-24 10.745-24 24v135.651l65.409 50.874c10.463 8.137 25.541 6.253 33.679-4.21z"}}]})(e)}function eP(e){return OA({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"}}]})(e)}function tP(e){return OA({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M48 48a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm0 160a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm0 160a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm448 16H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"}}]})(e)}function nP(e){return OA({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"}}]})(e)}function iP(e){return OA({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M290.74 93.24l128.02 128.02-277.99 277.99-114.14 12.6C11.35 513.54-1.56 500.62.14 485.34l12.7-114.22 277.9-277.88zm207.2-19.06l-60.11-60.11c-18.75-18.75-49.16-18.75-67.91 0l-56.55 56.55 128.02 128.02 56.55-56.55c18.75-18.76 18.75-49.16 0-67.91z"}}]})(e)}function rP(e){return OA({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"}}]})(e)}function sP(e){return OA({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"}}]})(e)}function aP(e){return OA({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"}}]})(e)}function oP(e){return OA({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"}}]})(e)}function lP(e){return OA({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"}}]})(e)}function cP(e){return OA({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"}}]})(e)}function uP(e){return OA({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 96c48.6 0 88 39.4 88 88s-39.4 88-88 88-88-39.4-88-88 39.4-88 88-88zm0 344c-58.7 0-111.3-26.6-146.5-68.2 18.8-35.4 55.6-59.8 98.5-59.8 2.4 0 4.8.4 7.1 1.1 13 4.2 26.6 6.9 40.9 6.9 14.3 0 28-2.7 40.9-6.9 2.3-.7 4.7-1.1 7.1-1.1 42.9 0 79.7 24.4 98.5 59.8C359.3 421.4 306.7 448 248 448z"}}]})(e)}function dP(e){return OA({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zM104 424c0 13.3 10.7 24 24 24s24-10.7 24-24-10.7-24-24-24-24 10.7-24 24zm216-135.4v49c36.5 7.4 64 39.8 64 78.4v41.7c0 7.6-5.4 14.2-12.9 15.7l-32.2 6.4c-4.3.9-8.5-1.9-9.4-6.3l-3.1-15.7c-.9-4.3 1.9-8.6 6.3-9.4l19.3-3.9V416c0-62.8-96-65.1-96 1.9v26.7l19.3 3.9c4.3.9 7.1 5.1 6.3 9.4l-3.1 15.7c-.9 4.3-5.1 7.1-9.4 6.3l-31.2-4.2c-7.9-1.1-13.8-7.8-13.8-15.9V416c0-38.6 27.5-70.9 64-78.4v-45.2c-2.2.7-4.4 1.1-6.6 1.9-18 6.3-37.3 9.8-57.4 9.8s-39.4-3.5-57.4-9.8c-7.4-2.6-14.9-4.2-22.6-5.2v81.6c23.1 6.9 40 28.1 40 53.4 0 30.9-25.1 56-56 56s-56-25.1-56-56c0-25.3 16.9-46.5 40-53.4v-80.4C48.5 301 0 355.8 0 422.4v44.8C0 491.9 20.1 512 44.8 512h358.4c24.7 0 44.8-20.1 44.8-44.8v-44.8c0-72-56.8-130.3-128-133.8z"}}]})(e)}function hP(e){return OA({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"}}]})(e)}function pP(e){return OA({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 64h-48V12c0-6.627-5.373-12-12-12h-40c-6.627 0-12 5.373-12 12v52H160V12c0-6.627-5.373-12-12-12h-40c-6.627 0-12 5.373-12 12v52H48C21.49 64 0 85.49 0 112v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm-6 400H54a6 6 0 0 1-6-6V160h352v298a6 6 0 0 1-6 6zm-52.849-200.65L198.842 404.519c-4.705 4.667-12.303 4.637-16.971-.068l-75.091-75.699c-4.667-4.705-4.637-12.303.068-16.971l22.719-22.536c4.705-4.667 12.303-4.637 16.97.069l44.104 44.461 111.072-110.181c4.705-4.667 12.303-4.637 16.971.068l22.536 22.718c4.667 4.705 4.636 12.303-.069 16.97z"}}]})(e)}function fP(e){return OA({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M336 292v24c0 6.6-5.4 12-12 12h-76v76c0 6.6-5.4 12-12 12h-24c-6.6 0-12-5.4-12-12v-76h-76c-6.6 0-12-5.4-12-12v-24c0-6.6 5.4-12 12-12h76v-76c0-6.6 5.4-12 12-12h24c6.6 0 12 5.4 12 12v76h76c6.6 0 12 5.4 12 12zm112-180v352c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V112c0-26.5 21.5-48 48-48h48V12c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v52h128V12c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v52h48c26.5 0 48 21.5 48 48zm-48 346V160H48v298c0 3.3 2.7 6 6 6h340c3.3 0 6-2.7 6-6z"}}]})(e)}function mP(e){return OA({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200-89.5 200-200 200zm61.8-104.4l-84.9-61.7c-3.1-2.3-4.9-5.9-4.9-9.7V116c0-6.6 5.4-12 12-12h32c6.6 0 12 5.4 12 12v141.7l66.8 48.6c5.4 3.9 6.5 11.4 2.6 16.8L334.6 349c-3.9 5.3-11.4 6.5-16.8 2.6z"}}]})(e)}function gP(e){return OA({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"}}]})(e)}const vP=e=>{let{onCategorySelect:t}=e;const[n,i]=(0,r.useState)([]),[s,a]=(0,r.useState)(!0),[o,l]=(0,r.useState)(null);return(0,r.useEffect)((()=>{(async()=>{try{a(!0);const e=await yi.getCategories();i(e.data||[]),a(!1)}catch(e){console.error("Erreur lors du chargement des cat\xe9gories:",e),l("Impossible de charger les cat\xe9gories. Veuillez r\xe9essayer plus tard."),a(!1)}})()}),[]),s?(0,De.jsxs)("div",{className:"loading-container",children:[(0,De.jsx)("div",{className:"loading-spinner"}),(0,De.jsx)("p",{children:"Chargement des cat\xe9gories..."})]}):o?(0,De.jsxs)("div",{className:"error-container",children:[(0,De.jsx)("p",{children:o}),(0,De.jsx)("button",{className:"retry-button",onClick:()=>window.location.reload(),children:"R\xe9essayer"})]}):0===n.length?(0,De.jsx)("div",{className:"empty-container",children:"Aucune cat\xe9gorie disponible pour le moment."}):(0,De.jsxs)("div",{className:"categories-container",children:[(0,De.jsx)("h2",{className:"categories-title",children:"Choisissez une cat\xe9gorie"}),(0,De.jsx)("div",{className:"categories-grid",children:n.map((e=>(0,De.jsxs)("div",{className:"category-card",onClick:()=>t(e._id),children:[(0,De.jsx)("div",{className:"category-icon",children:e.nom.charAt(0).toUpperCase()}),(0,De.jsx)("h3",{className:"category-name",children:e.nom}),(0,De.jsx)("p",{className:"category-description",children:e.description}),(0,De.jsx)("button",{className:"category-select-btn",children:"S\xe9lectionner"})]},e._id)))})]})},yP=e=>{let{categoryId:t,onProfessionalSelect:n,onBack:i}=e;const[s,a]=(0,r.useState)([]),[o,l]=(0,r.useState)(!0),[c,u]=(0,r.useState)(null),[d,h]=(0,r.useState)(null),[p,f]=(0,r.useState)(null),[m,g]=(0,r.useState)({}),v={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyAvU9kEEeWjQ7IAqBYbGgC42AdkWLES81M",REACT_APP_FIREBASE_APP_ID:"1:572769350923:web:4583cdf7d3de12a6769e0e",REACT_APP_FIREBASE_AUTH_DOMAIN:"rdv-project-7ba0a.firebaseapp.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-2E561CDQNN",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"572769350923",REACT_APP_FIREBASE_PROJECT_ID:"rdv-project-7ba0a",REACT_APP_FIREBASE_STORAGE_BUCKET:"rdv-project-7ba0a.firebasestorage.app"}.REACT_APP_API_URL||"http://localhost:5000";console.log("API_BASE_URL utilis\xe9e:",v),(0,r.useEffect)((()=>{t&&y()}),[t]);const y=async()=>{try{l(!0);const e=await yi.getProfessionalsByCategory(t);let n;n=e.data&&!0===e.data.success?e.data.data:e.data&&e.data.professionnels?e.data.professionnels:e.data,a(Array.isArray(n)?n:[]),l(!1)}catch(e){console.error("Erreur lors du chargement des professionnels:",e),u("Impossible de charger les professionnels. Veuillez r\xe9essayer plus tard."),l(!1)}},x=()=>{f(null)};return o?(0,De.jsx)("div",{className:"loading-container",children:"Chargement des professionnels..."}):c?(0,De.jsxs)("div",{className:"error-container",children:[(0,De.jsx)("p",{children:c}),(0,De.jsx)("button",{className:"back-button",onClick:i,children:"Retour aux cat\xe9gories"})]}):s&&0!==s.length?(0,De.jsxs)("div",{className:"professionals-container",children:[(0,De.jsxs)("div",{className:"professionals-header",children:[(0,De.jsx)("button",{className:"back-button",onClick:i,children:"\u2190 Retour aux cat\xe9gories"}),(0,De.jsx)("h2",{className:"professionals-title",children:"Choisissez un professionnel"})]}),(0,De.jsx)("div",{className:"professionals-grid",children:s.map((e=>{var t,n;const i=e.photo?((e,t)=>{if(m[t]||!e)return"/default-avatar.png";if(e.startsWith("data:image/")||e.startsWith("http"))return e;const n=e.split("/").pop();return"".concat(v,"/uploads/photos/").concat(n)})(e.photo,e._id):"/default-avatar.png";return(0,De.jsxs)("div",{className:"professional-card ".concat(d&&d._id===e._id?"selected":""),onClick:()=>(e=>{d&&d._id===e._id?h(null):h(e)})(e),children:[(0,De.jsx)("div",{className:"professional-avatar",children:e.photo&&!m[e._id]?(0,De.jsxs)("div",{className:"profile-image",children:[(0,De.jsx)("img",{src:i,alt:"".concat(e.prenom," ").concat(e.nom),className:"profile-photo","data-professional-id":e._id,onClick:e=>((e,t)=>{e.stopPropagation(),f(t)})(e,i),onError:()=>{return t=e._id,console.error("Erreur de chargement de l'image pour le professionnel ".concat(t)),void g((e=>He(He({},e),{},{[t]:!0})));var t}}),(0,De.jsx)("div",{className:"photo-overlay",children:(0,De.jsx)("span",{children:"Voir photo"})})]}):(0,De.jsxs)("div",{className:"avatar-placeholder",children:[null===(t=e.prenom)||void 0===t?void 0:t.charAt(0),null===(n=e.nom)||void 0===n?void 0:n.charAt(0)]})}),(0,De.jsxs)("div",{className:"professional-info",children:[(0,De.jsxs)("h3",{className:"professional-name",children:[e.prenom," ",e.nom]}),e.specialites&&e.specialites.length>0&&(0,De.jsx)("div",{className:"professional-specialties",children:e.specialites.map(((e,t)=>(0,De.jsx)("span",{className:"specialty-tag",children:"object"===typeof e?e.nom:e},t)))}),(0,De.jsxs)("div",{className:"professional-tarif",children:["Tarif: ",e.tarif?"".concat(e.tarif,"Ar"):"Non sp\xe9cifi\xe9"]}),d&&d._id===e._id&&(0,De.jsx)("div",{className:"professional-details",children:(0,De.jsx)("p",{className:"professional-description",children:e.description||"Aucune description disponible."})})]})]},e._id)}))}),d&&(0,De.jsx)("div",{className:"selection-actions",children:(0,De.jsxs)("button",{className:"select-professional-btn",onClick:()=>{d&&n(d)},children:["S\xe9lectionner ",d.prenom," ",d.nom]})}),p&&(0,De.jsx)("div",{className:"photo-modal",onClick:x,children:(0,De.jsxs)("div",{className:"photo-modal-content",onClick:e=>e.stopPropagation(),children:[(0,De.jsx)("span",{className:"close-modal",onClick:x,children:"\xd7"}),(0,De.jsx)("img",{src:p,alt:"Photo du professionnel",className:"modal-photo",onError:e=>{console.error("Erreur de chargement de l'image dans la modal"),e.target.onerror=null,e.target.src="/default-avatar.png"}})]})})]}):(0,De.jsxs)("div",{className:"empty-container",children:[(0,De.jsx)("p",{children:"Aucun professionnel disponible dans cette cat\xe9gorie."}),(0,De.jsx)("button",{className:"back-button",onClick:i,children:"Retour aux cat\xe9gories"})]})},xP=e=>{var t,n;let{professional:i,availabilities:s,loading:a,onAvailabilitySelect:o,onBack:l}=e;const[c,u]=(0,r.useState)(null),[d,h]=(0,r.useState)({}),[p,f]=(0,r.useState)(!1);(0,r.useEffect)((()=>{if(!s||0===s.length)return void f(!0);f(!1);const e=s.reduce(((e,t)=>{const n=new Date(t.debut).toISOString().split("T")[0];return e[n]||(e[n]=[]),e[n].push(t),e}),{});h(e),Object.keys(e).length>0&&!c&&u(Object.keys(e)[0])}),[s,c]);const m=e=>new Date(e).toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),g=e=>new Date(e).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"});return a?(0,De.jsx)("div",{className:"loading-container",children:"Chargement des disponibilit\xe9s..."}):p||!s||0===s.length?(0,De.jsxs)("div",{className:"empty-container",children:[(0,De.jsx)("p",{children:"Aucune disponibilit\xe9 pour ce professionnel."}),(0,De.jsx)("p",{children:"Veuillez s\xe9lectionner un autre professionnel ou revenir ult\xe9rieurement."}),(0,De.jsx)("button",{className:"back-button",onClick:l,children:"Retour \xe0 la s\xe9lection du professionnel"})]}):(0,De.jsxs)("div",{className:"availability-selection-container",children:[(0,De.jsxs)("div",{className:"availability-selection-header",children:[(0,De.jsx)("button",{className:"back-button",onClick:l,children:"\u2190 Retour"}),(0,De.jsx)("h2",{className:"availability-selection-title",children:"Choisissez une disponibilit\xe9"})]}),(0,De.jsxs)("div",{className:"professional-info-summary",children:[(0,De.jsx)("div",{className:"professional-avatar-small",children:i.photo?(0,De.jsx)("img",{src:i.photo.startsWith("http")?i.photo:"/api/uploads/photos/".concat(i.photo),alt:"".concat(i.prenom," ").concat(i.nom)}):(0,De.jsxs)("div",{className:"avatar-placeholder-small",children:[null===(t=i.prenom)||void 0===t?void 0:t.charAt(0),null===(n=i.nom)||void 0===n?void 0:n.charAt(0)]})}),(0,De.jsxs)("div",{className:"professional-details-small",children:[(0,De.jsxs)("h3",{children:[i.prenom," ",i.nom]}),(0,De.jsxs)("p",{children:["Tarif: ",i.tarif?"".concat(i.tarif,"Ar"):"Non sp\xe9cifi\xe9"]})]})]}),(0,De.jsxs)("div",{className:"date-selector",children:[(0,De.jsx)("h3",{children:"Dates disponibles"}),(0,De.jsx)("div",{className:"date-buttons",children:Object.keys(d).map((e=>(0,De.jsx)("button",{className:"date-button ".concat(c===e?"selected":""),onClick:()=>u(e),children:m(e)},e)))})]}),c&&d[c]&&(0,De.jsxs)("div",{className:"time-slots-container",children:[(0,De.jsxs)("h3",{children:["Horaires disponibles pour le ",m(c)]}),(0,De.jsx)("div",{className:"time-slots-grid",children:d[c].map((e=>(0,De.jsxs)("button",{className:"time-slot-button",onClick:()=>o(e),children:[g(e.debut)," - ",g(e.fin)]},e._id)))})]})]})},bP=e=>{let{onMotifSubmit:t,onBack:n}=e;const[i,s]=(0,r.useState)(""),[a,o]=(0,r.useState)("");return(0,De.jsxs)("div",{className:"motif-selection-container",children:[(0,De.jsxs)("div",{className:"motif-selection-header",children:[(0,De.jsx)("button",{className:"back-button",onClick:n,children:"\u2190 Retour"}),(0,De.jsx)("h2",{className:"motif-selection-title",children:"Motif de votre rendez-vous"})]}),(0,De.jsxs)("form",{onSubmit:e=>{e.preventDefault(),i.trim()?t(i):o("Veuillez indiquer le motif de votre rendez-vous")},className:"motif-form",children:[a&&(0,De.jsx)("div",{className:"error-message",children:a}),(0,De.jsxs)("div",{className:"form-group",children:[(0,De.jsx)("label",{htmlFor:"motif",children:"Veuillez indiquer le motif de votre rendez-vous :"}),(0,De.jsx)("textarea",{id:"motif",value:i,onChange:e=>s(e.target.value),placeholder:"D\xe9crivez bri\xe8vement la raison de votre rendez-vous...",rows:5,className:"motif-textarea"}),(0,De.jsx)("p",{className:"form-help-text",children:"Cette information aidera le professionnel \xe0 mieux pr\xe9parer votre rendez-vous."})]}),(0,De.jsxs)("div",{className:"form-actions",children:[(0,De.jsx)("button",{type:"button",className:"back-button-secondary",onClick:n,children:"Retour"}),(0,De.jsx)("button",{type:"submit",className:"continue-button",disabled:!i.trim(),children:"Continuer"})]})]})]})},_P=e=>{let{professional:t,availability:n,motif:i,onConfirm:r,onBack:s}=e;const a=e=>new Date(e).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"});return(0,De.jsxs)("div",{className:"booking-summary-container",children:[(0,De.jsxs)("div",{className:"booking-summary-header",children:[(0,De.jsx)("button",{className:"back-button",onClick:s,children:"\u2190 Retour"}),(0,De.jsx)("h2",{className:"booking-summary-title",children:"R\xe9sum\xe9 de votre r\xe9servation"})]}),(0,De.jsxs)("div",{className:"booking-summary-content",children:[(0,De.jsxs)("div",{className:"booking-professional-info",children:[(0,De.jsx)("h3",{children:"Professionnel"}),(0,De.jsxs)("div",{className:"professional-card-summary",children:[(0,De.jsx)("div",{className:"professional-avatar-summary",children:t.photo?(0,De.jsx)("img",{src:t.photo.startsWith("http")?t.photo:"/api/uploads/photos/".concat(t.photo),alt:"".concat(t.prenom," ").concat(t.nom)}):(0,De.jsxs)("div",{className:"avatar-placeholder-summary",children:[t.prenom.charAt(0),t.nom.charAt(0)]})}),(0,De.jsxs)("div",{className:"professional-details-summary",children:[(0,De.jsxs)("p",{className:"professional-name-summary",children:[t.prenom," ",t.nom]}),t.specialites&&t.specialites.length>0&&(0,De.jsx)("div",{className:"professional-specialties-summary",children:t.specialites.map(((e,t)=>(0,De.jsx)("span",{className:"specialty-tag-summary",children:e},t)))}),(0,De.jsxs)("p",{className:"professional-tarif-summary",children:["Tarif: ",t.tarif?"".concat(t.tarif,"Ar"):"Non sp\xe9cifi\xe9"]})]})]})]}),(0,De.jsxs)("div",{className:"booking-date-time-info",children:[(0,De.jsx)("h3",{children:"Date et heure"}),(0,De.jsx)("p",{className:"booking-date",children:(o=n.debut,new Date(o).toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"}))}),(0,De.jsxs)("p",{className:"booking-time",children:["de ",a(n.debut)," \xe0 ",a(n.fin)]})]}),(0,De.jsxs)("div",{className:"booking-motif-info",children:[(0,De.jsx)("h3",{children:"Motif du rendez-vous"}),(0,De.jsx)("p",{className:"booking-motif",children:i})]}),(0,De.jsxs)("div",{className:"booking-notes",children:[(0,De.jsx)("p",{children:"Votre rendez-vous sera en attente de confirmation par le professionnel."}),(0,De.jsx)("p",{children:"Vous recevrez une notification d\xe8s que le professionnel aura accept\xe9 votre demande."})]})]}),(0,De.jsxs)("div",{className:"booking-actions",children:[(0,De.jsx)("button",{className:"cancel-button",onClick:s,children:"Modifier"}),(0,De.jsx)("button",{className:"confirm-button",onClick:r,children:"Confirmer la r\xe9servation"})]})]});var o},wP=e=>{let{onBookingComplete:t}=e;const[n,i]=(0,r.useState)(1),[s,a]=(0,r.useState)(null),[o,l]=(0,r.useState)(null),[c,u]=(0,r.useState)(null),[d,h]=(0,r.useState)(""),[p,f]=(0,r.useState)([]),[m,g]=(0,r.useState)(!1),[v,y]=(0,r.useState)(null),[x,b]=(0,r.useState)({});(0,r.useEffect)((()=>{o&&(async()=>{if(o)try{g(!0);const e=await yi.getProfessionalAvailabilities(o._id);let t;t=e.data&&!0===e.data.success?e.data.data:e.data,f(Array.isArray(t)?t:[]),g(!1)}catch(e){console.error("Erreur lors du chargement des disponibilit\xe9s:",e),y("Impossible de charger les disponibilit\xe9s. Veuillez r\xe9essayer plus tard."),g(!1)}})()}),[o]);const _=()=>{n>1&&(i(n-1),3===n?l(null):4===n?u(null):5===n&&h(""))};return(0,De.jsxs)("div",{className:"booking-workflow",children:[(0,De.jsxs)("div",{className:"booking-steps",children:[(0,De.jsx)("div",{className:"step ".concat(n>=1?"active":""),children:"1. Cat\xe9gorie"}),(0,De.jsx)("div",{className:"step ".concat(n>=2?"active":""),children:"2. Professionnel"}),(0,De.jsx)("div",{className:"step ".concat(n>=3?"active":""),children:"3. Disponibilit\xe9"}),(0,De.jsx)("div",{className:"step ".concat(n>=4?"active":""),children:"4. Motif"}),(0,De.jsx)("div",{className:"step ".concat(n>=5?"active":""),children:"5. Confirmation"})]}),v&&(0,De.jsxs)("div",{className:"error-message",children:[v,(0,De.jsx)("button",{onClick:()=>y(null),children:"Fermer"})]}),(0,De.jsxs)("div",{className:"booking-content",children:[1===n&&(0,De.jsx)(vP,{onCategorySelect:e=>{a(e),i(2)}}),2===n&&(0,De.jsx)(yP,{categoryId:s,onProfessionalSelect:e=>{l(e),i(3)},onBack:_}),3===n&&(0,De.jsx)(xP,{professional:o,availabilities:p,loading:m,onAvailabilitySelect:e=>{u(e),i(4)},onBack:_}),4===n&&(0,De.jsx)(bP,{onMotifSubmit:e=>{h(e),b({professionnelId:o._id,date:new Date(c.debut).toISOString(),motif:e,status:"PENDING"}),i(5)},onBack:_}),5===n&&(0,De.jsx)(_P,{professional:o,availability:c,motif:d,onConfirm:async()=>{try{await t(x),i(1),a(null),l(null),u(null),h(""),f([]),b({})}catch(v){console.error("Erreur lors de la confirmation de la r\xe9servation:",v),y("Erreur lors de la confirmation de la r\xe9servation. Veuillez r\xe9essayer.")}},onBack:_})]})]})},SP=e=>{let{appointments:t,onCancel:n}=e;const[i,s]=(0,r.useState)([]),[a,o]=(0,r.useState)(!0),[l,c]=(0,r.useState)(null),[u,d]=(0,r.useState)("all"),[h,p]=(0,r.useState)("newest");(0,r.useEffect)((()=>{t?(s(t),o(!1)):f()}),[t]);const f=async()=>{try{o(!0),c(null);const e=await yi.getAppointments();s(e.data)}catch(e){console.error("Erreur de chargement:",e),c("Erreur lors du chargement des rendez-vous")}finally{o(!1)}},m=[...i.filter((e=>"all"===u||("pending"===u?"PENDING"===e.status:"confirmed"===u?"CONFIRME"===e.status:"cancelled"!==u||"ANNULE"===e.status)))].sort(((e,t)=>{const n=new Date(e.date),i=new Date(t.date);return"newest"===h?i-n:n-i})),g=e=>new Date(e).toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return(0,De.jsxs)("div",{className:"appointments-section",children:[(0,De.jsxs)("div",{className:"appointments-header",children:[(0,De.jsxs)("div",{className:"filter-buttons",children:[(0,De.jsx)("button",{onClick:()=>d("all"),className:"filter-button ".concat("all"===u?"active":""),children:"Tous"}),(0,De.jsx)("button",{onClick:()=>d("pending"),className:"filter-button ".concat("pending"===u?"active":""),children:"En attente"}),(0,De.jsx)("button",{onClick:()=>d("confirmed"),className:"filter-button ".concat("confirmed"===u?"active":""),children:"Confirm\xe9s"}),(0,De.jsx)("button",{onClick:()=>d("cancelled"),className:"filter-button ".concat("cancelled"===u?"active":""),children:"Annul\xe9s"})]}),(0,De.jsx)("div",{className:"sort-options",children:(0,De.jsxs)("select",{value:h,onChange:e=>p(e.target.value),className:"sort-select",children:[(0,De.jsx)("option",{value:"newest",children:"Plus r\xe9cents"}),(0,De.jsx)("option",{value:"oldest",children:"Plus anciens"})]})})]}),a&&(0,De.jsxs)("div",{className:"loading-container",children:[(0,De.jsx)("div",{className:"loading-spinner"}),(0,De.jsx)("p",{children:"Chargement des rendez-vous..."})]}),l&&(0,De.jsx)("div",{className:"error-message",children:l}),!a&&0===m.length&&(0,De.jsxs)("div",{className:"empty-state",children:[(0,De.jsx)(HA,{className:"empty-icon"}),(0,De.jsxs)("p",{className:"empty-text",children:["Aucun rendez-vous ","all"!==u&&"".concat("pending"===u?"en attente":"confirmed"===u?"confirm\xe9":"annul\xe9")," trouv\xe9"]}),(0,De.jsx)("p",{className:"empty-subtext",children:"all"===u?"Vous n'avez pas encore de rendez-vous. R\xe9servez-en un d\xe8s maintenant !":"Changez de filtre pour voir d'autres rendez-vous."})]}),!a&&m.length>0&&(0,De.jsx)("div",{className:"appointments-list",children:m.map((e=>{var t,i,r;const s=(a=e.date,new Date(a)<new Date);var a;const o=((e,t)=>t?"status-past":"PENDING"===e?"status-pending":"CONFIRME"===e?"status-confirmed":"ANNULE"===e?"status-cancelled":"")(e.status,s),l=((e,t)=>t?"Pass\xe9":"PENDING"===e?"En attente":"CONFIRME"===e?"Confirm\xe9":"ANNULE"===e?"Annul\xe9":e)(e.status,s);return(0,De.jsxs)("div",{className:"appointment-card ".concat(s?"past-appointment":""),children:[(0,De.jsx)("div",{className:"appointment-header",children:(0,De.jsx)("span",{className:"appointment-status ".concat(o),children:l})}),(0,De.jsxs)("div",{className:"appointment-body",children:[(0,De.jsxs)("div",{className:"appointment-detail",children:[(0,De.jsx)(hP,{className:"detail-icon"}),(0,De.jsxs)("div",{className:"detail-content",children:[(0,De.jsx)("span",{className:"detail-label",children:"Professionnel"}),(0,De.jsxs)("span",{className:"detail-value",children:[null===(t=e.professionnel)||void 0===t?void 0:t.nom," ",null===(i=e.professionnel)||void 0===i?void 0:i.prenom]})]})]}),(0,De.jsxs)("div",{className:"appointment-detail",children:[(0,De.jsx)(HA,{className:"detail-icon"}),(0,De.jsxs)("div",{className:"detail-content",children:[(0,De.jsx)("span",{className:"detail-label",children:"Date"}),(0,De.jsx)("span",{className:"detail-value",children:g(e.date)})]})]}),(null===(r=e.professionnel)||void 0===r?void 0:r.adresse)&&(0,De.jsxs)("div",{className:"appointment-detail",children:[(0,De.jsx)(nP,{className:"detail-icon"}),(0,De.jsxs)("div",{className:"detail-content",children:[(0,De.jsx)("span",{className:"detail-label",children:"Adresse"}),(0,De.jsx)("span",{className:"detail-value",children:e.professionnel.adresse})]})]}),(0,De.jsxs)("div",{className:"appointment-detail",children:[(0,De.jsx)(eP,{className:"detail-icon"}),(0,De.jsxs)("div",{className:"detail-content",children:[(0,De.jsx)("span",{className:"detail-label",children:"Motif"}),(0,De.jsx)("span",{className:"detail-value",children:e.motif})]})]})]}),(0,De.jsxs)("div",{className:"appointment-footer",children:["PENDING"===e.status&&!s&&(0,De.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Voulez-vous vraiment annuler ce rendez-vous ?"))try{await yi.cancelAppointment(e),n?n(e):await f()}catch(t){console.error("Erreur d'annulation:",t),alert("\xc9chec de l'annulation du rendez-vous")}})(e._id),className:"cancel-button",children:"Annuler"}),(0,De.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Voulez-vous d\xe9finitivement supprimer ce rendez-vous ?"))try{await yi.deleteAppointment(e),await f()}catch(t){console.error("Erreur de suppression:",t),alert("\xc9chec de la suppression du rendez-vous")}})(e._id),className:"delete-button",title:"Supprimer ce rendez-vous",children:(0,De.jsx)(cP,{})})]})]},e._id)}))})]})},MP=()=>{const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)(!0),[s,a]=(0,r.useState)(null),o=(0,r.useCallback)((async()=>{try{i(!0),a(null);const e=(await yi.getAppointments()).data.filter((e=>new Date(e.updatedAt)>new Date(Date.now()-6048e5))).map((e=>({id:e._id,message:l(e),date:new Date(e.updatedAt||e.date),status:e.status,isRead:!1})));t(e)}catch(e){console.error("Erreur de chargement des notifications:",e),a("Erreur lors du chargement des notifications")}finally{i(!1)}}),[]);(0,r.useEffect)((()=>{o()}),[o]);const l=e=>{var t,n;const i="".concat((null===(t=e.professionnel)||void 0===t?void 0:t.prenom)||""," ").concat((null===(n=e.professionnel)||void 0===n?void 0:n.nom)||"").trim(),r=new Date(e.date).toLocaleString("fr-FR",{dateStyle:"long",timeStyle:"short"});switch(e.status){case"CONFIRME":return"Votre rendez-vous avec ".concat(i," le ").concat(r," a \xe9t\xe9 confirm\xe9.");case"ANNULE":return"Votre rendez-vous avec ".concat(i," le ").concat(r," a \xe9t\xe9 annul\xe9.");case"PENDING":return"Votre demande de rendez-vous avec ".concat(i," le ").concat(r," est en attente de confirmation.");default:return"Mise \xe0 jour du statut de votre rendez-vous avec ".concat(i," le ").concat(r,".")}};return n?(0,De.jsx)("div",{className:"p-4",children:"Chargement des notifications..."}):s?(0,De.jsx)("div",{className:"p-4 text-red-600",children:s}):(0,De.jsxs)("div",{className:"p-4",children:[(0,De.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Notifications"}),0===e.length?(0,De.jsx)("div",{className:"p-4 bg-gray-50 rounded-lg",children:(0,De.jsx)("p",{children:"Aucune notification r\xe9cente"})}):(0,De.jsx)("div",{className:"space-y-3",children:e.map((e=>(0,De.jsx)("div",{className:"border rounded-lg p-3 shadow-sm ".concat(e.isRead?"bg-gray-50":"bg-blue-50 border-blue-200"),onClick:()=>(e=>{t((t=>t.map((t=>t.id===e?He(He({},t),{},{isRead:!0}):t))))})(e.id),children:(0,De.jsxs)("div",{className:"flex items-start gap-3",children:[(0,De.jsx)("div",{className:"mt-1 flex-shrink-0 w-2 h-2 rounded-full ".concat("CONFIRME"===e.status?"bg-green-500":"ANNULE"===e.status?"bg-red-500":"bg-yellow-500")}),(0,De.jsxs)("div",{className:"flex-1",children:[(0,De.jsx)("p",{className:"".concat(e.isRead?"text-gray-700":"text-gray-900 font-medium"),children:e.message}),(0,De.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:e.date.toLocaleString("fr-FR",{dateStyle:"medium",timeStyle:"short"})})]})]})},e.id)))})]})},EP=e=>{if(!e)return!1;const t=e.toLowerCase();return[/comment (?:utiliser|naviguer|se servir de|fonctionne) (?:le site|la plateforme|l'application)/i,/comment (?:prendre|r\xe9server|faire|planifier) (?:un|des) rendez-vous/i,/comment (?:s'inscrire|cr\xe9er un compte|s'enregistrer)/i,/comment (?:modifier|annuler|changer) (?:un|mon|des) rendez-vous/i,/(?:guide|tutoriel|aide|instructions) (?:d'utilisation|pour utiliser)/i,/(?:je ne sais pas|je ne comprends pas) comment (?:utiliser|faire)/i,/(?:perdu|confus|besoin d'aide)/i,/prendre rendez-vous/i,/r\xe9server (?:un|des) rendez-vous/i,/comment (?:prendre|r\xe9server|faire|planifier)/i,/rendez-vous dans (?:ce|cette|le|la) (?:site|plateforme)/i,/(?:rdv|rendez-vous) (?:en ligne|sur le site|sur la plateforme)/i,/(?:proc\xe9dure|d\xe9marche|\xe9tape) (?:pour|de) (?:rdv|rendez-vous)/i,/(?:obtenir|avoir|fixer) (?:un|des) (?:rdv|rendez-vous)/i].some((e=>e.test(t)))||[/mesupres c'est quoi/i,/c'est quoi (le |la |)mesupres/i,/qu(?:'|e)(?:st-ce que|) (?:le|c'est le|) (?:mesupres|minist\xe8re|mesupr)/i,/(?:r\xf4le|mission|fonction|objectif|but) (?:du|de la|de|des) (?:mesupres|minist\xe8re|mesupr)/i,/(?:service|d\xe9partement|direction) (?:du|de la|de|des) (?:mesupres|minist\xe8re|mesupr)/i,/(?:contact|coordonn\xe9e|adresse|t\xe9l\xe9phone|email) (?:du|de la|de|des) (?:mesupres|minist\xe8re|mesupr)/i,/(?:horaire|heure d'ouverture) (?:du|de la|de|des) (?:mesupres|minist\xe8re|mesupr)/i,/(?:information|renseignement) (?:sur|\xe0 propos de|concernant) (?:le|la|les) (?:mesupres|minist\xe8re|mesupr)/i,/o\xf9 (?:est|se trouve|est situ\xe9|est localis\xe9) (?:le |)(?:mesupres|minist\xe8re|mesupr)/i,/localisation (?:du|de la|de|des) (?:mesupres|minist\xe8re|mesupr)/i,/(?:mesupres|minist\xe8re|mesupr) (?:se trouve|est situ\xe9|est)/i].some((e=>e.test(t)))},TP=e=>{if(!e)return!1;const t=e.toLowerCase();return["quels domaines","quels sont les domaines","liste des domaines","domaines disponibles","tous les domaines","tout les domaine","cat\xe9gories disponibles","quelles cat\xe9gories","quelles sont les cat\xe9gories","sp\xe9cialit\xe9s disponibles","quelles sp\xe9cialit\xe9s"].some((e=>t.includes(e)))},CP=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!e||!t.length)return null;if(TP(e))return null;const n=e.toLowerCase(),i={informatique:["informatique","d\xe9veloppeur","programmeur","codeur","tech","it","logiciel","syst\xe8me","r\xe9seau","ordinateur","web","site","application","d\xe9veloppement"],dokotera:["dokotera","m\xe9decin","docteur","sant\xe9","soins","consultation","traitement","m\xe9dical","clinique","h\xf4pital","maladie","sympt\xf4me"],mecanicien:["mecanicien","m\xe9canique","r\xe9paration","voiture","auto","v\xe9hicule","moteur","garage","panne","automobile"],rh:["rh","ressources humaines","recrutement","carri\xe8re","emploi","cv","entretien","embauche","personnel","gestion"]};for(const r of t){const e=r.toLowerCase();if(n.includes(e))return r;const t=i[e]||[];for(const i of t)if(n.includes(i))return r}return null},AP=e=>{const t=e.toLowerCase();if(["professeur","prof","professionnel","enseignant","chercheur","universit\xe9","facult\xe9","\xe9cole","institut","formation","cours","\xe9tude","\xe9tudier","enseigner","recherche","minist\xe8re","mesupr","mesupres","sup\xe9rieur","scientifique","rendez-vous","rdv","r\xe9server","prendre","contacter","informatique","math\xe9matiques","physique","chimie","biologie","m\xe9decine","droit","\xe9conomie","gestion","lettres","suggestion","sugg\xe9rer","proposer","recommander","trouver"].some((e=>t.includes(e))))return!1;return[/comment (?:tu |vous |t'|s')?appell/i,/quel est ton nom/i,/qui es[- ]tu/i,/tu es qui/i,/parle[- ]moi de toi/i,/raconte[- ]moi/i,/d'o\xf9 viens[- ]tu/i,/o\xf9 habites[- ]tu/i,/quel \xe2ge as[- ]tu/i,/es[- ]tu (?:un robot|une ia|humain)/i,/es[- ]tu mari\xe9/i,/as[- ]tu des enfants/i,/quelle heure est[- ]il/i,/quel temps fait[- ]il/i,/blague|joke|dr\xf4le/i,/chanson|chante/i,/po\xe8me|po\xe9sie/i,/histoire dr\xf4le/i,/comment vas[- ]tu/i].some((e=>e.test(t)))},PP=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(!e)return{id:t("bot"),text:"Comment puis-je vous aider aujourd'hui ?",sender:"bot"};const i=e.toLowerCase();if(TP(e))return n&&0!==n.length?i.includes("combien")||i.includes("nombre")?{id:t("bot"),text:"Nous avons actuellement ".concat(n.length," domaines disponibles sur notre plateforme : ").concat(n.join(", "),"."),sender:"bot",showCategories:!0,availableDomains:n}:{id:t("bot"),text:"Voici tous les domaines disponibles sur notre plateforme :",sender:"bot",showCategories:!0,availableDomains:n}:{id:t("bot"),text:"Je suis d\xe9sol\xe9, mais aucun domaine n'est disponible pour le moment.",sender:"bot"};if((e=>{if(!e)return!1;const t=e.toLowerCase();return[/mesupres/i,/minist\xe8re/i,/enseignement sup\xe9rieur/i,/recherche scientifique/i,/minist[e\xe8]re de l['']enseignement/i].some((e=>e.test(t)))})(e))return kP(e,t);if(i.includes("t'appele")||i.includes("ton nom")||i.includes("qui es-tu")||i.includes("tu es qui"))return{id:t("bot"),text:"Je suis l'assistant virtuel de MESupReS. Je suis l\xe0 pour vous aider \xe0 trouver des professionnels et r\xe9pondre \xe0 vos questions.",sender:"bot"};if(i.match(/^(bonjour|salut|hello|hey|hi|coucou|bonsoir)(\s|$)/i))return{id:t("bot"),text:"Bonjour ! Je suis l'assistant virtuel de MESupReS. Comment puis-je vous aider aujourd'hui ?",sender:"bot"};if(i.match(/(merci|thanks|thank you|je te remercie)/i))return{id:t("bot"),text:"Je vous en prie ! N'h\xe9sitez pas si vous avez d'autres questions.",sender:"bot"};const r=(e=>{if(!e)return!1;const t=e.toLowerCase();return[/professionnel(s)?\s+disponible(s)?/i,/cherche\s+(un|des)\s+professionnel(s)?/i,/sugg\xe8re(-moi)?\s+(des|quelques)?\s+professionnel(s)?/i,/besoin\s+d['e]un\s+professionnel/i,/trouver?\s+(un|des)\s+professionnel(s)?/i,/voir\s+(les|des)\s+professionnel(s)?/i,/liste\s+de(s)?\s+professionnel(s)?/i,/qui\s+peut\s+m['e]aider/i,/disponibilit\xe9(s)?\s+de(s)?\s+professionnel(s)?/i,/rendez-vous/i,/rdv/i,/consulter/i,/consultation/i].some((e=>e.test(t)))})(e);if(r){const i=CP(e,n);return i&&n.length>0&&!n.includes(i)?{id:t("bot"),text:'Je suis d\xe9sol\xe9, mais le domaine "'.concat(i,"\" n'est pas disponible actuellement. Voici les domaines disponibles :"),sender:"bot",showCategories:!0,availableDomains:n}:i?{id:t("bot"),text:"Voici les professionnels disponibles dans le domaine ".concat(i," :"),sender:"bot",showProfessionals:!0,domain:i}:professionals&&0!==professionals.length?{id:t("bot"),text:"Voici quelques professionnels disponibles actuellement :",sender:"bot",showProfessionals:!0}:{id:t("bot"),text:"Je suis d\xe9sol\xe9, mais aucun professionnel n'est disponible actuellement. Veuillez r\xe9essayer plus tard.",sender:"bot"}}const s=CP(e,n);if(s)return n.length>0&&!n.includes(s)?{id:t("bot"),text:'Je suis d\xe9sol\xe9, mais le domaine "'.concat(s,"\" n'est pas disponible actuellement. Voici les domaines disponibles :"),sender:"bot",showCategories:!0,availableDomains:n}:{id:t("bot"),text:"Vous cherchez un professionnel en ".concat(s,". Voici les sp\xe9cialistes disponibles :"),sender:"bot",showProfessionals:!0,domain:s};if(i.includes("aide")||i.includes("help"))return{id:t("bot"),text:"Je peux vous aider \xe0 trouver des professionnels dans diff\xe9rents domaines comme l'informatique, la m\xe9decine, la m\xe9canique ou les ressources humaines. Que recherchez-vous exactement ?",sender:"bot"};if(i.includes("service")||i.includes("offre"))return{id:t("bot"),text:"Notre plateforme vous permet de trouver et prendre rendez-vous avec des professionnels dans divers domaines. Vous pouvez consulter leurs disponibilit\xe9s et r\xe9server directement en ligne.",sender:"bot"};if(EP(e))return NP(e,t);if(AP(e))return RP(t);const a=["Comment puis-je vous aider aujourd'hui ? Vous cherchez un professionnel dans un domaine particulier ?","Je peux vous aider \xe0 trouver un professionnel. Dans quel domaine souhaitez-vous prendre rendez-vous ?","Bonjour ! Je suis l\xe0 pour vous aider \xe0 trouver le bon professionnel. Dites-moi ce dont vous avez besoin."];return{id:t("bot"),text:a[Math.floor(Math.random()*a.length)],sender:"bot"}},NP=(e,t)=>{const n=e.toLowerCase();return/comment (?:prendre|r\xe9server|faire|planifier) (?:un|des) rendez-vous/i.test(n)?{id:t?t("bot"):"bot-"+Date.now(),text:"Pour prendre rendez-vous sur notre plateforme, suivez ces \xe9tapes simples :\n\n1. Connectez-vous \xe0 votre compte (ou cr\xe9ez-en un si vous n'en avez pas)\n2. Utilisez la barre de recherche ou parcourez les cat\xe9gories pour trouver un professionnel\n3. Consultez le profil du professionnel et cliquez sur 'Prendre rendez-vous'\n4. S\xe9lectionnez une date et un cr\xe9neau horaire disponible dans le calendrier\n5. Remplissez le formulaire en pr\xe9cisant l'objet de votre rendez-vous\n6. Confirmez votre rendez-vous\n\nVous recevrez une confirmation par email avec tous les d\xe9tails de votre rendez-vous. Souhaitez-vous que je vous aide \xe0 trouver un professionnel maintenant ?",sender:"bot"}:/comment (?:s'inscrire|cr\xe9er un compte|s'enregistrer)/i.test(n)?{id:t?t("bot"):"bot-"+Date.now(),text:"Pour cr\xe9er un compte sur notre plateforme :\n\n1. Cliquez sur le bouton 'S'inscrire' en haut \xe0 droite de la page d'accueil\n2. Choisissez entre une inscription avec votre email ou via votre compte Google\n3. Si vous choisissez l'email, remplissez le formulaire avec vos informations personnelles\n4. Cr\xe9ez un mot de passe s\xe9curis\xe9\n5. Acceptez les conditions d'utilisation\n6. Cliquez sur 'Cr\xe9er mon compte'\n\nVous recevrez un email de confirmation pour activer votre compte. Avez-vous besoin d'aide pour autre chose ?",sender:"bot"}:/comment (?:modifier|annuler|changer) (?:un|mon|des) rendez-vous/i.test(n)?{id:t?t("bot"):"bot-"+Date.now(),text:"Pour modifier ou annuler un rendez-vous :\n\n1. Connectez-vous \xe0 votre compte\n2. Acc\xe9dez \xe0 votre tableau de bord utilisateur\n3. Dans la section 'Mes rendez-vous', trouvez le rendez-vous concern\xe9\n4. Pour modifier : cliquez sur l'ic\xf4ne de modification, puis choisissez une nouvelle date/heure\n5. Pour annuler : cliquez sur l'ic\xf4ne d'annulation, puis confirmez votre choix\n\nNotez que les modifications ou annulations doivent \xeatre effectu\xe9es au moins 24 heures avant l'heure pr\xe9vue du rendez-vous. Puis-je vous aider avec autre chose ?",sender:"bot"}:{id:t?t("bot"):"bot-"+Date.now(),text:"Voici comment utiliser notre plateforme de rendez-vous :\n\n\u2022 Pour prendre rendez-vous : recherchez un professionnel, s\xe9lectionnez un cr\xe9neau disponible et confirmez votre r\xe9servation\n\u2022 Pour vous inscrire : cliquez sur 'S'inscrire' et suivez les instructions\n\u2022 Pour g\xe9rer vos rendez-vous : connectez-vous et acc\xe9dez \xe0 votre tableau de bord\n\u2022 Pour modifier/annuler un rendez-vous : allez dans 'Mes rendez-vous' sur votre tableau de bord\n\nQue souhaitez-vous faire pr\xe9cis\xe9ment ? Je peux vous donner des instructions plus d\xe9taill\xe9es.",sender:"bot"}},kP=(e,t)=>{const n=e.toLowerCase();if(n.includes("o\xf9")||n.includes("ou")||n.includes("adresse")||n.includes("trouve"))return{id:t("bot"),text:"Le Minist\xe8re de l'Enseignement Sup\xe9rieur et de la Recherche Scientifique (MESupReS) est situ\xe9 \xe0 Antananarivo, Madagascar. Vous pouvez visiter leur site officiel pour plus d'informations.",sender:"bot"};if(n.includes("contact")||n.includes("t\xe9l\xe9phone")||n.includes("appeler")||n.includes("joindre"))return{id:t("bot"),text:"Vous pouvez contacter le MESupReS par t\xe9l\xe9phone au [num\xe9ro de t\xe9l\xe9phone] ou par email \xe0 [adresse email]. Vous pouvez \xe9galement visiter leur site web officiel pour plus d'informations de contact.",sender:"bot"};if(n.includes("service")||n.includes("offre")||n.includes("propose"))return{id:t("bot"),text:"Le MESupReS est responsable de l'enseignement sup\xe9rieur et de la recherche scientifique \xe0 Madagascar. Il supervise les universit\xe9s, \xe9tablit les politiques d'enseignement sup\xe9rieur, et coordonne les programmes de recherche scientifique.",sender:"bot"};const i=["Le MESupReS (Minist\xe8re de l'Enseignement Sup\xe9rieur et de la Recherche Scientifique) est responsable de l'enseignement sup\xe9rieur \xe0 Madagascar.","Le MESupReS supervise les universit\xe9s et \xe9tablissements d'enseignement sup\xe9rieur \xe0 Madagascar.","Le MESupReS \xe9tablit les politiques d'enseignement sup\xe9rieur et coordonne les programmes de recherche scientifique \xe0 Madagascar."];return{id:t("bot"),text:i[Math.floor(Math.random()*i.length)],sender:"bot"}},RP=e=>{const t=["Je suis un assistant virtuel d\xe9di\xe9 uniquement au Minist\xe8re de l'Enseignement Sup\xe9rieur et de la Recherche Scientifique (MESupReS) et \xe0 ce site. Je peux vous aider \xe0 trouver des informations sur les services du minist\xe8re, les professionnels disponibles, et comment prendre rendez-vous. Pour toute autre question en dehors de ce contexte, je ne pourrai malheureusement pas vous r\xe9pondre.","D\xe9sol\xe9, je suis sp\xe9cialis\xe9 uniquement dans les services du MESupReS. Je ne peux pas r\xe9pondre \xe0 des questions en dehors de ce contexte. Je serais ravi de vous aider pour toute information concernant le minist\xe8re, ses professionnels ou la prise de rendez-vous.","En tant qu'assistant du MESupReS, je suis programm\xe9 pour vous aider uniquement avec les services du minist\xe8re et ce site. N'h\xe9sitez pas \xe0 me poser des questions sur nos professionnels, nos services ou la prise de rendez-vous.","Je ne peux r\xe9pondre qu'aux questions concernant le MESupReS, ses services, ses professionnels et la prise de rendez-vous. Pour d'autres sujets, veuillez consulter un moteur de recherche ou un assistant virtuel g\xe9n\xe9raliste.","Cette question semble \xeatre hors sujet. Je suis uniquement con\xe7u pour vous aider avec les services du MESupReS, comme trouver un professionnel ou prendre un rendez-vous. Comment puis-je vous aider dans ce contexte sp\xe9cifique ?","Je suis d\xe9sol\xe9, mais je ne peux pas r\xe9pondre \xe0 cette question car elle ne concerne pas le MESupReS ou l'utilisation de cette plateforme. Je suis l\xe0 pour vous aider \xe0 naviguer sur ce site, trouver des professionnels et prendre des rendez-vous.","Ma mission est de vous assister uniquement pour les services li\xe9s au MESupReS. Je peux vous aider \xe0 trouver des professionnels, prendre rendez-vous ou vous informer sur le minist\xe8re, mais je ne peux pas r\xe9pondre \xe0 des questions hors de ce cadre.","Je suis sp\xe9cialis\xe9 dans l'assistance concernant le MESupReS et ses services. Pour cette question qui sort de mon domaine d'expertise, je ne peux malheureusement pas vous fournir de r\xe9ponse. Puis-je vous aider avec quelque chose concernant le minist\xe8re ou la prise de rendez-vous ?"];return{id:e?e("bot"):"bot-"+Date.now(),text:t[Math.floor(Math.random()*t.length)],sender:"bot"}},IP={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyAvU9kEEeWjQ7IAqBYbGgC42AdkWLES81M",REACT_APP_FIREBASE_APP_ID:"1:572769350923:web:4583cdf7d3de12a6769e0e",REACT_APP_FIREBASE_AUTH_DOMAIN:"rdv-project-7ba0a.firebaseapp.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-2E561CDQNN",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"572769350923",REACT_APP_FIREBASE_PROJECT_ID:"rdv-project-7ba0a",REACT_APP_FIREBASE_STORAGE_BUCKET:"rdv-project-7ba0a.firebasestorage.app"}.REACT_APP_API_URL||"http://localhost:5000/api",LP=gi.create({baseURL:IP});LP.interceptors.request.use((e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}));const jP=[{_id:"prof1",prenom:"Jean",nom:"Dupont",specialite:"Informatique",categorie:"Enseignant",specialites:["D\xe9veloppement Web","Intelligence Artificielle"]},{_id:"prof2",prenom:"Marie",nom:"Martin",specialite:"Math\xe9matiques",categorie:"Chercheur",specialites:["Alg\xe8bre","Statistiques"]},{_id:"prof3",prenom:"Pierre",nom:"Durand",specialite:"Physique",categorie:"Enseignant-Chercheur",specialites:["M\xe9canique Quantique","Physique Nucl\xe9aire"]},{_id:"prof4",prenom:"Sophie",nom:"Lefebvre",specialite:"Biologie",categorie:"Enseignant",specialites:["Microbiologie","G\xe9n\xe9tique"]},{_id:"prof5",prenom:"Thomas",nom:"Bernard",specialite:"Chimie",categorie:"Chercheur",specialites:["Chimie Organique","Biochimie"]}],DP=()=>{const[e,t]=(0,r.useState)(!1),[n,i]=(0,r.useState)([{id:"init-1",text:"Bonjour ! Je suis votre assistant virtuel du MESupReS. Comment puis-je vous aider \xe0 trouver un professionnel ou un service ?",sender:"bot"}]),[s,a]=(0,r.useState)(""),[o,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)(jP),[d,h]=(0,r.useState)([]),[p,f]=(0,r.useState)([]),[m,g]=(0,r.useState)(!0),[v,y]=(0,r.useState)(!1),x=(0,r.useRef)(null),b=(0,r.useRef)(null),_=(0,r.useRef)(1),w=(0,r.useRef)(null),S=(ne(),function(){return"".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"","-").concat(Date.now(),"-").concat(_.current++)});(0,r.useEffect)((()=>{(async()=>{try{console.log("Chargement des donn\xe9es des professionnels...");try{const e=await LP.get("/professionnels");console.log("Professionnels charg\xe9s depuis /professionnels:",e.data),e.data&&e.data.data&&e.data.data.length>0?(u(e.data.data),console.log("Professionnels charg\xe9s avec succ\xe8s:",e.data.data)):console.log("Aucun professionnel retourn\xe9 par l'API, utilisation des donn\xe9es fictives")}catch(Ib){console.error("Erreur lors du chargement depuis /professionnels, tentative avec /professionals:",Ib);try{const e=await LP.get("/professionals");console.log("Professionnels charg\xe9s depuis /professionals:",e.data),e.data&&e.data.data&&e.data.data.length>0&&(u(e.data.data),console.log("Professionnels charg\xe9s avec succ\xe8s:",e.data.data))}catch(Ib){console.error("Erreur lors du chargement depuis /professionals, utilisation des donn\xe9es fictives:",Ib)}}try{const e=await LP.get("/categories");if(console.log("Cat\xe9gories charg\xe9es:",e.data),e.data&&e.data.data){h(e.data.data);const t=e.data.data.map((e=>e.nom?e.nom.toLowerCase():"")).filter(Boolean);f(t),console.log("Domaines disponibles:",t)}}catch(Ib){console.error("Erreur lors du chargement des cat\xe9gories:",Ib);f(["informatique","math\xe9matiques","physique","biologie","chimie","m\xe9decine","droit","\xe9conomie","\xe9ducation"])}g(!0),console.log("Donn\xe9es charg\xe9es avec succ\xe8s")}catch(Ib){console.error("Erreur lors du chargement des donn\xe9es:",Ib)}})()}),[]),(0,r.useEffect)((()=>{x.current&&x.current.scrollIntoView({behavior:"smooth"}),!e&&n.length>0&&"bot"===n[n.length-1].sender&&y(!0)}),[n,e]),(0,r.useEffect)((()=>{e&&(y(!1),setTimeout((()=>{b.current&&b.current.focus()}),400))}),[e]);const M=()=>{t(!e)},E=e=>{if(console.log("Recherche de professionnels pour les termes:",e),!e||"string"!==typeof e)return console.log("Termes de recherche invalides, retour de professionnels al\xe9atoires"),T(3);const t=e.toLowerCase(),n=c.filter((e=>{const n="".concat(e.prenom||""," ").concat(e.nom||"").toLowerCase(),i=(e.specialite||"").toLowerCase(),r=(e.categorie||"").toLowerCase(),s=Array.isArray(e.specialites)?e.specialites.map((e=>e.toLowerCase())):[];return n.includes(t)||i.includes(t)||r.includes(t)||s.some((e=>e.includes(t)))}));return console.log("Trouv\xe9 ".concat(n.length," professionnels pertinents")),0===n.length?(console.log("Aucun professionnel pertinent trouv\xe9, retour de professionnels al\xe9atoires"),T(3)):n.slice(0,3)},T=e=>{const t=[...c];for(let n=t.length-1;n>0;n--){const e=Math.floor(Math.random()*(n+1));[t[n],t[e]]=[t[e],t[n]]}return t.slice(0,e)},C=async e=>{try{if(console.log("Traitement du message utilisateur:",e),!m)return i((e=>[...e,{id:S("bot"),text:"Chargement des professionnels en cours. Veuillez patienter...",sender:"bot"}])),void l(!1);const t=1e3+1e3*Math.random();if(await new Promise((e=>setTimeout(e,t))),AP(e)){console.log("Question hors sujet d\xe9tect\xe9e");const e=RP(S);return i((t=>[...t,e])),void l(!1)}const n=EP(e);if(console.log("Est-ce une question d'aide ou sur le MESupReS:",n),n){console.log("Question sur l'utilisation du site ou sur le MESupReS d\xe9tect\xe9e");if(!/(?:comment|utiliser|naviguer|prendre|r\xe9server|s'inscrire|modifier|annuler)/i.test(e.toLowerCase())){const t=kP(e,S);return i((e=>[...e,t])),void l(!1)}{const t=NP(e,S);i((e=>[...e,t])),await new Promise((e=>setTimeout(e,500)));const n=T(2);n.length>0&&(i((e=>[...e,{id:S("bot"),text:"Si vous souhaitez prendre rendez-vous, voici quelques professionnels disponibles :",sender:"bot"}])),n.forEach((e=>{A(e)})))}return void l(!1)}const r=(e=>{const t=e.toLowerCase();return["professionnel","professionnels","expert","experts","sp\xe9cialiste","sp\xe9cialistes","enseignant","enseignants","chercheur","chercheurs","professeur","professeurs","rendez-vous","rdv","consulter","consultation","rencontrer","contacter"].some((e=>t.includes(e)))})(e);console.log("Est-ce une demande de professionnel:",r);const s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!e||!t||0===t.length)return null;const n=e.toLowerCase();for(const r of t)if(n.includes(r.toLowerCase()))return r;const i={informatique:["d\xe9veloppement","programmation","web","intelligence artificielle","logiciel","application","code","syst\xe8me"],"math\xe9matiques":["alg\xe8bre","statistiques","calcul","g\xe9om\xe9trie","probabilit\xe9s"],physique:["m\xe9canique","nucl\xe9aire","quantique","\xe9lectromagn\xe9tisme","thermodynamique"],biologie:["microbiologie","g\xe9n\xe9tique","cellule","organisme","\xe9cologie"],chimie:["organique","biochimie","mol\xe9cule","r\xe9action","\xe9l\xe9ment"],"m\xe9decine":["sant\xe9","soin","traitement","th\xe9rapie","diagnostic","clinique"],droit:["juridique","l\xe9gal","loi","avocat","juriste","l\xe9gislation"],"\xe9conomie":["finance","march\xe9","investissement","gestion","commerce"],"\xe9ducation":["enseignement","formation","p\xe9dagogie","apprentissage","didactique"]};for(const r of t)if((i[r.toLowerCase()]||[]).some((e=>n.includes(e))))return r;return null}(e,p);console.log("Domaine d\xe9tect\xe9:",s);const a=CP(e,p);if(a&&!a.exists&&a.domain)return console.log("Domaine demand\xe9 non existant: ".concat(a.domain)),i((e=>[...e,{id:S("bot"),text:"Je suis d\xe9sol\xe9, mais nous n'avons pas de professionnels dans le domaine \"".concat(a.domain,'". Voici les domaines disponibles :'),sender:"bot"}])),i((e=>[...e,{id:S("bot"),text:"Veuillez s\xe9lectionner un domaine :",sender:"bot",showCategories:!0,availableDomains:p}])),void l(!1);if(r&&!s)return console.log("Demande g\xe9n\xe9rale de professionnels d\xe9tect\xe9e"),i((e=>[...e,{id:S("bot"),text:"Dans quel domaine recherchez-vous un professionnel ? Voici les domaines disponibles :",sender:"bot"}])),i((e=>[...e,{id:S("bot"),text:"Veuillez s\xe9lectionner un domaine :",sender:"bot",showCategories:!0,availableDomains:p}])),void l(!1);const o=PP(e,S,p);if(s&&(o.domain=s),i((e=>[...e,o])),r||o.domain){let t=[];if(o.domain?(console.log("Domaine d\xe9tect\xe9: ".concat(o.domain)),t=c.filter((e=>{const t=(e.specialite||"").toLowerCase(),n=Array.isArray(e.specialites)?e.specialites.map((e=>e.toLowerCase())):[];return t.includes(o.domain.toLowerCase())||n.some((e=>e.includes(o.domain.toLowerCase())))})),0===t.length&&(console.log("Aucun professionnel trouv\xe9 pour le domaine exact, \xe9largissement de la recherche"),t=E(o.domain))):t=E(e),console.log("Professionnels \xe0 afficher:",t),await new Promise((e=>setTimeout(e,500))),t.length>0){t.slice(0,3).forEach((e=>{A(e)}))}else console.log("Aucun professionnel pertinent trouv\xe9, suggestion des cat\xe9gories disponibles"),i((e=>[...e,{id:S("bot"),text:"Je n'ai pas trouv\xe9 de professionnels correspondant exactement \xe0 votre demande. Voici les domaines disponibles :",sender:"bot"}])),i((e=>[...e,{id:S("bot"),text:"Veuillez s\xe9lectionner un domaine :",sender:"bot",showCategories:!0,availableDomains:p}]))}else o.showCategories||console.log("Pas de demande sp\xe9cifique d\xe9tect\xe9e, mais pas de suggestion de cat\xe9gories");if(o.showCategories)return console.log("Affichage des cat\xe9gories disponibles"),i((e=>[...e,{id:S("bot"),text:"Voici les domaines disponibles. Veuillez en s\xe9lectionner un :",sender:"bot",showCategories:!0,availableDomains:p}])),void l(!1);let u=[];if(o.domain?(console.log("Domaine d\xe9tect\xe9: ".concat(o.domain)),u=c.filter((e=>{const t=(e.specialite||"").toLowerCase(),n=Array.isArray(e.specialites)?e.specialites.map((e=>e.toLowerCase())):[];return t.includes(o.domain.toLowerCase())||n.some((e=>e.includes(o.domain.toLowerCase())))})),0===u.length&&(console.log("Aucun professionnel trouv\xe9 pour le domaine exact, \xe9largissement de la recherche"),u=E(o.domain))):u=E(e),console.log("Professionnels \xe0 afficher:",u),await new Promise((e=>setTimeout(e,500))),u.length>0){u.slice(0,3).forEach((e=>{A(e)}))}else(r||o.domain)&&(console.log("Aucun professionnel pertinent trouv\xe9, suggestion des cat\xe9gories disponibles"),i((e=>[...e,{id:S("bot"),text:"Je n'ai pas trouv\xe9 de professionnels correspondant exactement \xe0 votre demande. Voici les domaines disponibles :",sender:"bot"}])),i((e=>[...e,{id:S("bot"),text:"Veuillez s\xe9lectionner un domaine :",sender:"bot",showCategories:!0,availableDomains:p}])))}catch(Ib){console.error("Erreur lors du traitement du message:",Ib),i((e=>[...e,{id:S("bot"),text:"D\xe9sol\xe9, une erreur s'est produite. Veuillez r\xe9essayer.",sender:"bot"}])),i((e=>[...e,{id:S("bot"),text:"Voici les domaines disponibles. Veuillez en s\xe9lectionner un :",sender:"bot",showCategories:!0,availableDomains:p}]))}finally{l(!1)}},A=e=>{if(console.log("Ajout d'une suggestion de professionnel:",e),!e)return void console.error("Tentative d'ajout d'un professionnel null ou undefined");const t="".concat(e.prenom||""," ").concat(e.nom||"").trim(),n=e.specialite||"",r={id:S("pro"),professional:e,text:"".concat(t).concat(n?" - ".concat(n):""),sender:"suggestion"};console.log("Message de suggestion cr\xe9\xe9:",r),i((e=>[...e,r]))},P=e=>{if(console.log("Professionnel cliqu\xe9:",e),e)try{const n=e._id||e.id;if(!n)return void console.error("Professionnel sans ID valide:",e);localStorage.setItem("selectedBookingProfessional",JSON.stringify(e)),console.log("Donn\xe9es du professionnel stock\xe9es dans localStorage:",e),e.specialites&&e.specialites.length>0&&localStorage.setItem("selectedBookingSpecialty",e.specialites[0]),window.dispatchEvent(new Event("localStorageChange")),t(!1);(e=>{window.location.href=e})("/user/book-appointment?professionalId=".concat(n,"&step=2"))}catch(Ib){console.error("Erreur lors de la s\xe9lection du professionnel:",Ib)}};return(0,De.jsxs)("div",{className:"smart-chat-container",children:[(0,De.jsx)("button",{className:"chat-toggle-button ".concat(e?"open":""," ").concat(v?"has-new-message":""),onClick:M,"aria-label":e?"Fermer le chat":"Ouvrir le chat",children:e?(0,De.jsx)("span",{className:"close-icon",children:"\xd7"}):(0,De.jsxs)("span",{className:"chat-icon",children:[(0,De.jsx)("i",{className:"fas fa-comments"}),v&&(0,De.jsx)("div",{className:"new-message-notification",children:"1"})]})}),(0,De.jsxs)("div",{ref:w,className:"chat-window ".concat(e?"open":""),children:[(0,De.jsxs)("div",{className:"chat-header",children:[(0,De.jsx)("h3",{children:"Assistant MESupReS"}),(0,De.jsx)("button",{className:"close-button",onClick:M,"aria-label":"Fermer le chat",children:"\xd7"})]}),(0,De.jsxs)("div",{className:"chat-messages",children:[n.map((e=>(0,De.jsxs)("div",{className:"message ".concat("user"===e.sender?"user-message":"bot"===e.sender?"bot-message":"suggestion-message"),onClick:()=>"suggestion"===e.sender&&e.professional&&P(e.professional),style:"suggestion"===e.sender?{cursor:"pointer",position:"relative"}:{},"aria-label":"suggestion"===e.sender?"Cliquez pour prendre rendez-vous avec ce professionnel":void 0,children:["suggestion"===e.sender&&(0,De.jsx)("i",{className:"fas fa-user-md suggestion-icon"}),e.text,"suggestion"===e.sender&&(0,De.jsx)("span",{className:"book-appointment-hint",children:" (Cliquez pour prendre rendez-vous)"}),e.showCategories&&e.availableDomains&&e.availableDomains.length>0&&(0,De.jsx)("div",{className:"categories-list",children:e.availableDomains.map(((e,n)=>(0,De.jsxs)("button",{className:"category-button",onClick:()=>(e=>{console.log("Domaine s\xe9lectionn\xe9:",e);try{localStorage.setItem("selectedBookingSpecialty",e),console.log("Domaine stock\xe9 dans localStorage:",e),window.dispatchEvent(new Event("localStorageChange")),t(!1),window.location.href="/user/book-appointment?specialty=".concat(encodeURIComponent(e))}catch(Ib){console.error("Erreur lors de la navigation vers la page de r\xe9servation:",Ib)}})(e),style:{"--index":n},"aria-label":"S\xe9lectionner le domaine ".concat(e),children:[(0,De.jsx)("i",{className:"fas fa-graduation-cap",style:{marginRight:"5px"}}),e]},e)))}),e.showViewAllButton&&e.domain&&(0,De.jsx)("div",{className:"view-all-button-container",children:(0,De.jsxs)("button",{className:"view-all-button",onClick:()=>(e=>{console.log("Navigation vers tous les professionnels du domaine:",e);try{localStorage.setItem("selectedBookingSpecialty",e),window.dispatchEvent(new Event("localStorageChange")),t(!1),window.location.href="/user/book-appointment?specialty=".concat(encodeURIComponent(e))}catch(Ib){console.error("Erreur lors de la navigation vers la page de r\xe9servation:",Ib)}})(e.domain),"aria-label":"Voir tous les professionnels en ".concat(e.domain),children:[(0,De.jsx)("i",{className:"fas fa-users",style:{marginRight:"8px"}}),"Voir tous les professionnels en ",e.domain]})})]},e.id))),o&&(0,De.jsxs)("div",{className:"typing-indicator",children:[(0,De.jsx)("div",{className:"dot"}),(0,De.jsx)("div",{className:"dot"}),(0,De.jsx)("div",{className:"dot"})]}),(0,De.jsx)("div",{ref:x})]}),(0,De.jsxs)("form",{className:"chat-input-form",onSubmit:e=>{if(e.preventDefault(),!s.trim())return;const t={id:S("user"),text:s,sender:"user"};i((e=>[...e,t])),a(""),l(!0),C(t.text)},children:[(0,De.jsx)("input",{type:"text",value:s,onChange:e=>a(e.target.value),placeholder:"Posez votre question...",ref:b,"aria-label":"Votre message"}),(0,De.jsx)("button",{type:"submit",disabled:!s.trim()||o,"aria-label":"Envoyer",children:(0,De.jsx)("i",{className:"fas fa-paper-plane"})})]})]})]})},OP=()=>{ne();const[e,t]=(0,r.useState)(""),[n,i]=(0,r.useState)(!1),[s,a]=(0,r.useState)([]),[o,l]=(0,r.useState)([]),[c,u]=(0,r.useState)([]),[d,h]=(0,r.useState)([]),[p,f]=(0,r.useState)(!1),[m,g]=(0,r.useState)(!1),[v,y]=(0,r.useState)(!1),x=(0,r.useRef)(null),b=(0,r.useRef)(null),_=e=>{const t=e.toLowerCase();return t.includes("g\xe9n\xe9ral")||t.includes("general")?"\ud83d\udc64":t.includes("dent")?"\ud83d\ude01":t.includes("ophtalmo")||t.includes("yeux")||t.includes("oeil")?"\ud83d\udc41\ufe0f":t.includes("p\xe9diatr")||t.includes("enfant")?"\ud83d\udc76":t.includes("gyn\xe9co")||t.includes("gyneco")?"\ud83d\udc69":t.includes("dermat")||t.includes("peau")?"\ud83e\uddf4":t.includes("cardio")||t.includes("coeur")?"\u2764\ufe0f":t.includes("ortho")||t.includes("os")?"\ud83e\uddb4":t.includes("psycho")||t.includes("mental")?"\ud83e\udde0":t.includes("nutri")||t.includes("diet")?"\ud83e\udd57":t.includes("radio")||t.includes("image")?"\ud83d\udcf7":t.includes("chirurg")?"\u2702\ufe0f":t.includes("neuro")?"\ud83e\udde0":t.includes("allergo")?"\ud83e\udd27":t.includes("uro")?"\ud83d\udca7":t.includes("massage")?"\ud83d\udc86":t.includes("coiffure")||t.includes("cheveux")?"\ud83d\udc87":t.includes("beaut\xe9")||t.includes("esth\xe9tique")?"\ud83d\udc85":t.includes("sport")||t.includes("fitness")?"\ud83c\udfcb\ufe0f":t.includes("yoga")?"\ud83e\uddd8":t.includes("conseil")||t.includes("coaching")?"\ud83d\udcac":"\ud83d\udcc5"},w=(0,r.useCallback)((e=>{const t=new Set;e.forEach((e=>{e.specialites&&Array.isArray(e.specialites)&&e.specialites.forEach((e=>{t.add(e)}))}));const n=Array.from(t).map((e=>({id:e.toLowerCase().replace(/\s+/g,"-"),name:e,icon:_(e)})));h(n),u(n)}),[]);(0,r.useEffect)((()=>{(async()=>{try{const e=await yi.getAllProfessionals(),n=e.data&&Array.isArray(e.data)?e.data:e.data&&e.data.success&&Array.isArray(e.data.data)?e.data.data:[];l(n),w(n);const i=new URLSearchParams(window.location.search),r=i.get("selectedProfessionalId"),s=i.get("specialty");if(r){const e=n.find((e=>e._id===r));if(e){const t={professional:e,timestamp:(new Date).getTime()};localStorage.setItem("selectedBookingProfessional",JSON.stringify(t)),window.dispatchEvent(new Event("localStorageChange")),setTimeout((()=>{const e=document.getElementById("booking-section");e&&e.scrollIntoView({behavior:"smooth"})}),300)}}else s&&(t(s),setTimeout((()=>{const e=document.querySelector(".booking-workflow");e&&e.scrollIntoView({behavior:"smooth"})}),300))}catch(Ib){console.error("Erreur lors du chargement des professionnels:",Ib)}})()}),[w]),(0,r.useEffect)((()=>{const e=e=>{x.current&&!x.current.contains(e.target)&&(f(!1),y(!1))};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]),(0,r.useEffect)((()=>{v&&!e.trim()&&(f(!0),g(!1))}),[v,e,d]);const S=(e,t)=>{var n,i,r,s;const a=t.toLowerCase();let o=0;if(null!==(n=e.nom)&&void 0!==n&&n.toLowerCase().includes(a)&&(o+=10),null!==(i=e.prenom)&&void 0!==i&&i.toLowerCase().includes(a)&&(o+=10),e.specialites)for(const c of e.specialites)c.toLowerCase().includes(a)?o+=15:a.includes(c.toLowerCase())&&(o+=8);null!==(r=e.ville)&&void 0!==r&&r.toLowerCase().includes(a)&&(o+=5),null!==(s=e.adresse)&&void 0!==s&&s.toLowerCase().includes(a)&&(o+=3);const l=["service","prestation","consultation","rendez-vous","rdv","sp\xe9cialiste","professionnel","expert","r\xe9servation","disponible","horaire","tarif","prix","s\xe9ance","conseil"];for(const c of l)a.includes(c)&&(o+=2);return o},M=e=>{if(e.length<3)return o.sort((()=>.5-Math.random())).slice(0,5);const t=o.map((t=>({professional:t,score:S(t,e)})));return t.sort(((e,t)=>t.score-e.score)),t.slice(0,5).map((e=>e.professional))},E=async e=>{try{if(!o||0===o.length)return i(!1),a([]),void g(!1);const t=o.map((t=>({professional:t,score:S(t,e)})));t.sort(((e,t)=>t.score-e.score));const n=t.filter((e=>e.score>0)).slice(0,5).map((e=>e.professional));if(n.length>0)return a(n),g(!1),void i(!1);const r="\n        Tu es un assistant de recherche pour un site de r\xe9servation de rendez-vous avec des professionnels.\n        L'utilisateur recherche: \"".concat(e,'"\n        \n        Voici la liste des professionnels disponibles sur le site:\n        ').concat(o.map((e=>{var t;return"- ID: ".concat(e._id,", Nom: ").concat(e.prenom," ").concat(e.nom,", Sp\xe9cialit\xe9s: ").concat((null===(t=e.specialites)||void 0===t?void 0:t.join(", "))||"G\xe9n\xe9raliste")})).join("\n"),"\n        \n        Voici les cat\xe9gories r\xe9ellement disponibles dans notre base de donn\xe9es:\n        ").concat(d.map((e=>"- ".concat(e.name))).join("\n"),'\n        \n        Retourne-moi un objet JSON avec une propri\xe9t\xe9 "ids" contenant un tableau des IDs des 5 professionnels les plus pertinents pour cette recherche.\n        Exemple: {"ids": ["id1", "id2", "id3", "id4", "id5"]}\n        \n        Analyse la requ\xeate et trouve les professionnels qui correspondent le mieux aux besoins exprim\xe9s.\n        Si la requ\xeate mentionne une sp\xe9cialit\xe9, un service, ou un type de prestation, trouve les professionnels avec les sp\xe9cialit\xe9s correspondantes.\n        \n        Si tu ne trouves pas de professionnels pertinents, ajoute une propri\xe9t\xe9 "categories" avec un tableau de sp\xe9cialit\xe9s qui pourraient \xeatre pertinentes.\n        IMPORTANT: Pour "categories", utilise UNIQUEMENT les cat\xe9gories qui existent r\xe9ellement dans notre base de donn\xe9es (list\xe9es ci-dessus).\n        Exemple: {"ids": [], "categories": ["Coiffure", "Esth\xe9tique"]}\n        \n        IMPORTANT: Ne retourne JAMAIS un tableau vide pour "ids" ET "categories". Si tu ne trouves rien de pertinent, sugg\xe8re au moins des cat\xe9gories existantes ou des professionnels g\xe9n\xe9ralistes.\n      '),s=await fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat("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"),"HTTP-Referer":window.location.origin,"X-Title":"Assistant Recherche RDV"},body:JSON.stringify({model:"anthropic/claude-3-haiku",messages:[{role:"system",content:r},{role:"user",content:"Recherche: ".concat(e)}],max_tokens:200,temperature:.3,response_format:{type:"json_object"}})});if(!s.ok)throw new Error("Erreur API: ".concat(s.status));const l=(await s.json()).choices[0].message.content;try{const t=JSON.parse(l),n=t.ids||[],i=o.filter((e=>n.includes(e._id)));if(i.length>0)a(i),g(!1);else if(t.categories&&t.categories.length>0){const e=d.map((e=>e.name.toLowerCase())),n=t.categories.filter((t=>e.includes(t.toLowerCase())));if(n.length>0){const e=n.map((e=>d.find((t=>t.name.toLowerCase()===e.toLowerCase()))||{id:e.toLowerCase().replace(/\s+/g,"-"),name:e,icon:_(e)}));u(e),g(!0),a([])}else u(d.slice(0,5)),g(!0),a([])}else{const t=M(e);a(t),g(!1)}}catch(Ib){console.error("Erreur lors du parsing de la r\xe9ponse:",Ib);const n=M(e);a(n),g(!1)}}catch(Ib){console.error("Erreur lors de la g\xe9n\xe9ration des suggestions:",Ib);const n=M(e);a(n),g(!1)}finally{i(!1)}},T=e=>{t(e),f(!1);try{localStorage.setItem("selectedBookingSpecialty",e),window.dispatchEvent(new Event("localStorageChange")),window.location.href="/user/book-appointment?specialty=".concat(encodeURIComponent(e))}catch(Ib){console.error("Erreur lors de la navigation:",Ib)}},C=e=>{f(!1),console.log("Professionnel s\xe9lectionn\xe9:",e);try{if(!e||!e._id)return void console.error("Professionnel invalide:",e);localStorage.setItem("selectedBookingProfessional",JSON.stringify(e)),console.log("Donn\xe9es du professionnel stock\xe9es dans localStorage:",e),e.specialites&&e.specialites.length>0&&localStorage.setItem("selectedBookingSpecialty",e.specialites[0]),window.dispatchEvent(new Event("localStorageChange")),window.location.href="/user/book-appointment?professionalId=".concat(e._id)}catch(Ib){console.error("Erreur lors de la s\xe9lection du professionnel:",Ib)}},A=["Rechercher un professionnel...","Besoin d'un service sp\xe9cifique ?","Trouver un sp\xe9cialiste pour vos besoins...","Coiffure, massage, coaching...","Rechercher par nom ou par sp\xe9cialit\xe9...","Trouvez le professionnel id\xe9al..."],[P,N]=(0,r.useState)(0);return(0,r.useEffect)((()=>{const e=setInterval((()=>{N((e=>(e+1)%A.length))}),3e3);return()=>clearInterval(e)}),[]),(0,De.jsxs)("div",{className:"smart-search-container",ref:x,children:[(0,De.jsx)("button",{type:"button",className:"close-search-button",onClick:()=>{console.log("Fermeture de la barre de recherche"),window.location.href="/user/dashboard"},"aria-label":"Fermer la recherche",children:"\u2715"}),(0,De.jsxs)("form",{onSubmit:t=>{t.preventDefault(),console.log("Recherche soumise:",e),e.trim()&&(i(!0),E(e).then((()=>{if(0===s.length&&!m){const t=(e=>{const t=e.toLowerCase(),n=d.filter((e=>e.name.toLowerCase().includes(t)||t.includes(e.name.toLowerCase())));return n.length>0?n.slice(0,5):d.slice(0,5)})(e);t.length>0&&(u(t),g(!0))}s.length>0?C(s[0]):m&&c.length>0&&T(c[0].name),i(!1)})).catch((e=>{console.error("Erreur lors de la g\xe9n\xe9ration des suggestions:",e),i(!1)})))},className:"search-form",children:[(0,De.jsxs)("div",{className:"search-input-container ".concat(v?"focused":""),children:[(0,De.jsx)("span",{className:"search-icon-prefix",role:"img","aria-label":"Rechercher",children:"\ud83d\udd0d"}),(0,De.jsx)("input",{ref:b,type:"text",value:e,onChange:e=>{const n=e.target.value;if(t(n),n.trim()){f(!0),i(!0);const e=setTimeout((()=>{E(n)}),300);return()=>clearTimeout(e)}v?(g(!1),f(!0)):(f(!1),a([]),g(!1)),i(!1)},placeholder:A[P],className:"search-input",onFocus:()=>{y(!0),g(!1),f(!0)},onBlur:()=>{setTimeout((()=>{y(!1),e.trim()||(f(!1),g(!1))}),200)}}),e&&(0,De.jsx)("button",{type:"button",className:"clear-search-button",onClick:()=>{t(""),b.current.focus()},children:"\u2715"})]}),(0,De.jsx)("button",{type:"submit",className:"search-button",children:"Rechercher"})]}),p&&(0,De.jsx)("div",{className:"search-suggestions",children:n?(0,De.jsxs)("div",{className:"searching-indicator",children:[(0,De.jsx)("span",{className:"dot"}),(0,De.jsx)("span",{className:"dot"}),(0,De.jsx)("span",{className:"dot"})]}):s.length>0?(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)("h4",{className:"suggestions-title",children:"Professionnels sugg\xe9r\xe9s"}),(0,De.jsx)("ul",{className:"suggestions-list",children:s.map((e=>{var t,n;return(0,De.jsx)("li",{className:"suggestion-item",children:(0,De.jsxs)("button",{className:"suggestion-link",onClick:t=>{t.preventDefault(),t.stopPropagation(),C(e)},type:"button","aria-label":"R\xe9server un rendez-vous avec ".concat(e.prenom," ").concat(e.nom),children:[(0,De.jsx)("div",{className:"suggestion-avatar",children:e.photo?(0,De.jsx)("img",{src:e.photo.startsWith("http")?e.photo:"/api/uploads/photos/".concat(e.photo),alt:"".concat(e.prenom," ").concat(e.nom)}):(0,De.jsxs)("div",{className:"avatar-placeholder",children:[null===(t=e.prenom)||void 0===t?void 0:t.charAt(0),null===(n=e.nom)||void 0===n?void 0:n.charAt(0)]})}),(0,De.jsxs)("div",{className:"suggestion-info",children:[(0,De.jsxs)("span",{className:"suggestion-name",children:[e.prenom," ",e.nom]}),e.specialites&&e.specialites.length>0&&(0,De.jsx)("span",{className:"suggestion-specialties",children:e.specialites.join(", ")}),e.ville&&(0,De.jsxs)("span",{className:"suggestion-location",children:[(0,De.jsx)("span",{role:"img","aria-label":"Localisation",children:"\ud83d\udccd"})," ",e.ville]})]}),(0,De.jsxs)("div",{className:"view-profile-button",children:[(0,De.jsx)("span",{children:"R\xe9server"}),(0,De.jsx)("span",{className:"arrow-icon",children:"\u2192"})]})]})},e._id)}))})]}):m&&c.length>0?(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)("h4",{className:"suggestions-title",children:"Cat\xe9gories disponibles"}),(0,De.jsx)("ul",{className:"categories-list",children:c.map((e=>(0,De.jsx)("li",{className:"category-item",children:(0,De.jsxs)("button",{className:"category-button",onClick:()=>T(e.name),type:"button",children:[(0,De.jsx)("span",{className:"category-icon",role:"img","aria-label":e.name,children:e.icon}),(0,De.jsx)("span",{className:"category-name",children:e.name})]})},e.id)))}),(0,De.jsxs)("div",{className:"search-tip",children:[(0,De.jsx)("span",{role:"img","aria-label":"Astuce",className:"tip-icon",children:"\ud83d\udca1"}),(0,De.jsx)("span",{children:"Essayez de rechercher par nom ou par cat\xe9gorie"})]})]}):s.length>0?(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)("h4",{className:"suggestions-title",children:"Professionnels sugg\xe9r\xe9s"}),(0,De.jsx)("ul",{className:"suggestions-list",children:s.map((e=>{var t,n;return(0,De.jsx)("li",{className:"suggestion-item",children:(0,De.jsxs)("button",{className:"suggestion-link",onClick:t=>{t.preventDefault(),t.stopPropagation(),C(e)},type:"button","aria-label":"R\xe9server un rendez-vous avec ".concat(e.prenom," ").concat(e.nom),children:[(0,De.jsx)("div",{className:"suggestion-avatar",children:e.photo?(0,De.jsx)("img",{src:e.photo.startsWith("http")?e.photo:"/api/uploads/photos/".concat(e.photo),alt:"".concat(e.prenom," ").concat(e.nom)}):(0,De.jsxs)("div",{className:"avatar-placeholder",children:[null===(t=e.prenom)||void 0===t?void 0:t.charAt(0),null===(n=e.nom)||void 0===n?void 0:n.charAt(0)]})}),(0,De.jsxs)("div",{className:"suggestion-info",children:[(0,De.jsxs)("span",{className:"suggestion-name",children:[e.prenom," ",e.nom]}),e.specialites&&e.specialites.length>0&&(0,De.jsx)("span",{className:"suggestion-specialties",children:e.specialites.join(", ")}),e.ville&&(0,De.jsxs)("span",{className:"suggestion-location",children:[(0,De.jsx)("span",{role:"img","aria-label":"Localisation",children:"\ud83d\udccd"})," ",e.ville]})]}),(0,De.jsxs)("div",{className:"view-profile-button",children:[(0,De.jsx)("span",{children:"R\xe9server"}),(0,De.jsx)("span",{className:"arrow-icon",children:"\u2192"})]})]})},e._id)}))})]}):(0,De.jsxs)("div",{className:"no-suggestions",children:[(0,De.jsx)("p",{children:"Consultez les sp\xe9cialit\xe9s de nos professionnels en attendant."}),(0,De.jsx)("ul",{className:"categories-list",children:d.slice(0,5).map((e=>(0,De.jsx)("li",{className:"category-item",children:(0,De.jsxs)("button",{className:"category-button",onClick:()=>T(e.name),type:"button",children:[(0,De.jsx)("span",{className:"category-icon",role:"img","aria-label":e.name,children:e.icon}),(0,De.jsx)("span",{className:"category-name",children:e.name})]})},e.id)))})]})})]})},zP=e=>{let{user:t,onLogout:n,activeTab:i,setActiveTab:s,setShowBookingWorkflow:a,isVisible:o,onClose:l}=e;ee().pathname;const c={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyAvU9kEEeWjQ7IAqBYbGgC42AdkWLES81M",REACT_APP_FIREBASE_APP_ID:"1:572769350923:web:4583cdf7d3de12a6769e0e",REACT_APP_FIREBASE_AUTH_DOMAIN:"rdv-project-7ba0a.firebaseapp.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-2E561CDQNN",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"572769350923",REACT_APP_FIREBASE_PROJECT_ID:"rdv-project-7ba0a",REACT_APP_FIREBASE_STORAGE_BUCKET:"rdv-project-7ba0a.firebasestorage.app"}.REACT_APP_API_URL||"http://localhost:5000",u=()=>{var e,n;return t&&t.nom?"".concat((null===(e=t.prenom)||void 0===e?void 0:e[0])||"").concat((null===(n=t.nom)||void 0===n?void 0:n[0])||"").toUpperCase():"U"},d=()=>t&&t.photo?t.photo.startsWith("data:image/")||t.photo.startsWith("http")?t.photo:"".concat(c,"/uploads/photos/").concat(t.photo):null;(0,r.useEffect)((()=>{null!==t&&void 0!==t&&t.photo&&(console.log("Photo utilisateur:",t.photo),console.log("URL construite:",d()),fetch(d(),{method:"HEAD"}).then((e=>{console.log("Test d'accessibilit\xe9 de la photo:",e.status,e.statusText)})).catch((e=>{console.error("Erreur lors du test d'accessibilit\xe9:",e)})))}),[t]);const h=e=>{s(e),a(!1),l()};return(0,De.jsxs)("div",{className:"dashboard-sidebar ".concat(o?"visible":""),children:[(0,De.jsx)("div",{className:"sidebar-header",children:(0,De.jsxs)(Ie,{to:"/dashboard",className:"logo",children:[(0,De.jsx)("div",{className:"logo-icon",children:"RDV"}),(0,De.jsx)("span",{children:"RDV-Project"})]})}),(0,De.jsxs)("div",{className:"user-profile",children:[null!==t&&void 0!==t&&t.photo?(0,De.jsx)("div",{className:"user-avatar",children:(0,De.jsx)("img",{src:d(),alt:"".concat(t.prenom," ").concat(t.nom),onError:e=>{console.error("Erreur de chargement de l'image:",e),e.target.onerror=null,e.target.style.display="none",e.target.parentNode.innerHTML=u()}})}):(0,De.jsx)("div",{className:"user-avatar",children:u()}),(0,De.jsx)("div",{className:"user-details",children:(0,De.jsxs)("span",{className:"user-name",children:[null===t||void 0===t?void 0:t.prenom," ",(null===t||void 0===t?void 0:t.nom)||"Utilisateur"]})})]}),(0,De.jsxs)("nav",{className:"nav-menu",children:[(0,De.jsxs)("div",{className:"nav-section",children:[(0,De.jsx)("h3",{className:"nav-section-title",children:"Menu Principal"}),(0,De.jsxs)("ul",{className:"nav-list",children:[(0,De.jsx)("li",{className:"nav-item",children:(0,De.jsxs)(Ie,{to:"/dashboard",className:"nav-link ".concat(null===i?"active":""),onClick:()=>h(null),children:[(0,De.jsx)(gP,{className:"nav-icon"}),(0,De.jsx)("span",{children:"Tableau de bord"})]})}),(0,De.jsx)("li",{className:"nav-item",children:(0,De.jsxs)(Ie,{to:"#",className:"nav-link ".concat("booking"===i?"active":""),onClick:e=>{e.preventDefault(),s(null),a(!0),l()},children:[(0,De.jsx)(HA,{className:"nav-icon"}),(0,De.jsx)("span",{children:"R\xe9server un rendez-vous"})]})}),(0,De.jsx)("li",{className:"nav-item",children:(0,De.jsxs)(Ie,{to:"#",className:"nav-link ".concat("appointments"===i?"active":""),onClick:e=>{e.preventDefault(),h("appointments")},children:[(0,De.jsx)(YA,{className:"nav-icon"}),(0,De.jsx)("span",{children:"Mes rendez-vous"})]})})]})]}),(0,De.jsxs)("div",{className:"nav-section",children:[(0,De.jsx)("h3",{className:"nav-section-title",children:"Mon Compte"}),(0,De.jsxs)("ul",{className:"nav-list",children:[(0,De.jsx)("li",{className:"nav-item",children:(0,De.jsxs)(Ie,{to:"#",className:"nav-link ".concat("notifications"===i?"active":""),onClick:e=>{e.preventDefault(),h("notifications")},children:[(0,De.jsx)(VA,{className:"nav-icon"}),(0,De.jsx)("span",{children:"Notifications"})]})}),(0,De.jsx)("li",{className:"nav-item",children:(0,De.jsxs)(Ie,{to:"/user/profile",className:"nav-link",onClick:l,children:[(0,De.jsx)(uP,{className:"nav-icon"}),(0,De.jsx)("span",{children:"Mon profil"})]})})]})]})]}),(0,De.jsx)("div",{className:"sidebar-footer",children:(0,De.jsx)("button",{className:"logout-button",onClick:n,children:(0,De.jsx)("span",{children:"D\xe9connexion"})})})]})},FP=e=>{let{isOpen:t,onClose:n}=e;return t?(0,De.jsxs)("div",{className:"chat-container",children:[(0,De.jsx)("button",{className:"close-chat",onClick:n,children:"\xd7"}),(0,De.jsx)("div",{className:"chat-wrapper",style:{width:"100%",height:"100%"},children:(0,De.jsx)(DP,{})})]}):null},UP=e=>{let{isOpen:t,onClose:n}=e;return t?(0,De.jsx)("div",{className:"search-overlay",children:(0,De.jsxs)("div",{className:"search-container",children:[(0,De.jsx)("button",{className:"close-search",onClick:n,children:"\xd7"}),(0,De.jsx)(OP,{})]})}):null},BP=e=>{let{appointments:t,onCancel:n}=e;const[i,s]=(0,r.useState)(new Date),a=(e,t)=>new Date(e,t+1,0).getDate(),o=e=>{const t=new Date;return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()};return(0,De.jsxs)("div",{className:"calendar-view",children:[(0,De.jsxs)("div",{className:"calendar-navigation",children:[(0,De.jsxs)("button",{onClick:()=>{s(new Date(i.getFullYear(),i.getMonth()-1,1))},className:"calendar-nav-button",children:[(0,De.jsx)(qA,{})," Mois pr\xe9c\xe9dent"]}),(0,De.jsx)("h3",{className:"calendar-month",children:i.toLocaleDateString("fr-FR",{month:"long",year:"numeric"})}),(0,De.jsxs)("button",{onClick:()=>{s(new Date(i.getFullYear(),i.getMonth()+1,1))},className:"calendar-nav-button",children:["Mois suivant ",(0,De.jsx)(XA,{})]})]}),(0,De.jsxs)("div",{className:"calendar-grid",children:[(0,De.jsx)("div",{className:"calendar-header",children:["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"].map(((e,t)=>(0,De.jsx)("div",{className:"calendar-day-header",children:e},"weekday-".concat(t))))}),(0,De.jsx)("div",{className:"calendar-days",children:(()=>{const e=i.getFullYear(),t=i.getMonth(),n=a(e,t),r=((e,t)=>new Date(e,t,1).getDay())(e,t),s=0===r?6:r-1,l=[],c=a(e,t-1);for(let i=s-1;i>=0;i--)l.push({day:c-i,currentMonth:!1,date:new Date(e,t-1,c-i)});for(let i=1;i<=n;i++)l.push({day:i,currentMonth:!0,date:new Date(e,t,i),isToday:o(new Date(e,t,i))});const u=42-l.length;for(let i=1;i<=u;i++)l.push({day:i,currentMonth:!1,date:new Date(e,t+1,i)});return l})().map(((e,i)=>{const r=(s=e.date,t?t.filter((e=>{const t=new Date(e.date);return t.getDate()===s.getDate()&&t.getMonth()===s.getMonth()&&t.getFullYear()===s.getFullYear()})):[]);var s;const a=r.length>0;return(0,De.jsxs)("div",{className:"calendar-day ".concat(e.currentMonth?"":"other-month"," ").concat(e.isToday?"today":""),children:[(0,De.jsx)("div",{className:"day-number",children:e.day}),a&&(0,De.jsx)("div",{className:"day-appointments",children:r.map(((e,t)=>{var i,r,s,a;return(0,De.jsxs)("div",{className:"day-appointment ".concat(e.status.toLowerCase()),title:"".concat(e.motif," avec ").concat(null===(i=e.professionnel)||void 0===i?void 0:i.prenom," ").concat(null===(r=e.professionnel)||void 0===r?void 0:r.nom),children:[(0,De.jsx)("div",{className:"appointment-time",children:(a=e.date,new Date(a).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}))}),(0,De.jsx)("div",{className:"appointment-pro",children:null===(s=e.professionnel)||void 0===s?void 0:s.nom}),"CONFIRME"===e.status&&new Date(e.date)>new Date&&(0,De.jsx)("button",{className:"appointment-cancel-btn",onClick:()=>n(e._id),title:"Annuler",children:"\xd7"})]},"app-".concat(t))}))})]},"day-".concat(i))}))})]})]})},VP=()=>{const{auth:e}=(0,r.useContext)(Oe),[t,n]=(0,r.useState)([]),[i,s]=(0,r.useState)(null),[a,o]=(0,r.useState)(!0),[l,c]=(0,r.useState)(null),[u,d]=(0,r.useState)(!1),[h,p]=(0,r.useState)(null),[f,m]=(0,r.useState)(!1),[g,v]=(0,r.useState)([]),[y,x]=(0,r.useState)([]),b=(0,r.useRef)({}),[_,w]=(0,r.useState)(!1),[S,M]=(0,r.useState)(!1),[E,T]=(0,r.useState)(!1),[C,A]=(0,r.useState)(!1),P=(0,r.useCallback)((()=>{console.log("\ud83d\udd04 TOGGLE SIDEBAR - \xc9tat actuel:",C),A((e=>{const t=!e;return console.log("\u2705 NOUVEAU \xc9TAT:",t),t}))}),[C]),N=(0,r.useCallback)((()=>{console.log("\u274c FERMETURE SIDEBAR"),A(!1)}),[]);(0,r.useEffect)((()=>{console.log("\ud83d\udcca \xc9TAT SIDEBAR CHANG\xc9:",C);const e=document.querySelector(".dashboard-sidebar");e&&(C?(e.classList.add("visible"),console.log('\u2705 Classe "visible" ajout\xe9e')):(e.classList.remove("visible"),console.log('\u274c Classe "visible" supprim\xe9e')))}),[C]),(0,r.useEffect)((()=>{e.isAuthenticated&&k()}),[e.isAuthenticated]),(0,r.useEffect)((()=>{if(t&&t.length>0){const e=t.filter((e=>"CONFIRME"===e.status));v(e);const n=new Date,i=e.filter((e=>new Date(e.date)<n));x(i)}}),[t]),(0,r.useEffect)((()=>{const e=()=>{const e=new Date;g.forEach((t=>{var n,i;new Date(t.date)<e&&!b.current[t._id]&&(b.current[t._id]=!0,"Notification"in window&&"granted"===Notification.permission?new Notification("Rappel de rendez-vous",{body:"Votre rendez-vous avec ".concat(null===(n=t.professionnel)||void 0===n?void 0:n.prenom," ").concat(null===(i=t.professionnel)||void 0===i?void 0:i.nom," a commenc\xe9."),icon:"/logo.png"}):"Notification"in window&&"denied"!==Notification.permission&&Notification.requestPermission().then((e=>{var n,i;"granted"===e&&new Notification("Rappel de rendez-vous",{body:"Votre rendez-vous avec ".concat(null===(n=t.professionnel)||void 0===n?void 0:n.prenom," ").concat(null===(i=t.professionnel)||void 0===i?void 0:i.nom," a commenc\xe9."),icon:"/logo.png"})})))}))},t=setInterval(e,6e4);return e(),()=>clearInterval(t)}),[g]);const k=async()=>{try{o(!0);const[e,t]=await Promise.all([yi.getProfile(),yi.getAppointments()]);s(e.data),n(t.data)}catch(l){console.error("Erreur:",l),c(l.message)}finally{o(!1)}},R=async e=>{try{await yi.cancelAppointment(e),k()}catch(l){console.error("Erreur lors de l'annulation:",l)}},I=()=>{w((e=>!e))},L=()=>{M((e=>!e))},j=e=>{const t=new Date,n=new Date(e)-t;if(n<=0)return"Maintenant";const i=Math.floor(n/864e5),r=Math.floor(n%864e5/36e5),s=Math.floor(n%36e5/6e4);return i>0?"".concat(i," jour").concat(i>1?"s":""," ").concat(r," heure").concat(r>1?"s":""):r>0?"".concat(r," heure").concat(r>1?"s":""," ").concat(s," minute").concat(s>1?"s":""):"".concat(s," minute").concat(s>1?"s":"")};return a?(0,De.jsx)("div",{className:"loading-state",children:"Chargement..."}):l?(0,De.jsxs)("div",{className:"error-state",children:["Une erreur est survenue: ",l]}):(0,De.jsxs)("div",{className:"dashboard-layout",children:[C&&(0,De.jsx)("div",{className:"sidebar-overlay",onClick:N}),(0,De.jsx)(zP,{user:i,onLogout:()=>{localStorage.removeItem("token"),window.location.href="/login"},activeTab:h,setActiveTab:p,setShowBookingWorkflow:d,isVisible:C,onClose:N}),(0,De.jsxs)("div",{className:"dashboard-main",children:[(0,De.jsxs)("header",{className:"dashboard-header",children:[(0,De.jsxs)("div",{className:"header-left",children:[(0,De.jsx)("button",{className:"sidebar-toggle-button",onClick:P,"aria-label":"Toggle sidebar",type:"button",children:C?(0,De.jsx)(lP,{}):(0,De.jsx)(BA,{})}),(0,De.jsx)("h1",{children:"Tableau de bord"})]}),(0,De.jsxs)("div",{className:"user-info",children:[(0,De.jsxs)("div",{className:"header-actions",children:[(0,De.jsx)("button",{className:"header-action-button",onClick:L,title:"Rechercher",children:(0,De.jsx)(aP,{})}),(0,De.jsx)("button",{className:"header-action-button",onClick:I,title:"Chat",children:(0,De.jsx)(KA,{})})]}),(0,De.jsxs)("span",{children:["Bienvenue, ",null===i||void 0===i?void 0:i.prenom," ",null===i||void 0===i?void 0:i.nom]})]})]}),(0,De.jsx)(UP,{isOpen:S,onClose:()=>M(!1)}),f&&(0,De.jsx)("div",{className:"success-message",children:"Votre rendez-vous a \xe9t\xe9 r\xe9serv\xe9 avec succ\xe8s ! Vous recevrez une notification lorsqu'il sera confirm\xe9."}),u?(0,De.jsxs)("div",{className:"booking-workflow-section",children:[(0,De.jsxs)("div",{className:"section-header",children:[(0,De.jsx)("h2",{className:"section-title",children:"R\xe9server un rendez-vous"}),(0,De.jsx)("button",{className:"close-button",onClick:()=>{d(!1),p(null)},children:"\xd7"})]}),(0,De.jsx)(wP,{onBookingComplete:async e=>{try{await yi.createAppointment(e),m(!0),d(!1),p(null),k(),setTimeout((()=>{m(!1)}),5e3)}catch(l){console.error("Erreur lors de la cr\xe9ation du rendez-vous:",l)}}})]}):"appointments"===h?(0,De.jsxs)("div",{className:"appointments-section",children:[(0,De.jsxs)("div",{className:"section-header",children:[(0,De.jsx)("h2",{className:"section-title",children:"Tous mes rendez-vous"}),(0,De.jsx)("button",{className:"close-button",onClick:()=>p(null),children:"\xd7"})]}),(0,De.jsx)(SP,{appointments:t,onCancel:R})]}):"notifications"===h?(0,De.jsxs)("div",{className:"notifications-section",children:[(0,De.jsxs)("div",{className:"section-header",children:[(0,De.jsx)("h2",{className:"section-title",children:"Notifications"}),(0,De.jsx)("button",{className:"close-button",onClick:()=>p(null),children:"\xd7"})]}),(0,De.jsx)(MP,{})]}):(0,De.jsxs)(De.Fragment,{children:[(0,De.jsxs)("div",{className:"confirmed-appointments-section",children:[(0,De.jsxs)("div",{className:"section-header-with-toggle",children:[(0,De.jsx)("h2",{className:"section-title",children:"Mes prochains rendez-vous"}),(0,De.jsxs)("div",{className:"view-toggle-buttons",children:[(0,De.jsx)("button",{className:"view-toggle-button ".concat(E?"":"active"),onClick:()=>{console.log("Switching to list view"),T(!1)},title:"Vue liste",children:(0,De.jsx)(tP,{})}),(0,De.jsx)("button",{className:"view-toggle-button ".concat(E?"active":""),onClick:()=>{console.log("Switching to calendar view"),T(!0)},title:"Vue calendrier",children:(0,De.jsx)(HA,{})})]})]}),E?(0,De.jsx)(BP,{appointments:t,onCancel:R}):0===g.length?(0,De.jsxs)("div",{className:"no-appointments",children:[(0,De.jsx)("p",{children:"Vous n'avez pas de rendez-vous confirm\xe9s pour le moment."}),(0,De.jsx)("p",{children:"R\xe9servez un rendez-vous et attendez la confirmation du professionnel."}),(0,De.jsx)("button",{className:"book-appointment-button",onClick:()=>{d(!0),p("booking")},children:"R\xe9server un rendez-vous"})]}):(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)("div",{className:"appointments-grid",children:g.map((e=>{var t,n;const i=new Date(e.date)<new Date;return(0,De.jsxs)("div",{className:"appointment-card ".concat(i?"past-appointment":""),children:[(0,De.jsxs)("div",{className:"appointment-header",children:[(0,De.jsx)("span",{className:"appointment-status ".concat(i?"status-past":"status-confirmed"),children:i?"Pass\xe9":"Confirm\xe9"}),(0,De.jsx)("span",{className:"appointment-date",children:(r=e.date,new Date(r).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}))})]}),(0,De.jsxs)("div",{className:"appointment-body",children:[(0,De.jsxs)("div",{className:"appointment-detail",children:[(0,De.jsx)("div",{className:"detail-icon",children:(0,De.jsx)(dP,{})}),(0,De.jsxs)("div",{className:"detail-content",children:[(0,De.jsx)("div",{className:"detail-label",children:"Professionnel"}),(0,De.jsxs)("div",{className:"detail-value",children:[null===(t=e.professionnel)||void 0===t?void 0:t.prenom," ",null===(n=e.professionnel)||void 0===n?void 0:n.nom]})]})]}),(0,De.jsxs)("div",{className:"appointment-detail",children:[(0,De.jsx)("div",{className:"detail-icon",children:(0,De.jsx)($A,{})}),(0,De.jsxs)("div",{className:"detail-content",children:[(0,De.jsx)("div",{className:"detail-label",children:"Temps"}),(0,De.jsx)("div",{className:"detail-value",children:i?"Rendez-vous pass\xe9":"Dans ".concat(j(e.date))})]})]}),(0,De.jsxs)("div",{className:"appointment-reason",children:[(0,De.jsx)("strong",{children:"Motif:"})," ",e.motif]})]}),!i&&(0,De.jsx)("div",{className:"appointment-footer",children:(0,De.jsx)("button",{className:"cancel-button",onClick:()=>R(e._id),children:"Annuler"})})]},e._id);var r}))}),(0,De.jsx)("div",{className:"appointments-list-mobile",children:g.map((e=>{var t,n;const i=new Date(e.date)<new Date;return(0,De.jsxs)("div",{className:"appointment-item-mobile ".concat(i?"past-appointment":""),children:[(0,De.jsxs)("div",{className:"appointment-mobile-header",children:[(0,De.jsx)("span",{className:"appointment-mobile-status ".concat(i?"status-past":"status-confirmed"),children:i?"Pass\xe9":"Confirm\xe9"}),(0,De.jsxs)("div",{className:"appointment-mobile-date",children:[new Date(e.date).toLocaleDateString("fr-FR",{day:"2-digit",month:"short"}),(0,De.jsx)("br",{}),new Date(e.date).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})]})]}),(0,De.jsxs)("div",{className:"appointment-mobile-content",children:[(0,De.jsxs)("div",{className:"appointment-mobile-row",children:[(0,De.jsx)(dP,{className:"appointment-mobile-icon"}),(0,De.jsx)("span",{className:"appointment-mobile-label",children:"M\xe9decin:"}),(0,De.jsxs)("span",{className:"appointment-mobile-value",children:[null===(t=e.professionnel)||void 0===t?void 0:t.prenom," ",null===(n=e.professionnel)||void 0===n?void 0:n.nom]})]}),(0,De.jsxs)("div",{className:"appointment-mobile-row",children:[(0,De.jsx)($A,{className:"appointment-mobile-icon"}),(0,De.jsx)("span",{className:"appointment-mobile-label",children:"Temps:"}),(0,De.jsx)("span",{className:"appointment-mobile-value",children:i?"Rendez-vous pass\xe9":"Dans ".concat(j(e.date))})]}),(0,De.jsxs)("div",{className:"appointment-mobile-reason",children:[(0,De.jsx)("strong",{children:"Motif:"})," ",e.motif]})]}),!i&&(0,De.jsx)("div",{className:"appointment-mobile-actions",children:(0,De.jsx)("button",{className:"cancel-button-mobile",onClick:()=>R(e._id),children:"Annuler"})})]},"mobile-".concat(e._id))}))})]})]}),(0,De.jsxs)("div",{className:"quick-actions",children:[(0,De.jsxs)("button",{className:"action-button",onClick:()=>{d(!0),p("booking")},children:[(0,De.jsx)(HA,{className:"action-icon"}),(0,De.jsx)("span",{children:"R\xe9server un rendez-vous"})]}),(0,De.jsxs)("button",{className:"action-button",onClick:()=>p("appointments"),children:[(0,De.jsx)(YA,{className:"action-icon"}),(0,De.jsx)("span",{children:"Voir tous mes rendez-vous"})]}),(0,De.jsxs)("button",{className:"action-button",onClick:()=>p("notifications"),children:[(0,De.jsx)(VA,{className:"action-icon"}),(0,De.jsx)("span",{children:"Voir mes notifications"})]})]})]}),(0,De.jsx)(FP,{isOpen:_,onClose:()=>w(!1)}),!_&&(0,De.jsx)("button",{className:"chat-toggle-button",onClick:I,title:"Ouvrir le chat",children:(0,De.jsx)(KA,{})})]})]})},HP={login:async e=>{try{const t=await xi.login(e);return t.data.token&&(localStorage.setItem("token",t.data.token),localStorage.setItem("user",JSON.stringify(t.data.user))),t}catch(Ib){throw Ib}},register:async e=>{try{return await xi.register(e)}catch(Ib){throw Ib}},logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user")},getCurrentUser:()=>{const e=localStorage.getItem("user");return e?JSON.parse(e):null},isAuthenticated:()=>!!localStorage.getItem("token")},WP=HP,GP="Profile_profileContainer__2-rLA",qP="Profile_formWrapper__0H8Z5",XP="Profile_header__oxObR",YP="Profile_profileCard__uqk9b",JP="Profile_formGroup__fmWQO",KP="Profile_formActions__2GQ25",ZP="Profile_photoSection__u8XlN",QP="Profile_title__sBM57",$P="Profile_subtitle__4S6BN",eN="Profile_formLabel__h-uUZ",tN="Profile_formControl__5wTSQ",nN="Profile_submitButton__KJQgF",iN="Profile_photoContainer__P0ogK",rN="Profile_profilePhoto__E0ofO",sN="Profile_photoPlaceholder__yZEa+",aN="Profile_photoUpload__2Mj0i",oN="Profile_photoUploadLabel__3mNkq",lN="Profile_photoInput__Nzncj",cN="Profile_loadingContainer__GJcQw",uN="Profile_loadingSpinner__RwB3i",dN="Profile_loadingText__mdyqY",hN="Profile_uploadButton__P7CxP",pN="Profile_confirmationMessage__sOAed",fN="Profile_confirmationIcon__xOWM+",mN="Profile_confirmationContent__hFvyT",gN="Profile_confirmationTitle__4MHIJ",vN="Profile_confirmationText__8XmBQ",yN="Profile_confirmationButton__nBVRc",xN="Profile_backButton__yKrXw",bN="Profile_required__jW6Um",_N="Profile_particle__RUr2B",wN=()=>{var e,t;const n=ne(),[i,s]=(0,r.useState)({nom:"",prenom:"",email:"",motDePasse:"",photo:""}),[a,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)(""),[u,d]=(0,r.useState)("success"),[,h]=(0,r.useState)(null),[p,f]=(0,r.useState)(!0),[m,g]=(0,r.useState)(!1),[v,y]=(0,r.useState)(!1),[x,b]=(0,r.useState)(null),[_,w]=(0,r.useState)(""),[S,M]=(0,r.useState)(!1),E=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";c(e),d(t),o(!0),setTimeout((()=>o(!1)),3e3)},T=(0,r.useCallback)((async()=>{if(WP.isAuthenticated())try{f(!0),y(!1);const e=localStorage.getItem("userPhotoUrl");e&&(console.log("Photo URL r\xe9cup\xe9r\xe9e depuis localStorage:",e),w(e));const t=WP.getCurrentUser();t&&s({nom:t.nom||"",prenom:t.prenom||"",email:t.email||"",motDePasse:"",photo:t.photo||e||""});const n=(await yi.getProfile()).data;n.photo&&(localStorage.setItem("userPhotoUrl",n.photo),w(n.photo)),s((t=>He(He({},t),{},{nom:n.nom||t.nom,prenom:n.prenom||t.prenom,email:n.email||t.email,motDePasse:"",photo:n.photo||e||t.photo})));const i=He(He({},t),{},{nom:n.nom||t.nom,prenom:n.prenom||t.prenom,email:n.email||t.email,photo:n.photo||e||t.photo});localStorage.setItem("user",JSON.stringify(i))}catch(Ib){var e,t;console.error("Erreur de chargement:",Ib),h("Erreur lors du chargement du profil"),401!==(null===(e=Ib.response)||void 0===e?void 0:e.status)&&403!==(null===(t=Ib.response)||void 0===t?void 0:t.status)||n("/login")}finally{f(!1)}else n("/login")}),[n]);(0,r.useEffect)((()=>{T()}),[T]);const C=async()=>{if(!x)return null;try{const e=new FormData;e.append("photo",x);const t=await yi.uploadPhoto(e);if(t.data&&t.data.photoUrl){const e=t.data.photoUrl;s((t=>He(He({},t),{},{photo:e})));const n=He(He({},WP.getCurrentUser()),{},{photo:e});return localStorage.setItem("user",JSON.stringify(n)),localStorage.setItem("userPhotoUrl",e),P(A(e)),E("Photo de profil mise \xe0 jour avec succ\xe8s!","success"),e}return null}catch(Ib){throw console.error("Erreur lors du t\xe9l\xe9chargement de la photo:",Ib),E("Erreur lors du t\xe9l\xe9chargement de la photo","error"),Ib}finally{b(null)}},A=e=>{if(!e)return null;if(e.startsWith("http")||e.startsWith("data:image"))return e;const t={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyAvU9kEEeWjQ7IAqBYbGgC42AdkWLES81M",REACT_APP_FIREBASE_APP_ID:"1:572769350923:web:4583cdf7d3de12a6769e0e",REACT_APP_FIREBASE_AUTH_DOMAIN:"rdv-project-7ba0a.firebaseapp.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-2E561CDQNN",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"572769350923",REACT_APP_FIREBASE_PROJECT_ID:"rdv-project-7ba0a",REACT_APP_FIREBASE_STORAGE_BUCKET:"rdv-project-7ba0a.firebasestorage.app"}.REACT_APP_API_URL||"http://localhost:5000",n=e.startsWith("/")?e:"/".concat(e);return console.log("Construction de l'URL de la photo:","".concat(t).concat(n)),"".concat(t).concat(n)},P=e=>{e&&(console.log("D\xe9bogage de l'URL d'image:",e),fetch(e,{method:"HEAD"}).then((t=>{console.log("Statut de l'image:",t.status,t.statusText),t.ok||console.error("L'image n'est pas accessible:",e)})).catch((e=>{console.error("Erreur lors de la v\xe9rification de l'image:",e)})))};return p?(0,De.jsxs)("div",{className:cN,children:[(0,De.jsx)("div",{className:uN}),(0,De.jsx)("p",{className:dN,children:"Chargement de votre profil..."})]}):(0,De.jsxs)("div",{className:GP,children:[(0,De.jsx)("div",{className:_N}),(0,De.jsx)("div",{className:_N}),(0,De.jsx)("div",{className:_N}),(0,De.jsx)("div",{className:_N}),a&&(0,De.jsx)(Bi,{message:l,type:u,duration:3e3,onClose:()=>o(!1)}),(0,De.jsxs)("button",{onClick:()=>{n("/user/dashboard")},className:xN,children:[(0,De.jsx)("i",{className:"fas fa-arrow-left"})," Retour au tableau de bord"]}),(0,De.jsxs)("div",{className:qP,children:[(0,De.jsxs)("div",{className:XP,children:[(0,De.jsx)("h1",{className:QP,children:"Mon Profil"}),(0,De.jsx)("p",{className:$P,children:"G\xe9rez vos informations personnelles et vos pr\xe9f\xe9rences"})]}),(0,De.jsxs)("div",{className:YP,children:[(0,De.jsxs)("div",{className:ZP,children:[(0,De.jsx)("div",{className:iN,children:!i.photo&&!_||v?(0,De.jsx)("div",{className:sN,children:(0,De.jsxs)("span",{children:[null===(e=i.prenom)||void 0===e?void 0:e.charAt(0),null===(t=i.nom)||void 0===t?void 0:t.charAt(0)]})}):(0,De.jsx)("img",{src:A(_||i.photo),alt:"".concat(i.prenom," ").concat(i.nom),className:rN,onLoad:()=>{console.log("Image charg\xe9e avec succ\xe8s:",A(_||i.photo))},onError:e=>{console.error("Erreur de chargement de l'image:",e),P(A(_||i.photo)),e.target.onerror=null,e.target.src="/default-avatar.png",y(!0)}})}),(0,De.jsxs)("div",{className:aN,children:[(0,De.jsxs)("label",{htmlFor:"photo",className:oN,children:[(0,De.jsx)("i",{className:"fas fa-camera"})," Changer la photo"]}),(0,De.jsx)("input",{type:"file",id:"photo",name:"photo",onChange:e=>{const t=e.target.files[0];if(t){if(!t.type.startsWith("image/"))return void E("Veuillez s\xe9lectionner une image valide","error");if(t.size>5242880)return void E("La taille de l'image ne doit pas d\xe9passer 5MB","error");b(t);const e=new FileReader;e.onloadend=()=>{s((t=>He(He({},t),{},{photo:e.result})))},e.readAsDataURL(t)}},accept:"image/*",className:lN}),x&&(0,De.jsxs)("button",{type:"button",className:hN,onClick:C,disabled:m,children:[(0,De.jsx)("i",{className:"fas fa-upload"})," T\xe9l\xe9charger la photo"]})]})]}),(0,De.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),localStorage.getItem("token")||(n("/login"),0))try{if(g(!0),h(""),M(!1),!i.nom.trim()||!i.prenom.trim()||!i.email.trim())throw new Error("Tous les champs obligatoires doivent \xeatre remplis");if(x)try{const e=await C();e&&(console.log("URL de photo apr\xe8s upload:",e),w(e))}catch(t){console.error("Erreur lors de l'upload de la photo:",t)}const e={nom:i.nom.trim(),prenom:i.prenom.trim(),email:i.email.trim()};_&&(e.photoPath=_),i.motDePasse&&i.motDePasse.trim()&&(e.motDePasse=i.motDePasse.trim());if(await yi.updateProfile(e)){const e=WP.getCurrentUser(),t=He(He({},e),{},{nom:i.nom.trim(),prenom:i.prenom.trim(),email:i.email.trim(),photo:_||e.photo});localStorage.setItem("user",JSON.stringify(t)),s((e=>He(He({},e),{},{motDePasse:""}))),E("Profil mis \xe0 jour avec succ\xe8s!","success"),M(!0),setTimeout((()=>{const e=document.getElementById("update-confirmation");e&&e.scrollIntoView({behavior:"smooth"})}),100)}}catch(r){console.error("Erreur compl\xe8te:",r),h(r.message||"Erreur lors de la mise \xe0 jour"),E(r.message||"Erreur lors de la mise \xe0 jour","error")}finally{g(!1)}},children:[(0,De.jsxs)("div",{className:JP,children:[(0,De.jsx)("label",{className:"".concat(eN," ").concat(bN),children:"Nom:"}),(0,De.jsx)("input",{type:"text",value:i.nom,onChange:e=>s(He(He({},i),{},{nom:e.target.value})),required:!0,className:tN,placeholder:"Votre nom"})]}),(0,De.jsxs)("div",{className:JP,children:[(0,De.jsx)("label",{className:"".concat(eN," ").concat(bN),children:"Pr\xe9nom:"}),(0,De.jsx)("input",{type:"text",value:i.prenom,onChange:e=>s(He(He({},i),{},{prenom:e.target.value})),required:!0,className:tN,placeholder:"Votre pr\xe9nom"})]}),(0,De.jsxs)("div",{className:JP,children:[(0,De.jsx)("label",{className:"".concat(eN," ").concat(bN),children:"Email:"}),(0,De.jsx)("input",{type:"email",value:i.email,onChange:e=>s(He(He({},i),{},{email:e.target.value})),required:!0,className:tN,placeholder:"votre@email.com"})]}),(0,De.jsxs)("div",{className:JP,children:[(0,De.jsx)("label",{className:eN,children:"Nouveau mot de passe (optionnel):"}),(0,De.jsx)("input",{type:"password",value:i.motDePasse,onChange:e=>s(He(He({},i),{},{motDePasse:e.target.value})),className:tN,placeholder:"Laissez vide pour conserver le mot de passe actuel"})]}),(0,De.jsx)("div",{className:KP,children:(0,De.jsx)("button",{type:"submit",className:nN,disabled:m,children:m?(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)("span",{className:uN}),"Mise \xe0 jour..."]}):(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)("i",{className:"fas fa-save"})," Mettre \xe0 jour"]})})})]}),S&&(0,De.jsxs)("div",{id:"update-confirmation",className:pN,children:[(0,De.jsx)("div",{className:fN,children:(0,De.jsx)("i",{className:"fas fa-check-circle"})}),(0,De.jsxs)("div",{className:mN,children:[(0,De.jsx)("h3",{className:gN,children:"Profil mis \xe0 jour avec succ\xe8s!"}),(0,De.jsx)("p",{className:vN,children:"Vos informations personnelles ont \xe9t\xe9 mises \xe0 jour et enregistr\xe9es."}),(0,De.jsx)("button",{className:yN,onClick:()=>M(!1),children:"Fermer"})]})]})]})]})]})};const SN=1/60*1e3,MN="undefined"!==typeof performance?()=>performance.now():()=>Date.now(),EN="undefined"!==typeof window?e=>window.requestAnimationFrame(e):e=>setTimeout((()=>e(MN())),SN);let TN=!0,CN=!1,AN=!1;const PN={delta:0,timestamp:0},NN=["read","update","preRender","render","postRender"],kN=NN.reduce(((e,t)=>(e[t]=function(e){let t=[],n=[],i=0,r=!1,s=!1;const a=new WeakSet,o={schedule:function(e){const s=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&r,o=s?t:n;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&a.add(e),-1===o.indexOf(e)&&(o.push(e),s&&r&&(i=t.length)),e},cancel:e=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1),a.delete(e)},process:l=>{if(r)s=!0;else{if(r=!0,[t,n]=[n,t],n.length=0,i=t.length,i)for(let n=0;n<i;n++){const i=t[n];i(l),a.has(i)&&(o.schedule(i),e())}r=!1,s&&(s=!1,o.process(l))}}};return o}((()=>CN=!0)),e)),{}),RN=NN.reduce(((e,t)=>{const n=kN[t];return e[t]=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return CN||ON(),n.schedule(e,t,i)},e}),{}),IN=NN.reduce(((e,t)=>(e[t]=kN[t].cancel,e)),{}),LN=NN.reduce(((e,t)=>(e[t]=()=>kN[t].process(PN),e)),{}),jN=e=>kN[e].process(PN),DN=e=>{CN=!1,PN.delta=TN?SN:Math.max(Math.min(e-PN.timestamp,40),1),PN.timestamp=e,AN=!0,NN.forEach(jN),AN=!1,CN&&(TN=!1,EN(DN))},ON=()=>{CN=!0,TN=!0,AN||EN(DN)},zN=()=>PN,FN=RN;var UN="undefined"!==typeof document,BN=UN?r.useLayoutEffect:r.useEffect;function VN(){var e=(0,r.useRef)(!1);return BN((function(){return e.current=!0,function(){e.current=!1}}),[]),e}var HN=(0,r.createContext)(null);function WN(e){var t=(0,r.useRef)(null);return null===t.current&&(t.current=e()),t.current}var GN=0,qN=function(){return GN++},XN=function(){return WN(qN)},YN=function(e){var t=e.children,n=e.initial,i=e.isPresent,s=e.onExitComplete,a=e.custom,o=e.presenceAffectsLayout,l=WN(JN),c=XN(),u=(0,r.useMemo)((function(){return{id:c,initial:n,isPresent:i,custom:a,onExitComplete:function(e){var t,n;l.set(e,!0);try{for(var i=YM(l.values()),r=i.next();!r.done;r=i.next()){if(!r.value)return}}catch(a){t={error:a}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}null===s||void 0===s||s()},register:function(e){return l.set(e,!1),function(){return l.delete(e)}}}}),o?void 0:[i]);return(0,r.useMemo)((function(){l.forEach((function(e,t){return l.set(t,!1)}))}),[i]),r.useEffect((function(){!i&&!l.size&&(null===s||void 0===s||s())}),[i]),r.createElement(HN.Provider,{value:u},t)};function JN(){return new Map}var KN=(0,r.createContext)({});function ZN(e){return(0,r.useEffect)((function(){return function(){return e()}}),[])}var QN=function(e){return e.key||""};var $N=function(e){var t=e.children,n=e.custom,i=e.initial,s=void 0===i||i,a=e.onExitComplete,o=e.exitBeforeEnter,l=e.presenceAffectsLayout,c=void 0===l||l,u=JM(function(){var e=VN(),t=JM((0,r.useState)(0),2),n=t[0],i=t[1],s=(0,r.useCallback)((function(){e.current&&i(n+1)}),[n]);return[(0,r.useCallback)((function(){return FN.postRender(s)}),[s]),n]}(),1),d=u[0],h=(0,r.useContext)(KN).forceRender;h&&(d=h);var p=VN(),f=function(e){var t=[];return r.Children.forEach(e,(function(e){(0,r.isValidElement)(e)&&t.push(e)})),t}(t),m=f,g=new Set,v=(0,r.useRef)(m),y=(0,r.useRef)(new Map).current,x=(0,r.useRef)(!0);if(BN((function(){x.current=!1,function(e,t){e.forEach((function(e){var n=QN(e);t.set(n,e)}))}(f,y),v.current=m})),ZN((function(){x.current=!0,y.clear(),g.clear()})),x.current)return r.createElement(r.Fragment,null,m.map((function(e){return r.createElement(YN,{key:QN(e),isPresent:!0,initial:!!s&&void 0,presenceAffectsLayout:c},e)})));m=KM([],JM(m),!1);for(var b=v.current.map(QN),_=f.map(QN),w=b.length,S=0;S<w;S++){var M=b[S];-1===_.indexOf(M)&&g.add(M)}return o&&g.size&&(m=[]),g.forEach((function(e){if(-1===_.indexOf(e)){var t=y.get(e);if(t){var i=b.indexOf(e);m.splice(i,0,r.createElement(YN,{key:QN(t),isPresent:!1,onExitComplete:function(){y.delete(e),g.delete(e);var t=v.current.findIndex((function(t){return t.key===e}));if(v.current.splice(t,1),!g.size){if(v.current=f,!1===p.current)return;d(),a&&a()}},custom:n,presenceAffectsLayout:c},t))}}})),m=m.map((function(e){var t=e.key;return g.has(t)?e:r.createElement(YN,{key:QN(e),isPresent:!0,presenceAffectsLayout:c},e)})),r.createElement(r.Fragment,null,g.size?m:m.map((function(e){return(0,r.cloneElement)(e)})))},ek=function(e){return{isEnabled:function(t){return e.some((function(e){return!!t[e]}))}}},tk={measureLayout:ek(["layout","layoutId","drag"]),animation:ek(["animate","exit","variants","whileHover","whileTap","whileFocus","whileDrag","whileInView"]),exit:ek(["exit"]),drag:ek(["drag","dragControls"]),focus:ek(["whileFocus"]),hover:ek(["whileHover","onHoverStart","onHoverEnd"]),tap:ek(["whileTap","onTap","onTapStart","onTapCancel"]),pan:ek(["onPan","onPanStart","onPanSessionStart","onPanEnd"]),inView:ek(["whileInView","onViewportEnter","onViewportLeave"])};var nk=(0,r.createContext)({strict:!1}),ik=Object.keys(tk),rk=ik.length;var sk=(0,r.createContext)({transformPagePoint:function(e){return e},isStatic:!1,reducedMotion:"never"}),ak=(0,r.createContext)({});var ok={current:null},lk=!1;function ck(){return!lk&&function(){if(lk=!0,UN)if(window.matchMedia){var e=window.matchMedia("(prefers-reduced-motion)"),t=function(){return ok.current=e.matches};e.addListener(t),t()}else ok.current=!1}(),JM((0,r.useState)(ok.current),1)[0]}function uk(e,t,n,i){var s=(0,r.useContext)(nk),a=(0,r.useContext)(ak).visualElement,o=(0,r.useContext)(HN),l=function(){var e=ck(),t=(0,r.useContext)(sk).reducedMotion;return"never"!==t&&("always"===t||e)}(),c=(0,r.useRef)(void 0);i||(i=s.renderer),!c.current&&i&&(c.current=i(e,{visualState:t,parent:a,props:n,presenceId:null===o||void 0===o?void 0:o.id,blockInitialAnimation:!1===(null===o||void 0===o?void 0:o.initial),shouldReduceMotion:l}));var u=c.current;return BN((function(){null===u||void 0===u||u.syncRender()})),(0,r.useEffect)((function(){var e;null===(e=null===u||void 0===u?void 0:u.animationState)||void 0===e||e.animateChanges()})),BN((function(){return function(){return null===u||void 0===u?void 0:u.notifyUnmount()}}),[]),u}function dk(e){return"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function hk(e){return Array.isArray(e)}function pk(e){return"string"===typeof e||hk(e)}function fk(e,t,n,i,r){var s;return void 0===i&&(i={}),void 0===r&&(r={}),"function"===typeof t&&(t=t(null!==n&&void 0!==n?n:e.custom,i,r)),"string"===typeof t&&(t=null===(s=e.variants)||void 0===s?void 0:s[t]),"function"===typeof t&&(t=t(null!==n&&void 0!==n?n:e.custom,i,r)),t}function mk(e,t,n){var i=e.getProps();return fk(i,t,null!==n&&void 0!==n?n:i.custom,function(e){var t={};return e.forEachValue((function(e,n){return t[n]=e.get()})),t}(e),function(e){var t={};return e.forEachValue((function(e,n){return t[n]=e.getVelocity()})),t}(e))}function gk(e){var t;return"function"===typeof(null===(t=e.animate)||void 0===t?void 0:t.start)||pk(e.initial)||pk(e.animate)||pk(e.whileHover)||pk(e.whileDrag)||pk(e.whileTap)||pk(e.whileFocus)||pk(e.exit)}function vk(e){return Boolean(gk(e)||e.variants)}function yk(e){var t=function(e,t){if(gk(e)){var n=e.initial,i=e.animate;return{initial:!1===n||pk(n)?n:void 0,animate:pk(i)?i:void 0}}return!1!==e.inherit?t:{}}(e,(0,r.useContext)(ak)),n=t.initial,i=t.animate;return(0,r.useMemo)((function(){return{initial:n,animate:i}}),[xk(n),xk(i)])}function xk(e){return Array.isArray(e)?e.join(" "):e}var bk={hasAnimatedSinceResize:!0,hasEverUpdated:!1},_k=1;var wk=(0,r.createContext)({});var Sk=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return GM(t,e),t.prototype.getSnapshotBeforeUpdate=function(){return this.updateProps(),null},t.prototype.componentDidUpdate=function(){},t.prototype.updateProps=function(){var e=this.props,t=e.visualElement,n=e.props;t&&t.setProps(n)},t.prototype.render=function(){return this.props.children},t}(r.Component);function Mk(e){var t=e.preloadedFeatures,n=e.createVisualElement,i=e.projectionNodeConstructor,s=e.useRender,a=e.useVisualState,o=e.Component;return t&&function(e){for(var t in e)null!==e[t]&&("projectionNodeConstructor"===t?tk.projectionNodeConstructor=e[t]:tk[t].Component=e[t])}(t),(0,r.forwardRef)((function(e,t){var l=function(e){var t,n=e.layoutId,i=null===(t=(0,r.useContext)(KN))||void 0===t?void 0:t.id;return i&&void 0!==n?i+"-"+n:n}(e);e=qM(qM({},e),{layoutId:l});var c=(0,r.useContext)(sk),u=null,d=yk(e),h=c.isStatic?void 0:WN((function(){if(bk.hasEverUpdated)return _k++})),p=a(e,c.isStatic);return!c.isStatic&&UN&&(d.visualElement=uk(o,p,qM(qM({},c),e),n),function(e,t,n,i){var s,a=t.layoutId,o=t.layout,l=t.drag,c=t.dragConstraints,u=t.layoutScroll,d=(0,r.useContext)(wk);i&&n&&!(null===n||void 0===n?void 0:n.projection)&&(n.projection=new i(e,n.getLatestValues(),null===(s=n.parent)||void 0===s?void 0:s.projection),n.projection.setOptions({layoutId:a,layout:o,alwaysMeasureLayout:Boolean(l)||c&&dk(c),visualElement:n,scheduleRender:function(){return n.scheduleRender()},animationType:"string"===typeof o?o:"both",initialPromotionConfig:d,layoutScroll:u}))}(h,e,d.visualElement,i||tk.projectionNodeConstructor),u=function(e,t){var n=[];if((0,r.useContext)(nk),!t)return null;for(var i=0;i<rk;i++){var s=ik[i],a=tk[s],o=a.isEnabled,l=a.Component;o(e)&&l&&n.push(r.createElement(l,qM({key:s},e,{visualElement:t})))}return n}(e,d.visualElement)),r.createElement(Sk,{visualElement:d.visualElement,props:qM(qM({},c),e)},u,r.createElement(ak.Provider,{value:d},s(o,e,h,function(e,t,n){return(0,r.useCallback)((function(i){var r;i&&(null===(r=e.mount)||void 0===r||r.call(e,i)),t&&(i?t.mount(i):t.unmount()),n&&("function"===typeof n?n(i):dk(n)&&(n.current=i))}),[t])}(p,d.visualElement,t),p,c.isStatic,d.visualElement)))}))}function Ek(e){function t(t,n){return void 0===n&&(n={}),Mk(e(t,n))}if("undefined"===typeof Proxy)return t;var n=new Map;return new Proxy(t,{get:function(e,i){return n.has(i)||n.set(i,t(i)),n.get(i)}})}var Tk=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","svg","switch","symbol","text","tspan","use","view"];function Ck(e){return"string"===typeof e&&!e.includes("-")&&!!(Tk.indexOf(e)>-1||/[A-Z]/.test(e))}var Ak={};var Pk=["","X","Y","Z"],Nk=["transformPerspective","x","y","z"];function kk(e,t){return Nk.indexOf(e)-Nk.indexOf(t)}["translate","scale","rotate","skew"].forEach((function(e){return Pk.forEach((function(t){return Nk.push(e+t)}))}));var Rk=new Set(Nk);function Ik(e){return Rk.has(e)}var Lk=new Set(["originX","originY","originZ"]);function jk(e){return Lk.has(e)}function Dk(e,t){var n=t.layout,i=t.layoutId;return Ik(e)||jk(e)||(n||void 0!==i)&&(!!Ak[e]||"opacity"===e)}var Ok=function(e){return Boolean(null!==e&&"object"===typeof e&&e.getVelocity)},zk={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"};function Fk(e){return e.startsWith("--")}var Uk=function(e,t){return t&&"number"===typeof e?t.transform(e):e};const Bk=(e,t)=>n=>Math.max(Math.min(n,t),e),Vk=e=>e%1?Number(e.toFixed(5)):e,Hk=/(-)?([\d]*\.?[\d])+/g,Wk=/(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))/gi,Gk=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))$/i;function qk(e){return"string"===typeof e}const Xk=e=>({test:t=>qk(t)&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>"".concat(t).concat(e)}),Yk=Xk("deg"),Jk=Xk("%"),Kk=Xk("px"),Zk=Xk("vh"),Qk=Xk("vw"),$k=Object.assign(Object.assign({},Jk),{parse:e=>Jk.parse(e)/100,transform:e=>Jk.transform(100*e)}),eR={test:e=>"number"===typeof e,parse:parseFloat,transform:e=>e},tR=Object.assign(Object.assign({},eR),{transform:Bk(0,1)}),nR=Object.assign(Object.assign({},eR),{default:1});var iR=qM(qM({},eR),{transform:Math.round}),rR={borderWidth:Kk,borderTopWidth:Kk,borderRightWidth:Kk,borderBottomWidth:Kk,borderLeftWidth:Kk,borderRadius:Kk,radius:Kk,borderTopLeftRadius:Kk,borderTopRightRadius:Kk,borderBottomRightRadius:Kk,borderBottomLeftRadius:Kk,width:Kk,maxWidth:Kk,height:Kk,maxHeight:Kk,size:Kk,top:Kk,right:Kk,bottom:Kk,left:Kk,padding:Kk,paddingTop:Kk,paddingRight:Kk,paddingBottom:Kk,paddingLeft:Kk,margin:Kk,marginTop:Kk,marginRight:Kk,marginBottom:Kk,marginLeft:Kk,rotate:Yk,rotateX:Yk,rotateY:Yk,rotateZ:Yk,scale:nR,scaleX:nR,scaleY:nR,scaleZ:nR,skew:Yk,skewX:Yk,skewY:Yk,distance:Kk,translateX:Kk,translateY:Kk,translateZ:Kk,x:Kk,y:Kk,z:Kk,perspective:Kk,transformPerspective:Kk,opacity:tR,originX:$k,originY:$k,originZ:Kk,zIndex:iR,fillOpacity:tR,strokeOpacity:tR,numOctaves:iR};function sR(e,t,n,i){var r,s=e.style,a=e.vars,o=e.transform,l=e.transformKeys,c=e.transformOrigin;l.length=0;var u=!1,d=!1,h=!0;for(var p in t){var f=t[p];if(Fk(p))a[p]=f;else{var m=rR[p],g=Uk(f,m);if(Ik(p)){if(u=!0,o[p]=g,l.push(p),!h)continue;f!==(null!==(r=m.default)&&void 0!==r?r:0)&&(h=!1)}else jk(p)?(c[p]=g,d=!0):s[p]=g}}u?s.transform=function(e,t,n,i){var r=e.transform,s=e.transformKeys,a=t.enableHardwareAcceleration,o=void 0===a||a,l=t.allowTransformNone,c=void 0===l||l,u="";s.sort(kk);for(var d=!1,h=s.length,p=0;p<h;p++){var f=s[p];u+="".concat(zk[f]||f,"(").concat(r[f],") "),"z"===f&&(d=!0)}return!d&&o?u+="translateZ(0)":u=u.trim(),i?u=i(r,n?"":u):c&&n&&(u="none"),u}(e,n,h,i):i?s.transform=i({},""):!t.transform&&s.transform&&(s.transform="none"),d&&(s.transformOrigin=function(e){var t=e.originX,n=void 0===t?"50%":t,i=e.originY,r=void 0===i?"50%":i,s=e.originZ,a=void 0===s?0:s;return"".concat(n," ").concat(r," ").concat(a)}(c))}var aR=function(){return{style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}}};function oR(e,t,n){for(var i in t)Ok(t[i])||Dk(i,n)||(e[i]=t[i])}function lR(e,t,n){var i={};return oR(i,e.style||{},e),Object.assign(i,function(e,t,n){var i=e.transformTemplate;return(0,r.useMemo)((function(){var e={style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}};sR(e,t,{enableHardwareAcceleration:!n},i);var r=e.style;return qM(qM({},e.vars),r)}),[t])}(e,t,n)),e.transformValues&&(i=e.transformValues(i)),i}function cR(e,t,n){var i={},r=lR(e,t,n);return Boolean(e.drag)&&!1!==e.dragListener&&(i.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=!0===e.drag?"none":"pan-".concat("x"===e.drag?"y":"x")),i.style=r,i}var uR=new Set(["initial","animate","exit","style","variants","transition","transformTemplate","transformValues","custom","inherit","layout","layoutId","layoutDependency","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","drag","dragControls","dragListener","dragConstraints","dragDirectionLock","dragSnapToOrigin","_dragX","_dragY","dragElastic","dragMomentum","dragPropagation","dragTransition","whileDrag","onPan","onPanStart","onPanEnd","onPanSessionStart","onTap","onTapStart","onTapCancel","onHoverStart","onHoverEnd","whileFocus","whileTap","whileHover","whileInView","onViewportEnter","onViewportLeave","viewport","layoutScroll"]);function dR(e){return uR.has(e)}var hR,pR=function(e){return!dR(e)};try{(hR=require("@emotion/is-prop-valid").default)&&(pR=function(e){return e.startsWith("on")?!dR(e):hR(e)})}catch(_b){}function fR(e,t,n){return"string"===typeof e?e:Kk.transform(t+n*e)}var mR={offset:"stroke-dashoffset",array:"stroke-dasharray"},gR={offset:"strokeDashoffset",array:"strokeDasharray"};function vR(e,t,n,i){var r=t.attrX,s=t.attrY,a=t.originX,o=t.originY,l=t.pathLength,c=t.pathSpacing,u=void 0===c?1:c,d=t.pathOffset,h=void 0===d?0:d;sR(e,XM(t,["attrX","attrY","originX","originY","pathLength","pathSpacing","pathOffset"]),n,i),e.attrs=e.style,e.style={};var p=e.attrs,f=e.style,m=e.dimensions;p.transform&&(m&&(f.transform=p.transform),delete p.transform),m&&(void 0!==a||void 0!==o||f.transform)&&(f.transformOrigin=function(e,t,n){var i=fR(t,e.x,e.width),r=fR(n,e.y,e.height);return"".concat(i," ").concat(r)}(m,void 0!==a?a:.5,void 0!==o?o:.5)),void 0!==r&&(p.x=r),void 0!==s&&(p.y=s),void 0!==l&&function(e,t,n,i,r){void 0===n&&(n=1),void 0===i&&(i=0),void 0===r&&(r=!0),e.pathLength=1;var s=r?mR:gR;e[s.offset]=Kk.transform(-i);var a=Kk.transform(t),o=Kk.transform(n);e[s.array]="".concat(a," ").concat(o)}(p,l,u,h,!1)}var yR=function(){return qM(qM({},{style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}}),{attrs:{}})};function xR(e,t){var n=(0,r.useMemo)((function(){var n=yR();return vR(n,t,{enableHardwareAcceleration:!1},e.transformTemplate),qM(qM({},n.attrs),{style:qM({},n.style)})}),[t]);if(e.style){var i={};oR(i,e.style,e),n.style=qM(qM({},i),n.style)}return n}function bR(e){void 0===e&&(e=!1);return function(t,n,i,s,a,o){var l=a.latestValues,c=(Ck(t)?xR:cR)(n,l,o),u=function(e,t,n){var i={};for(var r in e)(pR(r)||!0===n&&dR(r)||!t&&!dR(r)||e.draggable&&r.startsWith("onDrag"))&&(i[r]=e[r]);return i}(n,"string"===typeof t,e),d=qM(qM(qM({},u),c),{ref:s});return i&&(d["data-projection-id"]=i),(0,r.createElement)(t,d)}}var _R=/([a-z])([A-Z])/g,wR=function(e){return e.replace(_R,"$1-$2").toLowerCase()};function SR(e,t,n,i){var r=t.style,s=t.vars;for(var a in Object.assign(e.style,r,i&&i.getProjectionStyles(n)),s)e.style.setProperty(a,s[a])}var MR=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength"]);function ER(e,t,n,i){for(var r in SR(e,t,void 0,i),t.attrs)e.setAttribute(MR.has(r)?r:wR(r),t.attrs[r])}function TR(e){var t=e.style,n={};for(var i in t)(Ok(t[i])||Dk(i,e))&&(n[i]=t[i]);return n}function CR(e){var t=TR(e);for(var n in e){if(Ok(e[n]))t["x"===n||"y"===n?"attr"+n.toUpperCase():n]=e[n]}return t}function AR(e){return"object"===typeof e&&"function"===typeof e.start}var PR=function(e){return Array.isArray(e)},NR=function(e){return PR(e)?e[e.length-1]||0:e};function kR(e){var t,n=Ok(e)?e.get():e;return t=n,Boolean(t&&"object"===typeof t&&t.mix&&t.toValue)?n.toValue():n}function RR(e,t,n,i){var r=e.scrapeMotionValuesFromProps,s=e.createRenderState,a=e.onMount,o={latestValues:LR(t,n,i,r),renderState:s()};return a&&(o.mount=function(e){return a(t,e,o)}),o}var IR=function(e){return function(t,n){var i=(0,r.useContext)(ak),s=(0,r.useContext)(HN);return n?RR(e,t,i,s):WN((function(){return RR(e,t,i,s)}))}};function LR(e,t,n,i){var r={},s=!1===(null===n||void 0===n?void 0:n.initial),a=i(e);for(var o in a)r[o]=kR(a[o]);var l=e.initial,c=e.animate,u=gk(e),d=vk(e);t&&d&&!u&&!1!==e.inherit&&(null!==l&&void 0!==l||(l=t.initial),null!==c&&void 0!==c||(c=t.animate));var h=s||!1===l,p=h?c:l;p&&"boolean"!==typeof p&&!AR(p)&&(Array.isArray(p)?p:[p]).forEach((function(t){var n=fk(e,t);if(n){var i=n.transitionEnd;n.transition;var s=XM(n,["transitionEnd","transition"]);for(var a in s){var o=s[a];if(Array.isArray(o))o=o[h?o.length-1:0];null!==o&&(r[a]=o)}for(var a in i)r[a]=i[a]}}));return r}var jR,DR={useVisualState:IR({scrapeMotionValuesFromProps:CR,createRenderState:yR,onMount:function(e,t,n){var i=n.renderState,r=n.latestValues;try{i.dimensions="function"===typeof t.getBBox?t.getBBox():t.getBoundingClientRect()}catch(oq){i.dimensions={x:0,y:0,width:0,height:0}}vR(i,r,{enableHardwareAcceleration:!1},e.transformTemplate),ER(t,i)}})},OR={useVisualState:IR({scrapeMotionValuesFromProps:TR,createRenderState:aR})};function zR(e,t,n,i){return void 0===i&&(i={passive:!0}),e.addEventListener(t,n,i),function(){return e.removeEventListener(t,n)}}function FR(e,t,n,i){(0,r.useEffect)((function(){var r=e.current;if(n&&r)return zR(r,t,n,i)}),[e,t,n,i])}function UR(e){return"undefined"!==typeof PointerEvent&&e instanceof PointerEvent?!("mouse"!==e.pointerType):e instanceof MouseEvent}function BR(e){return!!e.touches}!function(e){e.Animate="animate",e.Hover="whileHover",e.Tap="whileTap",e.Drag="whileDrag",e.Focus="whileFocus",e.InView="whileInView",e.Exit="exit"}(jR||(jR={}));var VR={pageX:0,pageY:0};function HR(e,t){void 0===t&&(t="page");var n=e.touches[0]||e.changedTouches[0]||VR;return{x:n[t+"X"],y:n[t+"Y"]}}function WR(e,t){return void 0===t&&(t="page"),{x:e[t+"X"],y:e[t+"Y"]}}function GR(e,t){return void 0===t&&(t="page"),{point:BR(e)?HR(e,t):WR(e,t)}}var qR=function(e,t){void 0===t&&(t=!1);var n,i=function(t){return e(t,GR(t))};return t?(n=i,function(e){var t=e instanceof MouseEvent;(!t||t&&0===e.button)&&n(e)}):i},XR={pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointercancel:"mousecancel",pointerover:"mouseover",pointerout:"mouseout",pointerenter:"mouseenter",pointerleave:"mouseleave"},YR={pointerdown:"touchstart",pointermove:"touchmove",pointerup:"touchend",pointercancel:"touchcancel"};function JR(e){return UN&&null===window.onpointerdown?e:UN&&null===window.ontouchstart?YR[e]:UN&&null===window.onmousedown?XR[e]:e}function KR(e,t,n,i){return zR(e,JR(t),qR(n,"pointerdown"===t),i)}function ZR(e,t,n,i){return FR(e,JR(t),n&&qR(n,"pointerdown"===t),i)}function QR(e){var t=null;return function(){return null===t&&(t=e,function(){t=null})}}var $R=QR("dragHorizontal"),eI=QR("dragVertical");function tI(e){var t=!1;if("y"===e)t=eI();else if("x"===e)t=$R();else{var n=$R(),i=eI();n&&i?t=function(){n(),i()}:(n&&n(),i&&i())}return t}function nI(){var e=tI(!0);return!e||(e(),!1)}function iI(e,t,n){return function(i,r){var s;UR(i)&&!nI()&&(null===(s=e.animationState)||void 0===s||s.setActive(jR.Hover,t),null===n||void 0===n||n(i,r))}}var rI=function(e,t){return!!t&&(e===t||rI(e,t.parentElement))};const sI=(e,t)=>n=>t(e(n)),aI=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(sI)};new Set;var oI=new WeakMap,lI=new WeakMap,cI=function(e){var t;null===(t=oI.get(e.target))||void 0===t||t(e)},uI=function(e){e.forEach(cI)};function dI(e,t,n){var i=function(e){var t=e.root,n=XM(e,["root"]),i=t||document;lI.has(i)||lI.set(i,{});var r=lI.get(i),s=JSON.stringify(n);return r[s]||(r[s]=new IntersectionObserver(uI,qM({root:t},n))),r[s]}(t);return oI.set(e,n),i.observe(e),function(){oI.delete(e),i.unobserve(e)}}var hI={some:0,all:1};function pI(e,t,n,i){var s=i.root,a=i.margin,o=i.amount,l=void 0===o?"some":o,c=i.once;(0,r.useEffect)((function(){if(e){var i={root:null===s||void 0===s?void 0:s.current,rootMargin:a,threshold:"number"===typeof l?l:hI[l]};return dI(n.getInstance(),i,(function(e){var i,r=e.isIntersecting;if(t.isInView!==r&&(t.isInView=r,!c||r||!t.hasEnteredView)){r&&(t.hasEnteredView=!0),null===(i=n.animationState)||void 0===i||i.setActive(jR.InView,r);var s=n.getProps(),a=r?s.onViewportEnter:s.onViewportLeave;null===a||void 0===a||a(e)}}))}}),[e,s,a,l])}function fI(e,t,n,i){var s=i.fallback,a=void 0===s||s;(0,r.useEffect)((function(){e&&a&&requestAnimationFrame((function(){var e;t.hasEnteredView=!0;var i=n.getProps().onViewportEnter;null===i||void 0===i||i(null),null===(e=n.animationState)||void 0===e||e.setActive(jR.InView,!0)}))}),[e])}var mI=function(e){return function(t){return e(t),null}},gI={inView:mI((function(e){var t=e.visualElement,n=e.whileInView,i=e.onViewportEnter,s=e.onViewportLeave,a=e.viewport,o=void 0===a?{}:a,l=(0,r.useRef)({hasEnteredView:!1,isInView:!1}),c=Boolean(n||i||s);o.once&&l.current.hasEnteredView&&(c=!1),("undefined"===typeof IntersectionObserver?fI:pI)(c,l.current,t,o)})),tap:mI((function(e){var t=e.onTap,n=e.onTapStart,i=e.onTapCancel,s=e.whileTap,a=e.visualElement,o=t||n||i||s,l=(0,r.useRef)(!1),c=(0,r.useRef)(null),u={passive:!(n||t||i||m)};function d(){var e;null===(e=c.current)||void 0===e||e.call(c),c.current=null}function h(){var e;return d(),l.current=!1,null===(e=a.animationState)||void 0===e||e.setActive(jR.Tap,!1),!nI()}function p(e,n){h()&&(rI(a.getInstance(),e.target)?null===t||void 0===t||t(e,n):null===i||void 0===i||i(e,n))}function f(e,t){h()&&(null===i||void 0===i||i(e,t))}function m(e,t){var i;d(),l.current||(l.current=!0,c.current=aI(KR(window,"pointerup",p,u),KR(window,"pointercancel",f,u)),null===(i=a.animationState)||void 0===i||i.setActive(jR.Tap,!0),null===n||void 0===n||n(e,t))}ZR(a,"pointerdown",o?m:void 0,u),ZN(d)})),focus:mI((function(e){var t=e.whileFocus,n=e.visualElement;FR(n,"focus",t?function(){var e;null===(e=n.animationState)||void 0===e||e.setActive(jR.Focus,!0)}:void 0),FR(n,"blur",t?function(){var e;null===(e=n.animationState)||void 0===e||e.setActive(jR.Focus,!1)}:void 0)})),hover:mI((function(e){var t=e.onHoverStart,n=e.onHoverEnd,i=e.whileHover,r=e.visualElement;ZR(r,"pointerenter",t||i?iI(r,!0,t):void 0,{passive:!t}),ZR(r,"pointerleave",n||i?iI(r,!1,n):void 0,{passive:!n})}))};function vI(){var e=(0,r.useContext)(HN);if(null===e)return[!0,null];var t=e.isPresent,n=e.onExitComplete,i=e.register,s=XN();(0,r.useEffect)((function(){return i(s)}),[]);return!t&&n?[!1,function(){return null===n||void 0===n?void 0:n(s)}]:[!0]}function yI(e,t){if(!Array.isArray(t))return!1;var n=t.length;if(n!==e.length)return!1;for(var i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}const xI=(e,t,n)=>Math.min(Math.max(n,e),t),bI=.001;function _I(e){let t,n,{duration:i=800,bounce:r=.25,velocity:s=0,mass:a=1}=e,o=1-r;o=xI(.05,1,o),i=xI(.01,10,i/1e3),o<1?(t=e=>{const t=e*o,n=t*i,r=t-s,a=SI(e,o),l=Math.exp(-n);return bI-r/a*l},n=e=>{const n=e*o*i,r=n*s+s,a=Math.pow(o,2)*Math.pow(e,2)*i,l=Math.exp(-n),c=SI(Math.pow(e,2),o);return(-t(e)+bI>0?-1:1)*((r-a)*l)/c}):(t=e=>Math.exp(-e*i)*((e-s)*i+1)-.001,n=e=>Math.exp(-e*i)*(i*i*(s-e)));const l=function(e,t,n){let i=n;for(let r=1;r<wI;r++)i-=e(i)/t(i);return i}(t,n,5/i);if(i*=1e3,isNaN(l))return{stiffness:100,damping:10,duration:i};{const e=Math.pow(l,2)*a;return{stiffness:e,damping:2*o*Math.sqrt(a*e),duration:i}}}const wI=12;function SI(e,t){return e*Math.sqrt(1-t*t)}const MI=["duration","bounce"],EI=["stiffness","damping","mass"];function TI(e,t){return t.some((t=>void 0!==e[t]))}function CI(e){var{from:t=0,to:n=1,restSpeed:i=2,restDelta:r}=e,s=XM(e,["from","to","restSpeed","restDelta"]);const a={done:!1,value:t};let{stiffness:o,damping:l,mass:c,velocity:u,duration:d,isResolvedFromDuration:h}=function(e){let t=Object.assign({velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1},e);if(!TI(e,EI)&&TI(e,MI)){const n=_I(e);t=Object.assign(Object.assign(Object.assign({},t),n),{velocity:0,mass:1}),t.isResolvedFromDuration=!0}return t}(s),p=AI,f=AI;function m(){const e=u?-u/1e3:0,i=n-t,s=l/(2*Math.sqrt(o*c)),a=Math.sqrt(o/c)/1e3;if(void 0===r&&(r=Math.min(Math.abs(n-t)/100,.4)),s<1){const t=SI(a,s);p=r=>{const o=Math.exp(-s*a*r);return n-o*((e+s*a*i)/t*Math.sin(t*r)+i*Math.cos(t*r))},f=n=>{const r=Math.exp(-s*a*n);return s*a*r*(Math.sin(t*n)*(e+s*a*i)/t+i*Math.cos(t*n))-r*(Math.cos(t*n)*(e+s*a*i)-t*i*Math.sin(t*n))}}else if(1===s)p=t=>n-Math.exp(-a*t)*(i+(e+a*i)*t);else{const t=a*Math.sqrt(s*s-1);p=r=>{const o=Math.exp(-s*a*r),l=Math.min(t*r,300);return n-o*((e+s*a*i)*Math.sinh(l)+t*i*Math.cosh(l))/t}}}return m(),{next:e=>{const t=p(e);if(h)a.done=e>=d;else{const s=1e3*f(e),o=Math.abs(s)<=i,l=Math.abs(n-t)<=r;a.done=o&&l}return a.value=a.done?n:t,a},flipTarget:()=>{u=-u,[t,n]=[n,t],m()}}}CI.needsInterpolation=(e,t)=>"string"===typeof e||"string"===typeof t;const AI=e=>0,PI=(e,t,n)=>{const i=t-e;return 0===i?1:(n-e)/i},NI=(e,t,n)=>-n*e+n*t+e,kI=(e,t)=>n=>Boolean(qk(n)&&Gk.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),RI=(e,t,n)=>i=>{if(!qk(i))return i;const[r,s,a,o]=i.match(Hk);return{[e]:parseFloat(r),[t]:parseFloat(s),[n]:parseFloat(a),alpha:void 0!==o?parseFloat(o):1}},II=Bk(0,255),LI=Object.assign(Object.assign({},eR),{transform:e=>Math.round(II(e))}),jI={test:kI("rgb","red"),parse:RI("red","green","blue"),transform:e=>{let{red:t,green:n,blue:i,alpha:r=1}=e;return"rgba("+LI.transform(t)+", "+LI.transform(n)+", "+LI.transform(i)+", "+Vk(tR.transform(r))+")"}};const DI={test:kI("#"),parse:function(e){let t="",n="",i="",r="";return e.length>5?(t=e.substr(1,2),n=e.substr(3,2),i=e.substr(5,2),r=e.substr(7,2)):(t=e.substr(1,1),n=e.substr(2,1),i=e.substr(3,1),r=e.substr(4,1),t+=t,n+=n,i+=i,r+=r),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}},transform:jI.transform},OI={test:kI("hsl","hue"),parse:RI("hue","saturation","lightness"),transform:e=>{let{hue:t,saturation:n,lightness:i,alpha:r=1}=e;return"hsla("+Math.round(t)+", "+Jk.transform(Vk(n))+", "+Jk.transform(Vk(i))+", "+Vk(tR.transform(r))+")"}};function zI(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function FI(e){let{hue:t,saturation:n,lightness:i,alpha:r}=e;t/=360,n/=100,i/=100;let s=0,a=0,o=0;if(n){const e=i<.5?i*(1+n):i+n-i*n,r=2*i-e;s=zI(r,e,t+1/3),a=zI(r,e,t),o=zI(r,e,t-1/3)}else s=a=o=i;return{red:Math.round(255*s),green:Math.round(255*a),blue:Math.round(255*o),alpha:r}}const UI=(e,t,n)=>{const i=e*e,r=t*t;return Math.sqrt(Math.max(0,n*(r-i)+i))},BI=[DI,jI,OI],VI=e=>BI.find((t=>t.test(e))),HI=e=>"'".concat(e,"' is not an animatable color. Use the equivalent color code instead."),WI=(e,t)=>{let n=VI(e),i=VI(t);HI(e),HI(t);let r=n.parse(e),s=i.parse(t);n===OI&&(r=FI(r),n=jI),i===OI&&(s=FI(s),i=jI);const a=Object.assign({},r);return e=>{for(const t in a)"alpha"!==t&&(a[t]=UI(r[t],s[t],e));return a.alpha=NI(r.alpha,s.alpha,e),n.transform(a)}},GI={test:e=>jI.test(e)||DI.test(e)||OI.test(e),parse:e=>jI.test(e)?jI.parse(e):OI.test(e)?OI.parse(e):DI.parse(e),transform:e=>qk(e)?e:e.hasOwnProperty("red")?jI.transform(e):OI.transform(e)},qI="${c}",XI="${n}";function YI(e){"number"===typeof e&&(e="".concat(e));const t=[];let n=0;const i=e.match(Wk);i&&(n=i.length,e=e.replace(Wk,qI),t.push(...i.map(GI.parse)));const r=e.match(Hk);return r&&(e=e.replace(Hk,XI),t.push(...r.map(eR.parse))),{values:t,numColors:n,tokenised:e}}function JI(e){return YI(e).values}function KI(e){const{values:t,numColors:n,tokenised:i}=YI(e),r=t.length;return e=>{let t=i;for(let i=0;i<r;i++)t=t.replace(i<n?qI:XI,i<n?GI.transform(e[i]):Vk(e[i]));return t}}const ZI=e=>"number"===typeof e?0:e;const QI={test:function(e){var t,n,i,r;return isNaN(e)&&qk(e)&&(null!==(n=null===(t=e.match(Hk))||void 0===t?void 0:t.length)&&void 0!==n?n:0)+(null!==(r=null===(i=e.match(Wk))||void 0===i?void 0:i.length)&&void 0!==r?r:0)>0},parse:JI,createTransformer:KI,getAnimatableNone:function(e){const t=JI(e);return KI(e)(t.map(ZI))}},$I=e=>"number"===typeof e;function eL(e,t){return $I(e)?n=>NI(e,t,n):GI.test(e)?WI(e,t):rL(e,t)}const tL=(e,t)=>{const n=[...e],i=n.length,r=e.map(((e,n)=>eL(e,t[n])));return e=>{for(let t=0;t<i;t++)n[t]=r[t](e);return n}},nL=(e,t)=>{const n=Object.assign(Object.assign({},e),t),i={};for(const r in n)void 0!==e[r]&&void 0!==t[r]&&(i[r]=eL(e[r],t[r]));return e=>{for(const t in i)n[t]=i[t](e);return n}};function iL(e){const t=QI.parse(e),n=t.length;let i=0,r=0,s=0;for(let a=0;a<n;a++)i||"number"===typeof t[a]?i++:void 0!==t[a].hue?s++:r++;return{parsed:t,numNumbers:i,numRGB:r,numHSL:s}}const rL=(e,t)=>{const n=QI.createTransformer(t),i=iL(e),r=iL(t);return i.numHSL===r.numHSL&&i.numRGB===r.numRGB&&i.numNumbers>=r.numNumbers?aI(tL(i.parsed,r.parsed),n):("Complex values '".concat(e,"' and '").concat(t,"' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition."),n=>"".concat(n>0?t:e))},sL=(e,t)=>n=>NI(e,t,n);function aL(e,t,n){const i=[],r=n||("number"===typeof(s=e[0])?sL:"string"===typeof s?GI.test(s)?WI:rL:Array.isArray(s)?tL:"object"===typeof s?nL:void 0);var s;const a=e.length-1;for(let o=0;o<a;o++){let n=r(e[o],e[o+1]);if(t){const e=Array.isArray(t)?t[o]:t;n=aI(e,n)}i.push(n)}return i}function oL(e,t){let{clamp:n=!0,ease:i,mixer:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=e.length;t.length,!i||!Array.isArray(i)||i.length,e[0]>e[s-1]&&(e=[].concat(e),t=[].concat(t),e.reverse(),t.reverse());const a=aL(t,i,r),o=2===s?function(e,t){let[n,i]=e,[r]=t;return e=>r(PI(n,i,e))}(e,a):function(e,t){const n=e.length,i=n-1;return r=>{let s=0,a=!1;if(r<=e[0]?a=!0:r>=e[i]&&(s=i-1,a=!0),!a){let t=1;for(;t<n&&!(e[t]>r||t===i);t++);s=t-1}const o=PI(e[s],e[s+1],r);return t[s](o)}}(e,a);return n?t=>o(xI(e[0],e[s-1],t)):o}const lL=e=>t=>1-e(1-t),cL=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,uL=e=>t=>t*t*((e+1)*t-e),dL=4/11,hL=8/11,pL=e=>e,fL=(mL=2,e=>Math.pow(e,mL));var mL;const gL=lL(fL),vL=cL(fL),yL=e=>1-Math.sin(Math.acos(e)),xL=lL(yL),bL=cL(xL),_L=uL(1.525),wL=lL(_L),SL=cL(_L),ML=(e=>{const t=uL(e);return e=>(e*=2)<1?.5*t(e):.5*(2-Math.pow(2,-10*(e-1)))})(1.525),EL=4356/361,TL=35442/1805,CL=16061/1805,AL=e=>{if(1===e||0===e)return e;const t=e*e;return e<dL?7.5625*t:e<hL?9.075*t-9.9*e+3.4:e<.9?EL*t-TL*e+CL:10.8*e*e-20.52*e+10.72},PL=lL(AL);function NL(e,t){return e.map((()=>t||vL)).splice(0,e.length-1)}function kL(e){let{from:t=0,to:n=1,ease:i,offset:r,duration:s=300}=e;const a={done:!1,value:t},o=Array.isArray(n)?n:[t,n],l=function(e,t){return e.map((e=>e*t))}(r&&r.length===o.length?r:function(e){const t=e.length;return e.map(((e,n)=>0!==n?n/(t-1):0))}(o),s);function c(){return oL(l,o,{ease:Array.isArray(i)?i:NL(o,i)})}let u=c();return{next:e=>(a.value=u(e),a.done=e>=s,a),flipTarget:()=>{o.reverse(),u=c()}}}const RL={keyframes:kL,spring:CI,decay:function(e){let{velocity:t=0,from:n=0,power:i=.8,timeConstant:r=350,restDelta:s=.5,modifyTarget:a}=e;const o={done:!1,value:n};let l=i*t;const c=n+l,u=void 0===a?c:a(c);return u!==c&&(l=u-n),{next:e=>{const t=-l*Math.exp(-e/r);return o.done=!(t>s||t<-s),o.value=o.done?u:u+t,o},flipTarget:()=>{}}}};function IL(e,t){return e-t-(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0)}const LL=e=>{const t=t=>{let{delta:n}=t;return e(n)};return{start:()=>FN.update(t,!0),stop:()=>IN.update(t)}};function jL(e){var t,n,{from:i,autoplay:r=!0,driver:s=LL,elapsed:a=0,repeat:o=0,repeatType:l="loop",repeatDelay:c=0,onPlay:u,onStop:d,onComplete:h,onRepeat:p,onUpdate:f}=e,m=XM(e,["from","autoplay","driver","elapsed","repeat","repeatType","repeatDelay","onPlay","onStop","onComplete","onRepeat","onUpdate"]);let g,v,y,{to:x}=m,b=0,_=m.duration,w=!1,S=!0;const M=function(e){if(Array.isArray(e.to))return kL;if(RL[e.type])return RL[e.type];const t=new Set(Object.keys(e));return t.has("ease")||t.has("duration")&&!t.has("dampingRatio")?kL:t.has("dampingRatio")||t.has("stiffness")||t.has("mass")||t.has("damping")||t.has("restSpeed")||t.has("restDelta")?CI:kL}(m);(null===(n=(t=M).needsInterpolation)||void 0===n?void 0:n.call(t,i,x))&&(y=oL([0,100],[i,x],{clamp:!1}),i=0,x=100);const E=M(Object.assign(Object.assign({},m),{from:i,to:x}));function T(){b++,"reverse"===l?(S=b%2===0,a=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return arguments.length>3&&void 0!==arguments[3]&&!arguments[3]?t-(e-t)+n:IL(t+-e,t,n)}(a,_,c,S)):(a=IL(a,_,c),"mirror"===l&&E.flipTarget()),w=!1,p&&p()}function C(e){if(S||(e=-e),a+=e,!w){const e=E.next(Math.max(0,a));v=e.value,y&&(v=y(v)),w=S?e.done:a<=0}null===f||void 0===f||f(v),w&&(0===b&&(null!==_&&void 0!==_||(_=a)),b<o?function(e,t,n,i){return i?e>=t+n:e<=-n}(a,_,c,S)&&T():(g.stop(),h&&h()))}return r&&(null===u||void 0===u||u(),g=s(C),g.start()),{stop:()=>{null===d||void 0===d||d(),g.stop()}}}function DL(e,t){return t?e*(1e3/t):0}var OL=function(e){return 1e3*e};const zL=(e,t)=>1-3*t+3*e,FL=(e,t)=>3*t-6*e,UL=e=>3*e,BL=(e,t,n)=>((zL(t,n)*e+FL(t,n))*e+UL(t))*e,VL=(e,t,n)=>3*zL(t,n)*e*e+2*FL(t,n)*e+UL(t);const HL=.1;function WL(e,t,n,i){if(e===t&&n===i)return pL;const r=new Float32Array(11);for(let a=0;a<11;++a)r[a]=BL(a*HL,e,n);function s(t){let i=0,s=1;for(;10!==s&&r[s]<=t;++s)i+=HL;--s;const a=i+(t-r[s])/(r[s+1]-r[s])*HL,o=VL(a,e,n);return o>=.001?function(e,t,n,i){for(let r=0;r<8;++r){const r=VL(t,n,i);if(0===r)return t;t-=(BL(t,n,i)-e)/r}return t}(t,a,e,n):0===o?a:function(e,t,n,i,r){let s,a,o=0;do{a=t+(n-t)/2,s=BL(a,i,r)-e,s>0?n=a:t=a}while(Math.abs(s)>1e-7&&++o<10);return a}(t,i,i+HL,e,n)}return e=>0===e||1===e?e:BL(s(e),t,i)}var GL={linear:pL,easeIn:fL,easeInOut:vL,easeOut:gL,circIn:yL,circInOut:bL,circOut:xL,backIn:_L,backInOut:SL,backOut:wL,anticipate:ML,bounceIn:PL,bounceInOut:e=>e<.5?.5*(1-AL(1-2*e)):.5*AL(2*e-1)+.5,bounceOut:AL},qL=function(e){if(Array.isArray(e)){e.length;var t=JM(e,4);return WL(t[0],t[1],t[2],t[3])}return"string"===typeof e?("Invalid easing type '".concat(e,"'"),GL[e]):e},XL=function(e,t){return"zIndex"!==e&&(!("number"!==typeof t&&!Array.isArray(t))||!("string"!==typeof t||!QI.test(t)||t.startsWith("url(")))},YL=function(){return{type:"spring",stiffness:500,damping:25,restSpeed:10}},JL=function(e){return{type:"spring",stiffness:550,damping:0===e?2*Math.sqrt(550):30,restSpeed:10}},KL=function(){return{type:"keyframes",ease:"linear",duration:.3}},ZL=function(e){return{type:"keyframes",duration:.8,values:e}},QL={x:YL,y:YL,z:YL,rotate:YL,rotateX:YL,rotateY:YL,rotateZ:YL,scaleX:JL,scaleY:JL,scale:JL,opacity:KL,backgroundColor:KL,color:KL,default:JL};const $L=new Set(["brightness","contrast","saturate","opacity"]);function ej(e){let[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[i]=n.match(Hk)||[];if(!i)return e;const r=n.replace(i,"");let s=$L.has(t)?1:0;return i!==n&&(s*=100),t+"("+s+r+")"}const tj=/([a-z-]*)\(.*?\)/g,nj=Object.assign(Object.assign({},QI),{getAnimatableNone:e=>{const t=e.match(tj);return t?t.map(ej).join(" "):e}});var ij=qM(qM({},rR),{color:GI,backgroundColor:GI,outlineColor:GI,fill:GI,stroke:GI,borderColor:GI,borderTopColor:GI,borderRightColor:GI,borderBottomColor:GI,borderLeftColor:GI,filter:nj,WebkitFilter:nj}),rj=function(e){return ij[e]};function sj(e,t){var n,i=rj(e);return i!==nj&&(i=QI),null===(n=i.getAnimatableNone)||void 0===n?void 0:n.call(i,t)}var aj=!1;function oj(e){var t=e.ease,n=e.times,i=e.yoyo,r=e.flip,s=e.loop,a=XM(e,["ease","times","yoyo","flip","loop"]),o=qM({},a);return n&&(o.offset=n),a.duration&&(o.duration=OL(a.duration)),a.repeatDelay&&(o.repeatDelay=OL(a.repeatDelay)),t&&(o.ease=function(e){return Array.isArray(e)&&"number"!==typeof e[0]}(t)?t.map(qL):qL(t)),"tween"===a.type&&(o.type="keyframes"),(i||s||r)&&(i?o.repeatType="reverse":s?o.repeatType="loop":r&&(o.repeatType="mirror"),o.repeat=s||i||r||a.repeat),"spring"!==a.type&&(o.type="keyframes"),o}function lj(e,t,n){var i;return Array.isArray(t.to)&&(null!==(i=e.duration)&&void 0!==i||(e.duration=.8)),function(e){Array.isArray(e.to)&&null===e.to[0]&&(e.to=KM([],JM(e.to),!1),e.to[0]=e.from)}(t),function(e){e.when,e.delay,e.delayChildren,e.staggerChildren,e.staggerDirection,e.repeat,e.repeatType,e.repeatDelay,e.from;var t=XM(e,["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from"]);return!!Object.keys(t).length}(e)||(e=qM(qM({},e),function(e,t){var n;return n=PR(t)?ZL:QL[e]||QL.default,qM({to:t},n(t))}(n,t.to))),qM(qM({},t),oj(e))}function cj(e,t,n,i,r){var s,a=hj(i,e),o=null!==(s=a.from)&&void 0!==s?s:t.get(),l=XL(e,n);"none"===o&&l&&"string"===typeof n?o=sj(e,n):uj(o)&&"string"===typeof n?o=dj(n):!Array.isArray(n)&&uj(n)&&"string"===typeof o&&(n=dj(o));var c=XL(e,o);return"You are trying to animate ".concat(e,' from "').concat(o,'" to "').concat(n,'". ').concat(o," is not an animatable value - to enable this animation set ").concat(o," to a value animatable to ").concat(n," via the `style` property."),c&&l&&!1!==a.type?function(){var i={from:o,to:n,velocity:t.getVelocity(),onComplete:r,onUpdate:function(e){return t.set(e)}};return"inertia"===a.type||"decay"===a.type?function(e){let t,{from:n=0,velocity:i=0,min:r,max:s,power:a=.8,timeConstant:o=750,bounceStiffness:l=500,bounceDamping:c=10,restDelta:u=1,modifyTarget:d,driver:h,onUpdate:p,onComplete:f,onStop:m}=e;function g(e){return void 0!==r&&e<r||void 0!==s&&e>s}function v(e){return void 0===r?s:void 0===s||Math.abs(r-e)<Math.abs(s-e)?r:s}function y(e){null===t||void 0===t||t.stop(),t=jL(Object.assign(Object.assign({},e),{driver:h,onUpdate:t=>{var n;null===p||void 0===p||p(t),null===(n=e.onUpdate)||void 0===n||n.call(e,t)},onComplete:f,onStop:m}))}function x(e){y(Object.assign({type:"spring",stiffness:l,damping:c,restDelta:u},e))}if(g(n))x({from:n,velocity:i,to:v(n)});else{let e=a*i+n;"undefined"!==typeof d&&(e=d(e));const t=v(e),s=t===r?-1:1;let l,c;const h=e=>{l=c,c=e,i=DL(e-l,zN().delta),(1===s&&e>t||-1===s&&e<t)&&x({from:e,to:t,velocity:i})};y({type:"decay",from:n,velocity:i,timeConstant:o,power:a,restDelta:u,modifyTarget:d,onUpdate:g(e)?h:void 0})}return{stop:()=>null===t||void 0===t?void 0:t.stop()}}(qM(qM({},i),a)):jL(qM(qM({},lj(a,i,e)),{onUpdate:function(e){var t;i.onUpdate(e),null===(t=a.onUpdate)||void 0===t||t.call(a,e)},onComplete:function(){var e;i.onComplete(),null===(e=a.onComplete)||void 0===e||e.call(a)}}))}:function(){var e,i,s=NR(n);return t.set(s),r(),null===(e=null===a||void 0===a?void 0:a.onUpdate)||void 0===e||e.call(a,s),null===(i=null===a||void 0===a?void 0:a.onComplete)||void 0===i||i.call(a),{stop:function(){}}}}function uj(e){return 0===e||"string"===typeof e&&0===parseFloat(e)&&-1===e.indexOf(" ")}function dj(e){return"number"===typeof e?0:sj("",e)}function hj(e,t){return e[t]||e.default||e}function pj(e,t,n,i){return void 0===i&&(i={}),aj&&(i={type:!1}),t.start((function(r){var s,a,o=cj(e,t,n,i,r),l=function(e,t){var n,i;return null!==(i=null!==(n=(hj(e,t)||{}).delay)&&void 0!==n?n:e.delay)&&void 0!==i?i:0}(i,e),c=function(){return a=o()};return l?s=window.setTimeout(c,OL(l)):c(),function(){clearTimeout(s),null===a||void 0===a||a.stop()}}))}var fj=function(e){return/^0[^.\s]+$/.test(e)};function mj(e,t){-1===e.indexOf(t)&&e.push(t)}function gj(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}var vj=function(){function e(){this.subscriptions=[]}return e.prototype.add=function(e){var t=this;return mj(this.subscriptions,e),function(){return gj(t.subscriptions,e)}},e.prototype.notify=function(e,t,n){var i=this.subscriptions.length;if(i)if(1===i)this.subscriptions[0](e,t,n);else for(var r=0;r<i;r++){var s=this.subscriptions[r];s&&s(e,t,n)}},e.prototype.getSize=function(){return this.subscriptions.length},e.prototype.clear=function(){this.subscriptions.length=0},e}(),yj=function(){function e(e){var t,n=this;this.version="6.5.1",this.timeDelta=0,this.lastUpdated=0,this.updateSubscribers=new vj,this.velocityUpdateSubscribers=new vj,this.renderSubscribers=new vj,this.canTrackVelocity=!1,this.updateAndNotify=function(e,t){void 0===t&&(t=!0),n.prev=n.current,n.current=e;var i=zN(),r=i.delta,s=i.timestamp;n.lastUpdated!==s&&(n.timeDelta=r,n.lastUpdated=s,FN.postRender(n.scheduleVelocityCheck)),n.prev!==n.current&&n.updateSubscribers.notify(n.current),n.velocityUpdateSubscribers.getSize()&&n.velocityUpdateSubscribers.notify(n.getVelocity()),t&&n.renderSubscribers.notify(n.current)},this.scheduleVelocityCheck=function(){return FN.postRender(n.velocityCheck)},this.velocityCheck=function(e){e.timestamp!==n.lastUpdated&&(n.prev=n.current,n.velocityUpdateSubscribers.notify(n.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=(t=this.current,!isNaN(parseFloat(t)))}return e.prototype.onChange=function(e){return this.updateSubscribers.add(e)},e.prototype.clearListeners=function(){this.updateSubscribers.clear()},e.prototype.onRenderRequest=function(e){return e(this.get()),this.renderSubscribers.add(e)},e.prototype.attach=function(e){this.passiveEffect=e},e.prototype.set=function(e,t){void 0===t&&(t=!0),t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)},e.prototype.get=function(){return this.current},e.prototype.getPrevious=function(){return this.prev},e.prototype.getVelocity=function(){return this.canTrackVelocity?DL(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0},e.prototype.start=function(e){var t=this;return this.stop(),new Promise((function(n){t.hasAnimated=!0,t.stopAnimation=e(n)})).then((function(){return t.clearAnimation()}))},e.prototype.stop=function(){this.stopAnimation&&this.stopAnimation(),this.clearAnimation()},e.prototype.isAnimating=function(){return!!this.stopAnimation},e.prototype.clearAnimation=function(){this.stopAnimation=null},e.prototype.destroy=function(){this.updateSubscribers.clear(),this.renderSubscribers.clear(),this.stop()},e}();function xj(e){return new yj(e)}var bj=function(e){return function(t){return t.test(e)}},_j=[eR,Kk,Jk,Yk,Qk,Zk,{test:function(e){return"auto"===e},parse:function(e){return e}}],wj=function(e){return _j.find(bj(e))},Sj=KM(KM([],JM(_j),!1),[GI,QI],!1),Mj=function(e){return Sj.find(bj(e))};function Ej(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,xj(n))}function Tj(e,t){var n=mk(e,t),i=n?e.makeTargetAnimatable(n,!1):{},r=i.transitionEnd,s=void 0===r?{}:r;i.transition;var a=XM(i,["transitionEnd","transition"]);for(var o in a=qM(qM({},a),s)){Ej(e,o,NR(a[o]))}}function Cj(e,t){if(t)return(t[e]||t.default||t).from}function Aj(e,t,n){var i;void 0===n&&(n={});var r=mk(e,t,n.custom),s=(r||{}).transition,a=void 0===s?e.getDefaultTransition()||{}:s;n.transitionOverride&&(a=n.transitionOverride);var o=r?function(){return Pj(e,r,n)}:function(){return Promise.resolve()},l=(null===(i=e.variantChildren)||void 0===i?void 0:i.size)?function(i){void 0===i&&(i=0);var r=a.delayChildren,s=void 0===r?0:r,o=a.staggerChildren,l=a.staggerDirection;return function(e,t,n,i,r,s){void 0===n&&(n=0);void 0===i&&(i=0);void 0===r&&(r=1);var a=[],o=(e.variantChildren.size-1)*i,l=1===r?function(e){return void 0===e&&(e=0),e*i}:function(e){return void 0===e&&(e=0),o-e*i};return Array.from(e.variantChildren).sort(Nj).forEach((function(e,i){a.push(Aj(e,t,qM(qM({},s),{delay:n+l(i)})).then((function(){return e.notifyAnimationComplete(t)})))})),Promise.all(a)}(e,t,s+i,o,l,n)}:function(){return Promise.resolve()},c=a.when;if(c){var u=JM("beforeChildren"===c?[o,l]:[l,o],2),d=u[0],h=u[1];return d().then(h)}return Promise.all([o(),l(n.delay)])}function Pj(e,t,n){var i,r=void 0===n?{}:n,s=r.delay,a=void 0===s?0:s,o=r.transitionOverride,l=r.type,c=e.makeTargetAnimatable(t),u=c.transition,d=void 0===u?e.getDefaultTransition():u,h=c.transitionEnd,p=XM(c,["transition","transitionEnd"]);o&&(d=o);var f=[],m=l&&(null===(i=e.animationState)||void 0===i?void 0:i.getState()[l]);for(var g in p){var v=e.getValue(g),y=p[g];if(!(!v||void 0===y||m&&kj(m,g))){var x=qM({delay:a},d);e.shouldReduceMotion&&Ik(g)&&(x=qM(qM({},x),{type:!1,delay:0}));var b=pj(g,v,y,x);f.push(b)}}return Promise.all(f).then((function(){h&&Tj(e,h)}))}function Nj(e,t){return e.sortNodePosition(t)}function kj(e,t){var n=e.protectedKeys,i=e.needsAnimating,r=n.hasOwnProperty(t)&&!0!==i[t];return i[t]=!1,r}var Rj=[jR.Animate,jR.InView,jR.Focus,jR.Hover,jR.Tap,jR.Drag,jR.Exit],Ij=KM([],JM(Rj),!1).reverse(),Lj=Rj.length;function jj(e){return function(t){return Promise.all(t.map((function(t){var n=t.animation,i=t.options;return function(e,t,n){var i;if(void 0===n&&(n={}),e.notifyAnimationStart(t),Array.isArray(t)){var r=t.map((function(t){return Aj(e,t,n)}));i=Promise.all(r)}else if("string"===typeof t)i=Aj(e,t,n);else{var s="function"===typeof t?mk(e,t,n.custom):t;i=Pj(e,s,n)}return i.then((function(){return e.notifyAnimationComplete(t)}))}(e,n,i)})))}}function Dj(e){var t=jj(e),n=function(){var e;return e={},e[jR.Animate]=Oj(!0),e[jR.InView]=Oj(),e[jR.Hover]=Oj(),e[jR.Tap]=Oj(),e[jR.Drag]=Oj(),e[jR.Focus]=Oj(),e[jR.Exit]=Oj(),e}(),i={},r=!0,s=function(t,n){var i=mk(e,n);if(i){i.transition;var r=i.transitionEnd,s=XM(i,["transition","transitionEnd"]);t=qM(qM(qM({},t),s),r)}return t};function a(a,o){for(var l,c=e.getProps(),u=e.getVariantContext(!0)||{},d=[],h=new Set,p={},f=1/0,m=function(t){var i=Ij[t],m=n[i],g=null!==(l=c[i])&&void 0!==l?l:u[i],v=pk(g),y=i===o?m.isActive:null;!1===y&&(f=t);var x=g===u[i]&&g!==c[i]&&v;if(x&&r&&e.manuallyAnimateOnMount&&(x=!1),m.protectedKeys=qM({},p),!m.isActive&&null===y||!g&&!m.prevProp||AR(g)||"boolean"===typeof g)return"continue";var b=function(e,t){if("string"===typeof t)return t!==e;if(hk(t))return!yI(t,e);return!1}(m.prevProp,g),_=b||i===o&&m.isActive&&!x&&v||t>f&&v,w=Array.isArray(g)?g:[g],S=w.reduce(s,{});!1===y&&(S={});var M=m.prevResolvedValues,E=void 0===M?{}:M,T=qM(qM({},E),S),C=function(e){_=!0,h.delete(e),m.needsAnimating[e]=!0};for(var A in T){var P=S[A],N=E[A];p.hasOwnProperty(A)||(P!==N?PR(P)&&PR(N)?!yI(P,N)||b?C(A):m.protectedKeys[A]=!0:void 0!==P?C(A):h.add(A):void 0!==P&&h.has(A)?C(A):m.protectedKeys[A]=!0)}m.prevProp=g,m.prevResolvedValues=S,m.isActive&&(p=qM(qM({},p),S)),r&&e.blockInitialAnimation&&(_=!1),_&&!x&&d.push.apply(d,KM([],JM(w.map((function(e){return{animation:e,options:qM({type:i},a)}}))),!1))},g=0;g<Lj;g++)m(g);if(i=qM({},p),h.size){var v={};h.forEach((function(t){var n=e.getBaseTarget(t);void 0!==n&&(v[t]=n)})),d.push({animation:v})}var y=Boolean(d.length);return r&&!1===c.initial&&!e.manuallyAnimateOnMount&&(y=!1),r=!1,y?t(d):Promise.resolve()}return{isAnimated:function(e){return void 0!==i[e]},animateChanges:a,setActive:function(t,i,r){var s;if(n[t].isActive===i)return Promise.resolve();null===(s=e.variantChildren)||void 0===s||s.forEach((function(e){var n;return null===(n=e.animationState)||void 0===n?void 0:n.setActive(t,i)})),n[t].isActive=i;var o=a(r,t);for(var l in n)n[l].protectedKeys={};return o},setAnimateFunction:function(n){t=n(e)},getState:function(){return n}}}function Oj(e){return void 0===e&&(e=!1),{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}var zj={animation:mI((function(e){var t=e.visualElement,n=e.animate;t.animationState||(t.animationState=Dj(t)),AR(n)&&(0,r.useEffect)((function(){return n.subscribe(t)}),[n])})),exit:mI((function(e){var t=e.custom,n=e.visualElement,i=JM(vI(),2),s=i[0],a=i[1],o=(0,r.useContext)(HN);(0,r.useEffect)((function(){var e,i;n.isPresent=s;var r=null===(e=n.animationState)||void 0===e?void 0:e.setActive(jR.Exit,!s,{custom:null!==(i=null===o||void 0===o?void 0:o.custom)&&void 0!==i?i:t});!s&&(null===r||void 0===r||r.then(a))}),[s])}))};const Fj=e=>e.hasOwnProperty("x")&&e.hasOwnProperty("y"),Uj=e=>Fj(e)&&e.hasOwnProperty("z"),Bj=(e,t)=>Math.abs(e-t);function Vj(e,t){if($I(e)&&$I(t))return Bj(e,t);if(Fj(e)&&Fj(t)){const n=Bj(e.x,t.x),i=Bj(e.y,t.y),r=Uj(e)&&Uj(t)?Bj(e.z,t.z):0;return Math.sqrt(Math.pow(n,2)+Math.pow(i,2)+Math.pow(r,2))}}var Hj=function(){function e(e,t,n){var i=this,r=(void 0===n?{}:n).transformPagePoint;if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=function(){if(i.lastMoveEvent&&i.lastMoveEventInfo){var e=qj(i.lastMoveEventInfo,i.history),t=null!==i.startEvent,n=Vj(e.offset,{x:0,y:0})>=3;if(t||n){var r=e.point,s=zN().timestamp;i.history.push(qM(qM({},r),{timestamp:s}));var a=i.handlers,o=a.onStart,l=a.onMove;t||(o&&o(i.lastMoveEvent,e),i.startEvent=i.lastMoveEvent),l&&l(i.lastMoveEvent,e)}}},this.handlePointerMove=function(e,t){i.lastMoveEvent=e,i.lastMoveEventInfo=Wj(t,i.transformPagePoint),UR(e)&&0===e.buttons?i.handlePointerUp(e,t):FN.update(i.updatePoint,!0)},this.handlePointerUp=function(e,t){i.end();var n=i.handlers,r=n.onEnd,s=n.onSessionEnd,a=qj(Wj(t,i.transformPagePoint),i.history);i.startEvent&&r&&r(e,a),s&&s(e,a)},!(BR(e)&&e.touches.length>1)){this.handlers=t,this.transformPagePoint=r;var s=Wj(GR(e),this.transformPagePoint),a=s.point,o=zN().timestamp;this.history=[qM(qM({},a),{timestamp:o})];var l=t.onSessionStart;l&&l(e,qj(s,this.history)),this.removeListeners=aI(KR(window,"pointermove",this.handlePointerMove),KR(window,"pointerup",this.handlePointerUp),KR(window,"pointercancel",this.handlePointerUp))}}return e.prototype.updateHandlers=function(e){this.handlers=e},e.prototype.end=function(){this.removeListeners&&this.removeListeners(),IN.update(this.updatePoint)},e}();function Wj(e,t){return t?{point:t(e.point)}:e}function Gj(e,t){return{x:e.x-t.x,y:e.y-t.y}}function qj(e,t){var n=e.point;return{point:n,delta:Gj(n,Yj(t)),offset:Gj(n,Xj(t)),velocity:Jj(t,.1)}}function Xj(e){return e[0]}function Yj(e){return e[e.length-1]}function Jj(e,t){if(e.length<2)return{x:0,y:0};for(var n=e.length-1,i=null,r=Yj(e);n>=0&&(i=e[n],!(r.timestamp-i.timestamp>OL(t)));)n--;if(!i)return{x:0,y:0};var s=(r.timestamp-i.timestamp)/1e3;if(0===s)return{x:0,y:0};var a={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function Kj(e){return e.max-e.min}function Zj(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=.01),Vj(e,t)<n}function Qj(e,t,n,i){void 0===i&&(i=.5),e.origin=i,e.originPoint=NI(t.min,t.max,e.origin),e.scale=Kj(n)/Kj(t),(Zj(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=NI(n.min,n.max,e.origin)-e.originPoint,(Zj(e.translate)||isNaN(e.translate))&&(e.translate=0)}function $j(e,t,n,i){Qj(e.x,t.x,n.x,null===i||void 0===i?void 0:i.originX),Qj(e.y,t.y,n.y,null===i||void 0===i?void 0:i.originY)}function eD(e,t,n){e.min=n.min+t.min,e.max=e.min+Kj(t)}function tD(e,t,n){e.min=t.min-n.min,e.max=e.min+Kj(t)}function nD(e,t,n){tD(e.x,t.x,n.x),tD(e.y,t.y,n.y)}function iD(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function rD(e,t){var n,i=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&(i=(n=JM([r,i],2))[0],r=n[1]),{min:i,max:r}}var sD=.35;function aD(e,t,n){return{min:oD(e,t),max:oD(e,n)}}function oD(e,t){var n;return"number"===typeof e?e:null!==(n=e[t])&&void 0!==n?n:0}function lD(e){return[e("x"),e("y")]}function cD(e){var t=e.top;return{x:{min:e.left,max:e.right},y:{min:t,max:e.bottom}}}function uD(e){return void 0===e||1===e}function dD(e){var t=e.scale,n=e.scaleX,i=e.scaleY;return!uD(t)||!uD(n)||!uD(i)}function hD(e){return dD(e)||pD(e.x)||pD(e.y)||e.z||e.rotate||e.rotateX||e.rotateY}function pD(e){return e&&"0%"!==e}function fD(e,t,n){return n+t*(e-n)}function mD(e,t,n,i,r){return void 0!==r&&(e=fD(e,r,i)),fD(e,n,i)+t}function gD(e,t,n,i,r){void 0===t&&(t=0),void 0===n&&(n=1),e.min=mD(e.min,t,n,i,r),e.max=mD(e.max,t,n,i,r)}function vD(e,t){var n=t.x,i=t.y;gD(e.x,n.translate,n.scale,n.originPoint),gD(e.y,i.translate,i.scale,i.originPoint)}function yD(e,t){e.min=e.min+t,e.max=e.max+t}function xD(e,t,n){var i=JM(n,3),r=i[0],s=i[1],a=i[2],o=void 0!==t[a]?t[a]:.5,l=NI(e.min,e.max,o);gD(e,t[r],t[s],l,t.scale)}var bD=["x","scaleX","originX"],_D=["y","scaleY","originY"];function wD(e,t){xD(e.x,t,bD),xD(e.y,t,_D)}function SD(e,t){return cD(function(e,t){if(!t)return e;var n=t({x:e.left,y:e.top}),i=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}(e.getBoundingClientRect(),t))}var MD=new WeakMap,ED=function(){function e(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.visualElement=e}return e.prototype.start=function(e,t){var n=this,i=(void 0===t?{}:t).snapToCursor,r=void 0!==i&&i;if(!1!==this.visualElement.isPresent){this.panSession=new Hj(e,{onSessionStart:function(e){n.stopAnimation(),r&&n.snapToCursor(GR(e,"page").point)},onStart:function(e,t){var i,r=n.getProps(),s=r.drag,a=r.dragPropagation,o=r.onDragStart;(!s||a||(n.openGlobalLock&&n.openGlobalLock(),n.openGlobalLock=tI(s),n.openGlobalLock))&&(n.isDragging=!0,n.currentDirection=null,n.resolveConstraints(),n.visualElement.projection&&(n.visualElement.projection.isAnimationBlocked=!0,n.visualElement.projection.target=void 0),lD((function(e){var t,i,r=n.getAxisMotionValue(e).get()||0;if(Jk.test(r)){var s=null===(i=null===(t=n.visualElement.projection)||void 0===t?void 0:t.layout)||void 0===i?void 0:i.actual[e];if(s)r=Kj(s)*(parseFloat(r)/100)}n.originPoint[e]=r})),null===o||void 0===o||o(e,t),null===(i=n.visualElement.animationState)||void 0===i||i.setActive(jR.Drag,!0))},onMove:function(e,t){var i=n.getProps(),r=i.dragPropagation,s=i.dragDirectionLock,a=i.onDirectionLock,o=i.onDrag;if(r||n.openGlobalLock){var l=t.offset;if(s&&null===n.currentDirection)return n.currentDirection=function(e,t){void 0===t&&(t=10);var n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(l),void(null!==n.currentDirection&&(null===a||void 0===a||a(n.currentDirection)));n.updateAxis("x",t.point,l),n.updateAxis("y",t.point,l),n.visualElement.syncRender(),null===o||void 0===o||o(e,t)}},onSessionEnd:function(e,t){return n.stop(e,t)}},{transformPagePoint:this.visualElement.getTransformPagePoint()})}},e.prototype.stop=function(e,t){var n=this.isDragging;if(this.cancel(),n){var i=t.velocity;this.startAnimation(i);var r=this.getProps().onDragEnd;null===r||void 0===r||r(e,t)}},e.prototype.cancel=function(){var e,t;this.isDragging=!1,this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!1),null===(e=this.panSession)||void 0===e||e.end(),this.panSession=void 0,!this.getProps().dragPropagation&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),null===(t=this.visualElement.animationState)||void 0===t||t.setActive(jR.Drag,!1)},e.prototype.updateAxis=function(e,t,n){var i=this.getProps().drag;if(n&&TD(e,i,this.currentDirection)){var r=this.getAxisMotionValue(e),s=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(s=function(e,t,n){var i=t.min,r=t.max;return void 0!==i&&e<i?e=n?NI(i,e,n.min):Math.max(e,i):void 0!==r&&e>r&&(e=n?NI(r,e,n.max):Math.min(e,r)),e}(s,this.constraints[e],this.elastic[e])),r.set(s)}},e.prototype.resolveConstraints=function(){var e=this,t=this.getProps(),n=t.dragConstraints,i=t.dragElastic,r=(this.visualElement.projection||{}).layout,s=this.constraints;n&&dk(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!n||!r)&&function(e,t){var n=t.top,i=t.left,r=t.bottom,s=t.right;return{x:iD(e.x,i,s),y:iD(e.y,n,r)}}(r.actual,n),this.elastic=function(e){return void 0===e&&(e=sD),!1===e?e=0:!0===e&&(e=sD),{x:aD(e,"left","right"),y:aD(e,"top","bottom")}}(i),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&lD((function(t){e.getAxisMotionValue(t)&&(e.constraints[t]=function(e,t){var n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(r.actual[t],e.constraints[t]))}))},e.prototype.resolveRefConstraints=function(){var e=this.getProps(),t=e.dragConstraints,n=e.onMeasureDragConstraints;if(!t||!dk(t))return!1;var i=t.current,r=this.visualElement.projection;if(!r||!r.layout)return!1;var s=function(e,t,n){var i=SD(e,n),r=t.scroll;return r&&(yD(i.x,r.x),yD(i.y,r.y)),i}(i,r.root,this.visualElement.getTransformPagePoint()),a=function(e,t){return{x:rD(e.x,t.x),y:rD(e.y,t.y)}}(r.layout.actual,s);if(n){var o=n(function(e){var t=e.x,n=e.y;return{top:n.min,right:t.max,bottom:n.max,left:t.min}}(a));this.hasMutatedConstraints=!!o,o&&(a=cD(o))}return a},e.prototype.startAnimation=function(e){var t=this,n=this.getProps(),i=n.drag,r=n.dragMomentum,s=n.dragElastic,a=n.dragTransition,o=n.dragSnapToOrigin,l=n.onDragTransitionEnd,c=this.constraints||{},u=lD((function(n){var l;if(TD(n,i,t.currentDirection)){var u=null!==(l=null===c||void 0===c?void 0:c[n])&&void 0!==l?l:{};o&&(u={min:0,max:0});var d=s?200:1e6,h=s?40:1e7,p=qM(qM({type:"inertia",velocity:r?e[n]:0,bounceStiffness:d,bounceDamping:h,timeConstant:750,restDelta:1,restSpeed:10},a),u);return t.startAxisValueAnimation(n,p)}}));return Promise.all(u).then(l)},e.prototype.startAxisValueAnimation=function(e,t){return pj(e,this.getAxisMotionValue(e),0,t)},e.prototype.stopAnimation=function(){var e=this;lD((function(t){return e.getAxisMotionValue(t).stop()}))},e.prototype.getAxisMotionValue=function(e){var t,n,i="_drag"+e.toUpperCase(),r=this.visualElement.getProps()[i];return r||this.visualElement.getValue(e,null!==(n=null===(t=this.visualElement.getProps().initial)||void 0===t?void 0:t[e])&&void 0!==n?n:0)},e.prototype.snapToCursor=function(e){var t=this;lD((function(n){if(TD(n,t.getProps().drag,t.currentDirection)){var i=t.visualElement.projection,r=t.getAxisMotionValue(n);if(i&&i.layout){var s=i.layout.actual[n],a=s.min,o=s.max;r.set(e[n]-NI(a,o,.5))}}}))},e.prototype.scalePositionWithinConstraints=function(){var e,t=this,n=this.getProps(),i=n.drag,r=n.dragConstraints,s=this.visualElement.projection;if(dk(r)&&s&&this.constraints){this.stopAnimation();var a={x:0,y:0};lD((function(e){var n=t.getAxisMotionValue(e);if(n){var i=n.get();a[e]=function(e,t){var n=.5,i=Kj(e),r=Kj(t);return r>i?n=PI(t.min,t.max-i,e.min):i>r&&(n=PI(e.min,e.max-r,t.min)),xI(0,1,n)}({min:i,max:i},t.constraints[e])}}));var o=this.visualElement.getProps().transformTemplate;this.visualElement.getInstance().style.transform=o?o({},""):"none",null===(e=s.root)||void 0===e||e.updateScroll(),s.updateLayout(),this.resolveConstraints(),lD((function(e){if(TD(e,i,null)){var n=t.getAxisMotionValue(e),r=t.constraints[e],s=r.min,o=r.max;n.set(NI(s,o,a[e]))}}))}},e.prototype.addListeners=function(){var e,t=this;MD.set(this.visualElement,this);var n=KR(this.visualElement.getInstance(),"pointerdown",(function(e){var n=t.getProps(),i=n.drag,r=n.dragListener;i&&(void 0===r||r)&&t.start(e)})),i=function(){dk(t.getProps().dragConstraints)&&(t.constraints=t.resolveRefConstraints())},r=this.visualElement.projection,s=r.addEventListener("measure",i);r&&!r.layout&&(null===(e=r.root)||void 0===e||e.updateScroll(),r.updateLayout()),i();var a=zR(window,"resize",(function(){return t.scalePositionWithinConstraints()}));return r.addEventListener("didUpdate",(function(e){var n=e.delta,i=e.hasLayoutChanged;t.isDragging&&i&&(lD((function(e){var i=t.getAxisMotionValue(e);i&&(t.originPoint[e]+=n[e].translate,i.set(i.get()+n[e].translate))})),t.visualElement.syncRender())})),function(){a(),n(),s()}},e.prototype.getProps=function(){var e=this.visualElement.getProps(),t=e.drag,n=void 0!==t&&t,i=e.dragDirectionLock,r=void 0!==i&&i,s=e.dragPropagation,a=void 0!==s&&s,o=e.dragConstraints,l=void 0!==o&&o,c=e.dragElastic,u=void 0===c?sD:c,d=e.dragMomentum,h=void 0===d||d;return qM(qM({},e),{drag:n,dragDirectionLock:r,dragPropagation:a,dragConstraints:l,dragElastic:u,dragMomentum:h})},e}();function TD(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}var CD={pan:mI((function(e){var t=e.onPan,n=e.onPanStart,i=e.onPanEnd,s=e.onPanSessionStart,a=e.visualElement,o=t||n||i||s,l=(0,r.useRef)(null),c=(0,r.useContext)(sk).transformPagePoint,u={onSessionStart:s,onStart:n,onMove:t,onEnd:function(e,t){l.current=null,i&&i(e,t)}};(0,r.useEffect)((function(){null!==l.current&&l.current.updateHandlers(u)})),ZR(a,"pointerdown",o&&function(e){l.current=new Hj(e,u,{transformPagePoint:c})}),ZN((function(){return l.current&&l.current.end()}))})),drag:mI((function(e){var t=e.dragControls,n=e.visualElement,i=WN((function(){return new ED(n)}));(0,r.useEffect)((function(){return t&&t.subscribe(i)}),[i,t]),(0,r.useEffect)((function(){return i.addListeners()}),[i])}))},AD=["LayoutMeasure","BeforeLayoutMeasure","LayoutUpdate","ViewportBoxUpdate","Update","Render","AnimationComplete","LayoutAnimationComplete","AnimationStart","LayoutAnimationStart","SetAxisTarget","Unmount"];var PD=function(e){var t=e.treeType,n=void 0===t?"":t,i=e.build,r=e.getBaseTarget,s=e.makeTargetAnimatable,a=e.measureViewportBox,o=e.render,l=e.readValueFromInstance,c=e.removeValueFromRenderState,u=e.sortNodePosition,d=e.scrapeMotionValuesFromProps;return function(e,t){var h=e.parent,p=e.props,f=e.presenceId,m=e.blockInitialAnimation,g=e.visualState,v=e.shouldReduceMotion;void 0===t&&(t={});var y,x,b=!1,_=g.latestValues,w=g.renderState,S=function(){var e=AD.map((function(){return new vj})),t={},n={clearAllListeners:function(){return e.forEach((function(e){return e.clear()}))},updatePropListeners:function(e){AD.forEach((function(i){var r,s="on"+i,a=e[s];null===(r=t[i])||void 0===r||r.call(t),a&&(t[i]=n[s](a))}))}};return e.forEach((function(e,t){n["on"+AD[t]]=function(t){return e.add(t)},n["notify"+AD[t]]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.notify.apply(e,KM([],JM(t),!1))}})),n}(),M=new Map,E=new Map,T={},C=qM({},_);function A(){y&&b&&(P(),o(y,w,p.style,O.projection))}function P(){i(O,w,_,t,p)}function N(){S.notifyUpdate(_)}function k(e,t){var n=t.onChange((function(t){_[e]=t,p.onUpdate&&FN.update(N,!1,!0)})),i=t.onRenderRequest(O.scheduleRender);E.set(e,(function(){n(),i()}))}var R=d(p);for(var I in R){var L=R[I];void 0!==_[I]&&Ok(L)&&L.set(_[I],!1)}var j=gk(p),D=vk(p),O=qM(qM({treeType:n,current:null,depth:h?h.depth+1:0,parent:h,children:new Set,presenceId:f,shouldReduceMotion:v,variantChildren:D?new Set:void 0,isVisible:void 0,manuallyAnimateOnMount:Boolean(null===h||void 0===h?void 0:h.isMounted()),blockInitialAnimation:m,isMounted:function(){return Boolean(y)},mount:function(e){b=!0,y=O.current=e,O.projection&&O.projection.mount(e),D&&h&&!j&&(x=null===h||void 0===h?void 0:h.addVariantChild(O)),M.forEach((function(e,t){return k(t,e)})),null===h||void 0===h||h.children.add(O),O.setProps(p)},unmount:function(){var e;null===(e=O.projection)||void 0===e||e.unmount(),IN.update(N),IN.render(A),E.forEach((function(e){return e()})),null===x||void 0===x||x(),null===h||void 0===h||h.children.delete(O),S.clearAllListeners(),y=void 0,b=!1},addVariantChild:function(e){var t,n=O.getClosestVariantNode();if(n)return null===(t=n.variantChildren)||void 0===t||t.add(e),function(){return n.variantChildren.delete(e)}},sortNodePosition:function(e){return u&&n===e.treeType?u(O.getInstance(),e.getInstance()):0},getClosestVariantNode:function(){return D?O:null===h||void 0===h?void 0:h.getClosestVariantNode()},getLayoutId:function(){return p.layoutId},getInstance:function(){return y},getStaticValue:function(e){return _[e]},setStaticValue:function(e,t){return _[e]=t},getLatestValues:function(){return _},setVisibility:function(e){O.isVisible!==e&&(O.isVisible=e,O.scheduleRender())},makeTargetAnimatable:function(e,t){return void 0===t&&(t=!0),s(O,e,p,t)},measureViewportBox:function(){return a(y,p)},addValue:function(e,t){O.hasValue(e)&&O.removeValue(e),M.set(e,t),_[e]=t.get(),k(e,t)},removeValue:function(e){var t;M.delete(e),null===(t=E.get(e))||void 0===t||t(),E.delete(e),delete _[e],c(e,w)},hasValue:function(e){return M.has(e)},getValue:function(e,t){var n=M.get(e);return void 0===n&&void 0!==t&&(n=xj(t),O.addValue(e,n)),n},forEachValue:function(e){return M.forEach(e)},readValue:function(e){var n;return null!==(n=_[e])&&void 0!==n?n:l(y,e,t)},setBaseTarget:function(e,t){C[e]=t},getBaseTarget:function(e){if(r){var t=r(p,e);if(void 0!==t&&!Ok(t))return t}return C[e]}},S),{build:function(){return P(),w},scheduleRender:function(){FN.render(A,!1,!0)},syncRender:A,setProps:function(e){(e.transformTemplate||p.transformTemplate)&&O.scheduleRender(),p=e,S.updatePropListeners(e),T=function(e,t,n){var i;for(var r in t){var s=t[r],a=n[r];if(Ok(s))e.addValue(r,s);else if(Ok(a))e.addValue(r,xj(s));else if(a!==s)if(e.hasValue(r)){var o=e.getValue(r);!o.hasAnimated&&o.set(s)}else e.addValue(r,xj(null!==(i=e.getStaticValue(r))&&void 0!==i?i:s))}for(var r in n)void 0===t[r]&&e.removeValue(r);return t}(O,d(p),T)},getProps:function(){return p},getVariant:function(e){var t;return null===(t=p.variants)||void 0===t?void 0:t[e]},getDefaultTransition:function(){return p.transition},getTransformPagePoint:function(){return p.transformPagePoint},getVariantContext:function(e){if(void 0===e&&(e=!1),e)return null===h||void 0===h?void 0:h.getVariantContext();if(!j){var t=(null===h||void 0===h?void 0:h.getVariantContext())||{};return void 0!==p.initial&&(t.initial=p.initial),t}for(var n={},i=0;i<kD;i++){var r=ND[i],s=p[r];(pk(s)||!1===s)&&(n[r]=s)}return n}});return O}},ND=KM(["initial"],JM(Rj),!1),kD=ND.length;function RD(e){return"string"===typeof e&&e.startsWith("var(--")}var ID=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function LD(e,t,n){void 0===n&&(n=1),'Max CSS variable fallback depth detected in property "'.concat(e,'". This may indicate a circular fallback dependency.');var i=JM(function(e){var t=ID.exec(e);if(!t)return[,];var n=JM(t,3);return[n[1],n[2]]}(e),2),r=i[0],s=i[1];if(r){var a=window.getComputedStyle(t).getPropertyValue(r);return a?a.trim():RD(s)?LD(s,t,n+1):s}}var jD,DD=new Set(["width","height","top","left","right","bottom","x","y"]),OD=function(e){return DD.has(e)},zD=function(e,t){e.set(t,!1),e.set(t)},FD=function(e){return e===eR||e===Kk};!function(e){e.width="width",e.height="height",e.left="left",e.right="right",e.top="top",e.bottom="bottom"}(jD||(jD={}));var UD=function(e,t){return parseFloat(e.split(", ")[t])},BD=function(e,t){return function(n,i){var r=i.transform;if("none"===r||!r)return 0;var s=r.match(/^matrix3d\((.+)\)$/);if(s)return UD(s[1],t);var a=r.match(/^matrix\((.+)\)$/);return a?UD(a[1],e):0}},VD=new Set(["x","y","z"]),HD=Nk.filter((function(e){return!VD.has(e)}));var WD={width:function(e,t){var n=e.x,i=t.paddingLeft,r=void 0===i?"0":i,s=t.paddingRight,a=void 0===s?"0":s;return n.max-n.min-parseFloat(r)-parseFloat(a)},height:function(e,t){var n=e.y,i=t.paddingTop,r=void 0===i?"0":i,s=t.paddingBottom,a=void 0===s?"0":s;return n.max-n.min-parseFloat(r)-parseFloat(a)},top:function(e,t){var n=t.top;return parseFloat(n)},left:function(e,t){var n=t.left;return parseFloat(n)},bottom:function(e,t){var n=e.y,i=t.top;return parseFloat(i)+(n.max-n.min)},right:function(e,t){var n=e.x,i=t.left;return parseFloat(i)+(n.max-n.min)},x:BD(4,13),y:BD(5,14)},GD=function(e,t,n,i){void 0===n&&(n={}),void 0===i&&(i={}),t=qM({},t),i=qM({},i);var r=Object.keys(t).filter(OD),s=[],a=!1,o=[];if(r.forEach((function(r){var l=e.getValue(r);if(e.hasValue(r)){var c,u=n[r],d=wj(u),h=t[r];if(PR(h)){var p=h.length,f=null===h[0]?1:0;u=h[f],d=wj(u);for(var m=f;m<p;m++)c?wj(h[m]):(c=wj(h[m]))===d||FD(d)&&FD(c)}else c=wj(h);if(d!==c)if(FD(d)&&FD(c)){var g=l.get();"string"===typeof g&&l.set(parseFloat(g)),"string"===typeof h?t[r]=parseFloat(h):Array.isArray(h)&&c===Kk&&(t[r]=h.map(parseFloat))}else(null===d||void 0===d?void 0:d.transform)&&(null===c||void 0===c?void 0:c.transform)&&(0===u||0===h)?0===u?l.set(c.transform(u)):t[r]=d.transform(h):(a||(s=function(e){var t=[];return HD.forEach((function(n){var i=e.getValue(n);void 0!==i&&(t.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))})),t.length&&e.syncRender(),t}(e),a=!0),o.push(r),i[r]=void 0!==i[r]?i[r]:t[r],zD(l,h))}})),o.length){var l=o.indexOf("height")>=0?window.pageYOffset:null,c=function(e,t,n){var i=t.measureViewportBox(),r=t.getInstance(),s=getComputedStyle(r),a=s.display,o={};"none"===a&&t.setStaticValue("display",e.display||"block"),n.forEach((function(e){o[e]=WD[e](i,s)})),t.syncRender();var l=t.measureViewportBox();return n.forEach((function(n){var i=t.getValue(n);zD(i,o[n]),e[n]=WD[n](l,s)})),e}(t,e,o);return s.length&&s.forEach((function(t){var n=JM(t,2),i=n[0],r=n[1];e.getValue(i).set(r)})),e.syncRender(),null!==l&&window.scrollTo({top:l}),{target:c,transitionEnd:i}}return{target:t,transitionEnd:i}};function qD(e,t,n,i){return function(e){return Object.keys(e).some(OD)}(t)?GD(e,t,n,i):{target:t,transitionEnd:i}}var XD=function(e,t,n,i){var r=function(e,t,n){var i,r=XM(t,[]),s=e.getInstance();if(!(s instanceof Element))return{target:r,transitionEnd:n};for(var a in n&&(n=qM({},n)),e.forEachValue((function(e){var t=e.get();if(RD(t)){var n=LD(t,s);n&&e.set(n)}})),r){var o=r[a];if(RD(o)){var l=LD(o,s);l&&(r[a]=l,n&&(null!==(i=n[a])&&void 0!==i||(n[a]=o)))}}return{target:r,transitionEnd:n}}(e,t,i);return qD(e,t=r.target,n,i=r.transitionEnd)};var YD={treeType:"dom",readValueFromInstance:function(e,t){if(Ik(t)){var n=rj(t);return n&&n.default||0}var i,r=(i=e,window.getComputedStyle(i));return(Fk(t)?r.getPropertyValue(t):r[t])||0},sortNodePosition:function(e,t){return 2&e.compareDocumentPosition(t)?1:-1},getBaseTarget:function(e,t){var n;return null===(n=e.style)||void 0===n?void 0:n[t]},measureViewportBox:function(e,t){return SD(e,t.transformPagePoint)},resetTransform:function(e,t,n){var i=n.transformTemplate;t.style.transform=i?i({},""):"none",e.scheduleRender()},restoreTransform:function(e,t){e.style.transform=t.style.transform},removeValueFromRenderState:function(e,t){var n=t.vars,i=t.style;delete n[e],delete i[e]},makeTargetAnimatable:function(e,t,n,i){var r=n.transformValues;void 0===i&&(i=!0);var s=t.transition,a=t.transitionEnd,o=XM(t,["transition","transitionEnd"]),l=function(e,t,n){var i,r,s={};for(var a in e)s[a]=null!==(i=Cj(a,t))&&void 0!==i?i:null===(r=n.getValue(a))||void 0===r?void 0:r.get();return s}(o,s||{},e);if(r&&(a&&(a=r(a)),o&&(o=r(o)),l&&(l=r(l))),i){!function(e,t,n){var i,r,s,a,o=Object.keys(t).filter((function(t){return!e.hasValue(t)})),l=o.length;if(l)for(var c=0;c<l;c++){var u=o[c],d=t[u],h=null;Array.isArray(d)&&(h=d[0]),null===h&&(h=null!==(r=null!==(i=n[u])&&void 0!==i?i:e.readValue(u))&&void 0!==r?r:t[u]),void 0!==h&&null!==h&&("string"===typeof h&&(/^\-?\d*\.?\d+$/.test(h)||fj(h))?h=parseFloat(h):!Mj(h)&&QI.test(d)&&(h=sj(u,d)),e.addValue(u,xj(h)),null!==(s=(a=n)[u])&&void 0!==s||(a[u]=h),e.setBaseTarget(u,h))}}(e,o,l);var c=XD(e,o,l,a);a=c.transitionEnd,o=c.target}return qM({transition:s,transitionEnd:a},o)},scrapeMotionValuesFromProps:TR,build:function(e,t,n,i,r){void 0!==e.isVisible&&(t.style.visibility=e.isVisible?"visible":"hidden"),sR(t,n,i,r.transformTemplate)},render:SR},JD=PD(YD),KD=PD(qM(qM({},YD),{getBaseTarget:function(e,t){return e[t]},readValueFromInstance:function(e,t){var n;return Ik(t)?(null===(n=rj(t))||void 0===n?void 0:n.default)||0:(t=MR.has(t)?t:wR(t),e.getAttribute(t))},scrapeMotionValuesFromProps:CR,build:function(e,t,n,i,r){vR(t,n,i,r.transformTemplate)},render:ER})),ZD=function(e,t){return Ck(e)?KD(t,{enableHardwareAcceleration:!1}):JD(t,{enableHardwareAcceleration:!0})};function QD(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}var $D={correct:function(e,t){if(!t.target)return e;if("string"===typeof e){if(!Kk.test(e))return e;e=parseFloat(e)}var n=QD(e,t.target.x),i=QD(e,t.target.y);return"".concat(n,"% ").concat(i,"%")}},eO="_$css",tO={correct:function(e,t){var n=t.treeScale,i=t.projectionDelta,r=e,s=e.includes("var("),a=[];s&&(e=e.replace(ID,(function(e){return a.push(e),eO})));var o=QI.parse(e);if(o.length>5)return r;var l=QI.createTransformer(e),c="number"!==typeof o[0]?1:0,u=i.x.scale*n.x,d=i.y.scale*n.y;o[0+c]/=u,o[1+c]/=d;var h=NI(u,d,.5);"number"===typeof o[2+c]&&(o[2+c]/=h),"number"===typeof o[3+c]&&(o[3+c]/=h);var p=l(o);if(s){var f=0;p=p.replace(eO,(function(){var e=a[f];return f++,e}))}return p}},nO=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return GM(t,e),t.prototype.componentDidMount=function(){var e,t=this,n=this.props,i=n.visualElement,r=n.layoutGroup,s=n.switchLayoutGroup,a=n.layoutId,o=i.projection;e=iO,Object.assign(Ak,e),o&&((null===r||void 0===r?void 0:r.group)&&r.group.add(o),(null===s||void 0===s?void 0:s.register)&&a&&s.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",(function(){t.safeToRemove()})),o.setOptions(qM(qM({},o.options),{onExitComplete:function(){return t.safeToRemove()}}))),bk.hasEverUpdated=!0},t.prototype.getSnapshotBeforeUpdate=function(e){var t=this,n=this.props,i=n.layoutDependency,r=n.visualElement,s=n.drag,a=n.isPresent,o=r.projection;return o?(o.isPresent=a,s||e.layoutDependency!==i||void 0===i?o.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?o.promote():o.relegate()||FN.postRender((function(){var e;(null===(e=o.getStack())||void 0===e?void 0:e.members.length)||t.safeToRemove()}))),null):null},t.prototype.componentDidUpdate=function(){var e=this.props.visualElement.projection;e&&(e.root.didUpdate(),!e.currentAnimation&&e.isLead()&&this.safeToRemove())},t.prototype.componentWillUnmount=function(){var e=this.props,t=e.visualElement,n=e.layoutGroup,i=e.switchLayoutGroup,r=t.projection;r&&(r.scheduleCheckAfterUnmount(),(null===n||void 0===n?void 0:n.group)&&n.group.remove(r),(null===i||void 0===i?void 0:i.deregister)&&i.deregister(r))},t.prototype.safeToRemove=function(){var e=this.props.safeToRemove;null===e||void 0===e||e()},t.prototype.render=function(){return null},t}(r.Component);var iO={borderRadius:qM(qM({},$D),{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:$D,borderTopRightRadius:$D,borderBottomLeftRadius:$D,borderBottomRightRadius:$D,boxShadow:tO},rO={measureLayout:function(e){var t=JM(vI(),2),n=t[0],i=t[1],s=(0,r.useContext)(KN);return r.createElement(nO,qM({},e,{layoutGroup:s,switchLayoutGroup:(0,r.useContext)(wk),isPresent:n,safeToRemove:i}))}};var sO=["TopLeft","TopRight","BottomLeft","BottomRight"],aO=sO.length,oO=function(e){return"string"===typeof e?parseFloat(e):e},lO=function(e){return"number"===typeof e||Kk.test(e)};function cO(e,t){var n;return null!==(n=e[t])&&void 0!==n?n:e.borderRadius}var uO=hO(0,.5,xL),dO=hO(.5,.95,pL);function hO(e,t,n){return function(i){return i<e?0:i>t?1:n(PI(e,t,i))}}function pO(e,t){e.min=t.min,e.max=t.max}function fO(e,t){pO(e.x,t.x),pO(e.y,t.y)}function mO(e,t,n,i,r){return e=fD(e-=t,1/n,i),void 0!==r&&(e=fD(e,1/r,i)),e}function gO(e,t,n,i,r){var s=JM(n,3),a=s[0],o=s[1],l=s[2];!function(e,t,n,i,r,s,a){if(void 0===t&&(t=0),void 0===n&&(n=1),void 0===i&&(i=.5),void 0===s&&(s=e),void 0===a&&(a=e),Jk.test(t)&&(t=parseFloat(t),t=NI(a.min,a.max,t/100)-a.min),"number"===typeof t){var o=NI(s.min,s.max,i);e===s&&(o-=t),e.min=mO(e.min,t,n,o,r),e.max=mO(e.max,t,n,o,r)}}(e,t[a],t[o],t[l],t.scale,i,r)}var vO=["x","scaleX","originX"],yO=["y","scaleY","originY"];function xO(e,t,n,i){gO(e.x,t,vO,null===n||void 0===n?void 0:n.x,null===i||void 0===i?void 0:i.x),gO(e.y,t,yO,null===n||void 0===n?void 0:n.y,null===i||void 0===i?void 0:i.y)}function bO(e){return 0===e.translate&&1===e.scale}function _O(e){return bO(e.x)&&bO(e.y)}function wO(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}var SO=function(){function e(){this.members=[]}return e.prototype.add=function(e){mj(this.members,e),e.scheduleRender()},e.prototype.remove=function(e){if(gj(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){var t=this.members[this.members.length-1];t&&this.promote(t)}},e.prototype.relegate=function(e){var t,n=this.members.findIndex((function(t){return e===t}));if(0===n)return!1;for(var i=n;i>=0;i--){var r=this.members[i];if(!1!==r.isPresent){t=r;break}}return!!t&&(this.promote(t),!0)},e.prototype.promote=function(e,t){var n,i=this.lead;e!==i&&(this.prevLead=i,this.lead=e,e.show(),i&&(i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues,e.snapshot.isShared=!0),(null===(n=e.root)||void 0===n?void 0:n.isUpdating)&&(e.isLayoutDirty=!0),!1===e.options.crossfade&&i.hide()))},e.prototype.exitAnimationComplete=function(){this.members.forEach((function(e){var t,n,i,r,s;null===(n=(t=e.options).onExitComplete)||void 0===n||n.call(t),null===(s=null===(i=e.resumingFrom)||void 0===i?void 0:(r=i.options).onExitComplete)||void 0===s||s.call(r)}))},e.prototype.scheduleRender=function(){this.members.forEach((function(e){e.instance&&e.scheduleRender(!1)}))},e.prototype.removeLeadSnapshot=function(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)},e}();function MO(e,t,n){var i=e.x.translate/t.x,r=e.y.translate/t.y,s="translate3d(".concat(i,"px, ").concat(r,"px, 0) ");if(s+="scale(".concat(1/t.x,", ").concat(1/t.y,") "),n){var a=n.rotate,o=n.rotateX,l=n.rotateY;a&&(s+="rotate(".concat(a,"deg) ")),o&&(s+="rotateX(".concat(o,"deg) ")),l&&(s+="rotateY(".concat(l,"deg) "))}var c=e.x.scale*t.x,u=e.y.scale*t.y;return"translate3d(0px, 0px, 0) scale(1, 1) scale(1, 1)"===(s+="scale(".concat(c,", ").concat(u,")"))?"none":s}var EO=function(e,t){return e.depth-t.depth},TO=function(){function e(){this.children=[],this.isDirty=!1}return e.prototype.add=function(e){mj(this.children,e),this.isDirty=!0},e.prototype.remove=function(e){gj(this.children,e),this.isDirty=!0},e.prototype.forEach=function(e){this.isDirty&&this.children.sort(EO),this.isDirty=!1,this.children.forEach(e)},e}();function CO(e){var t=e.attachResizeListener,n=e.defaultParent,i=e.measureScroll,r=e.checkIsScrollRoot,s=e.resetTransform;return function(){function e(e,t,i){var r=this;void 0===t&&(t={}),void 0===i&&(i=null===n||void 0===n?void 0:n()),this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.potentialNodes=new Map,this.checkUpdateFailed=function(){r.isUpdating&&(r.isUpdating=!1,r.clearAllSnapshots())},this.updateProjection=function(){r.nodes.forEach(LO),r.nodes.forEach(jO)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.id=e,this.latestValues=t,this.root=i?i.root||i:this,this.path=i?KM(KM([],JM(i.path),!1),[i],!1):[],this.parent=i,this.depth=i?i.depth+1:0,e&&this.root.registerPotentialNode(e,this);for(var s=0;s<this.path.length;s++)this.path[s].shouldResetTransform=!0;this.root===this&&(this.nodes=new TO)}return e.prototype.addEventListener=function(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new vj),this.eventHandlers.get(e).add(t)},e.prototype.notifyListeners=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=this.eventHandlers.get(e);null===i||void 0===i||i.notify.apply(i,KM([],JM(t),!1))},e.prototype.hasListeners=function(e){return this.eventHandlers.has(e)},e.prototype.registerPotentialNode=function(e,t){this.potentialNodes.set(e,t)},e.prototype.mount=function(e,n){var i,r=this;if(void 0===n&&(n=!1),!this.instance){this.isSVG=e instanceof SVGElement&&"svg"!==e.tagName,this.instance=e;var s=this.options,a=s.layoutId,o=s.layout,l=s.visualElement;if(l&&!l.getInstance()&&l.mount(e),this.root.nodes.add(this),null===(i=this.parent)||void 0===i||i.children.add(this),this.id&&this.root.potentialNodes.delete(this.id),n&&(o||a)&&(this.isLayoutDirty=!0),t){var c,u=function(){return r.root.updateBlockedByResize=!1};t(e,(function(){r.root.updateBlockedByResize=!0,clearTimeout(c),c=window.setTimeout(u,250),bk.hasAnimatedSinceResize&&(bk.hasAnimatedSinceResize=!1,r.nodes.forEach(IO))}))}a&&this.root.registerSharedNode(a,this),!1!==this.options.animate&&l&&(a||o)&&this.addEventListener("didUpdate",(function(e){var t,n,i,s,a,o=e.delta,c=e.hasLayoutChanged,u=e.hasRelativeTargetChanged,d=e.layout;if(r.isTreeAnimationBlocked())return r.target=void 0,void(r.relativeTarget=void 0);var h=null!==(n=null!==(t=r.options.transition)&&void 0!==t?t:l.getDefaultTransition())&&void 0!==n?n:BO,p=l.getProps(),f=p.onLayoutAnimationStart,m=p.onLayoutAnimationComplete,g=!r.targetLayout||!wO(r.targetLayout,d)||u,v=!c&&u;if((null===(i=r.resumeFrom)||void 0===i?void 0:i.instance)||v||c&&(g||!r.currentAnimation)){r.resumeFrom&&(r.resumingFrom=r.resumeFrom,r.resumingFrom.resumingFrom=void 0),r.setAnimationOrigin(o,v);var y=qM(qM({},hj(h,"layout")),{onPlay:f,onComplete:m});l.shouldReduceMotion&&(y.delay=0,y.type=!1),r.startAnimation(y)}else c||0!==r.animationProgress||r.finishAnimation(),r.isLead()&&(null===(a=(s=r.options).onExitComplete)||void 0===a||a.call(s));r.targetLayout=d}))}},e.prototype.unmount=function(){var e,t;this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this),null===(e=this.getStack())||void 0===e||e.remove(this),null===(t=this.parent)||void 0===t||t.children.delete(this),this.instance=void 0,IN.preRender(this.updateProjection)},e.prototype.blockUpdate=function(){this.updateManuallyBlocked=!0},e.prototype.unblockUpdate=function(){this.updateManuallyBlocked=!1},e.prototype.isUpdateBlocked=function(){return this.updateManuallyBlocked||this.updateBlockedByResize},e.prototype.isTreeAnimationBlocked=function(){var e;return this.isAnimationBlocked||(null===(e=this.parent)||void 0===e?void 0:e.isTreeAnimationBlocked())||!1},e.prototype.startUpdate=function(){var e;this.isUpdateBlocked()||(this.isUpdating=!0,null===(e=this.nodes)||void 0===e||e.forEach(DO))},e.prototype.willUpdate=function(e){var t,n,i;if(void 0===e&&(e=!0),this.root.isUpdateBlocked())null===(n=(t=this.options).onExitComplete)||void 0===n||n.call(t);else if(!this.root.isUpdating&&this.root.startUpdate(),!this.isLayoutDirty){this.isLayoutDirty=!0;for(var r=0;r<this.path.length;r++){var s=this.path[r];s.shouldResetTransform=!0,s.updateScroll()}var a=this.options,o=a.layoutId,l=a.layout;if(void 0!==o||l){var c=null===(i=this.options.visualElement)||void 0===i?void 0:i.getProps().transformTemplate;this.prevTransformTemplateValue=null===c||void 0===c?void 0:c(this.latestValues,""),this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}}},e.prototype.didUpdate=function(){if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(kO);this.isUpdating&&(this.isUpdating=!1,this.potentialNodes.size&&(this.potentialNodes.forEach(VO),this.potentialNodes.clear()),this.nodes.forEach(RO),this.nodes.forEach(AO),this.nodes.forEach(PO),this.clearAllSnapshots(),LN.update(),LN.preRender(),LN.render())},e.prototype.clearAllSnapshots=function(){this.nodes.forEach(NO),this.sharedNodes.forEach(OO)},e.prototype.scheduleUpdateProjection=function(){FN.preRender(this.updateProjection,!1,!0)},e.prototype.scheduleCheckAfterUnmount=function(){var e=this;FN.postRender((function(){e.isLayoutDirty?e.root.didUpdate():e.root.checkUpdateFailed()}))},e.prototype.updateSnapshot=function(){if(!this.snapshot&&this.instance){var e=this.measure(),t=this.removeTransform(this.removeElementScroll(e));WO(t),this.snapshot={measured:e,layout:t,latestValues:{}}}},e.prototype.updateLayout=function(){var e;if(this.instance&&(this.updateScroll(),this.options.alwaysMeasureLayout&&this.isLead()||this.isLayoutDirty)){if(this.resumeFrom&&!this.resumeFrom.instance)for(var t=0;t<this.path.length;t++){this.path[t].updateScroll()}var n=this.measure();WO(n);var i=this.layout;this.layout={measured:n,actual:this.removeElementScroll(n)},this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.actual),null===(e=this.options.visualElement)||void 0===e||e.notifyLayoutMeasure(this.layout.actual,null===i||void 0===i?void 0:i.actual)}},e.prototype.updateScroll=function(){this.options.layoutScroll&&this.instance&&(this.isScrollRoot=r(this.instance),this.scroll=i(this.instance))},e.prototype.resetTransform=function(){var e;if(s){var t=this.isLayoutDirty||this.shouldResetTransform,n=this.projectionDelta&&!_O(this.projectionDelta),i=null===(e=this.options.visualElement)||void 0===e?void 0:e.getProps().transformTemplate,r=null===i||void 0===i?void 0:i(this.latestValues,""),a=r!==this.prevTransformTemplateValue;t&&(n||hD(this.latestValues)||a)&&(s(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}},e.prototype.measure=function(){var e=this.options.visualElement;if(!e)return{x:{min:0,max:0},y:{min:0,max:0}};var t=e.measureViewportBox(),n=this.root.scroll;return n&&(yD(t.x,n.x),yD(t.y,n.y)),t},e.prototype.removeElementScroll=function(e){var t={x:{min:0,max:0},y:{min:0,max:0}};fO(t,e);for(var n=0;n<this.path.length;n++){var i=this.path[n],r=i.scroll,s=i.options,a=i.isScrollRoot;if(i!==this.root&&r&&s.layoutScroll){if(a){fO(t,e);var o=this.root.scroll;o&&(yD(t.x,-o.x),yD(t.y,-o.y))}yD(t.x,r.x),yD(t.y,r.y)}}return t},e.prototype.applyTransform=function(e,t){void 0===t&&(t=!1);var n={x:{min:0,max:0},y:{min:0,max:0}};fO(n,e);for(var i=0;i<this.path.length;i++){var r=this.path[i];!t&&r.options.layoutScroll&&r.scroll&&r!==r.root&&wD(n,{x:-r.scroll.x,y:-r.scroll.y}),hD(r.latestValues)&&wD(n,r.latestValues)}return hD(this.latestValues)&&wD(n,this.latestValues),n},e.prototype.removeTransform=function(e){var t,n={x:{min:0,max:0},y:{min:0,max:0}};fO(n,e);for(var i=0;i<this.path.length;i++){var r=this.path[i];if(r.instance&&hD(r.latestValues)){dD(r.latestValues)&&r.updateSnapshot();var s={x:{min:0,max:0},y:{min:0,max:0}};fO(s,r.measure()),xO(n,r.latestValues,null===(t=r.snapshot)||void 0===t?void 0:t.layout,s)}}return hD(this.latestValues)&&xO(n,this.latestValues),n},e.prototype.setTargetDelta=function(e){this.targetDelta=e,this.root.scheduleUpdateProjection()},e.prototype.setOptions=function(e){var t;this.options=qM(qM(qM({},this.options),e),{crossfade:null===(t=e.crossfade)||void 0===t||t})},e.prototype.clearMeasurements=function(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1},e.prototype.resolveTargetDelta=function(){var e,t,n,i,r=this.options,s=r.layout,a=r.layoutId;this.layout&&(s||a)&&(this.targetDelta||this.relativeTarget||(this.relativeParent=this.getClosestProjectingParent(),this.relativeParent&&this.relativeParent.layout&&(this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},nD(this.relativeTargetOrigin,this.layout.actual,this.relativeParent.layout.actual),fO(this.relativeTarget,this.relativeTargetOrigin))),(this.relativeTarget||this.targetDelta)&&(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&(null===(e=this.relativeParent)||void 0===e?void 0:e.target)?(t=this.target,n=this.relativeTarget,i=this.relativeParent.target,eD(t.x,n.x,i.x),eD(t.y,n.y,i.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.actual):fO(this.target,this.layout.actual),vD(this.target,this.targetDelta)):fO(this.target,this.layout.actual),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,this.relativeParent=this.getClosestProjectingParent(),this.relativeParent&&Boolean(this.relativeParent.resumingFrom)===Boolean(this.resumingFrom)&&!this.relativeParent.options.layoutScroll&&this.relativeParent.target&&(this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},nD(this.relativeTargetOrigin,this.target,this.relativeParent.target),fO(this.relativeTarget,this.relativeTargetOrigin)))))},e.prototype.getClosestProjectingParent=function(){if(this.parent&&!hD(this.parent.latestValues))return(this.parent.relativeTarget||this.parent.targetDelta)&&this.parent.layout?this.parent:this.parent.getClosestProjectingParent()},e.prototype.calcProjection=function(){var e,t=this.options,n=t.layout,i=t.layoutId;if(this.isTreeAnimating=Boolean((null===(e=this.parent)||void 0===e?void 0:e.isTreeAnimating)||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),this.layout&&(n||i)){var r=this.getLead();fO(this.layoutCorrected,this.layout.actual),function(e,t,n,i){var r,s;void 0===i&&(i=!1);var a=n.length;if(a){var o,l;t.x=t.y=1;for(var c=0;c<a;c++)l=(o=n[c]).projectionDelta,"contents"!==(null===(s=null===(r=o.instance)||void 0===r?void 0:r.style)||void 0===s?void 0:s.display)&&(i&&o.options.layoutScroll&&o.scroll&&o!==o.root&&wD(e,{x:-o.scroll.x,y:-o.scroll.y}),l&&(t.x*=l.x.scale,t.y*=l.y.scale,vD(e,l)),i&&hD(o.latestValues)&&wD(e,o.latestValues))}}(this.layoutCorrected,this.treeScale,this.path,Boolean(this.resumingFrom)||this!==r);var s=r.target;if(s){this.projectionDelta||(this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}});var a=this.treeScale.x,o=this.treeScale.y,l=this.projectionTransform;$j(this.projectionDelta,this.layoutCorrected,s,this.latestValues),this.projectionTransform=MO(this.projectionDelta,this.treeScale),this.projectionTransform===l&&this.treeScale.x===a&&this.treeScale.y===o||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",s))}}},e.prototype.hide=function(){this.isVisible=!1},e.prototype.show=function(){this.isVisible=!0},e.prototype.scheduleRender=function(e){var t,n,i;void 0===e&&(e=!0),null===(n=(t=this.options).scheduleRender)||void 0===n||n.call(t),e&&(null===(i=this.getStack())||void 0===i||i.scheduleRender()),this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)},e.prototype.setAnimationOrigin=function(e,t){var n,i=this;void 0===t&&(t=!1);var r=this.snapshot,s=(null===r||void 0===r?void 0:r.latestValues)||{},a=qM({},this.latestValues),o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeTarget=this.relativeTargetOrigin=void 0,this.attemptToResolveRelativeTarget=!t;var l={x:{min:0,max:0},y:{min:0,max:0}},c=null===r||void 0===r?void 0:r.isShared,u=((null===(n=this.getStack())||void 0===n?void 0:n.members.length)||0)<=1,d=Boolean(c&&!u&&!0===this.options.crossfade&&!this.path.some(UO));this.animationProgress=0,this.mixTargetDelta=function(t){var n,r=t/1e3;zO(o.x,e.x,r),zO(o.y,e.y,r),i.setTargetDelta(o),i.relativeTarget&&i.relativeTargetOrigin&&i.layout&&(null===(n=i.relativeParent)||void 0===n?void 0:n.layout)&&(nD(l,i.layout.actual,i.relativeParent.layout.actual),function(e,t,n,i){FO(e.x,t.x,n.x,i),FO(e.y,t.y,n.y,i)}(i.relativeTarget,i.relativeTargetOrigin,l,r)),c&&(i.animationValues=a,function(e,t,n,i,r,s){var a,o,l,c;r?(e.opacity=NI(0,null!==(a=n.opacity)&&void 0!==a?a:1,uO(i)),e.opacityExit=NI(null!==(o=t.opacity)&&void 0!==o?o:1,0,dO(i))):s&&(e.opacity=NI(null!==(l=t.opacity)&&void 0!==l?l:1,null!==(c=n.opacity)&&void 0!==c?c:1,i));for(var u=0;u<aO;u++){var d="border".concat(sO[u],"Radius"),h=cO(t,d),p=cO(n,d);void 0===h&&void 0===p||(h||(h=0),p||(p=0),0===h||0===p||lO(h)===lO(p)?(e[d]=Math.max(NI(oO(h),oO(p),i),0),(Jk.test(p)||Jk.test(h))&&(e[d]+="%")):e[d]=p)}(t.rotate||n.rotate)&&(e.rotate=NI(t.rotate||0,n.rotate||0,i))}(a,s,i.latestValues,r,d,u)),i.root.scheduleUpdateProjection(),i.scheduleRender(),i.animationProgress=r},this.mixTargetDelta(0)},e.prototype.startAnimation=function(e){var t,n,i=this;this.notifyListeners("animationStart"),null===(t=this.currentAnimation)||void 0===t||t.stop(),this.resumingFrom&&(null===(n=this.resumingFrom.currentAnimation)||void 0===n||n.stop()),this.pendingAnimation&&(IN.update(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=FN.update((function(){bk.hasAnimatedSinceResize=!0,i.currentAnimation=function(e,t,n){void 0===n&&(n={});var i=Ok(e)?e:xj(e);return pj("",i,t,n),{stop:function(){return i.stop()},isAnimating:function(){return i.isAnimating()}}}(0,1e3,qM(qM({},e),{onUpdate:function(t){var n;i.mixTargetDelta(t),null===(n=e.onUpdate)||void 0===n||n.call(e,t)},onComplete:function(){var t;null===(t=e.onComplete)||void 0===t||t.call(e),i.completeAnimation()}})),i.resumingFrom&&(i.resumingFrom.currentAnimation=i.currentAnimation),i.pendingAnimation=void 0}))},e.prototype.completeAnimation=function(){var e;this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0),null===(e=this.getStack())||void 0===e||e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")},e.prototype.finishAnimation=function(){var e;this.currentAnimation&&(null===(e=this.mixTargetDelta)||void 0===e||e.call(this,1e3),this.currentAnimation.stop()),this.completeAnimation()},e.prototype.applyTransformsToTarget=function(){var e=this.getLead(),t=e.targetWithTransforms,n=e.target,i=e.layout,r=e.latestValues;t&&n&&i&&(fO(t,n),wD(t,r),$j(this.projectionDeltaWithTransform,this.layoutCorrected,t,r))},e.prototype.registerSharedNode=function(e,t){var n,i,r;this.sharedNodes.has(e)||this.sharedNodes.set(e,new SO),this.sharedNodes.get(e).add(t),t.promote({transition:null===(n=t.options.initialPromotionConfig)||void 0===n?void 0:n.transition,preserveFollowOpacity:null===(r=null===(i=t.options.initialPromotionConfig)||void 0===i?void 0:i.shouldPreserveFollowOpacity)||void 0===r?void 0:r.call(i,t)})},e.prototype.isLead=function(){var e=this.getStack();return!e||e.lead===this},e.prototype.getLead=function(){var e;return this.options.layoutId&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this},e.prototype.getPrevLead=function(){var e;return this.options.layoutId?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0},e.prototype.getStack=function(){var e=this.options.layoutId;if(e)return this.root.sharedNodes.get(e)},e.prototype.promote=function(e){var t=void 0===e?{}:e,n=t.needsReset,i=t.transition,r=t.preserveFollowOpacity,s=this.getStack();s&&s.promote(this,r),n&&(this.projectionDelta=void 0,this.needsReset=!0),i&&this.setOptions({transition:i})},e.prototype.relegate=function(){var e=this.getStack();return!!e&&e.relegate(this)},e.prototype.resetRotation=function(){var e=this.options.visualElement;if(e){for(var t=!1,n={},i=0;i<Pk.length;i++){var r="rotate"+Pk[i];e.getStaticValue(r)&&(t=!0,n[r]=e.getStaticValue(r),e.setStaticValue(r,0))}if(t){for(var r in null===e||void 0===e||e.syncRender(),n)e.setStaticValue(r,n[r]);e.scheduleRender()}}},e.prototype.getProjectionStyles=function(e){var t,n,i,r,s,a;void 0===e&&(e={});var o={};if(!this.instance||this.isSVG)return o;if(!this.isVisible)return{visibility:"hidden"};o.visibility="";var l=null===(t=this.options.visualElement)||void 0===t?void 0:t.getProps().transformTemplate;if(this.needsReset)return this.needsReset=!1,o.opacity="",o.pointerEvents=kR(e.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none",o;var c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){var u={};return this.options.layoutId&&(u.opacity=null!==(n=this.latestValues.opacity)&&void 0!==n?n:1,u.pointerEvents=kR(e.pointerEvents)||""),this.hasProjected&&!hD(this.latestValues)&&(u.transform=l?l({},""):"none",this.hasProjected=!1),u}var d=c.animationValues||c.latestValues;this.applyTransformsToTarget(),o.transform=MO(this.projectionDeltaWithTransform,this.treeScale,d),l&&(o.transform=l(d,o.transform));var h=this.projectionDelta,p=h.x,f=h.y;for(var m in o.transformOrigin="".concat(100*p.origin,"% ").concat(100*f.origin,"% 0"),c.animationValues?o.opacity=c===this?null!==(r=null!==(i=d.opacity)&&void 0!==i?i:this.latestValues.opacity)&&void 0!==r?r:1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:o.opacity=c===this?null!==(s=d.opacity)&&void 0!==s?s:"":null!==(a=d.opacityExit)&&void 0!==a?a:0,Ak)if(void 0!==d[m]){var g=Ak[m],v=g.correct,y=g.applyTo,x=v(d[m],c);if(y)for(var b=y.length,_=0;_<b;_++)o[y[_]]=x;else o[m]=x}return this.options.layoutId&&(o.pointerEvents=c===this?kR(e.pointerEvents)||"":"none"),o},e.prototype.clearSnapshot=function(){this.resumeFrom=this.snapshot=void 0},e.prototype.resetTree=function(){this.root.nodes.forEach((function(e){var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()})),this.root.nodes.forEach(kO),this.root.sharedNodes.clear()},e}()}function AO(e){e.updateLayout()}function PO(e){var t,n,i,r,s=null!==(n=null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)&&void 0!==n?n:e.snapshot;if(e.isLead()&&e.layout&&s&&e.hasListeners("didUpdate")){var a=e.layout,o=a.actual,l=a.measured;"size"===e.options.animationType?lD((function(e){var t=s.isShared?s.measured[e]:s.layout[e],n=Kj(t);t.min=o[e].min,t.max=t.min+n})):"position"===e.options.animationType&&lD((function(e){var t=s.isShared?s.measured[e]:s.layout[e],n=Kj(o[e]);t.max=t.min+n}));var c={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};$j(c,o,s.layout);var u={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};s.isShared?$j(u,e.applyTransform(l,!0),s.measured):$j(u,o,s.layout);var d=!_O(c),h=!1;if(!e.resumeFrom&&(e.relativeParent=e.getClosestProjectingParent(),e.relativeParent&&!e.relativeParent.resumeFrom)){var p=e.relativeParent,f=p.snapshot,m=p.layout;if(f&&m){var g={x:{min:0,max:0},y:{min:0,max:0}};nD(g,s.layout,f.layout);var v={x:{min:0,max:0},y:{min:0,max:0}};nD(v,o,m.actual),wO(g,v)||(h=!0)}}e.notifyListeners("didUpdate",{layout:o,snapshot:s,delta:u,layoutDelta:c,hasLayoutChanged:d,hasRelativeTargetChanged:h})}else e.isLead()&&(null===(r=(i=e.options).onExitComplete)||void 0===r||r.call(i));e.options.transition=void 0}function NO(e){e.clearSnapshot()}function kO(e){e.clearMeasurements()}function RO(e){var t=e.options.visualElement;(null===t||void 0===t?void 0:t.getProps().onBeforeLayoutMeasure)&&t.notifyBeforeLayoutMeasure(),e.resetTransform()}function IO(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0}function LO(e){e.resolveTargetDelta()}function jO(e){e.calcProjection()}function DO(e){e.resetRotation()}function OO(e){e.removeLeadSnapshot()}function zO(e,t,n){e.translate=NI(t.translate,0,n),e.scale=NI(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function FO(e,t,n,i){e.min=NI(t.min,n.min,i),e.max=NI(t.max,n.max,i)}function UO(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}var BO={duration:.45,ease:[.4,0,.1,1]};function VO(e,t){for(var n=e.root,i=e.path.length-1;i>=0;i--)if(Boolean(e.path[i].instance)){n=e.path[i];break}var r=(n&&n!==e.root?n.instance:document).querySelector('[data-projection-id="'.concat(t,'"]'));r&&e.mount(r,!0)}function HO(e){e.min=Math.round(e.min),e.max=Math.round(e.max)}function WO(e){HO(e.x),HO(e.y)}var GO=CO({attachResizeListener:function(e,t){return zR(e,"resize",t)},measureScroll:function(){return{x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}},checkIsScrollRoot:function(){return!0}}),qO={current:void 0},XO=CO({measureScroll:function(e){return{x:e.scrollLeft,y:e.scrollTop}},defaultParent:function(){if(!qO.current){var e=new GO(0,{});e.mount(window),e.setOptions({layoutScroll:!0}),qO.current=e}return qO.current},resetTransform:function(e,t){e.style.transform=null!==t&&void 0!==t?t:"none"},checkIsScrollRoot:function(e){return Boolean("fixed"===window.getComputedStyle(e).position)}}),YO=qM(qM(qM(qM({},zj),gI),CD),rO),JO=Ek((function(e,t){return function(e,t,n,i,r){var s=t.forwardMotionProps,a=void 0!==s&&s,o=Ck(e)?DR:OR;return qM(qM({},o),{preloadedFeatures:n,useRender:bR(a),createVisualElement:i,projectionNodeConstructor:r,Component:e})}(e,t,YO,ZD,XO)}));const KO=()=>{var e,t;const n=ne(),i=ee(),{auth:s}=(0,r.useContext)(Oe),[a,o]=(0,r.useState)([]),[l,c]=(0,r.useState)([]),[u,d]=(0,r.useState)(null),[h,p]=(0,r.useState)([]),[f,m]=(0,r.useState)(null),[g,v]=(0,r.useState)(""),[y,x]=(0,r.useState)(""),[b,_]=(0,r.useState)(""),[w,S]=(0,r.useState)(!1),[M,E]=(0,r.useState)(""),[T,C]=(0,r.useState)(!1),[A,P]=(0,r.useState)(1),[N,k]=(0,r.useState)([]),[R,I]=(0,r.useState)(!1),[L,j]=(0,r.useState)({}),[D,O]=(0,r.useState)(null),z={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyAvU9kEEeWjQ7IAqBYbGgC42AdkWLES81M",REACT_APP_FIREBASE_APP_ID:"1:572769350923:web:4583cdf7d3de12a6769e0e",REACT_APP_FIREBASE_AUTH_DOMAIN:"rdv-project-7ba0a.firebaseapp.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-2E561CDQNN",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"572769350923",REACT_APP_FIREBASE_PROJECT_ID:"rdv-project-7ba0a",REACT_APP_FIREBASE_STORAGE_BUCKET:"rdv-project-7ba0a.firebasestorage.app"}.REACT_APP_API_URL||"http://localhost:5000",F={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.5,when:"beforeChildren",staggerChildren:.1}},exit:{opacity:0,transition:{duration:.3}}},U={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{duration:.5}}};(0,r.useEffect)((()=>{(async()=>{if(null!==s&&void 0!==s&&s.isAuthenticated)try{C(!0);const e=await yi.getProfessionals();let t=[];e&&e.data&&(Array.isArray(e.data)?t=e.data:e.data.data&&Array.isArray(e.data.data)&&(t=e.data.data)),console.log("Professionnels charg\xe9s:",t),console.log("Structure de la r\xe9ponse API:",JSON.stringify(e,null,2)),t.forEach(((e,t)=>{console.log("Professionnel ".concat(t," - ID: ").concat(e._id,", Nom: ").concat(e.nom,", Pr\xe9nom: ").concat(e.prenom)),console.log("Sp\xe9cialit\xe9s: ".concat(JSON.stringify(e.specialites))),e.specialite&&console.log("Propri\xe9t\xe9 'specialite': ".concat(e.specialite)),e.domain&&console.log("Propri\xe9t\xe9 'domain': ".concat(e.domain))})),o(t),c(t);const n=new Set;t.forEach((e=>{e.specialites&&Array.isArray(e.specialites)?e.specialites.forEach((e=>n.add(e))):e.specialite?n.add(e.specialite):e.domain&&n.add(e.domain)}));const i=Array.from(n);console.log("Toutes les sp\xe9cialit\xe9s disponibles:",i),k(i),0===t.length&&E("Aucun professionnel disponible pour le moment"),I(!0)}catch(e){console.error("Erreur lors du chargement des professionnels:",e),E("Erreur lors du chargement des professionnels")}finally{C(!1)}else n("/login")})()}),[s,n]),(0,r.useEffect)((()=>{if(a&&Array.isArray(a)){console.log("Filtrage des professionnels - Terme de recherche:",y),console.log("Filtrage des professionnels - Filtre de sp\xe9cialit\xe9:",b);const e=a.filter((e=>{const t="".concat(e.nom," ").concat(e.prenom).toLowerCase(),n=""===y||t.includes(y.toLowerCase());let i=""===b;""!==b&&(e.specialites&&Array.isArray(e.specialites)?i=e.specialites.includes(b):e.specialite?i=e.specialite===b:e.domain&&(i=e.domain===b));const r=n&&i;return""!==b&&(console.log("Professionnel ".concat(e._id," (").concat(e.nom," ").concat(e.prenom,"): matchesSearch=").concat(n,", matchesSpecialty=").concat(i,", isMatch=").concat(r)),console.log("  Sp\xe9cialit\xe9s disponibles:",e.specialites||e.specialite||e.domain||"aucune")),r}));console.log("R\xe9sultat du filtrage: ".concat(e.length," professionnels sur ").concat(a.length," correspondent aux crit\xe8res")),c(e)}else c([]),R&&console.error("La variable professionals n'est pas un tableau valide:",a)}),[y,b,a,R]),(0,r.useEffect)((()=>{if(!R||!Array.isArray(a)||0===a.length)return void console.log("Param\xe8tres d'URL non trait\xe9s: donn\xe9es non charg\xe9es ou professionnels non disponibles");console.log("Traitement des param\xe8tres d'URL et localStorage...");const e=new URLSearchParams(window.location.search),t=e.get("professionalId"),n=e.get("specialty"),i=e.get("step");if(console.log("Param\xe8tres d'URL d\xe9tect\xe9s:",{professionalId:t,specialty:n,step:i}),t){const e=a.find((e=>e._id===t));if(e){console.log("Professionnel trouv\xe9 via URL:",e),d(e);const t=i?parseInt(i):2;return P(t),void(e.specialites&&e.specialites.length>0&&_(e.specialites[0]))}}else{if(n){console.log("Sp\xe9cialit\xe9 trouv\xe9e via URL:",n),_(n);const e=Y(a,n);if(console.log("Professionnels filtr\xe9s par cat\xe9gorie:",e),c(e),i){const e=parseInt(i);e>=1&&e<=4&&P(e)}else P(1);return}if(i){const e=parseInt(i);return void(e>=1&&e<=4&&P(e))}}try{const e=localStorage.getItem("selectedBookingProfessional"),t=localStorage.getItem("selectedBookingSpecialty");if(console.log("Donn\xe9es trouv\xe9es dans localStorage - Professionnel:",e),console.log("Donn\xe9es trouv\xe9es dans localStorage - Sp\xe9cialit\xe9:",t),e){const t=JSON.parse(e);console.log("Donn\xe9es trouv\xe9es dans localStorage:",t);const n=t.professional||t;if(n&&n._id){console.log("Professionnel trouv\xe9 dans localStorage:",n);const e=a.find((e=>e._id===n._id));d(e||n),P(2),n.specialites&&n.specialites.length>0&&_(n.specialites[0]),localStorage.removeItem("selectedBookingProfessional")}}else if(t){console.log("Sp\xe9cialit\xe9 trouv\xe9e dans localStorage:",t),_(t);const e=Y(a,t);console.log("Professionnels filtr\xe9s par cat\xe9gorie (localStorage):",e),c(e),P(1),localStorage.removeItem("selectedBookingSpecialty")}}catch(M){console.error("Erreur lors de la r\xe9cup\xe9ration des donn\xe9es depuis localStorage:",M)}}),[R,a,i.search,b]),(0,r.useEffect)((()=>{u&&(async()=>{if(u)try{C(!0),console.log("Chargement des disponibilit\xe9s pour le professionnel:",u._id);const e=await yi.getProfessionalAvailabilities(u._id);if(e&&e.data){let t=[];Array.isArray(e.data)?t=e.data:(e.data.data&&Array.isArray(e.data.data)||e.data.success&&e.data.data&&Array.isArray(e.data.data))&&(t=e.data.data),console.log("Cr\xe9neaux disponibles r\xe9cup\xe9r\xe9s:",t),p(t),0===t.length&&console.log("Aucun cr\xe9neau disponible pour ce professionnel")}else console.log("R\xe9ponse invalide de l'API:",e),p([])}catch(e){console.error("Erreur lors du chargement des disponibilit\xe9s:",e),E("Erreur lors du chargement des disponibilit\xe9s"),p([])}finally{C(!1)}})()}),[u]);const B=e=>{console.log("Professionnel s\xe9lectionn\xe9:",e),console.log("Sp\xe9cialit\xe9s du professionnel:",e.specialites||e.specialite||e.domain||"aucune"),d(e),P(2),m(null);const t="".concat(window.location.pathname,"?professionalId=").concat(e._id,"&step=2");window.history.pushState({path:t},"",t),console.log("URL mise \xe0 jour:",t)},V=e=>{if(e<A){P(e);let t="".concat(window.location.pathname,"?step=").concat(e);u&&e>=2&&(t="".concat(window.location.pathname,"?professionalId=").concat(u._id,"&step=").concat(e)),window.history.pushState({path:t},"",t)}},H=e=>new Date(e).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),W=(e,t)=>{if(L[t]||!e)return"/default-avatar.png";if(e.startsWith("data:image/")||e.startsWith("http"))return e;const n=e.split("/").pop();return"".concat(z,"/uploads/photos/").concat(n)},G=e=>{j((t=>He(He({},t),{},{[e]:!0})))},q=(e,t)=>{e.stopPropagation(),O(t)},X=()=>{O(null)},Y=(e,t)=>t&&e&&Array.isArray(e)?e.filter((e=>e.specialites&&Array.isArray(e.specialites)?e.specialites.includes(t):e.specialite?e.specialite===t:!!e.domain&&e.domain===t)):e;return null!==s&&void 0!==s&&s.isAuthenticated?(console.log("\xc9tat actuel - Filtre de sp\xe9cialit\xe9:",b),console.log("\xc9tat actuel - Professionnels filtr\xe9s:",l.length),console.log("\xc9tat actuel - \xc9tape courante:",A),console.log("\xc9tat actuel - Professionnel s\xe9lectionn\xe9:",u?"".concat(u.prenom," ").concat(u.nom):"aucun"),(0,De.jsxs)("div",{className:"book-appointment-container",id:"booking-section",children:[M&&(0,De.jsx)(Bi,{message:M,type:"error",duration:3e3,onClose:()=>E("")}),w&&(0,De.jsx)(Bi,{message:"Rendez-vous r\xe9serv\xe9 avec succ\xe8s!",type:"success",duration:2e3,onClose:()=>S(!1)}),(0,De.jsxs)("div",{className:"booking-header",children:[(0,De.jsxs)("div",{className:"header-top",children:[(0,De.jsx)("h1",{children:"R\xe9server un rendez-vous"}),(0,De.jsxs)("button",{className:"dashboard-btn",onClick:()=>{n("/user/dashboard")},"aria-label":"Retour au tableau de bord",children:[(0,De.jsx)(FA,{})," Tableau de bord"]})]}),(0,De.jsxs)("div",{className:"booking-steps",children:[(0,De.jsxs)("div",{className:"step ".concat(A>=1?"active":""),onClick:()=>V(1),children:[(0,De.jsx)("div",{className:"step-number",children:"1"}),(0,De.jsx)("span",{className:"step-label",children:"Professionnel"})]}),(0,De.jsx)("div",{className:"step-connector"}),(0,De.jsxs)("div",{className:"step ".concat(A>=2?"active":""," ").concat(u?"":"disabled"),onClick:()=>u&&V(2),children:[(0,De.jsx)("div",{className:"step-number",children:"2"}),(0,De.jsx)("span",{className:"step-label",children:"Date & Heure"})]}),(0,De.jsx)("div",{className:"step-connector"}),(0,De.jsxs)("div",{className:"step ".concat(A>=3?"active":""," ").concat(f?"":"disabled"),onClick:()=>f&&V(3),children:[(0,De.jsx)("div",{className:"step-number",children:"3"}),(0,De.jsx)("span",{className:"step-label",children:"D\xe9tails"})]}),(0,De.jsx)("div",{className:"step-connector"}),(0,De.jsxs)("div",{className:"step ".concat(A>=4?"active":""," disabled"),children:[(0,De.jsx)("div",{className:"step-number",children:"4"}),(0,De.jsx)("span",{className:"step-label",children:"Confirmation"})]})]})]}),(0,De.jsxs)($N,{mode:"wait",children:[1===A&&(0,De.jsxs)(JO.div,{className:"booking-step-container",variants:F,initial:"hidden",animate:"visible",exit:"exit",children:[(0,De.jsxs)(JO.div,{className:"step-title",variants:U,children:[(0,De.jsx)(dP,{className:"step-icon"}),(0,De.jsx)("h2",{children:"Choisissez un professionnel"})]}),(0,De.jsxs)(JO.div,{className:"search-filters",variants:U,children:[(0,De.jsxs)("div",{className:"search-bar",children:[(0,De.jsx)(aP,{className:"search-icon"}),(0,De.jsx)("input",{type:"text",placeholder:"Rechercher un professionnel...",value:y,onChange:e=>x(e.target.value)})]}),(0,De.jsx)("div",{className:"specialty-filter",children:(0,De.jsxs)("select",{value:b,onChange:e=>{console.log("Changement de filtre de sp\xe9cialit\xe9:",e.target.value),_(e.target.value)},children:[(0,De.jsx)("option",{value:"",children:"Toutes les sp\xe9cialit\xe9s"}),N.map(((e,t)=>(0,De.jsx)("option",{value:e,children:e},t)))]})})]}),(0,De.jsx)(JO.div,{className:"professionals-grid",variants:U,children:T?(0,De.jsxs)("div",{className:"loading-container",children:[(0,De.jsx)("div",{className:"loading-spinner"}),(0,De.jsx)("p",{children:"Chargement des professionnels..."})]}):l&&Array.isArray(l)?0===l.length?(0,De.jsxs)("div",{className:"no-results",children:[(0,De.jsxs)("p",{children:["Aucun professionnel ne correspond \xe0 votre recherche ",b?"en ".concat(b):""]}),b&&a&&a.length>0&&(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)("p",{className:"all-pros-title",children:"Voici tous les professionnels disponibles:"}),(0,De.jsx)("div",{className:"all-professionals-list",children:a.map((e=>{var t,n;return(0,De.jsxs)(JO.div,{className:"professional-card ".concat((null===u||void 0===u?void 0:u._id)===e._id?"selected":""),onClick:()=>B(e),whileHover:{scale:1.02},whileTap:{scale:.98},children:[(0,De.jsx)("div",{className:"professional-avatar",children:e.photo?(0,De.jsxs)("div",{className:"profile-image",children:[(0,De.jsx)("img",{src:W(e.photo,e._id),alt:"".concat(e.prenom," ").concat(e.nom),className:"profile-photo",onClick:t=>q(t,W(e.photo,e._id)),onError:()=>G(e._id)}),(0,De.jsx)("div",{className:"photo-overlay",children:(0,De.jsx)("span",{children:"Voir photo"})})]}):(0,De.jsxs)("div",{className:"avatar-placeholder",children:[null===(t=e.prenom)||void 0===t?void 0:t.charAt(0),null===(n=e.nom)||void 0===n?void 0:n.charAt(0)]})}),(0,De.jsxs)("div",{className:"professional-details",children:[(0,De.jsxs)("h3",{children:[e.prenom," ",e.nom]}),e.specialites&&e.specialites.length>0&&(0,De.jsx)("div",{className:"professional-specialties",children:e.specialites.map(((e,t)=>(0,De.jsx)("span",{className:"specialty-tag",children:e},t)))}),e.tarif&&(0,De.jsxs)("p",{className:"professional-tarif",children:["Tarif: ",e.tarif,"Ar"]}),e.rating&&(0,De.jsxs)("div",{className:"professional-rating",children:[Array.from({length:5}).map(((t,n)=>(0,De.jsx)(oP,{className:n<Math.floor(e.rating)?"star-filled":"star-empty"},n))),(0,De.jsxs)("span",{children:["(",e.reviewCount||0,")"]})]})]}),(0,De.jsxs)("button",{className:"select-professional-btn",children:["Choisir ",(0,De.jsx)(UA,{})]})]},e._id)}))})]})]}):l.map((e=>{var t,n;return(0,De.jsxs)(JO.div,{className:"professional-card ".concat((null===u||void 0===u?void 0:u._id)===e._id?"selected":""),onClick:()=>B(e),whileHover:{scale:1.02},whileTap:{scale:.98},children:[(0,De.jsx)("div",{className:"professional-avatar",children:e.photo?(0,De.jsxs)("div",{className:"profile-image",children:[(0,De.jsx)("img",{src:W(e.photo,e._id),alt:"".concat(e.prenom," ").concat(e.nom),className:"profile-photo",onClick:t=>q(t,W(e.photo,e._id)),onError:()=>G(e._id)}),(0,De.jsx)("div",{className:"photo-overlay",children:(0,De.jsx)("span",{children:"Voir photo"})})]}):(0,De.jsxs)("div",{className:"avatar-placeholder",children:[null===(t=e.prenom)||void 0===t?void 0:t.charAt(0),null===(n=e.nom)||void 0===n?void 0:n.charAt(0)]})}),(0,De.jsxs)("div",{className:"professional-details",children:[(0,De.jsxs)("h3",{children:[e.prenom," ",e.nom]}),e.specialites&&e.specialites.length>0&&(0,De.jsx)("div",{className:"professional-specialties",children:e.specialites.map(((e,t)=>(0,De.jsx)("span",{className:"specialty-tag",children:e},t)))}),e.tarif&&(0,De.jsxs)("p",{className:"professional-tarif",children:["Tarif: ",e.tarif,"Ar"]}),e.rating&&(0,De.jsxs)("div",{className:"professional-rating",children:[Array.from({length:5}).map(((t,n)=>(0,De.jsx)(oP,{className:n<Math.floor(e.rating)?"star-filled":"star-empty"},n))),(0,De.jsxs)("span",{children:["(",e.reviewCount||0,")"]})]})]}),(0,De.jsxs)("button",{className:"select-professional-btn",children:["Choisir ",(0,De.jsx)(UA,{})]})]},e._id)})):(0,De.jsx)("div",{className:"no-results",children:(0,De.jsx)("p",{children:"Erreur lors du chargement des professionnels"})})})]},"step1"),2===A&&u&&(0,De.jsxs)(JO.div,{className:"booking-step-container",variants:F,initial:"hidden",animate:"visible",exit:"exit",children:[(0,De.jsxs)(JO.div,{className:"step-title",variants:U,children:[(0,De.jsx)(HA,{className:"step-icon"}),(0,De.jsx)("h2",{children:"Choisissez un cr\xe9neau disponible"})]}),(0,De.jsxs)(JO.div,{className:"selected-professional-summary",variants:U,children:[(0,De.jsx)("div",{className:"professional-avatar small",children:u.photo?(0,De.jsx)("div",{className:"profile-image",children:(0,De.jsx)("img",{src:W(u.photo,u._id),alt:"".concat(u.prenom," ").concat(u.nom),className:"profile-photo",onClick:e=>q(e,W(u.photo,u._id)),onError:()=>G(u._id)})}):(0,De.jsxs)("div",{className:"avatar-placeholder",children:[null===(e=u.prenom)||void 0===e?void 0:e.charAt(0),null===(t=u.nom)||void 0===t?void 0:t.charAt(0)]})}),(0,De.jsxs)("div",{className:"professional-info",children:[(0,De.jsxs)("h3",{children:[u.prenom," ",u.nom]}),u.specialites&&u.specialites.length>0&&(0,De.jsx)("p",{className:"specialty",children:u.specialites[0]})]}),(0,De.jsx)("button",{className:"change-btn",onClick:()=>P(1),children:"Changer"})]}),(0,De.jsxs)(JO.div,{className:"time-slots-container",variants:U,initial:"hidden",animate:"visible",children:[(0,De.jsx)("h3",{children:"Cr\xe9neaux disponibles"}),T?(0,De.jsxs)("div",{className:"loading-container",children:[(0,De.jsx)("div",{className:"loading-spinner"}),(0,De.jsx)("p",{children:"Chargement des disponibilit\xe9s..."})]}):h&&0!==h.length?(0,De.jsx)("div",{className:"slots-by-date",children:Object.entries(h.reduce(((e,t)=>{const n=new Date(t.debut).toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return e[n]||(e[n]=[]),e[n].push(t),e}),{})).sort(((e,t)=>new Date(e[1][0].debut)-new Date(t[1][0].debut))).map((e=>{let[t,n]=e;return(0,De.jsxs)("div",{className:"date-slots-group",children:[(0,De.jsx)("h4",{className:"date-header",children:t}),(0,De.jsx)("div",{className:"time-slots-grid",children:n.map((e=>(0,De.jsxs)(JO.div,{className:"time-slot ".concat((null===f||void 0===f?void 0:f._id)===e._id?"selected":""),onClick:()=>(e=>{if(m(e),P(3),u){const e="".concat(window.location.pathname,"?professionalId=").concat(u._id,"&step=3");window.history.pushState({path:e},"",e)}})(e),whileHover:{scale:1.05},whileTap:{scale:.95},children:[(0,De.jsx)(JA,{className:"slot-icon"}),(0,De.jsxs)("span",{children:[H(e.debut)," - ",H(e.fin)]})]},e._id)))})]},t)}))}):(0,De.jsxs)("div",{className:"no-slots",children:[(0,De.jsx)("p",{children:"Aucun cr\xe9neau disponible pour ce professionnel"}),(0,De.jsx)("p",{children:"Veuillez s\xe9lectionner un autre professionnel"})]})]}),(0,De.jsxs)(JO.div,{className:"step-navigation",variants:U,children:[(0,De.jsxs)("button",{className:"back-btn",onClick:()=>P(1),children:[(0,De.jsx)(FA,{})," Retour"]}),(0,De.jsxs)("button",{className:"next-btn",onClick:()=>f&&P(3),disabled:!f,children:["Continuer ",(0,De.jsx)(UA,{})]})]})]},"step2"),3===A&&u&&f&&(0,De.jsxs)(JO.div,{className:"booking-step-container",variants:F,initial:"hidden",animate:"visible",exit:"exit",children:[(0,De.jsxs)(JO.div,{className:"step-title",variants:U,children:[(0,De.jsx)(YA,{className:"step-icon"}),(0,De.jsx)("h2",{children:"D\xe9tails du rendez-vous"})]}),(0,De.jsx)(JO.div,{className:"appointment-summary",variants:U,children:(0,De.jsxs)("div",{className:"summary-card",children:[(0,De.jsx)("div",{className:"summary-header",children:(0,De.jsx)("h3",{children:"R\xe9sum\xe9 de votre rendez-vous"})}),(0,De.jsxs)("div",{className:"summary-body",children:[(0,De.jsxs)("div",{className:"summary-item",children:[(0,De.jsx)(dP,{className:"summary-icon"}),(0,De.jsxs)("div",{className:"summary-content",children:[(0,De.jsx)("span",{className:"summary-label",children:"Professionnel"}),(0,De.jsxs)("span",{className:"summary-value",children:[u.prenom," ",u.nom]})]})]}),(0,De.jsxs)("div",{className:"summary-item",children:[(0,De.jsx)(HA,{className:"summary-icon"}),(0,De.jsxs)("div",{className:"summary-content",children:[(0,De.jsx)("span",{className:"summary-label",children:"Date"}),(0,De.jsx)("span",{className:"summary-value",children:new Date(f.debut).toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]}),(0,De.jsxs)("div",{className:"summary-item",children:[(0,De.jsx)(JA,{className:"summary-icon"}),(0,De.jsxs)("div",{className:"summary-content",children:[(0,De.jsx)("span",{className:"summary-label",children:"Heure"}),(0,De.jsxs)("span",{className:"summary-value",children:[H(f.debut)," - ",H(f.fin)]})]})]}),u.adresse&&(0,De.jsxs)("div",{className:"summary-item",children:[(0,De.jsx)(nP,{className:"summary-icon"}),(0,De.jsxs)("div",{className:"summary-content",children:[(0,De.jsx)("span",{className:"summary-label",children:"Adresse"}),(0,De.jsx)("span",{className:"summary-value",children:u.adresse})]})]}),u.telephone&&(0,De.jsxs)("div",{className:"summary-item",children:[(0,De.jsx)(rP,{className:"summary-icon"}),(0,De.jsxs)("div",{className:"summary-content",children:[(0,De.jsx)("span",{className:"summary-label",children:"T\xe9l\xe9phone"}),(0,De.jsx)("span",{className:"summary-value",children:u.telephone})]})]}),u.email&&(0,De.jsxs)("div",{className:"summary-item",children:[(0,De.jsx)(ZA,{className:"summary-icon"}),(0,De.jsxs)("div",{className:"summary-content",children:[(0,De.jsx)("span",{className:"summary-label",children:"Email"}),(0,De.jsx)("span",{className:"summary-value",children:u.email})]})]})]})]})}),(0,De.jsxs)(JO.form,{onSubmit:async e=>{if(e.preventDefault(),u)if(f)if(g)try{C(!0);const e={professionnelId:u._id,date:new Date(f.debut).toISOString(),motif:g,status:"PENDING",disponibiliteId:f._id};await yi.bookAppointment(e),S(!0),P(4),setTimeout((()=>{d(null),m(null),v(""),P(1),x("")}),3e3)}catch(i){var t,n;console.error("Erreur de r\xe9servation:",i),E((null===(t=i.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Erreur lors de la r\xe9servation")}finally{C(!1)}else E("Veuillez indiquer le motif du rendez-vous");else E("Veuillez s\xe9lectionner un cr\xe9neau horaire");else E("Veuillez s\xe9lectionner un professionnel")},className:"motif-form",variants:U,children:[(0,De.jsxs)("div",{className:"form-group",children:[(0,De.jsx)("label",{children:"Motif du rendez-vous:"}),(0,De.jsx)("textarea",{value:g,onChange:e=>v(e.target.value),required:!0,disabled:T,placeholder:"D\xe9crivez bri\xe8vement le motif de votre rendez-vous",rows:4})]}),(0,De.jsxs)("div",{className:"step-navigation",children:[(0,De.jsxs)("button",{type:"button",className:"back-btn",onClick:()=>P(2),disabled:T,children:[(0,De.jsx)(FA,{})," Retour"]}),(0,De.jsx)("button",{type:"submit",className:"confirm-btn",disabled:T||!g,children:T?"R\xe9servation en cours...":"Confirmer le rendez-vous"})]})]})]},"step3"),4===A&&u&&f&&(0,De.jsx)(JO.div,{className:"booking-step-container",variants:F,initial:"hidden",animate:"visible",exit:"exit",children:(0,De.jsxs)(JO.div,{className:"confirmation-container",variants:U,initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5,type:"spring"},children:[(0,De.jsx)("div",{className:"confirmation-icon",children:(0,De.jsx)(GA,{})}),(0,De.jsx)("h2",{children:"Rendez-vous confirm\xe9!"}),(0,De.jsx)("p",{children:"Votre rendez-vous a \xe9t\xe9 r\xe9serv\xe9 avec succ\xe8s."}),(0,De.jsx)("p",{children:"Un email de confirmation vous a \xe9t\xe9 envoy\xe9."}),(0,De.jsxs)("div",{className:"confirmation-details",children:[(0,De.jsxs)("div",{className:"confirmation-item",children:[(0,De.jsx)("span",{className:"label",children:"Professionnel:"}),(0,De.jsxs)("span",{className:"value",children:[u.prenom," ",u.nom]})]}),(0,De.jsxs)("div",{className:"confirmation-item",children:[(0,De.jsx)("span",{className:"label",children:"Date:"}),(0,De.jsx)("span",{className:"value",children:new Date(f.debut).toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),(0,De.jsxs)("div",{className:"confirmation-item",children:[(0,De.jsx)("span",{className:"label",children:"Heure:"}),(0,De.jsxs)("span",{className:"value",children:[H(f.debut)," - ",H(f.fin)]})]})]}),(0,De.jsx)("p",{className:"redirect-message",children:"Vous allez pouvoir r\xe9server un nouveau rendez-vous..."})]})},"step4")]}),D&&(0,De.jsx)("div",{className:"photo-modal",onClick:X,children:(0,De.jsxs)("div",{className:"photo-modal-content",onClick:e=>e.stopPropagation(),children:[(0,De.jsx)("span",{className:"close-modal",onClick:X,children:"\xd7"}),(0,De.jsx)("img",{src:D,alt:"Photo du professionnel",className:"modal-photo",onError:e=>{e.target.onerror=null,e.target.src="/default-avatar.png"}})]})})]})):(0,De.jsxs)("div",{className:"book-appointment-container",children:[(0,De.jsx)("p",{children:"Veuillez vous connecter pour r\xe9server un rendez-vous"}),(0,De.jsx)("button",{onClick:()=>n("/login"),children:"Se connecter"})]})},ZO=Aw("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),QO=Aw("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),$O=Aw("CalendarCheck",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]),ez=Aw("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),tz=Aw("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),nz=Aw("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),iz=Aw("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),rz=Aw("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);function sz(){}const az=function(){let e=0;return function(){return e++}}();function oz(e){return null===e||"undefined"===typeof e}function lz(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function cz(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}const uz=e=>("number"===typeof e||e instanceof Number)&&isFinite(+e);function dz(e,t){return uz(e)?e:t}function hz(e,t){return"undefined"===typeof e?t:e}const pz=(e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function fz(e,t,n){if(e&&"function"===typeof e.call)return e.apply(n,t)}function mz(e,t,n,i){let r,s,a;if(lz(e))if(s=e.length,i)for(r=s-1;r>=0;r--)t.call(n,e[r],r);else for(r=0;r<s;r++)t.call(n,e[r],r);else if(cz(e))for(a=Object.keys(e),s=a.length,r=0;r<s;r++)t.call(n,e[a[r]],a[r])}function gz(e,t){let n,i,r,s;if(!e||!t||e.length!==t.length)return!1;for(n=0,i=e.length;n<i;++n)if(r=e[n],s=t[n],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function vz(e){if(lz(e))return e.map(vz);if(cz(e)){const t=Object.create(null),n=Object.keys(e),i=n.length;let r=0;for(;r<i;++r)t[n[r]]=vz(e[n[r]]);return t}return e}function yz(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function xz(e,t,n,i){if(!yz(e))return;const r=t[e],s=n[e];cz(r)&&cz(s)?bz(r,s,i):t[e]=vz(s)}function bz(e,t,n){const i=lz(t)?t:[t],r=i.length;if(!cz(e))return e;const s=(n=n||{}).merger||xz;for(let a=0;a<r;++a){if(!cz(t=i[a]))continue;const r=Object.keys(t);for(let i=0,a=r.length;i<a;++i)s(r[i],e,t,n)}return e}function _z(e,t){return bz(e,t,{merger:wz})}function wz(e,t,n){if(!yz(e))return;const i=t[e],r=n[e];cz(i)&&cz(r)?_z(i,r):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=vz(r))}const Sz={"":e=>e,x:e=>e.x,y:e=>e.y};function Mz(e,t){const n=Sz[t]||(Sz[t]=function(e){const t=function(e){const t=e.split("."),n=[];let i="";for(const r of t)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}(e);return e=>{for(const n of t){if(""===n)break;e=e&&e[n]}return e}}(t));return n(e)}function Ez(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Tz=e=>"undefined"!==typeof e,Cz=e=>"function"===typeof e,Az=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};const Pz=Math.PI,Nz=2*Pz,kz=Nz+Pz,Rz=Number.POSITIVE_INFINITY,Iz=Pz/180,Lz=Pz/2,jz=Pz/4,Dz=2*Pz/3,Oz=Math.log10,zz=Math.sign;function Fz(e){const t=Math.round(e);e=Bz(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(Oz(e))),i=e/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function Uz(e){return!isNaN(parseFloat(e))&&isFinite(e)}function Bz(e,t,n){return Math.abs(e-t)<n}function Vz(e,t,n){let i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i][n],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function Hz(e){return e*(Pz/180)}function Wz(e){return e*(180/Pz)}function Gz(e){if(!uz(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function qz(e,t){const n=t.x-e.x,i=t.y-e.y,r=Math.sqrt(n*n+i*i);let s=Math.atan2(i,n);return s<-.5*Pz&&(s+=Nz),{angle:s,distance:r}}function Xz(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Yz(e,t){return(e-t+kz)%Nz-Pz}function Jz(e){return(e%Nz+Nz)%Nz}function Kz(e,t,n,i){const r=Jz(e),s=Jz(t),a=Jz(n),o=Jz(s-r),l=Jz(a-r),c=Jz(r-s),u=Jz(r-a);return r===s||r===a||i&&s===a||o>l&&c<u}function Zz(e,t,n){return Math.max(t,Math.min(n,e))}function Qz(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,n)-i&&e<=Math.max(t,n)+i}function $z(e,t,n){n=n||(n=>e[n]<t);let i,r=e.length-1,s=0;for(;r-s>1;)i=s+r>>1,n(i)?s=i:r=i;return{lo:s,hi:r}}const eF=(e,t,n,i)=>$z(e,n,i?i=>e[i][t]<=n:i=>e[i][t]<n),tF=(e,t,n)=>$z(e,n,(i=>e[i][t]>=n));const nF=["push","pop","shift","splice","unshift"];function iF(e,t){const n=e._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(t);-1!==r&&i.splice(r,1),i.length>0||(nF.forEach((t=>{delete e[t]})),delete e._chartjs)}function rF(e){const t=new Set;let n,i;for(n=0,i=e.length;n<i;++n)t.add(e[n]);return t.size===i?e:Array.from(t)}const sF="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function aF(e,t,n){const i=n||(e=>Array.prototype.slice.call(e));let r=!1,s=[];return function(){for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];s=i(a),r||(r=!0,sF.call(window,(()=>{r=!1,e.apply(t,s)})))}}const oF=e=>"start"===e?"left":"end"===e?"right":"center",lF=(e,t,n)=>"start"===e?t:"end"===e?n:(t+n)/2;function cF(e,t,n){const i=t.length;let r=0,s=i;if(e._sorted){const{iScale:a,_parsed:o}=e,l=a.axis,{min:c,max:u,minDefined:d,maxDefined:h}=a.getUserBounds();d&&(r=Zz(Math.min(eF(o,a.axis,c).lo,n?i:eF(t,l,a.getPixelForValue(c)).lo),0,i-1)),s=h?Zz(Math.max(eF(o,a.axis,u,!0).hi+1,n?0:eF(t,l,a.getPixelForValue(u),!0).hi+1),r,i)-r:i-r}return{start:r,count:s}}function uF(e){const{xScale:t,yScale:n,_scaleRanges:i}=e,r={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!i)return e._scaleRanges=r,!0;const s=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),s}const dF=e=>0===e||1===e,hF=(e,t,n)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*Nz/n),pF=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*Nz/n)+1,fF={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*Lz),easeOutSine:e=>Math.sin(e*Lz),easeInOutSine:e=>-.5*(Math.cos(Pz*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>dF(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>dF(e)?e:hF(e,.075,.3),easeOutElastic:e=>dF(e)?e:pF(e,.075,.3),easeInOutElastic(e){const t=.1125;return dF(e)?e:e<.5?.5*hF(2*e,t,.45):.5+.5*pF(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-fF.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInOutBounce:e=>e<.5?.5*fF.easeInBounce(2*e):.5*fF.easeOutBounce(2*e-1)+.5};function mF(e){return e+.5|0}const gF=(e,t,n)=>Math.max(Math.min(e,n),t);function vF(e){return gF(mF(2.55*e),0,255)}function yF(e){return gF(mF(255*e),0,255)}function xF(e){return gF(mF(e/2.55)/100,0,1)}function bF(e){return gF(mF(100*e),0,100)}const _F={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},wF=[..."0123456789ABCDEF"],SF=e=>wF[15&e],MF=e=>wF[(240&e)>>4]+wF[15&e],EF=e=>(240&e)>>4===(15&e);function TF(e){var t=(e=>EF(e.r)&&EF(e.g)&&EF(e.b)&&EF(e.a))(e)?SF:MF;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const CF=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function AF(e,t,n){const i=t*Math.min(n,1-n),r=function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return n-i*Math.max(Math.min(r-3,9-r,1),-1)};return[r(0),r(8),r(4)]}function PF(e,t,n){const i=function(i){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(i+e/60)%6;return n-n*t*Math.max(Math.min(r,4-r,1),0)};return[i(5),i(3),i(1)]}function NF(e,t,n){const i=AF(e,1,.5);let r;for(t+n>1&&(r=1/(t+n),t*=r,n*=r),r=0;r<3;r++)i[r]*=1-t-n,i[r]+=t;return i}function kF(e){const t=e.r/255,n=e.g/255,i=e.b/255,r=Math.max(t,n,i),s=Math.min(t,n,i),a=(r+s)/2;let o,l,c;return r!==s&&(c=r-s,l=a>.5?c/(2-r-s):c/(r+s),o=function(e,t,n,i,r){return e===r?(t-n)/i+(t<n?6:0):t===r?(n-e)/i+2:(e-t)/i+4}(t,n,i,c,r),o=60*o+.5),[0|o,l||0,a]}function RF(e,t,n,i){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,i)).map(yF)}function IF(e,t,n){return RF(AF,e,t,n)}function LF(e){return(e%360+360)%360}function jF(e){const t=CF.exec(e);let n,i=255;if(!t)return;t[5]!==n&&(i=t[6]?vF(+t[5]):yF(+t[5]));const r=LF(+t[2]),s=+t[3]/100,a=+t[4]/100;return n="hwb"===t[1]?function(e,t,n){return RF(NF,e,t,n)}(r,s,a):"hsv"===t[1]?function(e,t,n){return RF(PF,e,t,n)}(r,s,a):IF(r,s,a),{r:n[0],g:n[1],b:n[2],a:i}}const DF={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},OF={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let zF;function FF(e){zF||(zF=function(){const e={},t=Object.keys(OF),n=Object.keys(DF);let i,r,s,a,o;for(i=0;i<t.length;i++){for(a=o=t[i],r=0;r<n.length;r++)s=n[r],o=o.replace(s,DF[s]);s=parseInt(OF[a],16),e[o]=[s>>16&255,s>>8&255,255&s]}return e}(),zF.transparent=[0,0,0,0]);const t=zF[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const UF=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const BF=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,VF=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function HF(e,t,n){if(e){let i=kF(e);i[t]=Math.max(0,Math.min(i[t]+i[t]*n,0===t?360:1)),i=IF(i),e.r=i[0],e.g=i[1],e.b=i[2]}}function WF(e,t){return e?Object.assign(t||{},e):e}function GF(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=yF(e[3]))):(t=WF(e,{r:0,g:0,b:0,a:1})).a=yF(t.a),t}function qF(e){return"r"===e.charAt(0)?function(e){const t=UF.exec(e);let n,i,r,s=255;if(t){if(t[7]!==n){const e=+t[7];s=t[8]?vF(e):gF(255*e,0,255)}return n=+t[1],i=+t[3],r=+t[5],n=255&(t[2]?vF(n):gF(n,0,255)),i=255&(t[4]?vF(i):gF(i,0,255)),r=255&(t[6]?vF(r):gF(r,0,255)),{r:n,g:i,b:r,a:s}}}(e):jF(e)}class XF{constructor(e){if(e instanceof XF)return e;const t=typeof e;let n;"object"===t?n=GF(e):"string"===t&&(n=function(e){var t,n=e.length;return"#"===e[0]&&(4===n||5===n?t={r:255&17*_F[e[1]],g:255&17*_F[e[2]],b:255&17*_F[e[3]],a:5===n?17*_F[e[4]]:255}:7!==n&&9!==n||(t={r:_F[e[1]]<<4|_F[e[2]],g:_F[e[3]]<<4|_F[e[4]],b:_F[e[5]]<<4|_F[e[6]],a:9===n?_F[e[7]]<<4|_F[e[8]]:255})),t}(e)||FF(e)||qF(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=WF(this._rgb);return e&&(e.a=xF(e.a)),e}set rgb(e){this._rgb=GF(e)}rgbString(){return this._valid?(e=this._rgb)&&(e.a<255?"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(xF(e.a),")"):"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")")):void 0;var e}hexString(){return this._valid?TF(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=kF(e),n=t[0],i=bF(t[1]),r=bF(t[2]);return e.a<255?"hsla(".concat(n,", ").concat(i,"%, ").concat(r,"%, ").concat(xF(e.a),")"):"hsl(".concat(n,", ").concat(i,"%, ").concat(r,"%)")}(this._rgb):void 0}mix(e,t){if(e){const n=this.rgb,i=e.rgb;let r;const s=t===r?.5:t,a=2*s-1,o=n.a-i.a,l=((a*o===-1?a:(a+o)/(1+a*o))+1)/2;r=1-l,n.r=255&l*n.r+r*i.r+.5,n.g=255&l*n.g+r*i.g+.5,n.b=255&l*n.b+r*i.b+.5,n.a=s*n.a+(1-s)*i.a,this.rgb=n}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,n){const i=VF(xF(e.r)),r=VF(xF(e.g)),s=VF(xF(e.b));return{r:yF(BF(i+n*(VF(xF(t.r))-i))),g:yF(BF(r+n*(VF(xF(t.g))-r))),b:yF(BF(s+n*(VF(xF(t.b))-s))),a:e.a+n*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new XF(this.rgb)}alpha(e){return this._rgb.a=yF(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=mF(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return HF(this._rgb,2,e),this}darken(e){return HF(this._rgb,2,-e),this}saturate(e){return HF(this._rgb,1,e),this}desaturate(e){return HF(this._rgb,1,-e),this}rotate(e){return function(e,t){var n=kF(e);n[0]=LF(n[0]+t),n=IF(n),e.r=n[0],e.g=n[1],e.b=n[2]}(this._rgb,e),this}}function YF(e){return new XF(e)}function JF(e){if(e&&"object"===typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function KF(e){return JF(e)?e:YF(e)}function ZF(e){return JF(e)?e:YF(e).saturate(.5).darken(.1).hexString()}const QF=Object.create(null),$F=Object.create(null);function eU(e,t){if(!t)return e;const n=t.split(".");for(let i=0,r=n.length;i<r;++i){const t=n[i];e=e[t]||(e[t]=Object.create(null))}return e}function tU(e,t,n){return"string"===typeof t?bz(eU(e,t),n):bz(eU(e,""),t)}var nU=new class{constructor(e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>ZF(t.backgroundColor),this.hoverBorderColor=(e,t)=>ZF(t.borderColor),this.hoverColor=(e,t)=>ZF(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e)}set(e,t){return tU(this,e,t)}get(e){return eU(this,e)}describe(e,t){return tU($F,e,t)}override(e,t){return tU(QF,e,t)}route(e,t,n,i){const r=eU(this,e),s=eU(this,n),a="_"+t;Object.defineProperties(r,{[a]:{value:r[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[a],t=s[i];return cz(e)?Object.assign({},t,e):hz(e,t)},set(e){this[a]=e}}})}}({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function iU(e,t,n,i,r){let s=t[r];return s||(s=t[r]=e.measureText(r).width,n.push(r)),s>i&&(i=s),i}function rU(e,t,n,i){let r=(i=i||{}).data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(r=i.data={},s=i.garbageCollect=[],i.font=t),e.save(),e.font=t;let a=0;const o=n.length;let l,c,u,d,h;for(l=0;l<o;l++)if(d=n[l],void 0!==d&&null!==d&&!0!==lz(d))a=iU(e,r,s,a,d);else if(lz(d))for(c=0,u=d.length;c<u;c++)h=d[c],void 0===h||null===h||lz(h)||(a=iU(e,r,s,a,h));e.restore();const p=s.length/2;if(p>n.length){for(l=0;l<p;l++)delete r[s[l]];s.splice(0,p)}return a}function sU(e,t,n){const i=e.currentDevicePixelRatio,r=0!==n?Math.max(n/2,.5):0;return Math.round((t-r)*i)/i+r}function aU(e,t){(t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore()}function oU(e,t,n,i){lU(e,t,n,i,null)}function lU(e,t,n,i,r){let s,a,o,l,c,u;const d=t.pointStyle,h=t.rotation,p=t.radius;let f=(h||0)*Iz;if(d&&"object"===typeof d&&(s=d.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return e.save(),e.translate(n,i),e.rotate(f),e.drawImage(d,-d.width/2,-d.height/2,d.width,d.height),void e.restore();if(!(isNaN(p)||p<=0)){switch(e.beginPath(),d){default:r?e.ellipse(n,i,r/2,p,0,0,Nz):e.arc(n,i,p,0,Nz),e.closePath();break;case"triangle":e.moveTo(n+Math.sin(f)*p,i-Math.cos(f)*p),f+=Dz,e.lineTo(n+Math.sin(f)*p,i-Math.cos(f)*p),f+=Dz,e.lineTo(n+Math.sin(f)*p,i-Math.cos(f)*p),e.closePath();break;case"rectRounded":c=.516*p,l=p-c,a=Math.cos(f+jz)*l,o=Math.sin(f+jz)*l,e.arc(n-a,i-o,c,f-Pz,f-Lz),e.arc(n+o,i-a,c,f-Lz,f),e.arc(n+a,i+o,c,f,f+Lz),e.arc(n-o,i+a,c,f+Lz,f+Pz),e.closePath();break;case"rect":if(!h){l=Math.SQRT1_2*p,u=r?r/2:l,e.rect(n-u,i-l,2*u,2*l);break}f+=jz;case"rectRot":a=Math.cos(f)*p,o=Math.sin(f)*p,e.moveTo(n-a,i-o),e.lineTo(n+o,i-a),e.lineTo(n+a,i+o),e.lineTo(n-o,i+a),e.closePath();break;case"crossRot":f+=jz;case"cross":a=Math.cos(f)*p,o=Math.sin(f)*p,e.moveTo(n-a,i-o),e.lineTo(n+a,i+o),e.moveTo(n+o,i-a),e.lineTo(n-o,i+a);break;case"star":a=Math.cos(f)*p,o=Math.sin(f)*p,e.moveTo(n-a,i-o),e.lineTo(n+a,i+o),e.moveTo(n+o,i-a),e.lineTo(n-o,i+a),f+=jz,a=Math.cos(f)*p,o=Math.sin(f)*p,e.moveTo(n-a,i-o),e.lineTo(n+a,i+o),e.moveTo(n+o,i-a),e.lineTo(n-o,i+a);break;case"line":a=r?r/2:Math.cos(f)*p,o=Math.sin(f)*p,e.moveTo(n-a,i-o),e.lineTo(n+a,i+o);break;case"dash":e.moveTo(n,i),e.lineTo(n+Math.cos(f)*p,i+Math.sin(f)*p)}e.fill(),t.borderWidth>0&&e.stroke()}}function cU(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function uU(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function dU(e){e.restore()}function hU(e,t,n,i,r){if(!t)return e.lineTo(n.x,n.y);if("middle"===r){const i=(t.x+n.x)/2;e.lineTo(i,t.y),e.lineTo(i,n.y)}else"after"===r!==!!i?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function pU(e,t,n,i){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function fU(e,t,n,i,r){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=lz(t)?t:[t],o=s.strokeWidth>0&&""!==s.strokeColor;let l,c;for(e.save(),e.font=r.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]);oz(t.rotation)||e.rotate(t.rotation);t.color&&(e.fillStyle=t.color);t.textAlign&&(e.textAlign=t.textAlign);t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,s),l=0;l<a.length;++l)c=a[l],o&&(s.strokeColor&&(e.strokeStyle=s.strokeColor),oz(s.strokeWidth)||(e.lineWidth=s.strokeWidth),e.strokeText(c,n,i,s.maxWidth)),e.fillText(c,n,i,s.maxWidth),mU(e,n,i,c,s),i+=r.lineHeight;e.restore()}function mU(e,t,n,i,r){if(r.strikethrough||r.underline){const s=e.measureText(i),a=t-s.actualBoundingBoxLeft,o=t+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,u=r.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=r.decorationWidth||2,e.moveTo(a,u),e.lineTo(o,u),e.stroke()}}function gU(e,t){const{x:n,y:i,w:r,h:s,radius:a}=t;e.arc(n+a.topLeft,i+a.topLeft,a.topLeft,-Lz,Pz,!0),e.lineTo(n,i+s-a.bottomLeft),e.arc(n+a.bottomLeft,i+s-a.bottomLeft,a.bottomLeft,Pz,Lz,!0),e.lineTo(n+r-a.bottomRight,i+s),e.arc(n+r-a.bottomRight,i+s-a.bottomRight,a.bottomRight,Lz,0,!0),e.lineTo(n+r,i+a.topRight),e.arc(n+r-a.topRight,i+a.topRight,a.topRight,0,-Lz,!0),e.lineTo(n+a.topLeft,i)}const vU=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),yU=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function xU(e,t){const n=(""+e).match(vU);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e}function bU(e,t){const n={},i=cz(t),r=i?Object.keys(t):t,s=cz(e)?i?n=>hz(e[n],e[t[n]]):t=>e[t]:()=>e;for(const a of r)n[a]=+s(a)||0;return n}function _U(e){return bU(e,{top:"y",right:"x",bottom:"y",left:"x"})}function wU(e){return bU(e,["topLeft","topRight","bottomLeft","bottomRight"])}function SU(e){const t=_U(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function MU(e,t){e=e||{},t=t||nU.font;let n=hz(e.size,t.size);"string"===typeof n&&(n=parseInt(n,10));let i=hz(e.style,t.style);i&&!(""+i).match(yU)&&(console.warn('Invalid font style specified: "'+i+'"'),i="");const r={family:hz(e.family,t.family),lineHeight:xU(hz(e.lineHeight,t.lineHeight),n),size:n,style:i,weight:hz(e.weight,t.weight),string:""};return r.string=function(e){return!e||oz(e.size)||oz(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(r),r}function EU(e,t,n,i){let r,s,a,o=!0;for(r=0,s=e.length;r<s;++r)if(a=e[r],void 0!==a&&(void 0!==t&&"function"===typeof a&&(a=a(t),o=!1),void 0!==n&&lz(a)&&(a=a[n%a.length],o=!1),void 0!==a))return i&&!o&&(i.cacheable=!1),a}function TU(e,t){return Object.assign(Object.create(e),t)}function CU(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>e[0];Tz(i)||(i=zU("_fallback",e));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:n,_fallback:i,_getTarget:r,override:r=>CU([r,...e],t,n,i)};return new Proxy(s,{deleteProperty:(t,n)=>(delete t[n],delete t._keys,delete e[0][n],!0),get:(n,i)=>RU(n,i,(()=>function(e,t,n,i){let r;for(const s of t)if(r=zU(NU(s,e),n),Tz(r))return kU(e,r)?DU(n,i,e,r):r}(i,t,e,n))),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>FU(e).includes(t),ownKeys:e=>FU(e),set(e,t,n){const i=e._storage||(e._storage=r());return e[t]=i[t]=n,delete e._keys,!0}})}function AU(e,t,n,i){const r={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:PU(e,i),setContext:t=>AU(e,t,n,i),override:r=>AU(e.override(r),t,n,i)};return new Proxy(r,{deleteProperty:(t,n)=>(delete t[n],delete e[n],!0),get:(e,t,n)=>RU(e,t,(()=>function(e,t,n){const{_proxy:i,_context:r,_subProxy:s,_descriptors:a}=e;let o=i[t];Cz(o)&&a.isScriptable(t)&&(o=function(e,t,n,i){const{_proxy:r,_context:s,_subProxy:a,_stack:o}=n;if(o.has(e))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+e);o.add(e),t=t(s,a||i),o.delete(e),kU(e,t)&&(t=DU(r._scopes,r,e,t));return t}(t,o,e,n));lz(o)&&o.length&&(o=function(e,t,n,i){const{_proxy:r,_context:s,_subProxy:a,_descriptors:o}=n;if(Tz(s.index)&&i(e))t=t[s.index%t.length];else if(cz(t[0])){const n=t,i=r._scopes.filter((e=>e!==n));t=[];for(const l of n){const n=DU(i,r,e,l);t.push(AU(n,s,a&&a[e],o))}}return t}(t,o,e,a.isIndexable));kU(t,o)&&(o=AU(o,r,s&&s[t],a));return o}(e,t,n))),getOwnPropertyDescriptor:(t,n)=>t._descriptors.allKeys?Reflect.has(e,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,n),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,n)=>Reflect.has(e,n),ownKeys:()=>Reflect.ownKeys(e),set:(t,n,i)=>(e[n]=i,delete t[n],!0)})}function PU(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:n=t.scriptable,_indexable:i=t.indexable,_allKeys:r=t.allKeys}=e;return{allKeys:r,scriptable:n,indexable:i,isScriptable:Cz(n)?n:()=>n,isIndexable:Cz(i)?i:()=>i}}const NU=(e,t)=>e?e+Ez(t):t,kU=(e,t)=>cz(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function RU(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t))return e[t];const i=n();return e[t]=i,i}function IU(e,t,n){return Cz(e)?e(t,n):e}const LU=(e,t)=>!0===e?t:"string"===typeof e?Mz(t,e):void 0;function jU(e,t,n,i,r){for(const s of t){const t=LU(n,s);if(t){e.add(t);const s=IU(t._fallback,n,r);if(Tz(s)&&s!==n&&s!==i)return s}else if(!1===t&&Tz(i)&&n!==i)return null}return!1}function DU(e,t,n,i){const r=t._rootScopes,s=IU(t._fallback,n,i),a=[...e,...r],o=new Set;o.add(i);let l=OU(o,a,n,s||n,i);return null!==l&&((!Tz(s)||s===n||(l=OU(o,a,s,l,i),null!==l))&&CU(Array.from(o),[""],r,s,(()=>function(e,t,n){const i=e._getTarget();t in i||(i[t]={});const r=i[t];if(lz(r)&&cz(n))return n;return r}(t,n,i))))}function OU(e,t,n,i,r){for(;n;)n=jU(e,t,n,i,r);return n}function zU(e,t){for(const n of t){if(!n)continue;const t=n[e];if(Tz(t))return t}}function FU(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const n of e)for(const e of Object.keys(n).filter((e=>!e.startsWith("_"))))t.add(e);return Array.from(t)}(e._scopes)),t}function UU(e,t,n,i){const{iScale:r}=e,{key:s="r"}=this._parsing,a=new Array(i);let o,l,c,u;for(o=0,l=i;o<l;++o)c=o+n,u=t[c],a[o]={r:r.parse(Mz(u,s),c)};return a}const BU=Number.EPSILON||1e-14,VU=(e,t)=>t<e.length&&!e[t].skip&&e[t],HU=e=>"x"===e?"y":"x";function WU(e,t,n,i){const r=e.skip?t:e,s=t,a=n.skip?t:n,o=Xz(s,r),l=Xz(a,s);let c=o/(o+l),u=l/(o+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=i*c,h=i*u;return{previous:{x:s.x-d*(a.x-r.x),y:s.y-d*(a.y-r.y)},next:{x:s.x+h*(a.x-r.x),y:s.y+h*(a.y-r.y)}}}function GU(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const n=HU(t),i=e.length,r=Array(i).fill(0),s=Array(i);let a,o,l,c=VU(e,0);for(a=0;a<i;++a)if(o=l,l=c,c=VU(e,a+1),l){if(c){const e=c[t]-l[t];r[a]=0!==e?(c[n]-l[n])/e:0}s[a]=o?c?zz(r[a-1])!==zz(r[a])?0:(r[a-1]+r[a])/2:r[a-1]:r[a]}!function(e,t,n){const i=e.length;let r,s,a,o,l,c=VU(e,0);for(let u=0;u<i-1;++u)l=c,c=VU(e,u+1),l&&c&&(Bz(t[u],0,BU)?n[u]=n[u+1]=0:(r=n[u]/t[u],s=n[u+1]/t[u],o=Math.pow(r,2)+Math.pow(s,2),o<=9||(a=3/Math.sqrt(o),n[u]=r*a*t[u],n[u+1]=s*a*t[u])))}(e,r,s),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const i=HU(n),r=e.length;let s,a,o,l=VU(e,0);for(let c=0;c<r;++c){if(a=o,o=l,l=VU(e,c+1),!o)continue;const r=o[n],u=o[i];a&&(s=(r-a[n])/3,o["cp1".concat(n)]=r-s,o["cp1".concat(i)]=u-s*t[c]),l&&(s=(l[n]-r)/3,o["cp2".concat(n)]=r+s,o["cp2".concat(i)]=u+s*t[c])}}(e,s,t)}function qU(e,t,n){return Math.max(Math.min(e,n),t)}function XU(e,t,n,i,r){let s,a,o,l;if(t.spanGaps&&(e=e.filter((e=>!e.skip))),"monotone"===t.cubicInterpolationMode)GU(e,r);else{let n=i?e[e.length-1]:e[0];for(s=0,a=e.length;s<a;++s)o=e[s],l=WU(n,o,e[Math.min(s+1,a-(i?0:1))%a],t.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,n=o}t.capBezierPoints&&function(e,t){let n,i,r,s,a,o=cU(e[0],t);for(n=0,i=e.length;n<i;++n)a=s,s=o,o=n<i-1&&cU(e[n+1],t),s&&(r=e[n],a&&(r.cp1x=qU(r.cp1x,t.left,t.right),r.cp1y=qU(r.cp1y,t.top,t.bottom)),o&&(r.cp2x=qU(r.cp2x,t.left,t.right),r.cp2y=qU(r.cp2y,t.top,t.bottom)))}(e,n)}function YU(){return"undefined"!==typeof window&&"undefined"!==typeof document}function JU(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function KU(e,t,n){let i;return"string"===typeof e?(i=parseInt(e,10),-1!==e.indexOf("%")&&(i=i/100*t.parentNode[n])):i=e,i}const ZU=e=>window.getComputedStyle(e,null);const QU=["top","right","bottom","left"];function $U(e,t,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const s=QU[r];i[s]=parseFloat(e[t+"-"+s+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}function eB(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:i}=t,r=ZU(n),s="border-box"===r.boxSizing,a=$U(r,"padding"),o=$U(r,"border","width"),{x:l,y:c,box:u}=function(e,t){const n=e.touches,i=n&&n.length?n[0]:e,{offsetX:r,offsetY:s}=i;let a,o,l=!1;if(((e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot))(r,s,e.target))a=r,o=s;else{const e=t.getBoundingClientRect();a=i.clientX-e.left,o=i.clientY-e.top,l=!0}return{x:a,y:o,box:l}}(e,n),d=a.left+(u&&o.left),h=a.top+(u&&o.top);let{width:p,height:f}=t;return s&&(p-=a.width+o.width,f-=a.height+o.height),{x:Math.round((l-d)/p*n.width/i),y:Math.round((c-h)/f*n.height/i)}}const tB=e=>Math.round(10*e)/10;function nB(e,t,n,i){const r=ZU(e),s=$U(r,"margin"),a=KU(r.maxWidth,e,"clientWidth")||Rz,o=KU(r.maxHeight,e,"clientHeight")||Rz,l=function(e,t,n){let i,r;if(void 0===t||void 0===n){const s=JU(e);if(s){const e=s.getBoundingClientRect(),a=ZU(s),o=$U(a,"border","width"),l=$U(a,"padding");t=e.width-l.width-o.width,n=e.height-l.height-o.height,i=KU(a.maxWidth,s,"clientWidth"),r=KU(a.maxHeight,s,"clientHeight")}else t=e.clientWidth,n=e.clientHeight}return{width:t,height:n,maxWidth:i||Rz,maxHeight:r||Rz}}(e,t,n);let{width:c,height:u}=l;if("content-box"===r.boxSizing){const e=$U(r,"border","width"),t=$U(r,"padding");c-=t.width+e.width,u-=t.height+e.height}return c=Math.max(0,c-s.width),u=Math.max(0,i?Math.floor(c/i):u-s.height),c=tB(Math.min(c,a,l.maxWidth)),u=tB(Math.min(u,o,l.maxHeight)),c&&!u&&(u=tB(c/2)),{width:c,height:u}}function iB(e,t,n){const i=t||1,r=Math.floor(e.height*i),s=Math.floor(e.width*i);e.height=r/i,e.width=s/i;const a=e.canvas;return a.style&&(n||!a.style.height&&!a.style.width)&&(a.style.height="".concat(e.height,"px"),a.style.width="".concat(e.width,"px")),(e.currentDevicePixelRatio!==i||a.height!==r||a.width!==s)&&(e.currentDevicePixelRatio=i,a.height=r,a.width=s,e.ctx.setTransform(i,0,0,i,0,0),!0)}const rB=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(oq){}return e}();function sB(e,t){const n=function(e,t){return ZU(e).getPropertyValue(t)}(e,t),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function aB(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function oB(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:"middle"===i?n<.5?e.y:t.y:"after"===i?n<1?e.y:t.y:n>0?t.y:e.y}}function lB(e,t,n,i){const r={x:e.cp2x,y:e.cp2y},s={x:t.cp1x,y:t.cp1y},a=aB(e,r,n),o=aB(r,s,n),l=aB(s,t,n),c=aB(a,o,n),u=aB(o,l,n);return aB(c,u,n)}const cB=new Map;function uB(e,t,n){return function(e,t){t=t||{};const n=e+JSON.stringify(t);let i=cB.get(n);return i||(i=new Intl.NumberFormat(e,t),cB.set(n,i)),i}(t,n).format(e)}function dB(e,t,n){return e?function(e,t){return{x:n=>e+e+t-n,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,n):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function hB(e,t){let n,i;"ltr"!==t&&"rtl"!==t||(n=e.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=i)}function pB(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function fB(e){return"angle"===e?{between:Kz,compare:Yz,normalize:Jz}:{between:Qz,compare:(e,t)=>e-t,normalize:e=>e}}function mB(e){let{start:t,end:n,count:i,loop:r,style:s}=e;return{start:t%i,end:n%i,loop:r&&(n-t+1)%i===0,style:s}}function gB(e,t,n){if(!n)return[e];const{property:i,start:r,end:s}=n,a=t.length,{compare:o,between:l,normalize:c}=fB(i),{start:u,end:d,loop:h,style:p}=function(e,t,n){const{property:i,start:r,end:s}=n,{between:a,normalize:o}=fB(i),l=t.length;let c,u,{start:d,end:h,loop:p}=e;if(p){for(d+=l,h+=l,c=0,u=l;c<u&&a(o(t[d%l][i]),r,s);++c)d--,h--;d%=l,h%=l}return h<d&&(h+=l),{start:d,end:h,loop:p,style:e.style}}(e,t,n),f=[];let m,g,v,y=!1,x=null;const b=()=>y||l(r,v,m)&&0!==o(r,v),_=()=>!y||0===o(s,m)||l(s,v,m);for(let w=u,S=u;w<=d;++w)g=t[w%a],g.skip||(m=c(g[i]),m!==v&&(y=l(m,r,s),null===x&&b()&&(x=0===o(m,r)?w:S),null!==x&&_()&&(f.push(mB({start:x,end:w,loop:h,count:a,style:p})),x=null),S=w,v=m));return null!==x&&f.push(mB({start:x,end:d,loop:h,count:a,style:p})),f}function vB(e,t){const n=[],i=e.segments;for(let r=0;r<i.length;r++){const s=gB(i[r],e.points,t);s.length&&n.push(...s)}return n}function yB(e,t,n,i){return i&&i.setContext&&n?function(e,t,n,i){const r=e._chart.getContext(),s=xB(e.options),{_datasetIndex:a,options:{spanGaps:o}}=e,l=n.length,c=[];let u=s,d=t[0].start,h=d;function p(e,t,i,r){const s=o?-1:1;if(e!==t){for(e+=l;n[e%l].skip;)e-=s;for(;n[t%l].skip;)t+=s;e%l!==t%l&&(c.push({start:e%l,end:t%l,loop:i,style:r}),u=r,d=t%l)}}for(const f of t){d=o?d:f.start;let e,t=n[d%l];for(h=d+1;h<=f.end;h++){const s=n[h%l];e=xB(i.setContext(TU(r,{type:"segment",p0:t,p1:s,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:a}))),bB(e,u)&&p(d,h-1,f.loop,u),t=s,u=e}d<h-1&&p(d,h-1,f.loop,u)}return c}(e,t,n,i):t}function xB(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function bB(e,t){return t&&JSON.stringify(e)!==JSON.stringify(t)}var _B=new class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,i){const r=t.listeners[i],s=t.duration;r.forEach((i=>i({chart:e,initial:t.initial,numSteps:s,currentStep:Math.min(n-t.start,s)})))}_refresh(){this._request||(this._running=!0,this._request=sF.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=0;this._charts.forEach(((n,i)=>{if(!n.running||!n.items.length)return;const r=n.items;let s,a=r.length-1,o=!1;for(;a>=0;--a)s=r[a],s._active?(s._total>n.duration&&(n.duration=s._total),s.tick(e),o=!0):(r[a]=r[r.length-1],r.pop());o&&(i.draw(),this._notify(i,n,e,"progress")),r.length||(n.running=!1,this._notify(i,n,e,"complete"),n.initial=!1),t+=r.length})),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce(((e,t)=>Math.max(e,t._duration)),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const n=t.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}};const wB="transparent",SB={boolean:(e,t,n)=>n>.5?t:e,color(e,t,n){const i=KF(e||wB),r=i.valid&&KF(t||wB);return r&&r.valid?r.mix(i,n).hexString():t},number:(e,t,n)=>e+(t-e)*n};class MB{constructor(e,t,n,i){const r=t[n];i=EU([e.to,i,r,e.from]);const s=EU([e.from,r,i]);this._active=!0,this._fn=e.fn||SB[e.type||typeof s],this._easing=fF[e.easing]||fF.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=s,this._to=i,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);const i=this._target[this._prop],r=n-this._start,s=this._duration-r;this._start=n,this._duration=Math.floor(Math.max(s,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=EU([e.to,t,i,e.from]),this._from=EU([e.from,i,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,n=this._duration,i=this._prop,r=this._from,s=this._loop,a=this._to;let o;if(this._active=r!==a&&(s||t<n),!this._active)return this._target[i]=a,void this._notify(!0);t<0?this._target[i]=r:(o=t/n%2,o=s&&o>1?2-o:o,o=this._easing(Math.min(1,Math.max(0,o))),this._target[i]=this._fn(r,a,o))}wait(){const e=this._promises||(this._promises=[]);return new Promise(((t,n)=>{e.push({res:t,rej:n})}))}_notify(e){const t=e?"res":"rej",n=this._promises||[];for(let i=0;i<n.length;i++)n[i][t]()}}nU.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const EB=Object.keys(nU.animation);nU.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),nU.set("animations",{colors:{type:"color",properties:["color","borderColor","backgroundColor"]},numbers:{type:"number",properties:["x","y","borderWidth","radius","tension"]}}),nU.describe("animations",{_fallback:"animation"}),nU.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}});class TB{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!cz(e))return;const t=this._properties;Object.getOwnPropertyNames(e).forEach((n=>{const i=e[n];if(!cz(i))return;const r={};for(const e of EB)r[e]=i[e];(lz(i.properties)&&i.properties||[n]).forEach((e=>{e!==n&&t.has(e)||t.set(e,r)}))}))}_animateOptions(e,t){const n=t.options,i=function(e,t){if(!t)return;let n=e.options;if(!n)return void(e.options=t);n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(e,n);if(!i)return[];const r=this._createAnimations(i,n);return n.$shared&&function(e,t){const n=[],i=Object.keys(t);for(let r=0;r<i.length;r++){const t=e[i[r]];t&&t.active()&&n.push(t.wait())}return Promise.all(n)}(e.options.$animations,n).then((()=>{e.options=n}),(()=>{})),r}_createAnimations(e,t){const n=this._properties,i=[],r=e.$animations||(e.$animations={}),s=Object.keys(t),a=Date.now();let o;for(o=s.length-1;o>=0;--o){const l=s[o];if("$"===l.charAt(0))continue;if("options"===l){i.push(...this._animateOptions(e,t));continue}const c=t[l];let u=r[l];const d=n.get(l);if(u){if(d&&u.active()){u.update(d,c,a);continue}u.cancel()}d&&d.duration?(r[l]=u=new MB(d,e,l,c),i.push(u)):e[l]=c}return i}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const n=this._createAnimations(e,t);return n.length?(_B.add(this._chart,n),!0):void 0}}function CB(e,t){const n=e&&e.options||{},i=n.reverse,r=void 0===n.min?t:0,s=void 0===n.max?t:0;return{start:i?s:r,end:i?r:s}}function AB(e,t){const n=[],i=e._getSortedDatasetMetas(t);let r,s;for(r=0,s=i.length;r<s;++r)n.push(i[r].index);return n}function PB(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const r=e.keys,s="single"===i.mode;let a,o,l,c;if(null!==t){for(a=0,o=r.length;a<o;++a){if(l=+r[a],l===n){if(i.all)continue;break}c=e.values[l],uz(c)&&(s||0===t||zz(t)===zz(c))&&(t+=c)}return t}}function NB(e,t){const n=e&&e.options.stacked;return n||void 0===n&&void 0!==t.stack}function kB(e,t,n){const i=e[t]||(e[t]={});return i[n]||(i[n]={})}function RB(e,t,n,i){for(const r of t.getMatchingVisibleMetas(i).reverse()){const t=e[r.index];if(n&&t>0||!n&&t<0)return r.index}return null}function IB(e,t){const{chart:n,_cachedMeta:i}=e,r=n._stacks||(n._stacks={}),{iScale:s,vScale:a,index:o}=i,l=s.axis,c=a.axis,u=function(e,t,n){return"".concat(e.id,".").concat(t.id,".").concat(n.stack||n.type)}(s,a,i),d=t.length;let h;for(let p=0;p<d;++p){const e=t[p],{[l]:n,[c]:s}=e;h=(e._stacks||(e._stacks={}))[c]=kB(r,u,n),h[o]=s,h._top=RB(h,a,!0,i.type),h._bottom=RB(h,a,!1,i.type)}}function LB(e,t){const n=e.scales;return Object.keys(n).filter((e=>n[e].axis===t)).shift()}function jB(e,t){const n=e.controller.index,i=e.vScale&&e.vScale.axis;if(i){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[i]||void 0===t[i][n])return;delete t[i][n]}}}const DB=e=>"reset"===e||"none"===e,OB=(e,t)=>t?e:Object.assign({},e);class zB{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=NB(e.vScale,e),this.addElements()}updateIndex(e){this.index!==e&&jB(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,n=this.getDataset(),i=(e,t,n,i)=>"x"===e?t:"r"===e?i:n,r=t.xAxisID=hz(n.xAxisID,LB(e,"x")),s=t.yAxisID=hz(n.yAxisID,LB(e,"y")),a=t.rAxisID=hz(n.rAxisID,LB(e,"r")),o=t.indexAxis,l=t.iAxisID=i(o,r,s,a),c=t.vAxisID=i(o,s,r,a);t.xScale=this.getScaleForId(r),t.yScale=this.getScaleForId(s),t.rScale=this.getScaleForId(a),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&iF(this._data,this),e._stacked&&jB(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(cz(t))this._data=function(e){const t=Object.keys(e),n=new Array(t.length);let i,r,s;for(i=0,r=t.length;i<r;++i)s=t[i],n[i]={x:s,y:e[s]};return n}(t);else if(n!==t){if(n){iF(n,this);const e=this._cachedMeta;jB(e),e._parsed=[]}t&&Object.isExtensible(t)&&(r=this,(i=t)._chartjs?i._chartjs.listeners.push(r):(Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[r]}}),nF.forEach((e=>{const t="_onData"+Ez(e),n=i[e];Object.defineProperty(i,e,{configurable:!0,enumerable:!1,value(){for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];const a=n.apply(this,r);return i._chartjs.listeners.forEach((e=>{"function"===typeof e[t]&&e[t](...r)})),a}})})))),this._syncList=[],this._data=t}var i,r}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const r=t._stacked;t._stacked=NB(t.vScale,t),t.stack!==n.stack&&(i=!0,jB(t),t.stack=n.stack),this._resyncElements(e),(i||r!==t._stacked)&&IB(this,t._parsed)}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:n,_data:i}=this,{iScale:r,_stacked:s}=n,a=r.axis;let o,l,c,u=0===e&&t===i.length||n._sorted,d=e>0&&n._parsed[e-1];if(!1===this._parsing)n._parsed=i,n._sorted=!0,c=i;else{c=lz(i[e])?this.parseArrayData(n,i,e,t):cz(i[e])?this.parseObjectData(n,i,e,t):this.parsePrimitiveData(n,i,e,t);const r=()=>null===l[a]||d&&l[a]<d[a];for(o=0;o<t;++o)n._parsed[o+e]=l=c[o],u&&(r()&&(u=!1),d=l);n._sorted=u}s&&IB(this,c)}parsePrimitiveData(e,t,n,i){const{iScale:r,vScale:s}=e,a=r.axis,o=s.axis,l=r.getLabels(),c=r===s,u=new Array(i);let d,h,p;for(d=0,h=i;d<h;++d)p=d+n,u[d]={[a]:c||r.parse(l[p],p),[o]:s.parse(t[p],p)};return u}parseArrayData(e,t,n,i){const{xScale:r,yScale:s}=e,a=new Array(i);let o,l,c,u;for(o=0,l=i;o<l;++o)c=o+n,u=t[c],a[o]={x:r.parse(u[0],c),y:s.parse(u[1],c)};return a}parseObjectData(e,t,n,i){const{xScale:r,yScale:s}=e,{xAxisKey:a="x",yAxisKey:o="y"}=this._parsing,l=new Array(i);let c,u,d,h;for(c=0,u=i;c<u;++c)d=c+n,h=t[d],l[c]={x:r.parse(Mz(h,a),d),y:s.parse(Mz(h,o),d)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,n){const i=this.chart,r=this._cachedMeta,s=t[e.axis];return PB({keys:AB(i,!0),values:t._stacks[e.axis]},s,r.index,{mode:n})}updateRangeFromParsed(e,t,n,i){const r=n[t.axis];let s=null===r?NaN:r;const a=i&&n._stacks[t.axis];i&&a&&(i.values=a,s=PB(i,r,this._cachedMeta.index)),e.min=Math.min(e.min,s),e.max=Math.max(e.max,s)}getMinMax(e,t){const n=this._cachedMeta,i=n._parsed,r=n._sorted&&e===n.iScale,s=i.length,a=this._getOtherScale(e),o=((e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:AB(n,!0),values:null})(t,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:u}=function(e){const{min:t,max:n,minDefined:i,maxDefined:r}=e.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}(a);let d,h;function p(){h=i[d];const t=h[a.axis];return!uz(h[e.axis])||c>t||u<t}for(d=0;d<s&&(p()||(this.updateRangeFromParsed(l,e,h,o),!r));++d);if(r)for(d=s-1;d>=0;--d)if(!p()){this.updateRangeFromParsed(l,e,h,o);break}return l}getAllParsedValues(e){const t=this._cachedMeta._parsed,n=[];let i,r,s;for(i=0,r=t.length;i<r;++i)s=t[i][e.axis],uz(s)&&n.push(s);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,n=t.iScale,i=t.vScale,r=this.getParsed(e);return{label:n?""+n.getLabelForValue(r[n.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,n,i,r;return cz(e)?(t=e.top,n=e.right,i=e.bottom,r=e.left):t=n=i=r=e,{top:t,right:n,bottom:i,left:r,disabled:!1===e}}(hz(this.options.clip,function(e,t,n){if(!1===n)return!1;const i=CB(e,n),r=CB(t,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,n=this._cachedMeta,i=n.data||[],r=t.chartArea,s=[],a=this._drawStart||0,o=this._drawCount||i.length-a,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(e,r,a,o),c=a;c<a+o;++c){const t=i[c];t.hidden||(t.active&&l?s.push(t):t.draw(e,r))}for(c=0;c<s.length;++c)s[c].draw(e,r)}getStyle(e,t){const n=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,t,n){const i=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];r=t.$context||(t.$context=function(e,t,n){return TU(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),r.parsed=this.getParsed(e),r.raw=i.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=function(e,t){return TU(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!t,r.mode=n,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2?arguments[2]:void 0;const i="active"===t,r=this._cachedDataOpts,s=e+"-"+t,a=r[s],o=this.enableOptionSharing&&Tz(n);if(a)return OB(a,o);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),u=i?["".concat(e,"Hover"),"hover",e,""]:[e,""],d=l.getOptionScopes(this.getDataset(),c),h=Object.keys(nU.elements[e]),p=l.resolveNamedOptions(d,h,(()=>this.getContext(n,i)),u);return p.$shared&&(p.$shared=o,r[s]=Object.freeze(OB(p,o))),p}_resolveAnimations(e,t,n){const i=this.chart,r=this._cachedDataOpts,s="animation-".concat(t),a=r[s];if(a)return a;let o;if(!1!==i.options.animation){const i=this.chart.config,r=i.datasetAnimationScopeKeys(this._type,t),s=i.getOptionScopes(this.getDataset(),r);o=i.createResolver(s,this.getContext(e,n,t))}const l=new TB(i,o&&o.animations);return o&&o._cacheable&&(r[s]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||DB(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const n=this.resolveDataElementOptions(e,t),i=this._sharedOptions,r=this.getSharedOptions(n),s=this.includeOptions(t,r)||r!==i;return this.updateSharedOptions(r,t,n),{sharedOptions:r,includeOptions:s}}updateElement(e,t,n,i){DB(i)?Object.assign(e,n):this._resolveAnimations(t,i).update(e,n)}updateSharedOptions(e,t,n){e&&!DB(t)&&this._resolveAnimations(void 0,t).update(e,n)}_setStyle(e,t,n,i){e.active=i;const r=this.getStyle(t,i);this._resolveAnimations(t,n,i).update(e,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(e,t,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,t,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,n=this._cachedMeta.data;for(const[a,o,l]of this._syncList)this[a](o,l);this._syncList=[];const i=n.length,r=t.length,s=Math.min(r,i);s&&this.parse(0,s),r>i?this._insertElements(i,r-i,e):r<i&&this._removeElements(r,i-r)}_insertElements(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=this._cachedMeta,r=i.data,s=e+t;let a;const o=e=>{for(e.length+=t,a=e.length-1;a>=s;a--)e[a]=e[a-t]};for(o(r),a=e;a<s;++a)r[a]=new this.dataElementType;this._parsing&&o(i._parsed),this.parse(e,t),n&&this.updateElements(r,e,t,"reset")}updateElements(e,t,n,i){}_removeElements(e,t){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(e,t);n._stacked&&jB(n,i)}n.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,n,i]=e;this[t](n,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function FB(e){const t=e.iScale,n=function(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let i=[];for(let t=0,r=n.length;t<r;t++)i=i.concat(n[t].controller.getAllParsedValues(e));e._cache.$bar=rF(i.sort(((e,t)=>e-t)))}return e._cache.$bar}(t,e.type);let i,r,s,a,o=t._length;const l=()=>{32767!==s&&-32768!==s&&(Tz(a)&&(o=Math.min(o,Math.abs(s-a)||o)),a=s)};for(i=0,r=n.length;i<r;++i)s=t.getPixelForValue(n[i]),l();for(a=void 0,i=0,r=t.ticks.length;i<r;++i)s=t.getPixelForTick(i),l();return o}function UB(e,t,n,i){return lz(e)?function(e,t,n,i){const r=n.parse(e[0],i),s=n.parse(e[1],i),a=Math.min(r,s),o=Math.max(r,s);let l=a,c=o;Math.abs(a)>Math.abs(o)&&(l=o,c=a),t[n.axis]=c,t._custom={barStart:l,barEnd:c,start:r,end:s,min:a,max:o}}(e,t,n,i):t[n.axis]=n.parse(e,i),t}function BB(e,t,n,i){const r=e.iScale,s=e.vScale,a=r.getLabels(),o=r===s,l=[];let c,u,d,h;for(c=n,u=n+i;c<u;++c)h=t[c],d={},d[r.axis]=o||r.parse(a[c],c),l.push(UB(h,d,s,c));return l}function VB(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function HB(e,t,n,i){let r=t.borderSkipped;const s={};if(!r)return void(e.borderSkipped=s);if(!0===r)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:a,end:o,reverse:l,top:c,bottom:u}=function(e){let t,n,i,r,s;return e.horizontal?(t=e.base>e.x,n="left",i="right"):(t=e.base<e.y,n="bottom",i="top"),t?(r="end",s="start"):(r="start",s="end"),{start:n,end:i,reverse:t,top:r,bottom:s}}(e);"middle"===r&&n&&(e.enableBorderRadius=!0,(n._top||0)===i?r=c:(n._bottom||0)===i?r=u:(s[WB(u,a,o,l)]=!0,r=c)),s[WB(r,a,o,l)]=!0,e.borderSkipped=s}function WB(e,t,n,i){return i?(e=function(e,t,n){return e===t?n:e===n?t:e}(e,t,n),e=GB(e,n,t)):e=GB(e,t,n),e}function GB(e,t,n){return"start"===e?t:"end"===e?n:e}function qB(e,t,n){let{inflateAmount:i}=t;e.inflateAmount="auto"===i?1===n?.33:0:i}zB.defaults={},zB.prototype.datasetElementType=null,zB.prototype.dataElementType=null;class XB extends zB{parsePrimitiveData(e,t,n,i){return BB(e,t,n,i)}parseArrayData(e,t,n,i){return BB(e,t,n,i)}parseObjectData(e,t,n,i){const{iScale:r,vScale:s}=e,{xAxisKey:a="x",yAxisKey:o="y"}=this._parsing,l="x"===r.axis?a:o,c="x"===s.axis?a:o,u=[];let d,h,p,f;for(d=n,h=n+i;d<h;++d)f=t[d],p={},p[r.axis]=r.parse(Mz(f,l),d),u.push(UB(Mz(f,c),p,s,d));return u}updateRangeFromParsed(e,t,n,i){super.updateRangeFromParsed(e,t,n,i);const r=n._custom;r&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,r.min),e.max=Math.max(e.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:n,vScale:i}=t,r=this.getParsed(e),s=r._custom,a=VB(s)?"["+s.start+", "+s.end+"]":""+i.getLabelForValue(r[i.axis]);return{label:""+n.getLabelForValue(r[n.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,n,i){const r="reset"===i,{index:s,_cachedMeta:{vScale:a}}=this,o=a.getBasePixel(),l=a.isHorizontal(),c=this._getRuler(),{sharedOptions:u,includeOptions:d}=this._getSharedOptions(t,i);for(let h=t;h<t+n;h++){const t=this.getParsed(h),n=r||oz(t[a.axis])?{base:o,head:o}:this._calculateBarValuePixels(h),p=this._calculateBarIndexPixels(h,c),f=(t._stacks||{})[a.axis],m={horizontal:l,base:n.base,enableBorderRadius:!f||VB(t._custom)||s===f._top||s===f._bottom,x:l?n.head:p.center,y:l?p.center:n.head,height:l?p.size:Math.abs(n.size),width:l?Math.abs(n.size):p.size};d&&(m.options=u||this.resolveDataElementOptions(h,e[h].active?"active":i));const g=m.options||e[h].options;HB(m,g,f,s),qB(m,g,c.ratio),this.updateElement(e[h],h,m,i)}}_getStacks(e,t){const{iScale:n}=this._cachedMeta,i=n.getMatchingVisibleMetas(this._type).filter((e=>e.controller.options.grouped)),r=n.options.stacked,s=[],a=e=>{const n=e.controller.getParsed(t),i=n&&n[e.vScale.axis];if(oz(i)||isNaN(i))return!0};for(const o of i)if((void 0===t||!a(o))&&((!1===r||-1===s.indexOf(o.stack)||void 0===r&&void 0===o.stack)&&s.push(o.stack),o.index===e))break;return s.length||s.push(void 0),s}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,t,n){const i=this._getStacks(e,n),r=void 0!==t?i.indexOf(t):-1;return-1===r?i.length-1:r}_getRuler(){const e=this.options,t=this._cachedMeta,n=t.iScale,i=[];let r,s;for(r=0,s=t.data.length;r<s;++r)i.push(n.getPixelForValue(this.getParsed(r)[n.axis],r));const a=e.barThickness;return{min:a||FB(t),pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:n},options:{base:i,minBarLength:r}}=this,s=i||0,a=this.getParsed(e),o=a._custom,l=VB(o);let c,u,d=a[t.axis],h=0,p=n?this.applyStack(t,a,n):d;p!==d&&(h=p-d,p=d),l&&(d=o.barStart,p=o.barEnd-o.barStart,0!==d&&zz(d)!==zz(o.barEnd)&&(h=0),h+=d);const f=oz(i)||l?h:i;let m=t.getPixelForValue(f);if(c=this.chart.getDataVisibility(e)?t.getPixelForValue(h+p):m,u=c-m,Math.abs(u)<r){u=function(e,t,n){return 0!==e?zz(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}(u,t,s)*r,d===s&&(m-=u/2);const e=t.getPixelForDecimal(0),n=t.getPixelForDecimal(1),i=Math.min(e,n),a=Math.max(e,n);m=Math.max(Math.min(m,a),i),c=m+u}if(m===t.getPixelForValue(s)){const e=zz(u)*t.getLineWidthForValue(s)/2;m+=e,u-=e}return{size:u,base:m,head:c,center:c+u/2}}_calculateBarIndexPixels(e,t){const n=t.scale,i=this.options,r=i.skipNull,s=hz(i.maxBarThickness,1/0);let a,o;if(t.grouped){const n=r?this._getStackCount(e):t.stackCount,l="flex"===i.barThickness?function(e,t,n,i){const r=t.pixels,s=r[e];let a=e>0?r[e-1]:null,o=e<r.length-1?r[e+1]:null;const l=n.categoryPercentage;null===a&&(a=s-(null===o?t.end-t.start:o-s)),null===o&&(o=s+s-a);const c=s-(s-Math.min(a,o))/2*l;return{chunk:Math.abs(o-a)/2*l/i,ratio:n.barPercentage,start:c}}(e,t,i,n):function(e,t,n,i){const r=n.barThickness;let s,a;return oz(r)?(s=t.min*n.categoryPercentage,a=n.barPercentage):(s=r*i,a=1),{chunk:s/i,ratio:a,start:t.pixels[e]-s/2}}(e,t,i,n),c=this._getStackIndex(this.index,this._cachedMeta.stack,r?e:void 0);a=l.start+l.chunk*c+l.chunk/2,o=Math.min(s,l.chunk*l.ratio)}else a=n.getPixelForValue(this.getParsed(e)[n.axis],e),o=Math.min(s,t.min*t.ratio);return{base:a-o/2,head:a+o/2,center:a,size:o}}draw(){const e=this._cachedMeta,t=e.vScale,n=e.data,i=n.length;let r=0;for(;r<i;++r)null!==this.getParsed(r)[t.axis]&&n[r].draw(this._ctx)}}XB.id="bar",XB.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},XB.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};class YB extends zB{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,n,i){const r=super.parsePrimitiveData(e,t,n,i);for(let s=0;s<r.length;s++)r[s]._custom=this.resolveDataElementOptions(s+n).radius;return r}parseArrayData(e,t,n,i){const r=super.parseArrayData(e,t,n,i);for(let s=0;s<r.length;s++){const e=t[n+s];r[s]._custom=hz(e[2],this.resolveDataElementOptions(s+n).radius)}return r}parseObjectData(e,t,n,i){const r=super.parseObjectData(e,t,n,i);for(let s=0;s<r.length;s++){const e=t[n+s];r[s]._custom=hz(e&&e.r&&+e.r,this.resolveDataElementOptions(s+n).radius)}return r}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,{xScale:n,yScale:i}=t,r=this.getParsed(e),s=n.getLabelForValue(r.x),a=i.getLabelForValue(r.y),o=r._custom;return{label:t.label,value:"("+s+", "+a+(o?", "+o:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,n,i){const r="reset"===i,{iScale:s,vScale:a}=this._cachedMeta,{sharedOptions:o,includeOptions:l}=this._getSharedOptions(t,i),c=s.axis,u=a.axis;for(let d=t;d<t+n;d++){const t=e[d],n=!r&&this.getParsed(d),h={},p=h[c]=r?s.getPixelForDecimal(.5):s.getPixelForValue(n[c]),f=h[u]=r?a.getBasePixel():a.getPixelForValue(n[u]);h.skip=isNaN(p)||isNaN(f),l&&(h.options=o||this.resolveDataElementOptions(d,t.active?"active":i),r&&(h.options.radius=0)),this.updateElement(t,d,h,i)}}resolveDataElementOptions(e,t){const n=this.getParsed(e);let i=super.resolveDataElementOptions(e,t);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const r=i.radius;return"active"!==t&&(i.radius=0),i.radius+=hz(n&&n._custom,r),i}}YB.id="bubble",YB.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},YB.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title:()=>""}}}};class JB extends zB{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const n=this.getDataset().data,i=this._cachedMeta;if(!1===this._parsing)i._parsed=n;else{let r,s,a=e=>+n[e];if(cz(n[e])){const{key:e="value"}=this._parsing;a=t=>+Mz(n[t],e)}for(r=e,s=e+t;r<s;++r)i._parsed[r]=a(r)}}_getRotation(){return Hz(this.options.rotation-90)}_getCircumference(){return Hz(this.options.circumference)}_getRotationExtents(){let e=Nz,t=-Nz;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)){const i=this.chart.getDatasetMeta(n).controller,r=i._getRotation(),s=i._getCircumference();e=Math.min(e,r),t=Math.max(t,r+s)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:n}=t,i=this._cachedMeta,r=i.data,s=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(n.width,n.height)-s)/2,0),o=Math.min((l=this.options.cutout,c=a,"string"===typeof l&&l.endsWith("%")?parseFloat(l)/100:l/c),1);var l,c;const u=this._getRingWeight(this.index),{circumference:d,rotation:h}=this._getRotationExtents(),{ratioX:p,ratioY:f,offsetX:m,offsetY:g}=function(e,t,n){let i=1,r=1,s=0,a=0;if(t<Nz){const o=e,l=o+t,c=Math.cos(o),u=Math.sin(o),d=Math.cos(l),h=Math.sin(l),p=(e,t,i)=>Kz(e,o,l,!0)?1:Math.max(t,t*n,i,i*n),f=(e,t,i)=>Kz(e,o,l,!0)?-1:Math.min(t,t*n,i,i*n),m=p(0,c,d),g=p(Lz,u,h),v=f(Pz,c,d),y=f(Pz+Lz,u,h);i=(m-v)/2,r=(g-y)/2,s=-(m+v)/2,a=-(g+y)/2}return{ratioX:i,ratioY:r,offsetX:s,offsetY:a}}(h,d,o),v=(n.width-s)/p,y=(n.height-s)/f,x=Math.max(Math.min(v,y)/2,0),b=pz(this.options.radius,x),_=(b-Math.max(b*o,0))/this._getVisibleDatasetWeightTotal();this.offsetX=m*b,this.offsetY=g*b,i.total=this.calculateTotal(),this.outerRadius=b-_*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-_*u,0),this.updateElements(r,0,r.length,e)}_circumference(e,t){const n=this.options,i=this._cachedMeta,r=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||null===i._parsed[e]||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*r/Nz)}updateElements(e,t,n,i){const r="reset"===i,s=this.chart,a=s.chartArea,o=s.options.animation,l=(a.left+a.right)/2,c=(a.top+a.bottom)/2,u=r&&o.animateScale,d=u?0:this.innerRadius,h=u?0:this.outerRadius,{sharedOptions:p,includeOptions:f}=this._getSharedOptions(t,i);let m,g=this._getRotation();for(m=0;m<t;++m)g+=this._circumference(m,r);for(m=t;m<t+n;++m){const t=this._circumference(m,r),n=e[m],s={x:l+this.offsetX,y:c+this.offsetY,startAngle:g,endAngle:g+t,circumference:t,outerRadius:h,innerRadius:d};f&&(s.options=p||this.resolveDataElementOptions(m,n.active?"active":i)),g+=t,this.updateElement(n,m,s,i)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let n,i=0;for(n=0;n<t.length;n++){const r=e._parsed[n];null===r||isNaN(r)||!this.chart.getDataVisibility(n)||t[n].hidden||(i+=Math.abs(r))}return i}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?Nz*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=uB(t._parsed[e],n.options.locale);return{label:i[e]||"",value:r}}getMaxBorderWidth(e){let t=0;const n=this.chart;let i,r,s,a,o;if(!e)for(i=0,r=n.data.datasets.length;i<r;++i)if(n.isDatasetVisible(i)){s=n.getDatasetMeta(i),e=s.data,a=s.controller;break}if(!e)return 0;for(i=0,r=e.length;i<r;++i)o=a.resolveDataElementOptions(i),"inner"!==o.borderAlign&&(t=Math.max(t,o.borderWidth||0,o.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let n=0,i=e.length;n<i;++n){const e=this.resolveDataElementOptions(n);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}_getRingWeight(e){return Math.max(hz(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}JB.id="doughnut",JB.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},JB.descriptors={_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e},JB.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n}}=e.legend.options;return t.labels.map(((t,i)=>{const r=e.getDatasetMeta(0).controller.getStyle(i);return{text:t,fillStyle:r.backgroundColor,strokeStyle:r.borderColor,lineWidth:r.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(i),index:i}}))}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}},tooltip:{callbacks:{title:()=>"",label(e){let t=e.label;const n=": "+e.formattedValue;return lz(t)?(t=t.slice(),t[0]+=n):t+=n,t}}}}};class KB extends zB{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:n,data:i=[],_dataset:r}=t,s=this.chart._animationsDisabled;let{start:a,count:o}=cF(t,i,s);this._drawStart=a,this._drawCount=o,uF(t)&&(a=0,o=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!r._decimated,n.points=i;const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!s,options:l},e),this.updateElements(i,a,o,e)}updateElements(e,t,n,i){const r="reset"===i,{iScale:s,vScale:a,_stacked:o,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(t,i),d=s.axis,h=a.axis,{spanGaps:p,segment:f}=this.options,m=Uz(p)?p:Number.POSITIVE_INFINITY,g=this.chart._animationsDisabled||r||"none"===i;let v=t>0&&this.getParsed(t-1);for(let y=t;y<t+n;++y){const t=e[y],n=this.getParsed(y),p=g?t:{},x=oz(n[h]),b=p[d]=s.getPixelForValue(n[d],y),_=p[h]=r||x?a.getBasePixel():a.getPixelForValue(o?this.applyStack(a,n,o):n[h],y);p.skip=isNaN(b)||isNaN(_)||x,p.stop=y>0&&Math.abs(n[d]-v[d])>m,f&&(p.parsed=n,p.raw=l.data[y]),u&&(p.options=c||this.resolveDataElementOptions(y,t.active?"active":i)),g||this.updateElement(t,y,p,i),v=n}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,i=e.data||[];if(!i.length)return n;const r=i[0].size(this.resolveDataElementOptions(0)),s=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,r,s)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}KB.id="line",KB.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},KB.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};class ZB extends zB{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=uB(t._parsed[e].r,n.options.locale);return{label:i[e]||"",value:r}}parseObjectData(e,t,n,i){return UU.bind(this)(e,t,n,i)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach(((e,n)=>{const i=this.getParsed(n).r;!isNaN(i)&&this.chart.getDataVisibility(n)&&(i<t.min&&(t.min=i),i>t.max&&(t.max=i))})),t}_updateRadius(){const e=this.chart,t=e.chartArea,n=e.options,i=Math.min(t.right-t.left,t.bottom-t.top),r=Math.max(i/2,0),s=(r-Math.max(n.cutoutPercentage?r/100*n.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=r-s*this.index,this.innerRadius=this.outerRadius-s}updateElements(e,t,n,i){const r="reset"===i,s=this.chart,a=s.options.animation,o=this._cachedMeta.rScale,l=o.xCenter,c=o.yCenter,u=o.getIndexAngle(0)-.5*Pz;let d,h=u;const p=360/this.countVisibleElements();for(d=0;d<t;++d)h+=this._computeAngle(d,i,p);for(d=t;d<t+n;d++){const t=e[d];let n=h,f=h+this._computeAngle(d,i,p),m=s.getDataVisibility(d)?o.getDistanceFromCenterForValue(this.getParsed(d).r):0;h=f,r&&(a.animateScale&&(m=0),a.animateRotate&&(n=f=u));const g={x:l,y:c,innerRadius:0,outerRadius:m,startAngle:n,endAngle:f,options:this.resolveDataElementOptions(d,t.active?"active":i)};this.updateElement(t,d,g,i)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach(((e,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&t++})),t}_computeAngle(e,t,n){return this.chart.getDataVisibility(e)?Hz(this.resolveDataElementOptions(e,t).angle||n):0}}ZB.id="polarArea",ZB.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},ZB.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n}}=e.legend.options;return t.labels.map(((t,i)=>{const r=e.getDatasetMeta(0).controller.getStyle(i);return{text:t,fillStyle:r.backgroundColor,strokeStyle:r.borderColor,lineWidth:r.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(i),index:i}}))}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}},tooltip:{callbacks:{title:()=>"",label:e=>e.chart.data.labels[e.dataIndex]+": "+e.formattedValue}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};class QB extends JB{}QB.id="pie",QB.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"};class $B extends zB{getLabelAndValue(e){const t=this._cachedMeta.vScale,n=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(n[t.axis])}}parseObjectData(e,t,n,i){return UU.bind(this)(e,t,n,i)}update(e){const t=this._cachedMeta,n=t.dataset,i=t.data||[],r=t.iScale.getLabels();if(n.points=i,"resize"!==e){const t=this.resolveDatasetElementOptions(e);this.options.showLine||(t.borderWidth=0);const s={_loop:!0,_fullLoop:r.length===i.length,options:t};this.updateElement(n,void 0,s,e)}this.updateElements(i,0,i.length,e)}updateElements(e,t,n,i){const r=this._cachedMeta.rScale,s="reset"===i;for(let a=t;a<t+n;a++){const t=e[a],n=this.resolveDataElementOptions(a,t.active?"active":i),o=r.getPointPositionForValue(a,this.getParsed(a).r),l=s?r.xCenter:o.x,c=s?r.yCenter:o.y,u={x:l,y:c,angle:o.angle,skip:isNaN(l)||isNaN(c),options:n};this.updateElement(t,a,u,i)}}}$B.id="radar",$B.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},$B.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};class eV{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return Uz(this.x)&&Uz(this.y)}getProps(e,t){const n=this.$animations;if(!t||!n)return this;const i={};return e.forEach((e=>{i[e]=n[e]&&n[e].active()?n[e]._to:this[e]})),i}}eV.defaults={},eV.defaultRoutes=void 0;const tV={values:e=>lz(e)?e:""+e,numeric(e,t,n){if(0===e)return"0";const i=this.chart.options.locale;let r,s=e;if(n.length>1){const t=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(t<1e-4||t>1e15)&&(r="scientific"),s=function(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e));return n}(e,n)}const a=Oz(Math.abs(s)),o=Math.max(Math.min(-1*Math.floor(a),20),0),l={notation:r,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),uB(e,i,l)},logarithmic(e,t,n){if(0===e)return"0";const i=e/Math.pow(10,Math.floor(Oz(e)));return 1===i||2===i||5===i?tV.numeric.call(this,e,t,n):""}};var nV={formatters:tV};function iV(e,t){const n=e.options.ticks,i=n.maxTicksLimit||function(e){const t=e.options.offset,n=e._tickSize(),i=e._length/n+(t?0:1),r=e._maxLength/n;return Math.floor(Math.min(i,r))}(e),r=n.major.enabled?function(e){const t=[];let n,i;for(n=0,i=e.length;n<i;n++)e[n].major&&t.push(n);return t}(t):[],s=r.length,a=r[0],o=r[s-1],l=[];if(s>i)return function(e,t,n,i){let r,s=0,a=n[0];for(i=Math.ceil(i),r=0;r<e.length;r++)r===a&&(t.push(e[r]),s++,a=n[s*i])}(t,l,r,s/i),l;const c=function(e,t,n){const i=function(e){const t=e.length;let n,i;if(t<2)return!1;for(i=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==i)return!1;return i}(e),r=t.length/n;if(!i)return Math.max(r,1);const s=function(e){const t=[],n=Math.sqrt(e);let i;for(i=1;i<n;i++)e%i===0&&(t.push(i),t.push(e/i));return n===(0|n)&&t.push(n),t.sort(((e,t)=>e-t)).pop(),t}(i);for(let a=0,o=s.length-1;a<o;a++){const e=s[a];if(e>r)return e}return Math.max(r,1)}(r,t,i);if(s>0){let e,n;const i=s>1?Math.round((o-a)/(s-1)):null;for(rV(t,l,c,oz(i)?0:a-i,a),e=0,n=s-1;e<n;e++)rV(t,l,c,r[e],r[e+1]);return rV(t,l,c,o,oz(i)?t.length:o+i),l}return rV(t,l,c),l}function rV(e,t,n,i,r){const s=hz(i,0),a=Math.min(hz(r,e.length),e.length);let o,l,c,u=0;for(n=Math.ceil(n),r&&(o=r-i,n=o/Math.floor(o/n)),c=s;c<0;)u++,c=Math.round(s+u*n);for(l=Math.max(s,0);l<a;l++)l===c&&(t.push(e[l]),u++,c=Math.round(s+u*n))}nU.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:nV.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),nU.route("scale.ticks","color","","color"),nU.route("scale.grid","color","","borderColor"),nU.route("scale.grid","borderColor","","borderColor"),nU.route("scale.title","color","","color"),nU.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e}),nU.describe("scales",{_fallback:"scale"}),nU.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e});const sV=(e,t,n)=>"top"===t||"left"===t?e[t]+n:e[t]-n;function aV(e,t){const n=[],i=e.length/t,r=e.length;let s=0;for(;s<r;s+=i)n.push(e[Math.floor(s)]);return n}function oV(e,t,n){const i=e.ticks.length,r=Math.min(t,i-1),s=e._startPixel,a=e._endPixel,o=1e-6;let l,c=e.getPixelForTick(r);if(!(n&&(l=1===i?Math.max(c-s,a-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(r-1))/2,c+=r<t?l:-l,c<s-o||c>a+o)))return c}function lV(e){return e.drawTicks?e.tickLength:0}function cV(e,t){if(!e.display)return 0;const n=MU(e.font,t),i=SU(e.padding);return(lz(e.text)?e.text.length:1)*n.lineHeight+i.height}function uV(e,t,n){let i=oF(e);return(n&&"right"!==t||!n&&"right"===t)&&(i=(e=>"left"===e?"right":"right"===e?"left":e)(i)),i}class dV extends eV{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:i}=this;return e=dz(e,Number.POSITIVE_INFINITY),t=dz(t,Number.NEGATIVE_INFINITY),n=dz(n,Number.POSITIVE_INFINITY),i=dz(i,Number.NEGATIVE_INFINITY),{min:dz(e,n),max:dz(t,i),minDefined:uz(e),maxDefined:uz(t)}}getMinMax(e){let t,{min:n,max:i,minDefined:r,maxDefined:s}=this.getUserBounds();if(r&&s)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let o=0,l=a.length;o<l;++o)t=a[o].controller.getMinMax(this,e),r||(n=Math.min(n,t.min)),s||(i=Math.max(i,t.max));return n=s&&n>i?i:n,i=r&&n>i?n:i,{min:dz(n,dz(i,n)),max:dz(i,dz(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){fz(this.options.beforeUpdate,[this])}update(e,t,n){const{beginAtZero:i,grace:r,ticks:s}=this.options,a=s.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,n){const{min:i,max:r}=e,s=pz(t,(r-i)/2),a=(e,t)=>n&&0===e?0:e+t;return{min:a(i,-Math.abs(s)),max:a(r,s)}}(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const o=a<this.ticks.length;this._convertTicksToLabels(o?aV(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||"auto"===s.source)&&(this.ticks=iV(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),o&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,n=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,n=!n),this._startPixel=e,this._endPixel=t,this._reversePixels=n,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){fz(this.options.afterUpdate,[this])}beforeSetDimensions(){fz(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){fz(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),fz(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){fz(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let n,i,r;for(n=0,i=e.length;n<i;n++)r=e[n],r.label=fz(t.callback,[r.value,n,e],this)}afterTickToLabelConversion(){fz(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){fz(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,n=this.ticks.length,i=t.minRotation||0,r=t.maxRotation;let s,a,o,l=i;if(!this._isVisible()||!t.display||i>=r||n<=1||!this.isHorizontal())return void(this.labelRotation=i);const c=this._getLabelSizes(),u=c.widest.width,d=c.highest.height,h=Zz(this.chart.width-u,0,this.maxWidth);s=e.offset?this.maxWidth/n:h/(n-1),u+6>s&&(s=h/(n-(e.offset?.5:1)),a=this.maxHeight-lV(e.grid)-t.padding-cV(e.title,this.chart.options.font),o=Math.sqrt(u*u+d*d),l=Wz(Math.min(Math.asin(Zz((c.highest.height+6)/s,-1,1)),Math.asin(Zz(a/o,-1,1))-Math.asin(Zz(d/o,-1,1)))),l=Math.max(i,Math.min(r,l))),this.labelRotation=l}afterCalculateLabelRotation(){fz(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){fz(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:n,title:i,grid:r}}=this,s=this._isVisible(),a=this.isHorizontal();if(s){const s=cV(i,t.options.font);if(a?(e.width=this.maxWidth,e.height=lV(r)+s):(e.height=this.maxHeight,e.width=lV(r)+s),n.display&&this.ticks.length){const{first:t,last:i,widest:r,highest:s}=this._getLabelSizes(),o=2*n.padding,l=Hz(this.labelRotation),c=Math.cos(l),u=Math.sin(l);if(a){const t=n.mirror?0:u*r.width+c*s.height;e.height=Math.min(this.maxHeight,e.height+t+o)}else{const t=n.mirror?0:c*r.width+u*s.height;e.width=Math.min(this.maxWidth,e.width+t+o)}this._calculatePadding(t,i,u,c)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,i){const{ticks:{align:r,padding:s},position:a}=this.options,o=0!==this.labelRotation,l="top"!==a&&"x"===this.axis;if(this.isHorizontal()){const a=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let u=0,d=0;o?l?(u=i*e.width,d=n*t.height):(u=n*e.height,d=i*t.width):"start"===r?d=t.width:"end"===r?u=e.width:"inner"!==r&&(u=e.width/2,d=t.width/2),this.paddingLeft=Math.max((u-a+s)*this.width/(this.width-a),0),this.paddingRight=Math.max((d-c+s)*this.width/(this.width-c),0)}else{let n=t.height/2,i=e.height/2;"start"===r?(n=0,i=e.height):"end"===r&&(n=t.height,i=0),this.paddingTop=n+s,this.paddingBottom=i+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){fz(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,n=e.length;t<n;t++)oz(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let n=this.ticks;t<n.length&&(n=aV(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length)}return e}_computeLabelSizes(e,t){const{ctx:n,_longestTextCache:i}=this,r=[],s=[];let a,o,l,c,u,d,h,p,f,m,g,v=0,y=0;for(a=0;a<t;++a){if(c=e[a].label,u=this._resolveTickFontOptions(a),n.font=d=u.string,h=i[d]=i[d]||{data:{},gc:[]},p=u.lineHeight,f=m=0,oz(c)||lz(c)){if(lz(c))for(o=0,l=c.length;o<l;++o)g=c[o],oz(g)||lz(g)||(f=iU(n,h.data,h.gc,f,g),m+=p)}else f=iU(n,h.data,h.gc,f,c),m=p;r.push(f),s.push(m),v=Math.max(f,v),y=Math.max(m,y)}!function(e,t){mz(e,(e=>{const n=e.gc,i=n.length/2;let r;if(i>t){for(r=0;r<i;++r)delete e.data[n[r]];n.splice(0,i)}}))}(i,t);const x=r.indexOf(v),b=s.indexOf(y),_=e=>({width:r[e]||0,height:s[e]||0});return{first:_(0),last:_(t-1),widest:_(x),highest:_(b),widths:r,heights:s}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return Zz(this._alignToPixels?sU(this.chart,t,0):t,-32768,32767)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const n=t[e];return n.$context||(n.$context=function(e,t,n){return TU(e,{tick:n,index:t,type:"tick"})}(this.getContext(),e,n))}return this.$context||(this.$context=function(e,t){return TU(e,{scale:t,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=Hz(this.labelRotation),n=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),r=this._getLabelSizes(),s=e.autoSkipPadding||0,a=r?r.widest.width+s:0,o=r?r.highest.height+s:0;return this.isHorizontal()?o*n>a*i?a/n:o/i:o*i<a*n?o/n:a/i}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,n=this.chart,i=this.options,{grid:r,position:s}=i,a=r.offset,o=this.isHorizontal(),l=this.ticks.length+(a?1:0),c=lV(r),u=[],d=r.setContext(this.getContext()),h=d.drawBorder?d.borderWidth:0,p=h/2,f=function(e){return sU(n,e,h)};let m,g,v,y,x,b,_,w,S,M,E,T;if("top"===s)m=f(this.bottom),b=this.bottom-c,w=m-p,M=f(e.top)+p,T=e.bottom;else if("bottom"===s)m=f(this.top),M=e.top,T=f(e.bottom)-p,b=m+p,w=this.top+c;else if("left"===s)m=f(this.right),x=this.right-c,_=m-p,S=f(e.left)+p,E=e.right;else if("right"===s)m=f(this.left),S=e.left,E=f(e.right)-p,x=m+p,_=this.left+c;else if("x"===t){if("center"===s)m=f((e.top+e.bottom)/2+.5);else if(cz(s)){const e=Object.keys(s)[0],t=s[e];m=f(this.chart.scales[e].getPixelForValue(t))}M=e.top,T=e.bottom,b=m+p,w=b+c}else if("y"===t){if("center"===s)m=f((e.left+e.right)/2);else if(cz(s)){const e=Object.keys(s)[0],t=s[e];m=f(this.chart.scales[e].getPixelForValue(t))}x=m-p,_=x-c,S=e.left,E=e.right}const C=hz(i.ticks.maxTicksLimit,l),A=Math.max(1,Math.ceil(l/C));for(g=0;g<l;g+=A){const e=r.setContext(this.getContext(g)),t=e.lineWidth,i=e.color,s=e.borderDash||[],l=e.borderDashOffset,c=e.tickWidth,d=e.tickColor,h=e.tickBorderDash||[],p=e.tickBorderDashOffset;v=oV(this,g,a),void 0!==v&&(y=sU(n,v,t),o?x=_=S=E=y:b=w=M=T=y,u.push({tx1:x,ty1:b,tx2:_,ty2:w,x1:S,y1:M,x2:E,y2:T,width:t,color:i,borderDash:s,borderDashOffset:l,tickWidth:c,tickColor:d,tickBorderDash:h,tickBorderDashOffset:p}))}return this._ticksLength=l,this._borderValue=m,u}_computeLabelItems(e){const t=this.axis,n=this.options,{position:i,ticks:r}=n,s=this.isHorizontal(),a=this.ticks,{align:o,crossAlign:l,padding:c,mirror:u}=r,d=lV(n.grid),h=d+c,p=u?-c:h,f=-Hz(this.labelRotation),m=[];let g,v,y,x,b,_,w,S,M,E,T,C,A="middle";if("top"===i)_=this.bottom-p,w=this._getXAxisLabelAlignment();else if("bottom"===i)_=this.top+p,w=this._getXAxisLabelAlignment();else if("left"===i){const e=this._getYAxisLabelAlignment(d);w=e.textAlign,b=e.x}else if("right"===i){const e=this._getYAxisLabelAlignment(d);w=e.textAlign,b=e.x}else if("x"===t){if("center"===i)_=(e.top+e.bottom)/2+h;else if(cz(i)){const e=Object.keys(i)[0],t=i[e];_=this.chart.scales[e].getPixelForValue(t)+h}w=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===i)b=(e.left+e.right)/2-h;else if(cz(i)){const e=Object.keys(i)[0],t=i[e];b=this.chart.scales[e].getPixelForValue(t)}w=this._getYAxisLabelAlignment(d).textAlign}"y"===t&&("start"===o?A="top":"end"===o&&(A="bottom"));const P=this._getLabelSizes();for(g=0,v=a.length;g<v;++g){y=a[g],x=y.label;const e=r.setContext(this.getContext(g));S=this.getPixelForTick(g)+r.labelOffset,M=this._resolveTickFontOptions(g),E=M.lineHeight,T=lz(x)?x.length:1;const t=T/2,n=e.color,o=e.textStrokeColor,c=e.textStrokeWidth;let d,h=w;if(s?(b=S,"inner"===w&&(h=g===v-1?this.options.reverse?"left":"right":0===g?this.options.reverse?"right":"left":"center"),C="top"===i?"near"===l||0!==f?-T*E+E/2:"center"===l?-P.highest.height/2-t*E+E:-P.highest.height+E/2:"near"===l||0!==f?E/2:"center"===l?P.highest.height/2-t*E:P.highest.height-T*E,u&&(C*=-1)):(_=S,C=(1-T)*E/2),e.showLabelBackdrop){const t=SU(e.backdropPadding),n=P.heights[g],i=P.widths[g];let r=_+C-t.top,s=b-t.left;switch(A){case"middle":r-=n/2;break;case"bottom":r-=n}switch(w){case"center":s-=i/2;break;case"right":s-=i}d={left:s,top:r,width:i+t.width,height:n+t.height,color:e.backdropColor}}m.push({rotation:f,label:x,font:M,color:n,strokeColor:o,strokeWidth:c,textOffset:C,textAlign:h,textBaseline:A,translation:[b,_],backdrop:d})}return m}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-Hz(this.labelRotation))return"top"===e?"left":"right";let n="center";return"start"===t.align?n="left":"end"===t.align?n="right":"inner"===t.align&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:n,mirror:i,padding:r}}=this.options,s=e+r,a=this._getLabelSizes().widest.width;let o,l;return"left"===t?i?(l=this.right+r,"near"===n?o="left":"center"===n?(o="center",l+=a/2):(o="right",l+=a)):(l=this.right-s,"near"===n?o="right":"center"===n?(o="center",l-=a/2):(o="left",l=this.left)):"right"===t?i?(l=this.left+r,"near"===n?o="right":"center"===n?(o="center",l-=a/2):(o="left",l-=a)):(l=this.left+s,"near"===n?o="left":"center"===n?(o="center",l+=a/2):(o="right",l=this.right)):o="right",{textAlign:o,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:n,top:i,width:r,height:s}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,i,r,s),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const n=this.ticks.findIndex((t=>t.value===e));if(n>=0){return t.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,s;const a=(e,t,i)=>{i.width&&i.color&&(n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.setLineDash(i.borderDash||[]),n.lineDashOffset=i.borderDashOffset,n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.stroke(),n.restore())};if(t.display)for(r=0,s=i.length;r<s;++r){const e=i[r];t.drawOnChartArea&&a({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&a({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{grid:n}}=this,i=n.setContext(this.getContext()),r=n.drawBorder?i.borderWidth:0;if(!r)return;const s=n.setContext(this.getContext(0)).lineWidth,a=this._borderValue;let o,l,c,u;this.isHorizontal()?(o=sU(e,this.left,r)-r/2,l=sU(e,this.right,s)+s/2,c=u=a):(c=sU(e,this.top,r)-r/2,u=sU(e,this.bottom,s)+s/2,o=l=a),t.save(),t.lineWidth=i.borderWidth,t.strokeStyle=i.borderColor,t.beginPath(),t.moveTo(o,c),t.lineTo(l,u),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,n=this._computeLabelArea();n&&uU(t,n);const i=this._labelItems||(this._labelItems=this._computeLabelItems(e));let r,s;for(r=0,s=i.length;r<s;++r){const e=i[r],n=e.font,s=e.label;e.backdrop&&(t.fillStyle=e.backdrop.color,t.fillRect(e.backdrop.left,e.backdrop.top,e.backdrop.width,e.backdrop.height)),fU(t,s,0,e.textOffset,n,e)}n&&dU(t)}drawTitle(){const{ctx:e,options:{position:t,title:n,reverse:i}}=this;if(!n.display)return;const r=MU(n.font),s=SU(n.padding),a=n.align;let o=r.lineHeight/2;"bottom"===t||"center"===t||cz(t)?(o+=s.bottom,lz(n.text)&&(o+=r.lineHeight*(n.text.length-1))):o+=s.top;const{titleX:l,titleY:c,maxWidth:u,rotation:d}=function(e,t,n,i){const{top:r,left:s,bottom:a,right:o,chart:l}=e,{chartArea:c,scales:u}=l;let d,h,p,f=0;const m=a-r,g=o-s;if(e.isHorizontal()){if(h=lF(i,s,o),cz(n)){const e=Object.keys(n)[0],i=n[e];p=u[e].getPixelForValue(i)+m-t}else p="center"===n?(c.bottom+c.top)/2+m-t:sV(e,n,t);d=o-s}else{if(cz(n)){const e=Object.keys(n)[0],i=n[e];h=u[e].getPixelForValue(i)-g+t}else h="center"===n?(c.left+c.right)/2-g+t:sV(e,n,t);p=lF(i,a,r),f="left"===n?-Lz:Lz}return{titleX:h,titleY:p,maxWidth:d,rotation:f}}(this,o,t,a);fU(e,n.text,0,0,r,{color:n.color,maxWidth:u,rotation:d,textAlign:uV(a,t,i),textBaseline:"middle",translation:[l,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,n=hz(e.grid&&e.grid.z,-1);return this._isVisible()&&this.draw===dV.prototype.draw?[{z:n,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:n+1,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let r,s;for(r=0,s=t.length;r<s;++r){const s=t[r];s[n]!==this.id||e&&s.type!==e||i.push(s)}return i}_resolveTickFontOptions(e){return MU(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class hV{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let n;(function(e){return"id"in e&&"defaults"in e})(t)&&(n=this.register(t));const i=this.items,r=e.id,s=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in i||(i[r]=e,function(e,t,n){const i=bz(Object.create(null),[n?nU.get(n):{},nU.get(t),e.defaults]);nU.set(t,i),e.defaultRoutes&&function(e,t){Object.keys(t).forEach((n=>{const i=n.split("."),r=i.pop(),s=[e].concat(i).join("."),a=t[n].split("."),o=a.pop(),l=a.join(".");nU.route(s,r,l,o)}))}(t,e.defaultRoutes);e.descriptors&&nU.describe(t,e.descriptors)}(e,s,n),this.override&&nU.override(e.id,e.overrides)),s}get(e){return this.items[e]}unregister(e){const t=this.items,n=e.id,i=this.scope;n in t&&delete t[n],i&&n in nU[i]&&(delete nU[i][n],this.override&&delete QF[n])}}var pV=new class{constructor(){this.controllers=new hV(zB,"datasets",!0),this.elements=new hV(eV,"elements"),this.plugins=new hV(Object,"plugins"),this.scales=new hV(dV,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t)}remove(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t)}addControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.controllers)}addElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.elements)}addPlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.plugins)}addScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.controllers)}removeElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.elements)}removePlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.plugins)}removeScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.scales)}_each(e,t,n){[...t].forEach((t=>{const i=n||this._getRegistryForType(t);n||i.isForType(t)||i===this.plugins&&t.id?this._exec(e,i,t):mz(t,(t=>{const i=n||this._getRegistryForType(t);this._exec(e,i,t)}))}))}_exec(e,t,n){const i=Ez(e);fz(n["before"+i],[],n),t[e](n),fz(n["after"+i],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){const i=t.get(e);if(void 0===i)throw new Error('"'+e+'" is not a registered '+n+".");return i}};class fV extends zB{update(e){const t=this._cachedMeta,{data:n=[]}=t,i=this.chart._animationsDisabled;let{start:r,count:s}=cF(t,n,i);if(this._drawStart=r,this._drawCount=s,uF(t)&&(r=0,s=n.length),this.options.showLine){const{dataset:r,_dataset:s}=t;r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=n;const a=this.resolveDatasetElementOptions(e);a.segment=this.options.segment,this.updateElement(r,void 0,{animated:!i,options:a},e)}this.updateElements(n,r,s,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=pV.getElement("line")),super.addElements()}updateElements(e,t,n,i){const r="reset"===i,{iScale:s,vScale:a,_stacked:o,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(t,i),u=this.getSharedOptions(c),d=this.includeOptions(i,u),h=s.axis,p=a.axis,{spanGaps:f,segment:m}=this.options,g=Uz(f)?f:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||r||"none"===i;let y=t>0&&this.getParsed(t-1);for(let x=t;x<t+n;++x){const t=e[x],n=this.getParsed(x),c=v?t:{},f=oz(n[p]),b=c[h]=s.getPixelForValue(n[h],x),_=c[p]=r||f?a.getBasePixel():a.getPixelForValue(o?this.applyStack(a,n,o):n[p],x);c.skip=isNaN(b)||isNaN(_)||f,c.stop=x>0&&Math.abs(n[h]-y[h])>g,m&&(c.parsed=n,c.raw=l.data[x]),d&&(c.options=u||this.resolveDataElementOptions(x,t.active?"active":i)),v||this.updateElement(t,x,c,i),y=n}this.updateSharedOptions(u,i,c)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}const n=e.dataset,i=n.options&&n.options.borderWidth||0;if(!t.length)return i;const r=t[0].size(this.resolveDataElementOptions(0)),s=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(i,r,s)/2}}fV.id="scatter",fV.defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1},fV.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title:()=>"",label:e=>"("+e.label+", "+e.formattedValue+")"}}},scales:{x:{type:"linear"},y:{type:"linear"}}};function mV(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class gV{constructor(e){this.options=e||{}}init(e){}formats(){return mV()}parse(e,t){return mV()}format(e,t){return mV()}add(e,t,n){return mV()}diff(e,t,n){return mV()}startOf(e,t,n){return mV()}endOf(e,t){return mV()}}gV.override=function(e){Object.assign(gV.prototype,e)};var vV={_date:gV};function yV(e,t,n,i){const{controller:r,data:s,_sorted:a}=e,o=r._cachedMeta.iScale;if(o&&t===o.axis&&"r"!==t&&a&&s.length){const e=o._reversePixels?tF:eF;if(!i)return e(s,t,n);if(r._sharedOptions){const i=s[0],r="function"===typeof i.getRange&&i.getRange(t);if(r){const i=e(s,t,n-r),a=e(s,t,n+r);return{lo:i.lo,hi:a.hi}}}}return{lo:0,hi:s.length-1}}function xV(e,t,n,i,r){const s=e.getSortedVisibleDatasetMetas(),a=n[t];for(let o=0,l=s.length;o<l;++o){const{index:e,data:n}=s[o],{lo:l,hi:c}=yV(s[o],t,a,r);for(let t=l;t<=c;++t){const r=n[t];r.skip||i(r,e,t)}}}function bV(e,t,n,i,r){const s=[];if(!r&&!e.isPointInArea(t))return s;return xV(e,n,t,(function(n,a,o){(r||cU(n,e.chartArea,0))&&n.inRange(t.x,t.y,i)&&s.push({element:n,datasetIndex:a,index:o})}),!0),s}function _V(e,t,n,i,r,s){let a=[];const o=function(e){const t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,i){const r=t?Math.abs(e.x-i.x):0,s=n?Math.abs(e.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(s,2))}}(n);let l=Number.POSITIVE_INFINITY;return xV(e,n,t,(function(n,c,u){const d=n.inRange(t.x,t.y,r);if(i&&!d)return;const h=n.getCenterPoint(r);if(!(!!s||e.isPointInArea(h))&&!d)return;const p=o(t,h);p<l?(a=[{element:n,datasetIndex:c,index:u}],l=p):p===l&&a.push({element:n,datasetIndex:c,index:u})})),a}function wV(e,t,n,i,r,s){return s||e.isPointInArea(t)?"r"!==n||i?_V(e,t,n,i,r,s):function(e,t,n,i){let r=[];return xV(e,n,t,(function(e,n,s){const{startAngle:a,endAngle:o}=e.getProps(["startAngle","endAngle"],i),{angle:l}=qz(e,{x:t.x,y:t.y});Kz(l,a,o)&&r.push({element:e,datasetIndex:n,index:s})})),r}(e,t,n,r):[]}function SV(e,t,n,i,r){const s=[],a="x"===n?"inXRange":"inYRange";let o=!1;return xV(e,n,t,((e,i,l)=>{e[a](t[n],r)&&(s.push({element:e,datasetIndex:i,index:l}),o=o||e.inRange(t.x,t.y,r))})),i&&!o?[]:s}var MV={evaluateInteractionItems:xV,modes:{index(e,t,n,i){const r=eB(t,e),s=n.axis||"x",a=n.includeInvisible||!1,o=n.intersect?bV(e,r,s,i,a):wV(e,r,s,!1,i,a),l=[];return o.length?(e.getSortedVisibleDatasetMetas().forEach((e=>{const t=o[0].index,n=e.data[t];n&&!n.skip&&l.push({element:n,datasetIndex:e.index,index:t})})),l):[]},dataset(e,t,n,i){const r=eB(t,e),s=n.axis||"xy",a=n.includeInvisible||!1;let o=n.intersect?bV(e,r,s,i,a):wV(e,r,s,!1,i,a);if(o.length>0){const t=o[0].datasetIndex,n=e.getDatasetMeta(t).data;o=[];for(let e=0;e<n.length;++e)o.push({element:n[e],datasetIndex:t,index:e})}return o},point:(e,t,n,i)=>bV(e,eB(t,e),n.axis||"xy",i,n.includeInvisible||!1),nearest(e,t,n,i){const r=eB(t,e),s=n.axis||"xy",a=n.includeInvisible||!1;return wV(e,r,s,n.intersect,i,a)},x:(e,t,n,i)=>SV(e,eB(t,e),"x",n.intersect,i),y:(e,t,n,i)=>SV(e,eB(t,e),"y",n.intersect,i)}};const EV=["left","top","right","bottom"];function TV(e,t){return e.filter((e=>e.pos===t))}function CV(e,t){return e.filter((e=>-1===EV.indexOf(e.pos)&&e.box.axis===t))}function AV(e,t){return e.sort(((e,n)=>{const i=t?n:e,r=t?e:n;return i.weight===r.weight?i.index-r.index:i.weight-r.weight}))}function PV(e,t){const n=function(e){const t={};for(const n of e){const{stack:e,pos:i,stackWeight:r}=n;if(!e||!EV.includes(i))continue;const s=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=r}return t}(e),{vBoxMaxWidth:i,hBoxMaxHeight:r}=t;let s,a,o;for(s=0,a=e.length;s<a;++s){o=e[s];const{fullSize:a}=o.box,l=n[o.stack],c=l&&o.stackWeight/l.weight;o.horizontal?(o.width=c?c*i:a&&t.availableWidth,o.height=r):(o.width=i,o.height=c?c*r:a&&t.availableHeight)}return n}function NV(e,t,n,i){return Math.max(e[n],t[n])+Math.max(e[i],t[i])}function kV(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function RV(e,t,n,i){const{pos:r,box:s}=n,a=e.maxPadding;if(!cz(r)){n.size&&(e[r]-=n.size);const t=i[n.stack]||{size:0,count:1};t.size=Math.max(t.size,n.horizontal?s.height:s.width),n.size=t.size/t.count,e[r]+=n.size}s.getPadding&&kV(a,s.getPadding());const o=Math.max(0,t.outerWidth-NV(a,e,"left","right")),l=Math.max(0,t.outerHeight-NV(a,e,"top","bottom")),c=o!==e.w,u=l!==e.h;return e.w=o,e.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function IV(e,t){const n=t.maxPadding;function i(e){const i={left:0,top:0,right:0,bottom:0};return e.forEach((e=>{i[e]=Math.max(t[e],n[e])})),i}return i(e?["left","right"]:["top","bottom"])}function LV(e,t,n,i){const r=[];let s,a,o,l,c,u;for(s=0,a=e.length,c=0;s<a;++s){o=e[s],l=o.box,l.update(o.width||t.w,o.height||t.h,IV(o.horizontal,t));const{same:a,other:d}=RV(t,n,o,i);c|=a&&r.length,u=u||d,l.fullSize||r.push(o)}return c&&LV(r,t,n,i)||u}function jV(e,t,n,i,r){e.top=n,e.left=t,e.right=t+i,e.bottom=n+r,e.width=i,e.height=r}function DV(e,t,n,i){const r=n.padding;let{x:s,y:a}=t;for(const o of e){const e=o.box,l=i[o.stack]||{count:1,placed:0,weight:1},c=o.stackWeight/l.weight||1;if(o.horizontal){const i=t.w*c,s=l.size||e.height;Tz(l.start)&&(a=l.start),e.fullSize?jV(e,r.left,a,n.outerWidth-r.right-r.left,s):jV(e,t.left+l.placed,a,i,s),l.start=a,l.placed+=i,a=e.bottom}else{const i=t.h*c,a=l.size||e.width;Tz(l.start)&&(s=l.start),e.fullSize?jV(e,s,r.top,a,n.outerHeight-r.bottom-r.top):jV(e,s,t.top+l.placed,a,i),l.start=s,l.placed+=i,s=e.right}}t.x=s,t.y=a}nU.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var OV={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,i){if(!e)return;const r=SU(e.options.layout.padding),s=Math.max(t-r.width,0),a=Math.max(n-r.height,0),o=function(e){const t=function(e){const t=[];let n,i,r,s,a,o;for(n=0,i=(e||[]).length;n<i;++n)r=e[n],({position:s,options:{stack:a,stackWeight:o=1}}=r),t.push({index:n,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:a&&s+a,stackWeight:o});return t}(e),n=AV(t.filter((e=>e.box.fullSize)),!0),i=AV(TV(t,"left"),!0),r=AV(TV(t,"right")),s=AV(TV(t,"top"),!0),a=AV(TV(t,"bottom")),o=CV(t,"x"),l=CV(t,"y");return{fullSize:n,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(a).concat(o),chartArea:TV(t,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(a).concat(o)}}(e.boxes),l=o.vertical,c=o.horizontal;mz(e.boxes,(e=>{"function"===typeof e.beforeLayout&&e.beforeLayout()}));const u=l.reduce(((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1),0)||1,d=Object.freeze({outerWidth:t,outerHeight:n,padding:r,availableWidth:s,availableHeight:a,vBoxMaxWidth:s/2/u,hBoxMaxHeight:a/2}),h=Object.assign({},r);kV(h,SU(i));const p=Object.assign({maxPadding:h,w:s,h:a,x:r.left,y:r.top},r),f=PV(l.concat(c),d);LV(o.fullSize,p,d,f),LV(l,p,d,f),LV(c,p,d,f)&&LV(l,p,d,f),function(e){const t=e.maxPadding;function n(n){const i=Math.max(t[n]-e[n],0);return e[n]+=i,i}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}(p),DV(o.leftAndTop,p,d,f),p.x+=p.w,p.y+=p.h,DV(o.rightAndBottom,p,d,f),e.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},mz(o.chartArea,(t=>{const n=t.box;Object.assign(n,e.chartArea),n.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})}))}};class zV{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,i){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,i?Math.floor(t/i):n)}}isAttached(e){return!0}updateConfig(e){}}class FV extends zV{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const UV="$chartjs",BV={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},VV=e=>null===e||""===e;const HV=!!rB&&{passive:!0};function WV(e,t,n){e.canvas.removeEventListener(t,n,HV)}function GV(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function qV(e,t,n){const i=e.canvas,r=new MutationObserver((e=>{let t=!1;for(const n of e)t=t||GV(n.addedNodes,i),t=t&&!GV(n.removedNodes,i);t&&n()}));return r.observe(document,{childList:!0,subtree:!0}),r}function XV(e,t,n){const i=e.canvas,r=new MutationObserver((e=>{let t=!1;for(const n of e)t=t||GV(n.removedNodes,i),t=t&&!GV(n.addedNodes,i);t&&n()}));return r.observe(document,{childList:!0,subtree:!0}),r}const YV=new Map;let JV=0;function KV(){const e=window.devicePixelRatio;e!==JV&&(JV=e,YV.forEach(((t,n)=>{n.currentDevicePixelRatio!==e&&t()})))}function ZV(e,t,n){const i=e.canvas,r=i&&JU(i);if(!r)return;const s=aF(((e,t)=>{const i=r.clientWidth;n(e,t),i<r.clientWidth&&n()}),window),a=new ResizeObserver((e=>{const t=e[0],n=t.contentRect.width,i=t.contentRect.height;0===n&&0===i||s(n,i)}));return a.observe(r),function(e,t){YV.size||window.addEventListener("resize",KV),YV.set(e,t)}(e,s),a}function QV(e,t,n){n&&n.disconnect(),"resize"===t&&function(e){YV.delete(e),YV.size||window.removeEventListener("resize",KV)}(e)}function $V(e,t,n){const i=e.canvas,r=aF((t=>{null!==e.ctx&&n(function(e,t){const n=BV[e.type]||e.type,{x:i,y:r}=eB(e,t);return{type:n,chart:t,native:e,x:void 0!==i?i:null,y:void 0!==r?r:null}}(t,e))}),e,(e=>{const t=e[0];return[t,t.offsetX,t.offsetY]}));return function(e,t,n){e.addEventListener(t,n,HV)}(i,t,r),r}class eH extends zV{acquireContext(e,t){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(function(e,t){const n=e.style,i=e.getAttribute("height"),r=e.getAttribute("width");if(e[UV]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",VV(r)){const t=sB(e,"width");void 0!==t&&(e.width=t)}if(VV(i))if(""===e.style.height)e.height=e.width/(t||2);else{const t=sB(e,"height");void 0!==t&&(e.height=t)}}(e,t),n):null}releaseContext(e){const t=e.canvas;if(!t[UV])return!1;const n=t[UV].initial;["height","width"].forEach((e=>{const i=n[e];oz(i)?t.removeAttribute(e):t.setAttribute(e,i)}));const i=n.style||{};return Object.keys(i).forEach((e=>{t.style[e]=i[e]})),t.width=t.width,delete t[UV],!0}addEventListener(e,t,n){this.removeEventListener(e,t);const i=e.$proxies||(e.$proxies={}),r={attach:qV,detach:XV,resize:ZV}[t]||$V;i[t]=r(e,t,n)}removeEventListener(e,t){const n=e.$proxies||(e.$proxies={}),i=n[t];if(!i)return;({attach:QV,detach:QV,resize:QV}[t]||WV)(e,t,i),n[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,i){return nB(e,t,n,i)}isAttached(e){const t=JU(e);return!(!t||!t.isConnected)}}class tH{constructor(){this._init=[]}notify(e,t,n,i){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const r=i?this._descriptors(e).filter(i):this._descriptors(e),s=this._notify(r,e,t,n);return"afterDestroy"===t&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall")),s}_notify(e,t,n,i){i=i||{};for(const r of e){const e=r.plugin;if(!1===fz(e[n],[t,i,r.options],e)&&i.cancelable)return!1}return!0}invalidate(){oz(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const n=e&&e.config,i=hz(n.options&&n.options.plugins,{}),r=function(e){const t={},n=[],i=Object.keys(pV.plugins.items);for(let s=0;s<i.length;s++)n.push(pV.getPlugin(i[s]));const r=e.plugins||[];for(let s=0;s<r.length;s++){const e=r[s];-1===n.indexOf(e)&&(n.push(e),t[e.id]=!0)}return{plugins:n,localIds:t}}(n);return!1!==i||t?function(e,t,n,i){let{plugins:r,localIds:s}=t;const a=[],o=e.getContext();for(const l of r){const t=l.id,r=nH(n[t],i);null!==r&&a.push({plugin:l,options:iH(e.config,{plugin:l,local:s[t]},r,o)})}return a}(e,r,i,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],n=this._cache,i=(e,t)=>e.filter((e=>!t.some((t=>e.plugin.id===t.plugin.id))));this._notify(i(t,n),e,"stop"),this._notify(i(n,t),e,"start")}}function nH(e,t){return t||!1!==e?!0===e?{}:e:null}function iH(e,t,n,i){let{plugin:r,local:s}=t;const a=e.pluginScopeKeys(r),o=e.getOptionScopes(n,a);return s&&r.defaults&&o.push(r.defaults),e.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function rH(e,t){const n=nU.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function sH(e,t){return"x"===e||"y"===e?e:t.axis||("top"===(n=t.position)||"bottom"===n?"x":"left"===n||"right"===n?"y":void 0)||e.charAt(0).toLowerCase();var n}function aH(e){const t=e.options||(e.options={});t.plugins=hz(t.plugins,{}),t.scales=function(e,t){const n=QF[e.type]||{scales:{}},i=t.scales||{},r=rH(e.type,t),s=Object.create(null),a=Object.create(null);return Object.keys(i).forEach((e=>{const t=i[e];if(!cz(t))return console.error("Invalid scale configuration for scale: ".concat(e));if(t._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(e));const o=sH(e,t),l=function(e,t){return e===t?"_index_":"_value_"}(o,r),c=n.scales||{};s[o]=s[o]||e,a[e]=_z(Object.create(null),[{axis:o},t,c[o],c[l]])})),e.data.datasets.forEach((n=>{const r=n.type||e.type,o=n.indexAxis||rH(r,t),l=(QF[r]||{}).scales||{};Object.keys(l).forEach((e=>{const t=function(e,t){let n=e;return"_index_"===e?n=t:"_value_"===e&&(n="x"===t?"y":"x"),n}(e,o),r=n[t+"AxisID"]||s[t]||t;a[r]=a[r]||Object.create(null),_z(a[r],[{axis:t},i[r],l[e]])}))})),Object.keys(a).forEach((e=>{const t=a[e];_z(t,[nU.scales[t.type],nU.scale])})),a}(e,t)}function oH(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const lH=new Map,cH=new Set;function uH(e,t){let n=lH.get(e);return n||(n=t(),lH.set(e,n),cH.add(n)),n}const dH=(e,t,n)=>{const i=Mz(t,n);void 0!==i&&e.add(i)};class hH{constructor(e){this._config=function(e){return(e=e||{}).data=oH(e.data),aH(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=oH(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),aH(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return uH(e,(()=>[["datasets.".concat(e),""]]))}datasetAnimationScopeKeys(e,t){return uH("".concat(e,".transition.").concat(t),(()=>[["datasets.".concat(e,".transitions.").concat(t),"transitions.".concat(t)],["datasets.".concat(e),""]]))}datasetElementScopeKeys(e,t){return uH("".concat(e,"-").concat(t),(()=>[["datasets.".concat(e,".elements.").concat(t),"datasets.".concat(e),"elements.".concat(t),""]]))}pluginScopeKeys(e){const t=e.id,n=this.type;return uH("".concat(n,"-plugin-").concat(t),(()=>[["plugins.".concat(t),...e.additionalOptionScopes||[]]]))}_cachedScopes(e,t){const n=this._scopeCache;let i=n.get(e);return i&&!t||(i=new Map,n.set(e,i)),i}getOptionScopes(e,t,n){const{options:i,type:r}=this,s=this._cachedScopes(e,n),a=s.get(t);if(a)return a;const o=new Set;t.forEach((t=>{e&&(o.add(e),t.forEach((t=>dH(o,e,t)))),t.forEach((e=>dH(o,i,e))),t.forEach((e=>dH(o,QF[r]||{},e))),t.forEach((e=>dH(o,nU,e))),t.forEach((e=>dH(o,$F,e)))}));const l=Array.from(o);return 0===l.length&&l.push(Object.create(null)),cH.has(t)&&s.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,QF[t]||{},nU.datasets[t]||{},{type:t},nU,$F]}resolveNamedOptions(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const r={$shared:!0},{resolver:s,subPrefixes:a}=pH(this._resolverCache,e,i);let o=s;if(function(e,t){const{isScriptable:n,isIndexable:i}=PU(e);for(const r of t){const t=n(r),s=i(r),a=(s||t)&&e[r];if(t&&(Cz(a)||fH(a))||s&&lz(a))return!0}return!1}(s,t)){r.$shared=!1;o=AU(s,n=Cz(n)?n():n,this.createResolver(e,n,a))}for(const l of t)r[l]=o[l];return r}createResolver(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],i=arguments.length>3?arguments[3]:void 0;const{resolver:r}=pH(this._resolverCache,e,n);return cz(t)?AU(r,t,void 0,i):r}}function pH(e,t,n){let i=e.get(t);i||(i=new Map,e.set(t,i));const r=n.join();let s=i.get(r);if(!s){s={resolver:CU(t,n),subPrefixes:n.filter((e=>!e.toLowerCase().includes("hover")))},i.set(r,s)}return s}const fH=e=>cz(e)&&Object.getOwnPropertyNames(e).reduce(((t,n)=>t||Cz(e[n])),!1);const mH=["top","bottom","left","right","chartArea"];function gH(e,t){return"top"===e||"bottom"===e||-1===mH.indexOf(e)&&"x"===t}function vH(e,t){return function(n,i){return n[e]===i[e]?n[t]-i[t]:n[e]-i[e]}}function yH(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),fz(n&&n.onComplete,[e],t)}function xH(e){const t=e.chart,n=t.options.animation;fz(n&&n.onProgress,[e],t)}function bH(e){return YU()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const _H={},wH=e=>{const t=bH(e);return Object.values(_H).filter((e=>e.canvas===t)).pop()};function SH(e,t,n){const i=Object.keys(e);for(const r of i){const i=+r;if(i>=t){const s=e[r];delete e[r],(n>0||i>t)&&(e[i+n]=s)}}}class MH{constructor(e,t){const n=this.config=new hH(t),i=bH(e),r=wH(i);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const s=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(e){return!YU()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?FV:eH}(i)),this.platform.updateConfig(n);const a=this.platform.acquireContext(i,s.aspectRatio),o=a&&a.canvas,l=o&&o.height,c=o&&o.width;this.id=az(),this.ctx=a,this.canvas=o,this.width=c,this.height=l,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new tH,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let n;return function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return t?(clearTimeout(n),n=setTimeout(e,t,r)):e.apply(this,r),t}}((e=>this.update(e)),s.resizeDelay||0),this._dataChanges=[],_H[this.id]=this,a&&o?(_B.listen(this,"complete",yH),_B.listen(this,"progress",xH),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:i,_aspectRatio:r}=this;return oz(e)?t&&r?r:i?n/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():iB(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return aU(this.canvas,this.ctx),this}stop(){return _B.stop(this),this}resize(e,t){_B.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const n=this.options,i=this.canvas,r=n.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(i,e,t,r),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),o=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,iB(this,a,!0)&&(this.notifyPlugins("resize",{size:s}),fz(n.onResize,[this,s],this),this.attached&&this._doResize(o)&&this.render())}ensureScalesHaveIDs(){mz(this.options.scales||{},((e,t)=>{e.id=t}))}buildOrUpdateScales(){const e=this.options,t=e.scales,n=this.scales,i=Object.keys(n).reduce(((e,t)=>(e[t]=!1,e)),{});let r=[];t&&(r=r.concat(Object.keys(t).map((e=>{const n=t[e],i=sH(e,n),r="r"===i,s="x"===i;return{options:n,dposition:r?"chartArea":s?"bottom":"left",dtype:r?"radialLinear":s?"category":"linear"}})))),mz(r,(t=>{const r=t.options,s=r.id,a=sH(s,r),o=hz(r.type,t.dtype);void 0!==r.position&&gH(r.position,a)===gH(t.dposition)||(r.position=t.dposition),i[s]=!0;let l=null;if(s in n&&n[s].type===o)l=n[s];else{l=new(pV.getScale(o))({id:s,type:o,ctx:this.ctx,chart:this}),n[l.id]=l}l.init(r,e)})),mz(i,((e,t)=>{e||delete n[t]})),mz(n,(e=>{OV.configure(this,e,e.options),OV.addBox(this,e)}))}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort(((e,t)=>e.index-t.index)),n>t){for(let e=t;e<n;++e)this._destroyDatasetMeta(e);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(vH("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach(((e,n)=>{0===t.filter((t=>t===e._dataset)).length&&this._destroyDatasetMeta(n)}))}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=t.length;n<i;n++){const i=t[n];let r=this.getDatasetMeta(n);const s=i.type||this.config.type;if(r.type&&r.type!==s&&(this._destroyDatasetMeta(n),r=this.getDatasetMeta(n)),r.type=s,r.indexAxis=i.indexAxis||rH(s,this.options),r.order=i.order||0,r.index=n,r.label=""+i.label,r.visible=this.isDatasetVisible(n),r.controller)r.controller.updateIndex(n),r.controller.linkScales();else{const t=pV.getController(s),{datasetElementType:i,dataElementType:a}=nU.datasets[s];Object.assign(t.prototype,{dataElementType:pV.getElement(a),datasetElementType:i&&pV.getElement(i)}),r.controller=new t(this,n),e.push(r.controller)}}return this._updateMetasets(),e}_resetElements(){mz(this.data.datasets,((e,t)=>{this.getDatasetMeta(t).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:e}=this.getDatasetMeta(l),t=!i&&-1===r.indexOf(e);e.buildOrUpdateElements(t),s=Math.max(+e.getMaxOverflow(),s)}s=this._minPadding=n.layout.autoPadding?s:0,this._updateLayout(s),i||mz(r,(e=>{e.reset()})),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(vH("z","_idx"));const{_active:a,_lastEvent:o}=this;o?this._eventHandler(o,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){mz(this.scales,(e=>{OV.removeBox(this,e)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);Az(t,n)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:r}of t){SH(e,i,"_removeElements"===n?-r:r)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,n=t=>new Set(e.filter((e=>e[0]===t)).map(((e,t)=>t+","+e.splice(1).join(",")))),i=n(0);for(let r=1;r<t;r++)if(!Az(i,n(r)))return;return Array.from(i).map((e=>e.split(","))).map((e=>({method:e[1],start:+e[2],count:+e[3]})))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;OV.update(this,this.width,this.height,e);const t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],mz(this.boxes,(e=>{n&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))}),this),this._layers.forEach(((e,t)=>{e._idx=t})),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,Cz(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const n=this.getDatasetMeta(e),i={meta:n,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",i)&&(n.controller._update(t),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(_B.has(this)?this.attached&&!_B.running(this)&&_B.start(this):(this.draw(),yH({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resize(e,t),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,n=[];let i,r;for(i=0,r=t.length;i<r;++i){const r=t[i];e&&!r.visible||n.push(r)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,n=e._clip,i=!n.disabled,r=this.chartArea,s={meta:e,index:e.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",s)&&(i&&uU(t,{left:!1===n.left?0:r.left-n.left,right:!1===n.right?this.width:r.right+n.right,top:!1===n.top?0:r.top-n.top,bottom:!1===n.bottom?this.height:r.bottom+n.bottom}),e.controller.draw(),i&&dU(t),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return cU(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,i){const r=MV.modes[t];return"function"===typeof r?r(this,e,n,i):[]}getDatasetMeta(e){const t=this.data.datasets[e],n=this._metasets;let i=n.filter((e=>e&&e._dataset===t)).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=TU(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const n=this.getDatasetMeta(e);return"boolean"===typeof n.hidden?!n.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){const i=n?"show":"hide",r=this.getDatasetMeta(e),s=r.controller._resolveAnimations(void 0,i);Tz(t)?(r.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),s.update(r,{visible:n}),this.update((t=>t.datasetIndex===e?i:void 0)))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),_B.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),aU(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete _H[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,n=(n,i)=>{t.addEventListener(this,n,i),e[n]=i},i=(e,t,n)=>{e.offsetX=t,e.offsetY=n,this._eventHandler(e)};mz(this.options.events,(e=>n(e,i)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,n=(n,i)=>{t.addEventListener(this,n,i),e[n]=i},i=(n,i)=>{e[n]&&(t.removeEventListener(this,n,i),delete e[n])},r=(e,t)=>{this.canvas&&this.resize(e,t)};let s;const a=()=>{i("attach",a),this.attached=!0,this.resize(),n("resize",r),n("detach",s)};s=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),n("attach",a)},t.isAttached(this.canvas)?a():s()}unbindEvents(){mz(this._listeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._listeners={},mz(this._responsiveListeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){const i=n?"set":"remove";let r,s,a,o;for("dataset"===t&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),a=0,o=e.length;a<o;++a){s=e[a];const t=s&&this.getDatasetMeta(s.datasetIndex).controller;t&&t[i+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],n=e.map((e=>{let{datasetIndex:t,index:n}=e;const i=this.getDatasetMeta(t);if(!i)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:i.data[n],index:n}}));!gz(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}_updateHoverStyles(e,t,n){const i=this.options.hover,r=(e,t)=>e.filter((e=>!t.some((t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)))),s=r(t,e),a=n?e:r(e,t);s.length&&this.updateHoverStyle(s,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,t){const n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},i=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",n,i))return;const r=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(r||n.changed)&&this.render(),this}_handleEvent(e,t,n){const{_active:i=[],options:r}=this,s=t,a=this._getActiveElements(e,i,n,s),o=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),l=function(e,t,n,i){return n&&"mouseout"!==e.type?i?t:e:null}(e,this._lastEvent,n,o);n&&(this._lastEvent=null,fz(r.onHover,[e,a,this],this),o&&fz(r.onClick,[e,a,this],this));const c=!gz(a,i);return(c||t)&&(this._active=a,this._updateHoverStyles(a,i,t)),this._lastEvent=l,c}_getActiveElements(e,t,n,i){if("mouseout"===e.type)return[];if(!n)return t;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,i)}}const EH=()=>mz(MH.instances,(e=>e._plugins.invalidate())),TH=!0;function CH(e,t,n){const{startAngle:i,pixelMargin:r,x:s,y:a,outerRadius:o,innerRadius:l}=t;let c=r/o;e.beginPath(),e.arc(s,a,o,i-c,n+c),l>r?(c=r/l,e.arc(s,a,l,n+c,i-c,!0)):e.arc(s,a,r,n+Lz,i-Lz),e.closePath(),e.clip()}function AH(e,t,n,i){const r=bU(e.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const s=(n-t)/2,a=Math.min(s,i*t/2),o=e=>{const t=(n-Math.min(s,e))*i/2;return Zz(e,0,Math.min(s,t))};return{outerStart:o(r.outerStart),outerEnd:o(r.outerEnd),innerStart:Zz(r.innerStart,0,a),innerEnd:Zz(r.innerEnd,0,a)}}function PH(e,t,n,i){return{x:n+e*Math.cos(t),y:i+e*Math.sin(t)}}function NH(e,t,n,i,r,s){const{x:a,y:o,startAngle:l,pixelMargin:c,innerRadius:u}=t,d=Math.max(t.outerRadius+i+n-c,0),h=u>0?u+i+n+c:0;let p=0;const f=r-l;if(i){const e=((u>0?u-i:0)+(d>0?d-i:0))/2;p=(f-(0!==e?f*e/(e+i):f))/2}const m=(f-Math.max(.001,f*d-n/Pz)/d)/2,g=l+m+p,v=r-m-p,{outerStart:y,outerEnd:x,innerStart:b,innerEnd:_}=AH(t,h,d,v-g),w=d-y,S=d-x,M=g+y/w,E=v-x/S,T=h+b,C=h+_,A=g+b/T,P=v-_/C;if(e.beginPath(),s){if(e.arc(a,o,d,M,E),x>0){const t=PH(S,E,a,o);e.arc(t.x,t.y,x,E,v+Lz)}const t=PH(C,v,a,o);if(e.lineTo(t.x,t.y),_>0){const t=PH(C,P,a,o);e.arc(t.x,t.y,_,v+Lz,P+Math.PI)}if(e.arc(a,o,h,v-_/h,g+b/h,!0),b>0){const t=PH(T,A,a,o);e.arc(t.x,t.y,b,A+Math.PI,g-Lz)}const n=PH(w,g,a,o);if(e.lineTo(n.x,n.y),y>0){const t=PH(w,M,a,o);e.arc(t.x,t.y,y,g-Lz,M)}}else{e.moveTo(a,o);const t=Math.cos(M)*d+a,n=Math.sin(M)*d+o;e.lineTo(t,n);const i=Math.cos(E)*d+a,r=Math.sin(E)*d+o;e.lineTo(i,r)}e.closePath()}function kH(e,t,n,i,r,s){const{options:a}=t,{borderWidth:o,borderJoinStyle:l}=a,c="inner"===a.borderAlign;o&&(c?(e.lineWidth=2*o,e.lineJoin=l||"round"):(e.lineWidth=o,e.lineJoin=l||"bevel"),t.fullCircles&&function(e,t,n){const{x:i,y:r,startAngle:s,pixelMargin:a,fullCircles:o}=t,l=Math.max(t.outerRadius-a,0),c=t.innerRadius+a;let u;for(n&&CH(e,t,s+Nz),e.beginPath(),e.arc(i,r,c,s+Nz,s,!0),u=0;u<o;++u)e.stroke();for(e.beginPath(),e.arc(i,r,l,s,s+Nz),u=0;u<o;++u)e.stroke()}(e,t,c),c&&CH(e,t,r),NH(e,t,n,i,r,s),e.stroke())}Object.defineProperties(MH,{defaults:{enumerable:TH,value:nU},instances:{enumerable:TH,value:_H},overrides:{enumerable:TH,value:QF},registry:{enumerable:TH,value:pV},version:{enumerable:TH,value:"3.9.1"},getChart:{enumerable:TH,value:wH},register:{enumerable:TH,value:function(){pV.add(...arguments),EH()}},unregister:{enumerable:TH,value:function(){pV.remove(...arguments),EH()}}});class RH extends eV{constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,n){const i=this.getProps(["x","y"],n),{angle:r,distance:s}=qz(i,{x:e,y:t}),{startAngle:a,endAngle:o,innerRadius:l,outerRadius:c,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),d=this.options.spacing/2,h=hz(u,o-a)>=Nz||Kz(r,a,o),p=Qz(s,l+d,c+d);return h&&p}getCenterPoint(e){const{x:t,y:n,startAngle:i,endAngle:r,innerRadius:s,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],e),{offset:o,spacing:l}=this.options,c=(i+r)/2,u=(s+a+l+o)/2;return{x:t+Math.cos(c)*u,y:n+Math.sin(c)*u}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:n}=this,i=(t.offset||0)/2,r=(t.spacing||0)/2,s=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=n>Nz?Math.floor(n/Nz):0,0===n||this.innerRadius<0||this.outerRadius<0)return;e.save();let a=0;if(i){a=i/2;const t=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(t)*a,Math.sin(t)*a),this.circumference>=Pz&&(a=i)}e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor;const o=function(e,t,n,i,r){const{fullCircles:s,startAngle:a,circumference:o}=t;let l=t.endAngle;if(s){NH(e,t,n,i,a+Nz,r);for(let t=0;t<s;++t)e.fill();isNaN(o)||(l=a+o%Nz,o%Nz===0&&(l+=Nz))}return NH(e,t,n,i,l,r),e.fill(),l}(e,this,a,r,s);kH(e,this,a,r,o,s),e.restore()}}function IH(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=hz(n.borderCapStyle,t.borderCapStyle),e.setLineDash(hz(n.borderDash,t.borderDash)),e.lineDashOffset=hz(n.borderDashOffset,t.borderDashOffset),e.lineJoin=hz(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=hz(n.borderWidth,t.borderWidth),e.strokeStyle=hz(n.borderColor,t.borderColor)}function LH(e,t,n){e.lineTo(n.x,n.y)}function jH(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=e.length,{start:r=0,end:s=i-1}=n,{start:a,end:o}=t,l=Math.max(r,a),c=Math.min(s,o),u=r<a&&s<a||r>o&&s>o;return{count:i,start:l,loop:t.loop,ilen:c<l&&!u?i+c-l:c-l}}function DH(e,t,n,i){const{points:r,options:s}=t,{count:a,start:o,loop:l,ilen:c}=jH(r,n,i),u=function(e){return e.stepped?hU:e.tension||"monotone"===e.cubicInterpolationMode?pU:LH}(s);let d,h,p,{move:f=!0,reverse:m}=i||{};for(d=0;d<=c;++d)h=r[(o+(m?c-d:d))%a],h.skip||(f?(e.moveTo(h.x,h.y),f=!1):u(e,p,h,m,s.stepped),p=h);return l&&(h=r[(o+(m?c:0))%a],u(e,p,h,m,s.stepped)),!!l}function OH(e,t,n,i){const r=t.points,{count:s,start:a,ilen:o}=jH(r,n,i),{move:l=!0,reverse:c}=i||{};let u,d,h,p,f,m,g=0,v=0;const y=e=>(a+(c?o-e:e))%s,x=()=>{p!==f&&(e.lineTo(g,f),e.lineTo(g,p),e.lineTo(g,m))};for(l&&(d=r[y(0)],e.moveTo(d.x,d.y)),u=0;u<=o;++u){if(d=r[y(u)],d.skip)continue;const t=d.x,n=d.y,i=0|t;i===h?(n<p?p=n:n>f&&(f=n),g=(v*g+t)/++v):(x(),e.lineTo(t,n),h=i,v=0,p=f=n),m=n}x()}function zH(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!n?OH:DH}RH.id="arc",RH.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0},RH.defaultRoutes={backgroundColor:"backgroundColor"};const FH="function"===typeof Path2D;function UH(e,t,n,i){FH&&!t.options.segment?function(e,t,n,i){let r=t._path;r||(r=t._path=new Path2D,t.path(r,n,i)&&r.closePath()),IH(e,t.options),e.stroke(r)}(e,t,n,i):function(e,t,n,i){const{segments:r,options:s}=t,a=zH(t);for(const o of r)IH(e,s,o.style),e.beginPath(),a(e,t,o,{start:n,end:n+i-1})&&e.closePath(),e.stroke()}(e,t,n,i)}class BH extends eV{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const i=n.spanGaps?this._loop:this._fullLoop;XU(this._points,n,e,i,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){const n=e.points,i=e.options.spanGaps,r=n.length;if(!r)return[];const s=!!e._loop,{start:a,end:o}=function(e,t,n,i){let r=0,s=t-1;if(n&&!i)for(;r<t&&!e[r].skip;)r++;for(;r<t&&e[r].skip;)r++;for(r%=t,n&&(s+=r);s>r&&e[s%t].skip;)s--;return s%=t,{start:r,end:s}}(n,r,s,i);return yB(e,!0===i?[{start:a,end:o,loop:s}]:function(e,t,n,i){const r=e.length,s=[];let a,o=t,l=e[t];for(a=t+1;a<=n;++a){const n=e[a%r];n.skip||n.stop?l.skip||(i=!1,s.push({start:t%r,end:(a-1)%r,loop:i}),t=o=n.stop?a:null):(o=a,l.skip&&(t=a)),l=n}return null!==o&&s.push({start:t%r,end:o%r,loop:i}),s}(n,a,o<a?o+r:o,!!e._fullLoop&&0===a&&o===r-1),n,t)}(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}interpolate(e,t){const n=this.options,i=e[t],r=this.points,s=vB(this,{property:t,start:i,end:i});if(!s.length)return;const a=[],o=function(e){return e.stepped?oB:e.tension||"monotone"===e.cubicInterpolationMode?lB:aB}(n);let l,c;for(l=0,c=s.length;l<c;++l){const{start:c,end:u}=s[l],d=r[c],h=r[u];if(d===h){a.push(d);continue}const p=o(d,h,Math.abs((i-d[t])/(h[t]-d[t])),n.stepped);p[t]=e[t],a.push(p)}return 1===a.length?a[0]:a}pathSegment(e,t,n){return zH(this)(e,this,t,n)}path(e,t,n){const i=this.segments,r=zH(this);let s=this._loop;t=t||0,n=n||this.points.length-t;for(const a of i)s&=r(e,this,a,{start:t,end:t+n-1});return!!s}draw(e,t,n,i){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(e.save(),UH(e,this,n,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function VH(e,t,n,i){const r=e.options,{[n]:s}=e.getProps([n],i);return Math.abs(t-s)<r.radius+r.hitRadius}BH.id="line",BH.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},BH.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},BH.descriptors={_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e};class HH extends eV{constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,n){const i=this.options,{x:r,y:s}=this.getProps(["x","y"],n);return Math.pow(e-r,2)+Math.pow(t-s,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(e,t){return VH(this,e,"x",t)}inYRange(e,t){return VH(this,e,"y",t)}getCenterPoint(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e,t){const n=this.options;this.skip||n.radius<.1||!cU(this,t,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,oU(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function WH(e,t){const{x:n,y:i,base:r,width:s,height:a}=e.getProps(["x","y","base","width","height"],t);let o,l,c,u,d;return e.horizontal?(d=a/2,o=Math.min(n,r),l=Math.max(n,r),c=i-d,u=i+d):(d=s/2,o=n-d,l=n+d,c=Math.min(i,r),u=Math.max(i,r)),{left:o,top:c,right:l,bottom:u}}function GH(e,t,n,i){return e?0:Zz(t,n,i)}function qH(e){const t=WH(e),n=t.right-t.left,i=t.bottom-t.top,r=function(e,t,n){const i=e.options.borderWidth,r=e.borderSkipped,s=_U(i);return{t:GH(r.top,s.top,0,n),r:GH(r.right,s.right,0,t),b:GH(r.bottom,s.bottom,0,n),l:GH(r.left,s.left,0,t)}}(e,n/2,i/2),s=function(e,t,n){const{enableBorderRadius:i}=e.getProps(["enableBorderRadius"]),r=e.options.borderRadius,s=wU(r),a=Math.min(t,n),o=e.borderSkipped,l=i||cz(r);return{topLeft:GH(!l||o.top||o.left,s.topLeft,0,a),topRight:GH(!l||o.top||o.right,s.topRight,0,a),bottomLeft:GH(!l||o.bottom||o.left,s.bottomLeft,0,a),bottomRight:GH(!l||o.bottom||o.right,s.bottomRight,0,a)}}(e,n/2,i/2);return{outer:{x:t.left,y:t.top,w:n,h:i,radius:s},inner:{x:t.left+r.l,y:t.top+r.t,w:n-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function XH(e,t,n,i){const r=null===t,s=null===n,a=e&&!(r&&s)&&WH(e,i);return a&&(r||Qz(t,a.left,a.right))&&(s||Qz(n,a.top,a.bottom))}function YH(e,t){e.rect(t.x,t.y,t.w,t.h)}function JH(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=e.x!==n.x?-t:0,r=e.y!==n.y?-t:0,s=(e.x+e.w!==n.x+n.w?t:0)-i,a=(e.y+e.h!==n.y+n.h?t:0)-r;return{x:e.x+i,y:e.y+r,w:e.w+s,h:e.h+a,radius:e.radius}}HH.id="point",HH.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},HH.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};class KH extends eV{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:n,backgroundColor:i}}=this,{inner:r,outer:s}=qH(this),a=(o=s.radius).topLeft||o.topRight||o.bottomLeft||o.bottomRight?gU:YH;var o;e.save(),s.w===r.w&&s.h===r.h||(e.beginPath(),a(e,JH(s,t,r)),e.clip(),a(e,JH(r,-t,s)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),a(e,JH(r,t)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,t,n){return XH(this,e,t,n)}inXRange(e,t){return XH(this,e,null,t)}inYRange(e,t){return XH(this,null,e,t)}getCenterPoint(e){const{x:t,y:n,base:i,horizontal:r}=this.getProps(["x","y","base","horizontal"],e);return{x:r?(t+i)/2:t,y:r?n:(n+i)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}KH.id="bar",KH.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0},KH.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};function ZH(e,t,n,i){if(i)return;let r=t[e],s=n[e];return"angle"===e&&(r=Jz(r),s=Jz(s)),{property:e,start:r,end:s}}function QH(e,t,n){for(;t>e;t--){const e=n[t];if(!isNaN(e.x)&&!isNaN(e.y))break}return t}function $H(e,t,n,i){return e&&t?i(e[n],t[n]):e?e[n]:t?t[n]:0}function eW(e,t){let n=[],i=!1;return lz(e)?(i=!0,n=e):n=function(e,t){const{x:n=null,y:i=null}=e||{},r=t.points,s=[];return t.segments.forEach((e=>{let{start:t,end:a}=e;a=QH(t,a,r);const o=r[t],l=r[a];null!==i?(s.push({x:o.x,y:i}),s.push({x:l.x,y:i})):null!==n&&(s.push({x:n,y:o.y}),s.push({x:n,y:l.y}))})),s}(e,t),n.length?new BH({points:n,options:{tension:0},_loop:i,_fullLoop:i}):null}function tW(e){return e&&!1!==e.fill}function nW(e,t,n){let i=e[t].fill;const r=[t];let s;if(!n)return i;for(;!1!==i&&-1===r.indexOf(i);){if(!uz(i))return i;if(s=e[i],!s)return!1;if(s.visible)return i;r.push(i),i=s.fill}return!1}function iW(e,t,n){const i=function(e){const t=e.options,n=t.fill;let i=hz(n&&n.target,n);void 0===i&&(i=!!t.backgroundColor);if(!1===i||null===i)return!1;if(!0===i)return"origin";return i}(e);if(cz(i))return!isNaN(i.value)&&i;let r=parseFloat(i);return uz(r)&&Math.floor(r)===r?function(e,t,n,i){"-"!==e&&"+"!==e||(n=t+n);if(n===t||n<0||n>=i)return!1;return n}(i[0],t,r,n):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function rW(e,t,n){const i=[];for(let r=0;r<n.length;r++){const s=n[r],{first:a,last:o,point:l}=sW(s,t,"x");if(!(!l||a&&o))if(a)i.unshift(l);else if(e.push(l),!o)break}e.push(...i)}function sW(e,t,n){const i=e.interpolate(t,n);if(!i)return{};const r=i[n],s=e.segments,a=e.points;let o=!1,l=!1;for(let c=0;c<s.length;c++){const e=s[c],t=a[e.start][n],i=a[e.end][n];if(Qz(r,t,i)){o=r===t,l=r===i;break}}return{first:o,last:l,point:i}}class aW{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,n){const{x:i,y:r,radius:s}=this;return t=t||{start:0,end:Nz},e.arc(i,r,s,t.end,t.start,!0),!n.bounds}interpolate(e){const{x:t,y:n,radius:i}=this,r=e.angle;return{x:t+Math.cos(r)*i,y:n+Math.sin(r)*i,angle:r}}}function oW(e){const{chart:t,fill:n,line:i}=e;if(uz(n))return function(e,t){const n=e.getDatasetMeta(t),i=n&&e.isDatasetVisible(t);return i?n.dataset:null}(t,n);if("stack"===n)return function(e){const{scale:t,index:n,line:i}=e,r=[],s=i.segments,a=i.points,o=function(e,t){const n=[],i=e.getMatchingVisibleMetas("line");for(let r=0;r<i.length;r++){const e=i[r];if(e.index===t)break;e.hidden||n.unshift(e.dataset)}return n}(t,n);o.push(eW({x:null,y:t.bottom},i));for(let l=0;l<s.length;l++){const e=s[l];for(let t=e.start;t<=e.end;t++)rW(r,a[t],o)}return new BH({points:r,options:{}})}(e);if("shape"===n)return!0;const r=function(e){const t=e.scale||{};if(t.getPointPositionForValue)return function(e){const{scale:t,fill:n}=e,i=t.options,r=t.getLabels().length,s=i.reverse?t.max:t.min,a=function(e,t,n){let i;return i="start"===e?n:"end"===e?t.options.reverse?t.min:t.max:cz(e)?e.value:t.getBaseValue(),i}(n,t,s),o=[];if(i.grid.circular){const e=t.getPointPositionForValue(0,s);return new aW({x:e.x,y:e.y,radius:t.getDistanceFromCenterForValue(a)})}for(let l=0;l<r;++l)o.push(t.getPointPositionForValue(l,a));return o}(e);return function(e){const{scale:t={},fill:n}=e,i=function(e,t){let n=null;return"start"===e?n=t.bottom:"end"===e?n=t.top:cz(e)?n=t.getPixelForValue(e.value):t.getBasePixel&&(n=t.getBasePixel()),n}(n,t);if(uz(i)){const e=t.isHorizontal();return{x:e?i:null,y:e?null:i}}return null}(e)}(e);return r instanceof aW?r:eW(r,i)}function lW(e,t,n){const i=oW(t),{line:r,scale:s,axis:a}=t,o=r.options,l=o.fill,c=o.backgroundColor,{above:u=c,below:d=c}=l||{};i&&r.points.length&&(uU(e,n),function(e,t){const{line:n,target:i,above:r,below:s,area:a,scale:o}=t,l=n._loop?"angle":t.axis;e.save(),"x"===l&&s!==r&&(cW(e,i,a.top),uW(e,{line:n,target:i,color:r,scale:o,property:l}),e.restore(),e.save(),cW(e,i,a.bottom));uW(e,{line:n,target:i,color:s,scale:o,property:l}),e.restore()}(e,{line:r,target:i,above:u,below:d,area:n,scale:s,axis:a}),dU(e))}function cW(e,t,n){const{segments:i,points:r}=t;let s=!0,a=!1;e.beginPath();for(const o of i){const{start:i,end:l}=o,c=r[i],u=r[QH(i,l,r)];s?(e.moveTo(c.x,c.y),s=!1):(e.lineTo(c.x,n),e.lineTo(c.x,c.y)),a=!!t.pathSegment(e,o,{move:a}),a?e.closePath():e.lineTo(u.x,n)}e.lineTo(t.first().x,n),e.closePath(),e.clip()}function uW(e,t){const{line:n,target:i,property:r,color:s,scale:a}=t,o=function(e,t,n){const i=e.segments,r=e.points,s=t.points,a=[];for(const o of i){let{start:e,end:i}=o;i=QH(e,i,r);const l=ZH(n,r[e],r[i],o.loop);if(!t.segments){a.push({source:o,target:l,start:r[e],end:r[i]});continue}const c=vB(t,l);for(const t of c){const e=ZH(n,s[t.start],s[t.end],t.loop),i=gB(o,r,e);for(const r of i)a.push({source:r,target:t,start:{[n]:$H(l,e,"start",Math.max)},end:{[n]:$H(l,e,"end",Math.min)}})}}return a}(n,i,r);for(const{source:l,target:c,start:u,end:d}of o){const{style:{backgroundColor:t=s}={}}=l,o=!0!==i;e.save(),e.fillStyle=t,dW(e,a,o&&ZH(r,u,d)),e.beginPath();const h=!!n.pathSegment(e,l);let p;if(o){h?e.closePath():hW(e,i,d,r);const t=!!i.pathSegment(e,c,{move:h,reverse:!0});p=h&&t,p||hW(e,i,u,r)}e.closePath(),e.fill(p?"evenodd":"nonzero"),e.restore()}}function dW(e,t,n){const{top:i,bottom:r}=t.chart.chartArea,{property:s,start:a,end:o}=n||{};"x"===s&&(e.beginPath(),e.rect(a,i,o-a,r-i),e.clip())}function hW(e,t,n,i){const r=t.interpolate(n,i);r&&e.lineTo(r.x,r.y)}var pW={id:"filler",afterDatasetsUpdate(e,t,n){const i=(e.data.datasets||[]).length,r=[];let s,a,o,l;for(a=0;a<i;++a)s=e.getDatasetMeta(a),o=s.dataset,l=null,o&&o.options&&o instanceof BH&&(l={visible:e.isDatasetVisible(a),index:a,fill:iW(o,a,i),chart:e,axis:s.controller.options.indexAxis,scale:s.vScale,line:o}),s.$filler=l,r.push(l);for(a=0;a<i;++a)l=r[a],l&&!1!==l.fill&&(l.fill=nW(r,a,n.propagate))},beforeDraw(e,t,n){const i="beforeDraw"===n.drawTime,r=e.getSortedVisibleDatasetMetas(),s=e.chartArea;for(let a=r.length-1;a>=0;--a){const t=r[a].$filler;t&&(t.line.updateControlPoints(s,t.axis),i&&t.fill&&lW(e.ctx,t,s))}},beforeDatasetsDraw(e,t,n){if("beforeDatasetsDraw"!==n.drawTime)return;const i=e.getSortedVisibleDatasetMetas();for(let r=i.length-1;r>=0;--r){const t=i[r].$filler;tW(t)&&lW(e.ctx,t,e.chartArea)}},beforeDatasetDraw(e,t,n){const i=t.meta.$filler;tW(i)&&"beforeDatasetDraw"===n.drawTime&&lW(e.ctx,i,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const fW=(e,t)=>{let{boxHeight:n=t,boxWidth:i=t}=e;return e.usePointStyle&&(n=Math.min(n,t),i=e.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(t,n)}};class mW extends eV{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=fz(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter((t=>e.filter(t,this.chart.data)))),e.sort&&(t=t.sort(((t,n)=>e.sort(t,n,this.chart.data)))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const n=e.labels,i=MU(n.font),r=i.size,s=this._computeTitleHeight(),{boxWidth:a,itemHeight:o}=fW(n,r);let l,c;t.font=i.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(s,r,a,o)+10):(c=this.maxHeight,l=this._fitCols(s,r,a,o)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,n,i){const{ctx:r,maxWidth:s,options:{labels:{padding:a}}}=this,o=this.legendHitBoxes=[],l=this.lineWidths=[0],c=i+a;let u=e;r.textAlign="left",r.textBaseline="middle";let d=-1,h=-c;return this.legendItems.forEach(((e,p)=>{const f=n+t/2+r.measureText(e.text).width;(0===p||l[l.length-1]+f+2*a>s)&&(u+=c,l[l.length-(p>0?0:1)]=0,h+=c,d++),o[p]={left:0,top:h,row:d,width:f,height:i},l[l.length-1]+=f+a})),u}_fitCols(e,t,n,i){const{ctx:r,maxHeight:s,options:{labels:{padding:a}}}=this,o=this.legendHitBoxes=[],l=this.columnSizes=[],c=s-e;let u=a,d=0,h=0,p=0,f=0;return this.legendItems.forEach(((e,s)=>{const m=n+t/2+r.measureText(e.text).width;s>0&&h+i+2*a>c&&(u+=d+a,l.push({width:d,height:h}),p+=d+a,f++,d=h=0),o[s]={left:p,top:h,col:f,width:m,height:i},d=Math.max(d,m),h+=i+a})),u+=d,l.push({width:d,height:h}),u}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:i},rtl:r}}=this,s=dB(r,this.left,this.width);if(this.isHorizontal()){let r=0,a=lF(n,this.left+i,this.right-this.lineWidths[r]);for(const o of t)r!==o.row&&(r=o.row,a=lF(n,this.left+i,this.right-this.lineWidths[r])),o.top+=this.top+e+i,o.left=s.leftForLtr(s.x(a),o.width),a+=o.width+i}else{let r=0,a=lF(n,this.top+e+i,this.bottom-this.columnSizes[r].height);for(const o of t)o.col!==r&&(r=o.col,a=lF(n,this.top+e+i,this.bottom-this.columnSizes[r].height)),o.top=a,o.left+=this.left+i,o.left=s.leftForLtr(s.x(o.left),o.width),a+=o.height+i}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;uU(e,this),this._draw(),dU(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:n,ctx:i}=this,{align:r,labels:s}=e,a=nU.color,o=dB(e.rtl,this.left,this.width),l=MU(s.font),{color:c,padding:u}=s,d=l.size,h=d/2;let p;this.drawTitle(),i.textAlign=o.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=l.string;const{boxWidth:f,boxHeight:m,itemHeight:g}=fW(s,d),v=this.isHorizontal(),y=this._computeTitleHeight();p=v?{x:lF(r,this.left+u,this.right-n[0]),y:this.top+u+y,line:0}:{x:this.left+u,y:lF(r,this.top+y+u,this.bottom-t[0].height),line:0},hB(this.ctx,e.textDirection);const x=g+u;this.legendItems.forEach(((b,_)=>{i.strokeStyle=b.fontColor||c,i.fillStyle=b.fontColor||c;const w=i.measureText(b.text).width,S=o.textAlign(b.textAlign||(b.textAlign=s.textAlign)),M=f+h+w;let E=p.x,T=p.y;o.setWidth(this.width),v?_>0&&E+M+u>this.right&&(T=p.y+=x,p.line++,E=p.x=lF(r,this.left+u,this.right-n[p.line])):_>0&&T+x>this.bottom&&(E=p.x=E+t[p.line].width+u,p.line++,T=p.y=lF(r,this.top+y+u,this.bottom-t[p.line].height));!function(e,t,n){if(isNaN(f)||f<=0||isNaN(m)||m<0)return;i.save();const r=hz(n.lineWidth,1);if(i.fillStyle=hz(n.fillStyle,a),i.lineCap=hz(n.lineCap,"butt"),i.lineDashOffset=hz(n.lineDashOffset,0),i.lineJoin=hz(n.lineJoin,"miter"),i.lineWidth=r,i.strokeStyle=hz(n.strokeStyle,a),i.setLineDash(hz(n.lineDash,[])),s.usePointStyle){const a={radius:m*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:r},l=o.xPlus(e,f/2);lU(i,a,l,t+h,s.pointStyleWidth&&f)}else{const s=t+Math.max((d-m)/2,0),a=o.leftForLtr(e,f),l=wU(n.borderRadius);i.beginPath(),Object.values(l).some((e=>0!==e))?gU(i,{x:a,y:s,w:f,h:m,radius:l}):i.rect(a,s,f,m),i.fill(),0!==r&&i.stroke()}i.restore()}(o.x(E),T,b),E=((e,t,n,i)=>e===(i?"left":"right")?n:"center"===e?(t+n)/2:t)(S,E+f+h,v?E+M:this.right,e.rtl),function(e,t,n){fU(i,n.text,e,t+g/2,l,{strikethrough:n.hidden,textAlign:o.textAlign(n.textAlign)})}(o.x(E),T,b),v?p.x+=M+u:p.y+=x})),pB(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,n=MU(t.font),i=SU(t.padding);if(!t.display)return;const r=dB(e.rtl,this.left,this.width),s=this.ctx,a=t.position,o=n.size/2,l=i.top+o;let c,u=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),c=this.top+l,u=lF(e.align,u,this.right-d);else{const t=this.columnSizes.reduce(((e,t)=>Math.max(e,t.height)),0);c=l+lF(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const h=lF(a,u,u+d);s.textAlign=r.textAlign(oF(a)),s.textBaseline="middle",s.strokeStyle=t.color,s.fillStyle=t.color,s.font=n.string,fU(s,t.text,h,c,n)}_computeTitleHeight(){const e=this.options.title,t=MU(e.font),n=SU(e.padding);return e.display?t.lineHeight+n.height:0}_getLegendItemAt(e,t){let n,i,r;if(Qz(e,this.left,this.right)&&Qz(t,this.top,this.bottom))for(r=this.legendHitBoxes,n=0;n<r.length;++n)if(i=r[n],Qz(e,i.left,i.left+i.width)&&Qz(t,i.top,i.top+i.height))return this.legendItems[n];return null}handleEvent(e){const t=this.options;if(!function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const n=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const i=this._hoveredItem,r=((e,t)=>null!==e&&null!==t&&e.datasetIndex===t.datasetIndex&&e.index===t.index)(i,n);i&&!r&&fz(t.onLeave,[e,i,this],this),this._hoveredItem=n,n&&!r&&fz(t.onHover,[e,n,this],this)}else n&&fz(t.onClick,[e,n,this],this)}}var gW={id:"legend",_element:mW,start(e,t,n){const i=e.legend=new mW({ctx:e.ctx,options:n,chart:e});OV.configure(e,i,n),OV.addBox(e,i)},stop(e){OV.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const i=e.legend;OV.configure(e,i,n),i.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const i=t.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),t.hidden=!0):(r.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:s}}=e.legend.options;return e._getSortedDatasetMetas().map((e=>{const a=e.controller.getStyle(n?0:void 0),o=SU(a.borderWidth);return{text:t[e.index].label,fillStyle:a.backgroundColor,fontColor:s,hidden:!e.visible,lineCap:a.borderCapStyle,lineDash:a.borderDash,lineDashOffset:a.borderDashOffset,lineJoin:a.borderJoinStyle,lineWidth:(o.width+o.height)/4,strokeStyle:a.borderColor,pointStyle:i||a.pointStyle,rotation:a.rotation,textAlign:r||a.textAlign,borderRadius:0,datasetIndex:e.index}}),this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class vW extends eV{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const i=lz(n.text)?n.text.length:1;this._padding=SU(n.padding);const r=i*MU(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:n,bottom:i,right:r,options:s}=this,a=s.align;let o,l,c,u=0;return this.isHorizontal()?(l=lF(a,n,r),c=t+e,o=r-n):("left"===s.position?(l=n+e,c=lF(a,i,t),u=-.5*Pz):(l=r-e,c=lF(a,t,i),u=.5*Pz),o=i-t),{titleX:l,titleY:c,maxWidth:o,rotation:u}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const n=MU(t.font),i=n.lineHeight/2+this._padding.top,{titleX:r,titleY:s,maxWidth:a,rotation:o}=this._drawArgs(i);fU(e,t.text,0,0,n,{color:t.color,maxWidth:a,rotation:o,textAlign:oF(t.align),textBaseline:"middle",translation:[r,s]})}}var yW={id:"title",_element:vW,start(e,t,n){!function(e,t){const n=new vW({ctx:e.ctx,options:t,chart:e});OV.configure(e,n,t),OV.addBox(e,n),e.titleBlock=n}(e,n)},stop(e){const t=e.titleBlock;OV.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const i=e.titleBlock;OV.configure(e,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};new WeakMap;const xW={average(e){if(!e.length)return!1;let t,n,i=0,r=0,s=0;for(t=0,n=e.length;t<n;++t){const n=e[t].element;if(n&&n.hasValue()){const e=n.tooltipPosition();i+=e.x,r+=e.y,++s}}return{x:i/s,y:r/s}},nearest(e,t){if(!e.length)return!1;let n,i,r,s=t.x,a=t.y,o=Number.POSITIVE_INFINITY;for(n=0,i=e.length;n<i;++n){const i=e[n].element;if(i&&i.hasValue()){const e=Xz(t,i.getCenterPoint());e<o&&(o=e,r=i)}}if(r){const e=r.tooltipPosition();s=e.x,a=e.y}return{x:s,y:a}}};function bW(e,t){return t&&(lz(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function _W(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function wW(e,t){const{element:n,datasetIndex:i,index:r}=t,s=e.getDatasetMeta(i).controller,{label:a,value:o}=s.getLabelAndValue(r);return{chart:e,label:a,parsed:s.getParsed(r),raw:e.data.datasets[i].data[r],formattedValue:o,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function SW(e,t){const n=e.chart.ctx,{body:i,footer:r,title:s}=e,{boxWidth:a,boxHeight:o}=t,l=MU(t.bodyFont),c=MU(t.titleFont),u=MU(t.footerFont),d=s.length,h=r.length,p=i.length,f=SU(t.padding);let m=f.height,g=0,v=i.reduce(((e,t)=>e+t.before.length+t.lines.length+t.after.length),0);if(v+=e.beforeBody.length+e.afterBody.length,d&&(m+=d*c.lineHeight+(d-1)*t.titleSpacing+t.titleMarginBottom),v){m+=p*(t.displayColors?Math.max(o,l.lineHeight):l.lineHeight)+(v-p)*l.lineHeight+(v-1)*t.bodySpacing}h&&(m+=t.footerMarginTop+h*u.lineHeight+(h-1)*t.footerSpacing);let y=0;const x=function(e){g=Math.max(g,n.measureText(e).width+y)};return n.save(),n.font=c.string,mz(e.title,x),n.font=l.string,mz(e.beforeBody.concat(e.afterBody),x),y=t.displayColors?a+2+t.boxPadding:0,mz(i,(e=>{mz(e.before,x),mz(e.lines,x),mz(e.after,x)})),y=0,n.font=u.string,mz(e.footer,x),n.restore(),g+=f.width,{width:g,height:m}}function MW(e,t,n,i){const{x:r,width:s}=n,{width:a,chartArea:{left:o,right:l}}=e;let c="center";return"center"===i?c=r<=(o+l)/2?"left":"right":r<=s/2?c="left":r>=a-s/2&&(c="right"),function(e,t,n,i){const{x:r,width:s}=i,a=n.caretSize+n.caretPadding;return"left"===e&&r+s+a>t.width||"right"===e&&r-s-a<0||void 0}(c,e,t,n)&&(c="center"),c}function EW(e,t,n){const i=n.yAlign||t.yAlign||function(e,t){const{y:n,height:i}=t;return n<i/2?"top":n>e.height-i/2?"bottom":"center"}(e,n);return{xAlign:n.xAlign||t.xAlign||MW(e,t,n,i),yAlign:i}}function TW(e,t,n,i){const{caretSize:r,caretPadding:s,cornerRadius:a}=e,{xAlign:o,yAlign:l}=n,c=r+s,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:p}=wU(a);let f=function(e,t){let{x:n,width:i}=e;return"right"===t?n-=i:"center"===t&&(n-=i/2),n}(t,o);const m=function(e,t,n){let{y:i,height:r}=e;return"top"===t?i+=n:i-="bottom"===t?r+n:r/2,i}(t,l,c);return"center"===l?"left"===o?f+=c:"right"===o&&(f-=c):"left"===o?f-=Math.max(u,h)+r:"right"===o&&(f+=Math.max(d,p)+r),{x:Zz(f,0,i.width-t.width),y:Zz(m,0,i.height-t.height)}}function CW(e,t,n){const i=SU(n.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-i.right:e.x+i.left}function AW(e){return bW([],_W(e))}function PW(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}class NW extends eV{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart||e._chart,this._chart=this.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&t.options.animation&&n.animations,r=new TB(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,n=this._tooltipItems,TU(e,{tooltip:t,tooltipItems:n,type:"tooltip"})));var e,t,n}getTitle(e,t){const{callbacks:n}=t,i=n.beforeTitle.apply(this,[e]),r=n.title.apply(this,[e]),s=n.afterTitle.apply(this,[e]);let a=[];return a=bW(a,_W(i)),a=bW(a,_W(r)),a=bW(a,_W(s)),a}getBeforeBody(e,t){return AW(t.callbacks.beforeBody.apply(this,[e]))}getBody(e,t){const{callbacks:n}=t,i=[];return mz(e,(e=>{const t={before:[],lines:[],after:[]},r=PW(n,e);bW(t.before,_W(r.beforeLabel.call(this,e))),bW(t.lines,r.label.call(this,e)),bW(t.after,_W(r.afterLabel.call(this,e))),i.push(t)})),i}getAfterBody(e,t){return AW(t.callbacks.afterBody.apply(this,[e]))}getFooter(e,t){const{callbacks:n}=t,i=n.beforeFooter.apply(this,[e]),r=n.footer.apply(this,[e]),s=n.afterFooter.apply(this,[e]);let a=[];return a=bW(a,_W(i)),a=bW(a,_W(r)),a=bW(a,_W(s)),a}_createItems(e){const t=this._active,n=this.chart.data,i=[],r=[],s=[];let a,o,l=[];for(a=0,o=t.length;a<o;++a)l.push(wW(this.chart,t[a]));return e.filter&&(l=l.filter(((t,i,r)=>e.filter(t,i,r,n)))),e.itemSort&&(l=l.sort(((t,i)=>e.itemSort(t,i,n)))),mz(l,(t=>{const n=PW(e.callbacks,t);i.push(n.labelColor.call(this,t)),r.push(n.labelPointStyle.call(this,t)),s.push(n.labelTextColor.call(this,t))})),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=s,this.dataPoints=l,l}update(e,t){const n=this.options.setContext(this.getContext()),i=this._active;let r,s=[];if(i.length){const e=xW[n.position].call(this,i,this._eventPosition);s=this._createItems(n),this.title=this.getTitle(s,n),this.beforeBody=this.getBeforeBody(s,n),this.body=this.getBody(s,n),this.afterBody=this.getAfterBody(s,n),this.footer=this.getFooter(s,n);const t=this._size=SW(this,n),a=Object.assign({},e,t),o=EW(this.chart,n,a),l=TW(n,a,o,this.chart);this.xAlign=o.xAlign,this.yAlign=o.yAlign,r={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(r={opacity:0});this._tooltipItems=s,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,n,i){const r=this.getCaretPosition(e,n,i);t.lineTo(r.x1,r.y1),t.lineTo(r.x2,r.y2),t.lineTo(r.x3,r.y3)}getCaretPosition(e,t,n){const{xAlign:i,yAlign:r}=this,{caretSize:s,cornerRadius:a}=n,{topLeft:o,topRight:l,bottomLeft:c,bottomRight:u}=wU(a),{x:d,y:h}=e,{width:p,height:f}=t;let m,g,v,y,x,b;return"center"===r?(x=h+f/2,"left"===i?(m=d,g=m-s,y=x+s,b=x-s):(m=d+p,g=m+s,y=x-s,b=x+s),v=m):(g="left"===i?d+Math.max(o,c)+s:"right"===i?d+p-Math.max(l,u)-s:this.caretX,"top"===r?(y=h,x=y-s,m=g-s,v=g+s):(y=h+f,x=y+s,m=g+s,v=g-s),b=y),{x1:m,x2:g,x3:v,y1:y,y2:x,y3:b}}drawTitle(e,t,n){const i=this.title,r=i.length;let s,a,o;if(r){const l=dB(n.rtl,this.x,this.width);for(e.x=CW(this,n.titleAlign,n),t.textAlign=l.textAlign(n.titleAlign),t.textBaseline="middle",s=MU(n.titleFont),a=n.titleSpacing,t.fillStyle=n.titleColor,t.font=s.string,o=0;o<r;++o)t.fillText(i[o],l.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+a,o+1===r&&(e.y+=n.titleMarginBottom-a)}}_drawColorBox(e,t,n,i,r){const s=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:o,boxWidth:l,boxPadding:c}=r,u=MU(r.bodyFont),d=CW(this,"left",r),h=i.x(d),p=o<u.lineHeight?(u.lineHeight-o)/2:0,f=t.y+p;if(r.usePointStyle){const t={radius:Math.min(l,o)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},n=i.leftForLtr(h,l)+l/2,c=f+o/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,oU(e,t,n,c),e.strokeStyle=s.borderColor,e.fillStyle=s.backgroundColor,oU(e,t,n,c)}else{e.lineWidth=cz(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,e.strokeStyle=s.borderColor,e.setLineDash(s.borderDash||[]),e.lineDashOffset=s.borderDashOffset||0;const t=i.leftForLtr(h,l-c),n=i.leftForLtr(i.xPlus(h,1),l-c-2),a=wU(s.borderRadius);Object.values(a).some((e=>0!==e))?(e.beginPath(),e.fillStyle=r.multiKeyBackground,gU(e,{x:t,y:f,w:l,h:o,radius:a}),e.fill(),e.stroke(),e.fillStyle=s.backgroundColor,e.beginPath(),gU(e,{x:n,y:f+1,w:l-2,h:o-2,radius:a}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(t,f,l,o),e.strokeRect(t,f,l,o),e.fillStyle=s.backgroundColor,e.fillRect(n,f+1,l-2,o-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,t,n){const{body:i}=this,{bodySpacing:r,bodyAlign:s,displayColors:a,boxHeight:o,boxWidth:l,boxPadding:c}=n,u=MU(n.bodyFont);let d=u.lineHeight,h=0;const p=dB(n.rtl,this.x,this.width),f=function(n){t.fillText(n,p.x(e.x+h),e.y+d/2),e.y+=d+r},m=p.textAlign(s);let g,v,y,x,b,_,w;for(t.textAlign=s,t.textBaseline="middle",t.font=u.string,e.x=CW(this,m,n),t.fillStyle=n.bodyColor,mz(this.beforeBody,f),h=a&&"right"!==m?"center"===s?l/2+c:l+2+c:0,x=0,_=i.length;x<_;++x){for(g=i[x],v=this.labelTextColors[x],t.fillStyle=v,mz(g.before,f),y=g.lines,a&&y.length&&(this._drawColorBox(t,e,x,p,n),d=Math.max(u.lineHeight,o)),b=0,w=y.length;b<w;++b)f(y[b]),d=u.lineHeight;mz(g.after,f)}h=0,d=u.lineHeight,mz(this.afterBody,f),e.y-=r}drawFooter(e,t,n){const i=this.footer,r=i.length;let s,a;if(r){const o=dB(n.rtl,this.x,this.width);for(e.x=CW(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=o.textAlign(n.footerAlign),t.textBaseline="middle",s=MU(n.footerFont),t.fillStyle=n.footerColor,t.font=s.string,a=0;a<r;++a)t.fillText(i[a],o.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+n.footerSpacing}}drawBackground(e,t,n,i){const{xAlign:r,yAlign:s}=this,{x:a,y:o}=e,{width:l,height:c}=n,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:p}=wU(i.cornerRadius);t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.beginPath(),t.moveTo(a+u,o),"top"===s&&this.drawCaret(e,t,n,i),t.lineTo(a+l-d,o),t.quadraticCurveTo(a+l,o,a+l,o+d),"center"===s&&"right"===r&&this.drawCaret(e,t,n,i),t.lineTo(a+l,o+c-p),t.quadraticCurveTo(a+l,o+c,a+l-p,o+c),"bottom"===s&&this.drawCaret(e,t,n,i),t.lineTo(a+h,o+c),t.quadraticCurveTo(a,o+c,a,o+c-h),"center"===s&&"left"===r&&this.drawCaret(e,t,n,i),t.lineTo(a,o+u),t.quadraticCurveTo(a,o,a+u,o),t.closePath(),t.fill(),i.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,n=this.$animations,i=n&&n.x,r=n&&n.y;if(i||r){const n=xW[e.position].call(this,this._active,this._eventPosition);if(!n)return;const s=this._size=SW(this,e),a=Object.assign({},n,this._size),o=EW(t,e,a),l=TW(e,a,o,t);i._to===l.x&&r._to===l.y||(this.xAlign=o.xAlign,this.yAlign=o.yAlign,this.width=s.width,this.height=s.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(t);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const s=SU(t.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&a&&(e.save(),e.globalAlpha=n,this.drawBackground(r,e,i,t),hB(e,t.textDirection),r.y+=s.top,this.drawTitle(r,e,t),this.drawBody(r,e,t),this.drawFooter(r,e,t),pB(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const n=this._active,i=e.map((e=>{let{datasetIndex:t,index:n}=e;const i=this.chart.getDatasetMeta(t);if(!i)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:i.data[n],index:n}})),r=!gz(n,i),s=this._positionChanged(i,t);(r||s)&&(this._active=i,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,r=this._active||[],s=this._getActiveElements(e,r,t,n),a=this._positionChanged(s,e),o=t||!gz(s,r)||a;return o&&(this._active=s,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),o}_getActiveElements(e,t,n,i){const r=this.options;if("mouseout"===e.type)return[];if(!i)return t;const s=this.chart.getElementsAtEventForMode(e,r.mode,r,n);return r.reverse&&s.reverse(),s}_positionChanged(e,t){const{caretX:n,caretY:i,options:r}=this,s=xW[r.position].call(this,e,t);return!1!==s&&(n!==s.x||i!==s.y)}}NW.positioners=xW;var kW={id:"tooltip",_element:NW,positioners:xW,afterInit(e,t,n){n&&(e.tooltip=new NW({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",n))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:sz,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,i=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return n[t.dataIndex]}return""},afterTitle:sz,beforeBody:sz,beforeLabel:sz,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return oz(n)||(t+=n),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:sz,afterBody:sz,beforeFooter:sz,footer:sz,afterFooter:sz}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function RW(e,t,n,i){const r=e.indexOf(t);if(-1===r)return((e,t,n,i)=>("string"===typeof t?(n=e.push(t)-1,i.unshift({index:n,label:t})):isNaN(t)&&(n=null),n))(e,t,n,i);return r!==e.lastIndexOf(t)?n:r}class IW extends dV{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:n,label:i}of t)e[n]===i&&e.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(oz(e))return null;const n=this.getLabels();return((e,t)=>null===e?null:Zz(Math.round(e),0,t))(t=isFinite(t)&&n[t]===e?t:RW(n,e,hz(t,e),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:n,max:i}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(n=0),t||(i=this.getLabels().length-1)),this.min=n,this.max=i}buildTicks(){const e=this.min,t=this.max,n=this.options.offset,i=[];let r=this.getLabels();r=0===e&&t===r.length-1?r:r.slice(e,t+1),this._valueRange=Math.max(r.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let s=e;s<=t;s++)i.push({value:s});return i}getLabelForValue(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function LW(e,t){const n=[],{bounds:i,step:r,min:s,max:a,precision:o,count:l,maxTicks:c,maxDigits:u,includeBounds:d}=e,h=r||1,p=c-1,{min:f,max:m}=t,g=!oz(s),v=!oz(a),y=!oz(l),x=(m-f)/(u+1);let b,_,w,S,M=Fz((m-f)/p/h)*h;if(M<1e-14&&!g&&!v)return[{value:f},{value:m}];S=Math.ceil(m/M)-Math.floor(f/M),S>p&&(M=Fz(S*M/p/h)*h),oz(o)||(b=Math.pow(10,o),M=Math.ceil(M*b)/b),"ticks"===i?(_=Math.floor(f/M)*M,w=Math.ceil(m/M)*M):(_=f,w=m),g&&v&&r&&function(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}((a-s)/r,M/1e3)?(S=Math.round(Math.min((a-s)/M,c)),M=(a-s)/S,_=s,w=a):y?(_=g?s:_,w=v?a:w,S=l-1,M=(w-_)/S):(S=(w-_)/M,S=Bz(S,Math.round(S),M/1e3)?Math.round(S):Math.ceil(S));const E=Math.max(Gz(M),Gz(_));b=Math.pow(10,oz(o)?E:o),_=Math.round(_*b)/b,w=Math.round(w*b)/b;let T=0;for(g&&(d&&_!==s?(n.push({value:s}),_<s&&T++,Bz(Math.round((_+T*M)*b)/b,s,jW(s,x,e))&&T++):_<s&&T++);T<S;++T)n.push({value:Math.round((_+T*M)*b)/b});return v&&d&&w!==a?n.length&&Bz(n[n.length-1].value,a,jW(a,x,e))?n[n.length-1].value=a:n.push({value:a}):v&&w!==a||n.push({value:w}),n}function jW(e,t,n){let{horizontal:i,minRotation:r}=n;const s=Hz(r),a=(i?Math.sin(s):Math.cos(s))||.001,o=.75*t*(""+e).length;return Math.min(t/a,o)}IW.id="category",IW.defaults={ticks:{callback:IW.prototype.getLabelForValue}};class DW extends dV{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return oz(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this;const s=e=>i=t?i:e,a=e=>r=n?r:e;if(e){const e=zz(i),t=zz(r);e<0&&t<0?a(0):e>0&&t>0&&s(0)}if(i===r){let t=1;(r>=Number.MAX_SAFE_INTEGER||i<=Number.MIN_SAFE_INTEGER)&&(t=Math.abs(.05*r)),a(r+t),e||s(i-t)}this.min=i,this.max=r}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:n,stepSize:i}=e;return i?(t=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,t>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(i," would result generating up to ").concat(t," ticks. Limiting to 1000.")),t=1e3)):(t=this.computeTickLimit(),n=n||11),n&&(t=Math.min(n,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const i=LW({maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&Vz(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}configure(){const e=this.ticks;let t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const i=(n-t)/Math.max(e.length-1,1)/2;t-=i,n+=i}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return uB(e,this.chart.options.locale,this.options.ticks.format)}}class OW extends DW{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=uz(e)?e:0,this.max=uz(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,n=Hz(this.options.ticks.minRotation),i=(e?Math.sin(n):Math.cos(n))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,r.lineHeight/i))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}function zW(e){return 1===e/Math.pow(10,Math.floor(Oz(e)))}OW.id="linear",OW.defaults={ticks:{callback:nV.formatters.numeric}};class FW extends dV{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const n=DW.prototype.parse.apply(this,[e,t]);if(0!==n)return uz(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=uz(e)?Math.max(0,e):null,this.max=uz(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let n=this.min,i=this.max;const r=t=>n=e?n:t,s=e=>i=t?i:e,a=(e,t)=>Math.pow(10,Math.floor(Oz(e))+t);n===i&&(n<=0?(r(1),s(10)):(r(a(n,-1)),s(a(i,1)))),n<=0&&r(a(i,-1)),i<=0&&s(a(n,1)),this._zero&&this.min!==this._suggestedMin&&n===a(this.min,0)&&r(a(n,-1)),this.min=n,this.max=i}buildTicks(){const e=this.options,t=function(e,t){const n=Math.floor(Oz(t.max)),i=Math.ceil(t.max/Math.pow(10,n)),r=[];let s=dz(e.min,Math.pow(10,Math.floor(Oz(t.min)))),a=Math.floor(Oz(s)),o=Math.floor(s/Math.pow(10,a)),l=a<0?Math.pow(10,Math.abs(a)):1;do{r.push({value:s,major:zW(s)}),++o,10===o&&(o=1,++a,l=a>=0?1:l),s=Math.round(o*Math.pow(10,a)*l)/l}while(a<n||a===n&&o<i);const c=dz(e.max,s);return r.push({value:c,major:zW(s)}),r}({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&Vz(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(e){return void 0===e?"0":uB(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Oz(e),this._valueRange=Oz(this.max)-Oz(e)}getPixelForValue(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Oz(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function UW(e){const t=e.ticks;if(t.display&&e.display){const e=SU(t.backdropPadding);return hz(t.font&&t.font.size,nU.font.size)+e.height}return 0}function BW(e,t,n,i,r){return e===i||e===r?{start:t-n/2,end:t+n/2}:e<i||e>r?{start:t-n,end:t}:{start:t,end:t+n}}function VW(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),i=[],r=[],s=e._pointLabels.length,a=e.options.pointLabels,o=a.centerPointLabels?Pz/s:0;for(let d=0;d<s;d++){const s=a.setContext(e.getPointLabelContext(d));r[d]=s.padding;const h=e.getPointPosition(d,e.drawingArea+r[d],o),p=MU(s.font),f=(l=e.ctx,c=p,u=lz(u=e._pointLabels[d])?u:[u],{w:rU(l,c.string,u),h:u.length*c.lineHeight});i[d]=f;const m=Jz(e.getIndexAngle(d)+o),g=Math.round(Wz(m));HW(n,t,m,BW(g,h.x,f.w,0,180),BW(g,h.y,f.h,90,270))}var l,c,u;e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=function(e,t,n){const i=[],r=e._pointLabels.length,s=e.options,a=UW(s)/2,o=e.drawingArea,l=s.pointLabels.centerPointLabels?Pz/r:0;for(let c=0;c<r;c++){const r=e.getPointPosition(c,o+a+n[c],l),s=Math.round(Wz(Jz(r.angle+Lz))),u=t[c],d=qW(r.y,u.h,s),h=WW(s),p=GW(r.x,u.w,h);i.push({x:r.x,y:d,textAlign:h,left:p,top:d,right:p+u.w,bottom:d+u.h})}return i}(e,i,r)}function HW(e,t,n,i,r){const s=Math.abs(Math.sin(n)),a=Math.abs(Math.cos(n));let o=0,l=0;i.start<t.l?(o=(t.l-i.start)/s,e.l=Math.min(e.l,t.l-o)):i.end>t.r&&(o=(i.end-t.r)/s,e.r=Math.max(e.r,t.r+o)),r.start<t.t?(l=(t.t-r.start)/a,e.t=Math.min(e.t,t.t-l)):r.end>t.b&&(l=(r.end-t.b)/a,e.b=Math.max(e.b,t.b+l))}function WW(e){return 0===e||180===e?"center":e<180?"left":"right"}function GW(e,t,n){return"right"===n?e-=t:"center"===n&&(e-=t/2),e}function qW(e,t,n){return 90===n||270===n?e-=t/2:(n>270||n<90)&&(e-=t),e}function XW(e,t,n,i){const{ctx:r}=e;if(n)r.arc(e.xCenter,e.yCenter,t,0,Nz);else{let n=e.getPointPosition(0,t);r.moveTo(n.x,n.y);for(let s=1;s<i;s++)n=e.getPointPosition(s,t),r.lineTo(n.x,n.y)}}FW.id="logarithmic",FW.defaults={ticks:{callback:nV.formatters.logarithmic,major:{enabled:!0}}};class YW extends DW{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=SU(UW(this.options)/2),t=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(t,n)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=uz(e)&&!isNaN(e)?e:0,this.max=uz(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/UW(this.options))}generateTickLabels(e){DW.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map(((e,t)=>{const n=fz(this.options.pointLabels.callback,[e,t],this);return n||0===n?n:""})).filter(((e,t)=>this.chart.getDataVisibility(t)))}fit(){const e=this.options;e.display&&e.pointLabels.display?VW(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,n,i){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((n-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,n,i))}getIndexAngle(e){return Jz(e*(Nz/(this._pointLabels.length||1))+Hz(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(oz(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(oz(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const n=t[e];return function(e,t,n){return TU(e,{label:n,index:t,type:"pointLabel"})}(this.getContext(),e,n)}}getPointPosition(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=this.getIndexAngle(e)-Lz+n;return{x:Math.cos(i)*t+this.xCenter,y:Math.sin(i)*t+this.yCenter,angle:i}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:n,right:i,bottom:r}=this._pointLabelItems[e];return{left:t,top:n,right:i,bottom:r}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),XW(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:n,grid:i}=t,r=this._pointLabels.length;let s,a,o;if(t.pointLabels.display&&function(e,t){const{ctx:n,options:{pointLabels:i}}=e;for(let r=t-1;r>=0;r--){const t=i.setContext(e.getPointLabelContext(r)),s=MU(t.font),{x:a,y:o,textAlign:l,left:c,top:u,right:d,bottom:h}=e._pointLabelItems[r],{backdropColor:p}=t;if(!oz(p)){const e=wU(t.borderRadius),i=SU(t.backdropPadding);n.fillStyle=p;const r=c-i.left,s=u-i.top,a=d-c+i.width,o=h-u+i.height;Object.values(e).some((e=>0!==e))?(n.beginPath(),gU(n,{x:r,y:s,w:a,h:o,radius:e}),n.fill()):n.fillRect(r,s,a,o)}fU(n,e._pointLabels[r],a,o+s.lineHeight/2,s,{color:t.color,textAlign:l,textBaseline:"middle"})}}(this,r),i.display&&this.ticks.forEach(((e,t)=>{if(0!==t){a=this.getDistanceFromCenterForValue(e.value);!function(e,t,n,i){const r=e.ctx,s=t.circular,{color:a,lineWidth:o}=t;!s&&!i||!a||!o||n<0||(r.save(),r.strokeStyle=a,r.lineWidth=o,r.setLineDash(t.borderDash),r.lineDashOffset=t.borderDashOffset,r.beginPath(),XW(e,n,s,i),r.closePath(),r.stroke(),r.restore())}(this,i.setContext(this.getContext(t-1)),a,r)}})),n.display){for(e.save(),s=r-1;s>=0;s--){const i=n.setContext(this.getPointLabelContext(s)),{color:r,lineWidth:l}=i;l&&r&&(e.lineWidth=l,e.strokeStyle=r,e.setLineDash(i.borderDash),e.lineDashOffset=i.borderDashOffset,a=this.getDistanceFromCenterForValue(t.ticks.reverse?this.min:this.max),o=this.getPointPosition(s,a),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(o.x,o.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,n=t.ticks;if(!n.display)return;const i=this.getIndexAngle(0);let r,s;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach(((i,a)=>{if(0===a&&!t.reverse)return;const o=n.setContext(this.getContext(a)),l=MU(o.font);if(r=this.getDistanceFromCenterForValue(this.ticks[a].value),o.showLabelBackdrop){e.font=l.string,s=e.measureText(i.label).width,e.fillStyle=o.backdropColor;const t=SU(o.backdropPadding);e.fillRect(-s/2-t.left,-r-l.size/2-t.top,s+t.width,l.size+t.height)}fU(e,i.label,0,-r,l,{color:o.color})})),e.restore()}drawTitle(){}}YW.id="radialLinear",YW.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:nV.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}},YW.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},YW.descriptors={angleLines:{_fallback:"grid"}};const JW={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},KW=Object.keys(JW);function ZW(e,t){return e-t}function QW(e,t){if(oz(t))return null;const n=e._adapter,{parser:i,round:r,isoWeekday:s}=e._parseOpts;let a=t;return"function"===typeof i&&(a=i(a)),uz(a)||(a="string"===typeof i?n.parse(a,i):n.parse(a)),null===a?null:(r&&(a="week"!==r||!Uz(s)&&!0!==s?n.startOf(a,r):n.startOf(a,"isoWeek",s)),+a)}function $W(e,t,n,i){const r=KW.length;for(let s=KW.indexOf(e);s<r-1;++s){const e=JW[KW[s]],r=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((n-t)/(r*e.size))<=i)return KW[s]}return KW[r-1]}function eG(e,t,n){if(n){if(n.length){const{lo:i,hi:r}=$z(n,t);e[n[i]>=t?n[i]:n[r]]=!0}}else e[t]=!0}function tG(e,t,n){const i=[],r={},s=t.length;let a,o;for(a=0;a<s;++a)o=t[a],r[o]=a,i.push({value:o,major:!1});return 0!==s&&n?function(e,t,n,i){const r=e._adapter,s=+r.startOf(t[0].value,i),a=t[t.length-1].value;let o,l;for(o=s;o<=a;o=+r.add(o,1,i))l=n[o],l>=0&&(t[l].major=!0);return t}(e,i,r,n):i}class nG extends dV{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t){const n=e.time||(e.time={}),i=this._adapter=new vV._date(e.adapters.date);i.init(t),_z(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:QW(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,n=e.time.unit||"day";let{min:i,max:r,minDefined:s,maxDefined:a}=this.getUserBounds();function o(e){s||isNaN(e.min)||(i=Math.min(i,e.min)),a||isNaN(e.max)||(r=Math.max(r,e.max))}s&&a||(o(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||o(this.getMinMax(!1))),i=uz(i)&&!isNaN(i)?i:+t.startOf(Date.now(),n),r=uz(r)&&!isNaN(r)?r:+t.endOf(Date.now(),n)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}buildTicks(){const e=this.options,t=e.time,n=e.ticks,i="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,s=function(e,t,n){let i=0,r=e.length;for(;i<r&&e[i]<t;)i++;for(;r>i&&e[r-1]>n;)r--;return i>0||r<e.length?e.slice(i,r):e}(i,r,this.max);return this._unit=t.unit||(n.autoSkip?$W(t.minUnit,this.min,this.max,this._getLabelCapacity(r)):function(e,t,n,i,r){for(let s=KW.length-1;s>=KW.indexOf(n);s--){const n=KW[s];if(JW[n].common&&e._adapter.diff(r,i,n)>=t-1)return n}return KW[n?KW.indexOf(n):0]}(this,s.length,t.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(e){for(let t=KW.indexOf(e)+1,n=KW.length;t<n;++t)if(JW[KW[t]].common)return KW[t]}(this._unit):void 0,this.initOffsets(i),e.reverse&&s.reverse(),tG(this,s,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((e=>+e.value)))}initOffsets(e){let t,n,i=0,r=0;this.options.offset&&e.length&&(t=this.getDecimalForValue(e[0]),i=1===e.length?1-t:(this.getDecimalForValue(e[1])-t)/2,n=this.getDecimalForValue(e[e.length-1]),r=1===e.length?n:(n-this.getDecimalForValue(e[e.length-2]))/2);const s=e.length<3?.5:.25;i=Zz(i,0,s),r=Zz(r,0,s),this._offsets={start:i,end:r,factor:1/(i+1+r)}}_generate(){const e=this._adapter,t=this.min,n=this.max,i=this.options,r=i.time,s=r.unit||$W(r.minUnit,t,n,this._getLabelCapacity(t)),a=hz(r.stepSize,1),o="week"===s&&r.isoWeekday,l=Uz(o)||!0===o,c={};let u,d,h=t;if(l&&(h=+e.startOf(h,"isoWeek",o)),h=+e.startOf(h,l?"day":s),e.diff(n,t,s)>1e5*a)throw new Error(t+" and "+n+" are too far apart with stepSize of "+a+" "+s);const p="data"===i.ticks.source&&this.getDataTimestamps();for(u=h,d=0;u<n;u=+e.add(u,a,s),d++)eG(c,u,p);return u!==n&&"ticks"!==i.bounds&&1!==d||eG(c,u,p),Object.keys(c).sort(((e,t)=>e-t)).map((e=>+e))}getLabelForValue(e){const t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}_tickFormatFunction(e,t,n,i){const r=this.options,s=r.time.displayFormats,a=this._unit,o=this._majorUnit,l=a&&s[a],c=o&&s[o],u=n[t],d=o&&c&&u&&u.major,h=this._adapter.format(e,i||(d?c:l)),p=r.ticks.callback;return p?fz(p,[h,t,n],this):h}generateTickLabels(e){let t,n,i;for(t=0,n=e.length;t<n;++t)i=e[t],i.label=this._tickFormatFunction(i.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,n=this.ctx.measureText(e).width,i=Hz(this.isHorizontal()?t.maxRotation:t.minRotation),r=Math.cos(i),s=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:n*r+a*s,h:n*s+a*r}}_getLabelCapacity(e){const t=this.options.time,n=t.displayFormats,i=n[t.unit]||n.millisecond,r=this._tickFormatFunction(e,0,tG(this,[e],this._majorUnit),i),s=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return a>0?a:1}getDataTimestamps(){let e,t,n=this._cache.data||[];if(n.length)return n;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(e=0,t=i.length;e<t;++e)n=n.concat(i[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const e=this._cache.labels||[];let t,n;if(e.length)return e;const i=this.getLabels();for(t=0,n=i.length;t<n;++t)e.push(QW(this,i[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return rF(e.sort(ZW))}}function iG(e,t,n){let i,r,s,a,o=0,l=e.length-1;n?(t>=e[o].pos&&t<=e[l].pos&&({lo:o,hi:l}=eF(e,"pos",t)),({pos:i,time:s}=e[o]),({pos:r,time:a}=e[l])):(t>=e[o].time&&t<=e[l].time&&({lo:o,hi:l}=eF(e,"time",t)),({time:i,pos:s}=e[o]),({time:r,pos:a}=e[l]));const c=r-i;return c?s+(a-s)*(t-i)/c:s}nG.id="time",nG.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}};class rG extends nG{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=iG(t,this.min),this._tableRange=iG(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:n}=this,i=[],r=[];let s,a,o,l,c;for(s=0,a=e.length;s<a;++s)l=e[s],l>=t&&l<=n&&i.push(l);if(i.length<2)return[{time:t,pos:0},{time:n,pos:1}];for(s=0,a=i.length;s<a;++s)c=i[s+1],o=i[s-1],l=i[s],Math.round((c+o)/2)!==l&&r.push({time:l,pos:s/(a-1)});return r}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),n=this.getLabelTimestamps();return e=t.length&&n.length?this.normalize(t.concat(n)):t.length?t:n,e=this._cache.all=e,e}getDecimalForValue(e){return(iG(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return iG(this._table,n*this._tableRange+this._minPos,!0)}}rG.id="timeseries",rG.defaults=nG.defaults;const sG=["height","width","redraw","datasetIdKey","type","data","options","plugins","fallbackContent","updateMode"],aG="label";function oG(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function lG(e,t){e.labels=t}function cG(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:aG;const i=[];e.datasets=t.map((t=>{const r=e.datasets.find((e=>e[n]===t[n]));return r&&t.data&&!i.includes(r)?(i.push(r),Object.assign(r,t),r):He({},t)}))}function uG(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:aG;const n={labels:[],datasets:[]};return lG(n,e.labels),cG(n,e.datasets,t),n}function dG(e,t){let{height:n=150,width:i=300,redraw:s=!1,datasetIdKey:a,type:o,data:l,options:c,plugins:u=[],fallbackContent:d,updateMode:h}=e,p=Hi(e,sG);const f=(0,r.useRef)(null),m=(0,r.useRef)(),g=()=>{f.current&&(m.current=new MH(f.current,{type:o,data:uG(l,a),options:c&&He({},c),plugins:u}),oG(t,m.current))},v=()=>{oG(t,null),m.current&&(m.current.destroy(),m.current=null)};return(0,r.useEffect)((()=>{var e,t;!s&&m.current&&c&&(e=m.current,t=c,Object.assign(e.options,t))}),[s,c]),(0,r.useEffect)((()=>{!s&&m.current&&lG(m.current.config.data,l.labels)}),[s,l.labels]),(0,r.useEffect)((()=>{!s&&m.current&&l.datasets&&cG(m.current.config.data,l.datasets,a)}),[s,l.datasets]),(0,r.useEffect)((()=>{m.current&&(s?(v(),setTimeout(g)):m.current.update(h))}),[s,c,l.labels,l.datasets,h]),(0,r.useEffect)((()=>{m.current&&(v(),setTimeout(g))}),[o]),(0,r.useEffect)((()=>(g(),()=>v())),[]),r.createElement("canvas",Object.assign({ref:f,role:"img",height:n,width:i},p),d)}const hG=(0,r.forwardRef)(dG);function pG(e,t){return MH.register(t),(0,r.forwardRef)(((t,n)=>r.createElement(hG,Object.assign({},t,{ref:n,type:e}))))}const fG=pG("line",KB),mG=pG("bar",XB),gG=pG("doughnut",JB),vG=pG("pie",QB),yG=Aw("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),xG=Aw("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),bG=Aw("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),_G=e=>{let{appointments:t,onAppointmentAction:n}=e;const[i,s]=(0,r.useState)("pending"),a=e=>t.filter((t=>t.status===e)).length,o=e=>{switch(e){case"PENDING":return(0,De.jsx)(Nw,{size:18,className:"status-icon pending-icon"});case"CONFIRME":return(0,De.jsx)(yG,{size:18,className:"status-icon confirmed-icon"});case"ANNULE":return(0,De.jsx)(ZO,{size:18,className:"status-icon cancelled-icon"});default:return(0,De.jsx)(Vw,{size:18,className:"status-icon"})}},l=e=>{if(null===e||void 0===e||!e.utilisateur)return null;const t={PENDING:"en attente",CONFIRME:"confirm\xe9",ANNULE:"annul\xe9"}[e.status]||"inconnu";return(0,De.jsxs)("div",{className:"appointment-card ".concat(e.status.toLowerCase()),children:[(0,De.jsxs)("div",{className:"appointment-header",children:[(0,De.jsx)("div",{className:"appointment-status-indicator"}),(0,De.jsxs)("h4",{className:"appointment-title",children:["Rendez-vous ",t]}),o(e.status)]}),(0,De.jsxs)("div",{className:"appointment-details",children:[(0,De.jsxs)("div",{className:"appointment-detail-item",children:[(0,De.jsxs)("div",{className:"detail-label",children:[(0,De.jsx)(Pw,{className:"appointment-icon",size:16}),(0,De.jsx)("span",{children:"Date et heure:"})]}),(0,De.jsx)("div",{className:"detail-value",children:(i=e.date,new Date(i).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}))})]}),(0,De.jsxs)("div",{className:"appointment-detail-item",children:[(0,De.jsxs)("div",{className:"detail-label",children:[(0,De.jsx)(kw,{className:"appointment-icon",size:16}),(0,De.jsx)("span",{children:"Client:"})]}),(0,De.jsxs)("div",{className:"detail-value",children:[e.utilisateur.nom," ",e.utilisateur.prenom]})]}),(0,De.jsxs)("div",{className:"appointment-detail-item",children:[(0,De.jsxs)("div",{className:"detail-label",children:[(0,De.jsx)(xG,{className:"appointment-icon",size:16}),(0,De.jsx)("span",{children:"Motif:"})]}),(0,De.jsx)("div",{className:"detail-value",children:e.motif})]})]}),(0,De.jsxs)("div",{className:"appointment-actions",children:["PENDING"===e.status&&(0,De.jsxs)(De.Fragment,{children:[(0,De.jsxs)("button",{onClick:()=>n(e._id,"accept"),className:"action-button accept",children:[(0,De.jsx)(yG,{size:16}),(0,De.jsx)("span",{children:"Accepter"})]}),(0,De.jsxs)("button",{onClick:()=>n(e._id,"reject"),className:"action-button reject",children:[(0,De.jsx)(ZO,{size:16}),(0,De.jsx)("span",{children:"Refuser"})]})]}),"CONFIRME"===e.status&&(0,De.jsxs)("button",{onClick:()=>n(e._id,"delete"),className:"action-button delete",children:[(0,De.jsx)(bG,{size:16}),(0,De.jsx)("span",{children:"Supprimer"})]}),"ANNULE"===e.status&&(0,De.jsxs)("button",{onClick:()=>n(e._id,"delete"),className:"action-button delete",children:[(0,De.jsx)(bG,{size:16}),(0,De.jsx)("span",{children:"Supprimer"})]})]})]},e._id||"appointment-".concat(e.date));var i},c=e=>{if(null===e||void 0===e||!e.utilisateur)return null;const t={PENDING:"en attente",CONFIRME:"confirm\xe9",ANNULE:"annul\xe9"}[e.status]||"inconnu";return(0,De.jsxs)("div",{className:"appointment-item-mobile ".concat(e.status.toLowerCase()),children:[(0,De.jsxs)("div",{className:"appointment-mobile-header",children:[(0,De.jsx)("span",{className:"appointment-mobile-status ".concat(e.status.toLowerCase()),children:t}),(0,De.jsxs)("div",{className:"appointment-mobile-date",children:[new Date(e.date).toLocaleDateString("fr-FR",{day:"2-digit",month:"short"}),(0,De.jsx)("br",{}),new Date(e.date).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})]})]}),(0,De.jsxs)("div",{className:"appointment-mobile-content",children:[(0,De.jsxs)("div",{className:"appointment-mobile-row",children:[(0,De.jsx)(kw,{className:"appointment-mobile-icon"}),(0,De.jsx)("span",{className:"appointment-mobile-label",children:"Client:"}),(0,De.jsxs)("span",{className:"appointment-mobile-value",children:[e.utilisateur.nom," ",e.utilisateur.prenom]})]}),(0,De.jsxs)("div",{className:"appointment-mobile-reason",children:[(0,De.jsx)("strong",{children:"Motif:"})," ",e.motif]})]}),(0,De.jsxs)("div",{className:"appointment-mobile-actions",children:["PENDING"===e.status&&(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)("button",{onClick:()=>n(e._id,"accept"),className:"action-button-mobile accept",children:"Accepter"}),(0,De.jsx)("button",{onClick:()=>n(e._id,"reject"),className:"action-button-mobile reject",children:"Refuser"})]}),("CONFIRME"===e.status||"ANNULE"===e.status)&&(0,De.jsx)("button",{onClick:()=>n(e._id,"delete"),className:"action-button-mobile delete",children:"Supprimer"})]})]},"mobile-".concat(e._id))},u=(e,n,i)=>{const r=t.filter((t=>t.status===e));return(0,De.jsxs)(De.Fragment,{children:[(0,De.jsxs)("div",{className:"appointments-list",children:[r.map(l),0===r.length&&(0,De.jsxs)("div",{className:"no-appointments",children:[n,(0,De.jsx)("p",{children:i})]})]}),(0,De.jsxs)("div",{className:"appointments-list-mobile",children:[r.map(c),0===r.length&&(0,De.jsxs)("div",{className:"no-appointments",children:[n,(0,De.jsx)("p",{children:i})]})]})]})};return(0,De.jsxs)("div",{className:"appointments-container",children:[(0,De.jsx)("h3",{className:"section-title",children:"Gestion des rendez-vous"}),(0,De.jsxs)("div",{className:"appointments-tabs",children:[(0,De.jsxs)("button",{className:"tab-button ".concat("pending"===i?"active":""),onClick:()=>s("pending"),children:["En attente",(0,De.jsx)("span",{className:"tab-count",children:a("PENDING")})]}),(0,De.jsxs)("button",{className:"tab-button ".concat("confirmed"===i?"active":""),onClick:()=>s("confirmed"),children:["Confirm\xe9s",(0,De.jsx)("span",{className:"tab-count",children:a("CONFIRME")})]}),(0,De.jsxs)("button",{className:"tab-button ".concat("cancelled"===i?"active":""),onClick:()=>s("cancelled"),children:["Annul\xe9s",(0,De.jsx)("span",{className:"tab-count",children:a("ANNULE")})]})]}),(0,De.jsxs)("div",{className:"appointments-content",children:["pending"===i&&u("PENDING",(0,De.jsx)(Nw,{className:"empty-icon",size:48}),"Aucun rendez-vous en attente"),"confirmed"===i&&u("CONFIRME",(0,De.jsx)(yG,{className:"empty-icon",size:48}),"Aucun rendez-vous confirm\xe9"),"cancelled"===i&&u("ANNULE",(0,De.jsx)(ZO,{className:"empty-icon",size:48}),"Aucun rendez-vous annul\xe9")]})]})};MH.register(IW,OW,HH,BH,KH,RH,yW,kW,gW,pW);const wG=()=>{const e=ne(),[t,n]=(0,r.useState)([]),[i,s]=(0,r.useState)(null),[a,o]=(0,r.useState)(!0),[l,c]=(0,r.useState)(null),[u,d]=(0,r.useState)([]),[h,p]=(0,r.useState)(0),[f,m]=(0,r.useState)(!1),[g,v]=(0,r.useState)("month"),[y,x]=(0,r.useState)((new Date).getMonth()),[b,_]=(0,r.useState)((new Date).getFullYear()),[w,S]=(0,r.useState)(""),[M,E]=(0,r.useState)(!1),T=()=>{const e=document.querySelector(".appointments-container");if(e)e.scrollIntoView({behavior:"smooth",block:"start"});else{const e=document.querySelector("h3.section-title");if(e&&e.textContent.includes("Gestion des rendez-vous"))e.scrollIntoView({behavior:"smooth",block:"start"});else{const e=document.querySelectorAll("h3");for(let t of e)if(t.textContent.includes("Gestion des rendez-vous")){t.scrollIntoView({behavior:"smooth",block:"start"});break}}}E(!1)};(0,r.useEffect)((()=>{C()}),[g,y,b]);const C=async()=>{try{o(!0),console.log("D\xe9but de fetchData");const[e,t,i]=await Promise.all([bi(),_i(),Ci()]);console.log("R\xe9ponses re\xe7ues:",{appointments:e,stats:t,notifications:i});const r=Array.isArray(e.data)?e.data:[];n(r),s(t.data),console.log("Structure de notificationsResponse:",i);let a=[];i&&i.data&&(console.log("Type de notificationsResponse.data:",typeof i.data),i.data.data&&Array.isArray(i.data.data)?(console.log("Utilisation de notificationsResponse.data.data (tableau)"),a=i.data.data.filter((e=>e&&"object"===typeof e))):Array.isArray(i.data)?(console.log("Utilisation de notificationsResponse.data (tableau)"),a=i.data.filter((e=>e&&"object"===typeof e))):i.data.notifications&&Array.isArray(i.data.notifications)?(console.log("Utilisation de notificationsResponse.data.notifications (tableau)"),a=i.data.notifications.filter((e=>e&&"object"===typeof e))):!0===i.data.success?(console.log("Format avec success=true d\xe9tect\xe9"),i.data.data&&Array.isArray(i.data.data)?(console.log("Utilisation de notificationsResponse.data.data"),a=i.data.data.filter((e=>e&&"object"===typeof e))):console.warn("Format de donn\xe9es inattendu:",i.data)):"object"===typeof i.data&&(console.log("Traitement de notificationsResponse.data comme objet"),a=Object.entries(i.data).filter((e=>{let[t,n]=e;return null!==n&&"object"===typeof n&&"success"!==t})).map((e=>{let[t,n]=e;return n._id||(n._id=t),n})))),console.log("Notifications trait\xe9es:",a),a=a.map(((e,t)=>e._id?e:(console.log("Ajout d'un ID g\xe9n\xe9r\xe9 pour la notification \xe0 l'index ".concat(t)),He(He({},e),{},{_id:"notification-".concat(t)})))),d(a);const l=a.filter((e=>e&&!e.lue)).length;console.log("Nombre de notifications non lues: ".concat(l)),p(l)}catch(l){console.error("Erreur lors du chargement des donn\xe9es:",l),console.error("D\xe9tails de l'erreur:",l.message,l.stack),c("Erreur lors du chargement des donn\xe9es")}finally{o(!1),console.log("Fin de fetchData")}},A=e=>{let t=y,n=b;"next"===e?(t++,t>11&&(t=0,n++)):(t--,t<0&&(t=11,n--)),x(t),_(n)},{appointmentsChartData:P,statusChartData:N,monthlyTrendData:k}=(()=>{const e={labels:["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"],datasets:[{label:"Rendez-vous",data:(null===i||void 0===i?void 0:i.repartitionJours)||[4,6,8,5,7,3,1],fill:!0,backgroundColor:"rgba(78, 84, 200, 0.1)",borderColor:"rgba(78, 84, 200, 1)",tension:.4,pointBackgroundColor:"rgba(78, 84, 200, 1)",pointBorderColor:"#fff",pointRadius:4,pointHoverRadius:6}]},n={labels:["Confirm\xe9s","En attente","Annul\xe9s"],datasets:[{data:[(null===i||void 0===i?void 0:i.confirmes)||t.filter((e=>"CONFIRME"===e.status)).length||65,(null===i||void 0===i?void 0:i.enAttente)||t.filter((e=>"PENDING"===e.status)).length||25,(null===i||void 0===i?void 0:i.annules)||t.filter((e=>"ANNULE"===e.status)).length||10],backgroundColor:["rgba(46, 204, 113, 0.8)","rgba(241, 196, 15, 0.8)","rgba(231, 76, 60, 0.8)"],borderColor:["rgba(46, 204, 113, 1)","rgba(241, 196, 15, 1)","rgba(231, 76, 60, 1)"],borderWidth:1}]};return{appointmentsChartData:e,statusChartData:n,monthlyTrendData:{labels:["Jan","F\xe9v","Mar","Avr","Mai","Juin","Juil","Ao\xfbt","Sep","Oct","Nov","D\xe9c"],datasets:[{label:"Rendez-vous 2023",data:[12,19,15,25,22,30,28,25,30,28,32,35],borderColor:"rgba(78, 84, 200, 1)",backgroundColor:"rgba(78, 84, 200, 0.5)",borderWidth:2,type:"line",tension:.4,yAxisID:"y"},{label:"Taux de confirmation (%)",data:[70,75,68,80,82,85,78,80,83,85,88,90],borderColor:"rgba(46, 204, 113, 1)",backgroundColor:"rgba(46, 204, 113, 0.5)",borderWidth:2,type:"line",tension:.4,yAxisID:"y1"}]}}})();return a?(0,De.jsxs)("div",{className:"loading-state",children:[(0,De.jsx)("div",{className:"loading-spinner"}),(0,De.jsx)("div",{className:"loading-text",children:"Chargement de votre tableau de bord"}),(0,De.jsx)("div",{className:"loading-subtext",children:"Nous pr\xe9parons vos statistiques et rendez-vous..."})]}):l?(0,De.jsx)("div",{className:"error-state",children:l}):(0,De.jsxs)("div",{className:"dashboard-container",children:[(0,De.jsxs)("div",{className:"dashboard-header",children:[(0,De.jsx)("button",{className:"mobile-menu-toggle",onClick:e=>{e.preventDefault(),e.stopPropagation(),console.log("Toggle mobile menu - \xc9tat actuel:",M),E((e=>(console.log("Toggle mobile menu - Nouvel \xe9tat:",!e),!e)))},"aria-label":"Toggle mobile menu",type:"button",children:M?(0,De.jsx)(ZO,{size:24}):(0,De.jsx)(QO,{size:24})}),(0,De.jsxs)("nav",{className:"dashboard-nav ".concat(M?"mobile-open":""),children:[(0,De.jsx)(Ie,{to:"/professional/profile",className:"profile-link",onClick:()=>E(!1),children:"G\xe9rer mon profil"}),(0,De.jsx)(Ie,{to:"/professional/availability",className:"availability-link",onClick:()=>E(!1),children:"G\xe9rer mes disponibilit\xe9s"}),(0,De.jsxs)("button",{onClick:T,className:"appointments-scroll-btn",children:[(0,De.jsx)($O,{size:16}),(0,De.jsx)("span",{children:"Mes rendez-vous"})]})]}),(0,De.jsxs)("div",{className:"dashboard-actions",children:[(0,De.jsxs)("button",{onClick:()=>{window.confirm("\xcates-vous s\xfbr de vouloir vous d\xe9connecter ?")&&(WP.logout(),e("/login"))},className:"logout-button",children:[(0,De.jsx)(ez,{size:16}),(0,De.jsx)("span",{children:"D\xe9connexion"})]}),(0,De.jsxs)("div",{className:"notification-icon",onClick:()=>{m(!f)},children:[(0,De.jsx)(Rw,{className:"w-6 h-6"}),h>0&&(0,De.jsx)("span",{className:"notification-badge",children:h})]})]})]}),M&&(0,De.jsx)("div",{className:"mobile-menu-container",children:(0,De.jsxs)("div",{className:"mobile-menu-content",children:[(0,De.jsx)(Ie,{to:"/professional/profile",className:"mobile-menu-link",onClick:()=>E(!1),children:"G\xe9rer mon profil"}),(0,De.jsx)(Ie,{to:"/professional/availability",className:"mobile-menu-link",onClick:()=>E(!1),children:"G\xe9rer mes disponibilit\xe9s"}),(0,De.jsxs)("button",{onClick:T,className:"mobile-menu-link mobile-menu-button",children:[(0,De.jsx)($O,{size:20}),(0,De.jsx)("span",{children:"Mes rendez-vous"})]})]})}),M&&(0,De.jsx)("div",{className:"mobile-menu-overlay",onClick:()=>E(!1)}),f&&(0,De.jsxs)("div",{className:"notifications-panel",children:[(0,De.jsx)("h3",{children:"Notifications"}),(0,De.jsx)("div",{className:"notifications-list",children:0===u.length?(0,De.jsx)("div",{className:"notification-item",children:(0,De.jsx)("div",{className:"notification-content",children:(0,De.jsx)("p",{className:"notification-message",children:"Aucune notification"})})}):u.map((e=>{return(0,De.jsxs)("div",{className:"notification-item ".concat(e.lue?"":"unread"),onClick:()=>(async e=>{try{if(console.log("Marquage de la notification comme lue, ID:",e),!e||e.startsWith("notification-"))return console.warn("ID de notification non valide:",e),console.log("Mise \xe0 jour locale sans appel API pour ID:",e),d((t=>t.map((t=>t._id===e?He(He({},t),{},{lue:!0}):t)))),void p((e=>Math.max(0,e-1)));console.log("Appel API pour marquer la notification comme lue, ID:",e);const t=await Ai(e);console.log("R\xe9ponse de l'API markNotificationAsRead:",t),d((t=>t.map((t=>t._id===e?He(He({},t),{},{lue:!0}):t)))),p((e=>Math.max(0,e-1))),console.log("Notification marqu\xe9e comme lue avec succ\xe8s, nouveau compteur:",h-1)}catch(l){console.error("Erreur lors du marquage de la notification:",l),console.error("D\xe9tails de l'erreur:",l.message,l.stack),alert("Erreur lors du marquage de la notification comme lue")}})(e._id),children:[(0,De.jsxs)("div",{className:"notification-content",children:[(0,De.jsx)("p",{className:"notification-message",children:e.contenu}),(0,De.jsx)("span",{className:"notification-date",children:e.dateCreation?(t=e.dateCreation,new Date(t).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})):"Date inconnue"})]}),!e.lue&&(0,De.jsx)("span",{className:"notification-badge",children:"Nouveau"})]},e._id);var t}))})]}),(0,De.jsxs)("div",{className:"stats-section",children:[(0,De.jsx)("h3",{className:"text-2xl font-bold mb-6",children:"Statistiques cl\xe9s"}),i?(0,De.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[(0,De.jsx)("div",{className:"bg-white rounded-lg p-6 shadow-lg border-l-4 border-blue-500",children:(0,De.jsxs)("div",{className:"flex items-center gap-4",children:[(0,De.jsx)("div",{className:"bg-blue-100 p-3 rounded-full",children:(0,De.jsx)(Pw,{className:"w-6 h-6 text-blue-600"})}),(0,De.jsxs)("div",{children:[(0,De.jsx)("p",{className:"text-gray-500 text-sm",children:"Total des rendez-vous"}),(0,De.jsx)("p",{className:"text-3xl font-bold",children:i.total||0})]})]})}),(0,De.jsx)("div",{className:"bg-white rounded-lg p-6 shadow-lg border-l-4 border-yellow-500",children:(0,De.jsxs)("div",{className:"flex items-center gap-4",children:[(0,De.jsx)("div",{className:"bg-yellow-100 p-3 rounded-full",children:(0,De.jsx)(Nw,{className:"w-6 h-6 text-yellow-600"})}),(0,De.jsxs)("div",{children:[(0,De.jsx)("p",{className:"text-gray-500 text-sm",children:"En attente"}),(0,De.jsx)("p",{className:"text-3xl font-bold",children:i.enAttente||0})]})]})}),(0,De.jsx)("div",{className:"bg-white rounded-lg p-6 shadow-lg border-l-4 border-green-500",children:(0,De.jsxs)("div",{className:"flex items-center gap-4",children:[(0,De.jsx)("div",{className:"bg-green-100 p-3 rounded-full",children:(0,De.jsx)(tz,{className:"w-6 h-6 text-green-600"})}),(0,De.jsxs)("div",{children:[(0,De.jsx)("p",{className:"text-gray-500 text-sm",children:"Taux de confirmation"}),(0,De.jsxs)("p",{className:"text-3xl font-bold",children:[i.tauxConfirmation||0,"%"]}),(0,De.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:["(",i.confirmes||0," confirm\xe9s / ",i.total||0," total)"]})]})]})})]}):(0,De.jsx)("div",{className:"stats-unavailable",children:(0,De.jsx)("p",{className:"text-center text-gray-600 py-6",children:"Vous n'avez pas de statistiques disponibles pour le moment."})})]}),(0,De.jsxs)("div",{className:"charts-section",children:[(0,De.jsxs)("div",{className:"chart-row",children:[(0,De.jsxs)("div",{className:"chart-container",children:[(0,De.jsxs)("div",{className:"chart-header",children:[(0,De.jsx)("h3",{children:"R\xe9partition par statut"}),(0,De.jsx)("div",{className:"chart-actions",children:(0,De.jsxs)("button",{className:"chart-action-btn",children:[(0,De.jsx)(nz,{size:16}),(0,De.jsx)("span",{children:"Exporter"})]})})]}),(0,De.jsx)("div",{className:"chart-body",children:i?(0,De.jsx)(gG,{data:N,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{usePointStyle:!0,padding:20}}},cutout:"70%"}}):(0,De.jsx)("div",{className:"chart-unavailable",children:(0,De.jsx)("p",{children:"Vous n'avez pas de statistiques disponibles pour le moment."})})})]}),(0,De.jsxs)("div",{className:"chart-container",children:[(0,De.jsxs)("div",{className:"chart-header",children:[(0,De.jsx)("h3",{children:"Rendez-vous par jour"}),(0,De.jsx)("div",{className:"chart-actions",children:(0,De.jsx)("div",{className:"period-selector",children:(0,De.jsxs)("select",{value:g,onChange:e=>v(e.target.value),className:"period-select",children:[(0,De.jsx)("option",{value:"week",children:"Cette semaine"}),(0,De.jsx)("option",{value:"month",children:"Ce mois"}),(0,De.jsx)("option",{value:"year",children:"Cette ann\xe9e"})]})})})]}),(0,De.jsx)("div",{className:"chart-body",children:i?(0,De.jsx)(fG,{data:P,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{mode:"index",intersect:!1,backgroundColor:"rgba(255, 255, 255, 0.9)",titleColor:"#333",bodyColor:"#666",borderColor:"#e1e1e1",borderWidth:1,padding:10,boxShadow:"0px 2px 6px rgba(0, 0, 0, 0.1)",usePointStyle:!0}},scales:{x:{grid:{display:!1}},y:{beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.05)"},ticks:{precision:0}}}}}):(0,De.jsx)("div",{className:"chart-unavailable",children:(0,De.jsx)("p",{children:"Vous n'avez pas de statistiques disponibles pour le moment."})})})]})]}),(0,De.jsxs)("div",{className:"chart-container full-width",children:[(0,De.jsxs)("div",{className:"chart-header",children:[(0,De.jsx)("h3",{children:"Tendance mensuelle"}),(0,De.jsx)("div",{className:"chart-actions",children:(0,De.jsxs)("div",{className:"month-navigator",children:[(0,De.jsx)("button",{onClick:()=>A("prev"),className:"month-nav-btn",children:(0,De.jsx)(iz,{size:16})}),(0,De.jsx)("span",{className:"current-month",children:"".concat(["Janvier","F\xe9vrier","Mars","Avril","Mai","Juin","Juillet","Ao\xfbt","Septembre","Octobre","Novembre","D\xe9cembre"][y]," ").concat(b)}),(0,De.jsx)("button",{onClick:()=>A("next"),className:"month-nav-btn",children:(0,De.jsx)(rz,{size:16})})]})})]}),(0,De.jsx)("div",{className:"chart-body",children:i?(0,De.jsx)(mG,{data:k,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{mode:"index",intersect:!1}},scales:{x:{grid:{display:!1}},y:{type:"linear",display:!0,position:"left",title:{display:!0,text:"Nombre de rendez-vous"},grid:{color:"rgba(0, 0, 0, 0.05)"}},y1:{type:"linear",display:!0,position:"right",title:{display:!0,text:"Taux de confirmation (%)"},grid:{drawOnChartArea:!1},min:0,max:100}}}}):(0,De.jsx)("div",{className:"chart-unavailable",children:(0,De.jsx)("p",{children:"Vous n'avez pas de statistiques disponibles pour le moment."})})})]})]}),w&&(0,De.jsx)("div",{className:"success-message",style:{marginBottom:"20px"},children:w}),(0,De.jsx)(_G,{appointments:t,onAppointmentAction:async(e,t)=>{try{if(!e)return void alert("Erreur: Identifiant de rendez-vous manquant");if(console.log("Action ".concat(t," sur le rendez-vous ").concat(e)),"accept"===t)await wi(e);else if("reject"===t)await Si(e);else if("delete"===t){if(!window.confirm("\xcates-vous s\xfbr de vouloir supprimer ce rendez-vous ?"))return;await Pi(e)}await C(),S("Le rendez-vous a \xe9t\xe9 ".concat("accept"===t?"accept\xe9":"reject"===t?"refus\xe9":"supprim\xe9"," avec succ\xe8s")),setTimeout((()=>{S("")}),3e3)}catch(l){var n,i;console.error("Erreur lors de l'action ".concat(t,":"),l),alert("Erreur lors du traitement de la demande: ".concat((null===(n=l.response)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.message)||l.message||"Erreur inconnue"))}}})]})},SG={profileContainer:"Profile_profileContainer__lmR84",float:"Profile_float__BNWyG",formWrapper:"Profile_formWrapper__L1dFY",fadeInScale:"Profile_fadeInScale__-Z20p",header:"Profile_header__MjaSH",slideInDown:"Profile_slideInDown__rwIgb",profileCard:"Profile_profileCard__6WgDx",slideInUp:"Profile_slideInUp__8I0li",formGrid:"Profile_formGrid__IkLom",formGroup:"Profile_formGroup__SbXpq",fadeIn:"Profile_fadeIn__rfkwF",formActions:"Profile_formActions__XMPBb",photoSection:"Profile_photoSection__5Mo0G",tabContainer:"Profile_tabContainer__ODWmH",specialitesContainer:"Profile_specialitesContainer__al2yJ",addSpecialiteContainer:"Profile_addSpecialiteContainer__v3dLg",tarifContainer:"Profile_tarifContainer__xOIsx",title:"Profile_title__Mqk55",subtitle:"Profile_subtitle__y5Ntx",formLabel:"Profile_formLabel__0GIKp",formControl:"Profile_formControl__WxZj0",formTextarea:"Profile_formTextarea__Wv50z",submitButton:"Profile_submitButton__Yuib+",photoContainer:"Profile_photoContainer__3YC7b",profilePhoto:"Profile_profilePhoto__hDWfj",photoPlaceholder:"Profile_photoPlaceholder__Jyzsh",photoUpload:"Profile_photoUpload__NfnrI",photoUploadLabel:"Profile_photoUploadLabel__rkuoK",photoInput:"Profile_photoInput__1JnVQ",specialiteTag:"Profile_specialiteTag__F83ga",fadeInRight:"Profile_fadeInRight__M1FTR",removeSpecialite:"Profile_removeSpecialite__REzjv",specialiteInput:"Profile_specialiteInput__XTTTd",addSpecialiteButton:"Profile_addSpecialiteButton__zIVhO",alert:"Profile_alert__ABJ6W",pulse:"Profile_pulse__ez1Gg",alertTitle:"Profile_alertTitle__t62gT",iconContainer:"Profile_iconContainer__iQkAw",tarifPrefix:"Profile_tarifPrefix__7OWEK",tarifInput:"Profile_tarifInput__3a-yN",tab:"Profile_tab__y7OS6",activeTab:"Profile_activeTab__S6Vs-",inactiveTab:"Profile_inactiveTab__UwPfB",loadingContainer:"Profile_loadingContainer__vo6Kn",loadingSpinner:"Profile_loadingSpinner__uwuyl",spin:"Profile_spin__2x6Kn",loadingText:"Profile_loadingText__8Zjl5",slideIn:"Profile_slideIn__mszzY",bounce:"Profile_bounce__CcRhc",shine:"Profile_shine__Sd26C",progressIndicator:"Profile_progressIndicator__cL+Rj",progressStep:"Profile_progressStep__-XZR3",progressStepActive:"Profile_progressStepActive__Rr9ZI",progressStepComplete:"Profile_progressStepComplete__Rp0y+",completionBar:"Profile_completionBar__BJanM",completionFill:"Profile_completionFill__SJfKe",required:"Profile_required__VPa5l",particle:"Profile_particle__U+5uq",backButton:"Profile_backButton__cA2BP",slideInLeft:"Profile_slideInLeft__zUh8Q",confirmationMessage:"Profile_confirmationMessage__2dDss",confirmationIcon:"Profile_confirmationIcon__IhyVN",confirmationContent:"Profile_confirmationContent__l5Ree",confirmationTitle:"Profile_confirmationTitle__0V8aX",confirmationText:"Profile_confirmationText__HJKLX",confirmationButton:"Profile_confirmationButton__IWF9y",slideInRight:"Profile_slideInRight__Q7iF+"};function MG(e){return OA({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"}},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"}}]})(e)}function EG(e){return OA({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"}},{tag:"polyline",attr:{points:"12 19 5 12 12 5"}}]})(e)}function TG(e){return OA({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}},{tag:"polyline",attr:{points:"22 4 12 14.01 9 11.01"}}]})(e)}function CG(e){return OA({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 18 9 12 15 6"}}]})(e)}function AG(e){return OA({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"23"}},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"}}]})(e)}function PG(e){return OA({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"}}]})(e)}function NG(e){return OA({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"7",height:"7"}},{tag:"rect",attr:{x:"14",y:"3",width:"7",height:"7"}},{tag:"rect",attr:{x:"14",y:"14",width:"7",height:"7"}},{tag:"rect",attr:{x:"3",y:"14",width:"7",height:"7"}}]})(e)}function kG(e){return OA({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"line",attr:{x1:"12",y1:"16",x2:"12",y2:"12"}},{tag:"line",attr:{x1:"12",y1:"8",x2:"12.01",y2:"8"}}]})(e)}function RG(e){return OA({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"8",y1:"6",x2:"21",y2:"6"}},{tag:"line",attr:{x1:"8",y1:"12",x2:"21",y2:"12"}},{tag:"line",attr:{x1:"8",y1:"18",x2:"21",y2:"18"}},{tag:"line",attr:{x1:"3",y1:"6",x2:"3.01",y2:"6"}},{tag:"line",attr:{x1:"3",y1:"12",x2:"3.01",y2:"12"}},{tag:"line",attr:{x1:"3",y1:"18",x2:"3.01",y2:"18"}}]})(e)}function IG(e){return OA({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}},{tag:"polyline",attr:{points:"22,6 12,13 2,6"}}]})(e)}function LG(e){return OA({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"}},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"}}]})(e)}function jG(e){return OA({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"}},{tag:"polyline",attr:{points:"1 20 1 14 7 14"}},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"}}]})(e)}function DG(e){return OA({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}},{tag:"polyline",attr:{points:"17 21 17 13 7 13 7 21"}},{tag:"polyline",attr:{points:"7 3 7 8 15 8"}}]})(e)}function OG(e){return OA({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"}},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}}]})(e)}function zG(e){return OA({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"}},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"}},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"}}]})(e)}function FG(e){return OA({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"}},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}}]})(e)}function UG(e){return OA({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"}}]})(e)}function BG(e){return OA({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"line",attr:{x1:"15",y1:"9",x2:"9",y2:"15"}},{tag:"line",attr:{x1:"9",y1:"9",x2:"15",y2:"15"}}]})(e)}function VG(e){return OA({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"}},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"}}]})(e)}const HG=()=>{var e,t;const n=ne(),[i,s]=(0,r.useState)({nom:"",prenom:"",email:"",motDePasse:"",specialites:[],description:"",photo:"",tarif:"0",categorieId:null,photoPath:""}),[a,o]=(0,r.useState)([]),[l,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)(""),[h,p]=(0,r.useState)("success"),[f,m]=(0,r.useState)(!0),[g,v]=(0,r.useState)(!1),[y,x]=(0,r.useState)(null),[b,_]=(0,r.useState)(""),[w,S]=(0,r.useState)(!1),[M,E]=(0,r.useState)(!1),T=(0,r.useCallback)((async()=>{try{const e=await yi.getCategories();null!==e&&void 0!==e&&e.data&&o(e.data)}catch(Ib){console.error("Erreur lors du chargement des cat\xe9gories:",Ib)}}),[]),C=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";d(e),p(t),c(!0),setTimeout((()=>c(!1)),3e3)},A=(0,r.useCallback)((async()=>{try{m(!0),S(!1);const e=await yi.getProfile();if(null!==e&&void 0!==e&&e.data){const t=e.data;if(t.categorie&&t.categorie._id&&(t.categorieId=t.categorie._id),t.photo)console.log("Photo charg\xe9e depuis l'API:",t.photo.substring(0,30)+"..."),t.photoPath=t.photo,t.photo.startsWith("data:image/")||localStorage.setItem("userPhotoUrl",t.photo);else{const e=localStorage.getItem("userPhotoUrl");e&&(console.log("Photo r\xe9cup\xe9r\xe9e depuis localStorage:",e.substring(0,30)+"..."),t.photo=e,t.photoPath=e)}if(t.specialites){if("string"===typeof t.specialites)try{t.specialites=JSON.parse(t.specialites)}catch(oq){console.error("Erreur lors du parsing des sp\xe9cialit\xe9s:",oq),t.specialites=[]}Array.isArray(t.specialites)||(t.specialites=t.specialites?[t.specialites]:[])}else t.specialites=[];s(t)}else C((null===e||void 0===e?void 0:e.message)||"Erreur lors du chargement du profil","error")}catch(Ib){var e;console.error("Erreur lors du chargement du profil:",Ib),"Session expir\xe9e"!==Ib.message&&401!==(null===(e=Ib.response)||void 0===e?void 0:e.status)||(WP.logout(),n("/login"))}finally{m(!1)}}),[n]);(0,r.useEffect)((()=>{A(),T();const e=localStorage.getItem("selectedCategoryId");e&&s((t=>He(He({},t),{},{categorieId:e})));const t=localStorage.getItem("userPhotoUrl");t&&s((e=>He(He({},e),{},{photo:t,photoPath:t})))}),[A,T]);const P=e=>{const{name:t,value:n}=e.target;s((e=>He(He({},e),{},{[t]:n})))},N=()=>{if(b.trim()){if(i.specialites.includes(b.trim()))return void C("Cette sp\xe9cialit\xe9 existe d\xe9j\xe0","error");s((e=>He(He({},e),{},{specialites:[...e.specialites,b.trim()]}))),_("")}};return f?(0,De.jsx)("div",{className:SG.loadingContainer,children:"Chargement du profil..."}):(0,De.jsxs)("div",{className:SG.profileContainer,children:[l&&(0,De.jsx)(Bi,{message:u,type:h}),(0,De.jsxs)("button",{onClick:()=>{n("/professional/dashboard")},className:SG.backButton,"aria-label":"Retour au tableau de bord",children:[(0,De.jsx)(CG,{})," Retour au tableau de bord"]}),(0,De.jsx)("h1",{className:SG.title,children:"Mon Profil Professionnel"}),(0,De.jsx)("div",{className:SG.profileCard,children:(0,De.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{v(!0),E(!1);const e=new FormData;e.append("nom",i.nom||""),e.append("prenom",i.prenom||""),e.append("email",i.email||""),e.append("description",i.description||""),e.append("tarif",String(i.tarif||0)),e.append("categorieId",i.categorieId||""),e.append("specialites",JSON.stringify(i.specialites||[])),y?(console.log("Envoi de la nouvelle photo:",y.name),e.append("photo",y)):i.photoPath&&"string"===typeof i.photoPath&&!w&&(i.photoPath.startsWith("data:image/")||(console.log("Utilisation de la photo existante:",i.photoPath.substring(0,30)+"..."),e.append("photoPath",i.photoPath)));const t={};for(let[i,r]of e.entries())"photo"===i?t[i]="[File data]":"photoPath"===i&&"string"===typeof r&&r.length>30?t[i]=r.substring(0,30)+"...":t[i]=r;console.log("Donn\xe9es envoy\xe9es (FormData):",t);const n=await yi.updateProfile(e);n.success?(C("Profil mis \xe0 jour avec succ\xe8s"),n.photoUrl&&(localStorage.setItem("userPhotoUrl",n.photoUrl),console.log("Photo URL sauvegard\xe9e:",n.photoUrl.substring(0,30)+"...")),x(null),S(!1),E(!0),setTimeout((()=>{const e=document.getElementById("update-confirmation");e&&e.scrollIntoView({behavior:"smooth"})}),100),A()):C(n.message||"Erreur lors de la mise \xe0 jour du profil","error")}catch(Ib){console.error("Erreur lors de la mise \xe0 jour du profil:",Ib),C(Ib.message||"Erreur lors de la mise \xe0 jour du profil","error")}finally{v(!1)}},children:[(0,De.jsxs)("div",{className:SG.photoSection,children:[(0,De.jsx)("div",{className:SG.photoContainer,children:i.photo&&!w?(0,De.jsx)("img",{src:(e=>{if(!e)return null;if(e.startsWith("data:image/"))return e;if(e.startsWith("http://")||e.startsWith("https://"))return e;return"".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyAvU9kEEeWjQ7IAqBYbGgC42AdkWLES81M",REACT_APP_FIREBASE_APP_ID:"1:572769350923:web:4583cdf7d3de12a6769e0e",REACT_APP_FIREBASE_AUTH_DOMAIN:"rdv-project-7ba0a.firebaseapp.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-2E561CDQNN",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"572769350923",REACT_APP_FIREBASE_PROJECT_ID:"rdv-project-7ba0a",REACT_APP_FIREBASE_STORAGE_BUCKET:"rdv-project-7ba0a.firebasestorage.app"}.REACT_APP_API_URL||"http://localhost:5000").concat(e)})(i.photo),alt:"".concat(i.prenom," ").concat(i.nom),className:SG.profilePhoto,onError:e=>{console.error("Erreur de chargement de l'image"),e.target.onerror=null,e.target.src="/default-avatar.png",S(!0)}}):(0,De.jsx)("div",{className:SG.photoPlaceholder,children:(0,De.jsxs)("span",{children:[null===(e=i.prenom)||void 0===e?void 0:e.charAt(0),null===(t=i.nom)||void 0===t?void 0:t.charAt(0)]})})}),(0,De.jsxs)("div",{className:SG.photoUpload,children:[(0,De.jsx)("label",{htmlFor:"photo",className:SG.photoUploadLabel,children:"Changer la photo"}),(0,De.jsx)("input",{type:"file",id:"photo",name:"photo",onChange:e=>{if(e.target.files&&e.target.files[0]){const t=e.target.files[0];if(t.size>5242880)return void C("La taille de l'image ne doit pas d\xe9passer 5MB","error");if(!t.type.match("image.*"))return void C("Veuillez s\xe9lectionner une image valide","error");x(t),S(!1);const n=new FileReader;n.onload=e=>{try{s((t=>He(He({},t),{},{photo:e.target.result})))}catch(Ib){console.error("Erreur lors de la pr\xe9visualisation:",Ib),S(!0)}},n.onerror=()=>{console.error("Erreur lors de la lecture du fichier"),S(!0)},n.readAsDataURL(t)}},accept:"image/*",className:SG.photoInput}),w&&(0,De.jsx)("p",{className:SG.photoError,children:"Erreur avec l'image. Veuillez en choisir une autre."})]})]}),(0,De.jsxs)("div",{className:SG.formGrid,children:[(0,De.jsxs)("div",{className:SG.formGroup,children:[(0,De.jsx)("label",{htmlFor:"prenom",children:"Pr\xe9nom"}),(0,De.jsx)("input",{type:"text",id:"prenom",name:"prenom",value:i.prenom||"",onChange:P,className:SG.formControl,required:!0})]}),(0,De.jsxs)("div",{className:SG.formGroup,children:[(0,De.jsx)("label",{htmlFor:"nom",children:"Nom"}),(0,De.jsx)("input",{type:"text",id:"nom",name:"nom",value:i.nom||"",onChange:P,className:SG.formControl,required:!0})]})]}),(0,De.jsxs)("div",{className:SG.formGroup,children:[(0,De.jsx)("label",{htmlFor:"email",children:"Email"}),(0,De.jsx)("input",{type:"email",id:"email",name:"email",value:i.email||"",onChange:P,className:SG.formControl,required:!0})]}),(0,De.jsxs)("div",{className:SG.formGroup,children:[(0,De.jsx)("label",{htmlFor:"categorieId",children:"Cat\xe9gorie professionnelle"}),(0,De.jsxs)("select",{id:"categorieId",name:"categorieId",value:i.categorieId||"",onChange:e=>{const t=e.target.value;s((e=>He(He({},e),{},{categorieId:t}))),localStorage.setItem("selectedCategoryId",t)},className:SG.formControl,required:!0,children:[(0,De.jsx)("option",{value:"",children:"S\xe9lectionner une cat\xe9gorie"}),a.map((e=>(0,De.jsx)("option",{value:e._id,children:e.nom},e._id)))]})]}),(0,De.jsxs)("div",{className:SG.formGroup,children:[(0,De.jsx)("label",{children:"Sp\xe9cialit\xe9s"}),(0,De.jsx)("div",{className:SG.specialitesContainer,children:i.specialites&&i.specialites.map(((e,t)=>(0,De.jsxs)("div",{className:SG.specialiteTag,children:[(0,De.jsx)("span",{children:e}),(0,De.jsx)("button",{type:"button",onClick:()=>(e=>{s((t=>He(He({},t),{},{specialites:t.specialites.filter(((t,n)=>n!==e))})))})(t),className:SG.removeSpecialite,"aria-label":"Supprimer cette sp\xe9cialit\xe9",children:"\xd7"})]},t)))}),(0,De.jsxs)("div",{className:SG.addSpecialiteContainer,children:[(0,De.jsx)("input",{type:"text",value:b,onChange:e=>{_(e.target.value)},placeholder:"Ajouter une sp\xe9cialit\xe9",className:SG.specialiteInput,onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),N())}}),(0,De.jsx)("button",{type:"button",onClick:N,className:SG.addSpecialiteButton,"aria-label":"Ajouter une sp\xe9cialit\xe9",children:"+"})]})]}),(0,De.jsxs)("div",{className:SG.formGroup,children:[(0,De.jsx)("label",{htmlFor:"description",children:"Description professionnelle"}),(0,De.jsx)("textarea",{id:"description",name:"description",value:i.description||"",onChange:P,className:SG.formControl,rows:4})]}),(0,De.jsxs)("div",{className:SG.formGroup,children:[(0,De.jsx)("label",{htmlFor:"tarif",children:"Tarif (Ar)"}),(0,De.jsx)("input",{type:"number",id:"tarif",name:"tarif",value:i.tarif||"0",onChange:P,className:SG.formControl,min:"0",step:"0.01"})]}),(0,De.jsx)("div",{className:SG.formActions,children:(0,De.jsx)("button",{type:"submit",className:SG.submitButton,disabled:g,children:g?"Enregistrement...":"Enregistrer les modifications"})})]})}),M&&(0,De.jsxs)("div",{id:"update-confirmation",className:SG.confirmationMessage,children:[(0,De.jsx)("div",{className:SG.confirmationIcon,children:(0,De.jsx)("i",{className:"fas fa-check-circle"})}),(0,De.jsxs)("div",{className:SG.confirmationContent,children:[(0,De.jsx)("h3",{className:SG.confirmationTitle,children:"Profil mis \xe0 jour avec succ\xe8s!"}),(0,De.jsx)("p",{className:SG.confirmationText,children:"Vos informations professionnelles ont \xe9t\xe9 mises \xe0 jour et enregistr\xe9es."}),(0,De.jsx)("button",{className:SG.confirmationButton,onClick:()=>E(!1),children:"Fermer"})]})]})]})},WG={availabilityContainer:"Availability_availabilityContainer__2O8KQ",float:"Availability_float__hdpq4",pageTitle:"Availability_pageTitle__EzaJn",fadeInScale:"Availability_fadeInScale__sQnkp",pageSubtitle:"Availability_pageSubtitle__EukKr",fadeIn:"Availability_fadeIn__RsOS6",viewToggle:"Availability_viewToggle__AWjKf",viewButton:"Availability_viewButton__lhzFj",activeView:"Availability_activeView__NquTb",contentWrapper:"Availability_contentWrapper__QRqRD",formSection:"Availability_formSection__ys4Ws",slideInLeft:"Availability_slideInLeft__PZBdO",formTitle:"Availability_formTitle__2tEdE",formGroup:"Availability_formGroup__1nD-X",formLabel:"Availability_formLabel__eOlpE",formControl:"Availability_formControl__kGRoM",timeInputsContainer:"Availability_timeInputsContainer__T2RtA",formActions:"Availability_formActions__FibAB",submitButton:"Availability_submitButton__Aqyhd",shine:"Availability_shine__KEY4-",cancelButton:"Availability_cancelButton__OBba3",slotsSection:"Availability_slotsSection__ymkmx",slideInRight:"Availability_slideInRight__Rin80",slotsTitle:"Availability_slotsTitle__3XEcN",slotsList:"Availability_slotsList__VXkEn",emptySlots:"Availability_emptySlots__suWyx",slotCard:"Availability_slotCard__AFyq+",slotDate:"Availability_slotDate__dRZPD",slotTime:"Availability_slotTime__RSxV4",slotActions:"Availability_slotActions__vZMxJ",deleteButton:"Availability_deleteButton__9GHxH",editButton:"Availability_editButton__8tjOL",calendarView:"Availability_calendarView__lO7MH",slideInUp:"Availability_slideInUp__XK4+-",calendarTitle:"Availability_calendarTitle__gNhP1",calendarNavigation:"Availability_calendarNavigation__oxju+",calendarMonth:"Availability_calendarMonth__v4lxl",calendarNavButton:"Availability_calendarNavButton__jVr9a",calendarGrid:"Availability_calendarGrid__Fqo20",calendarHeader:"Availability_calendarHeader__FCvBp",calendarDay:"Availability_calendarDay__vRiJQ",calendarCell:"Availability_calendarCell__FciNp",calendarDate:"Availability_calendarDate__-tMar",calendarSlots:"Availability_calendarSlots__ks6Qn",calendarCellWithSlots:"Availability_calendarCellWithSlots__ghScI",calendarCellOtherMonth:"Availability_calendarCellOtherMonth__Ymzri",calendarCellToday:"Availability_calendarCellToday__Xpakf",backButton:"Availability_backButton__ghGLO",errorMessage:"Availability_errorMessage__g4ABu",shake:"Availability_shake__LqMYb",successMessage:"Availability_successMessage__5jgqD",slotWarning:"Availability_slotWarning__6ZWrU",loadingSpinner:"Availability_loadingSpinner__pjlq6",spinner:"Availability_spinner__w3nIK",spin:"Availability_spin__SQyz2",pulse:"Availability_pulse__RBOJ7",fadeInPulse:"Availability_fadeInPulse__Yv7Su",slideInDown:"Availability_slideInDown__tdAfK"},GG=()=>{const e=ne(),[t,n]=(0,r.useState)([]),[i,s]=(0,r.useState)({date:"",startTime:"",endTime:""}),[a,o]=(0,r.useState)(""),[l,c]=(0,r.useState)(!0),[u,d]=(0,r.useState)("list"),[h,p]=(0,r.useState)(new Date),[f,m]=(0,r.useState)(null);(0,r.useEffect)((()=>{g()}),[]);const g=async()=>{try{c(!0);const e=await Ei();let t;console.log("R\xe9ponse API:",e),e.data&&!0===e.data.success?t=e.data.data:e.data&&Array.isArray(e.data)?t=e.data:(t=[],console.error("Structure de r\xe9ponse inattendue:",e.data));const i=Array.isArray(t)?t.map((e=>(!e._id&&e.id&&(e._id=e.id),console.log("Disponibilit\xe9 charg\xe9e:",{id:e._id||e.id,debut:e.debut,fin:e.fin}),e))):[];n(i),c(!1)}catch(a){console.error("Erreur d\xe9taill\xe9e lors du chargement des disponibilit\xe9s:",a),o("Erreur lors du chargement des disponibilit\xe9s"),n([]),c(!1)}},[v,y]=(0,r.useState)(""),x=e=>{y(e),setTimeout((()=>{y("")}),3e3)},b=e=>{const t=new Date(e);return isNaN(t)?"Date invalide":t.toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric"})},_=e=>{const t=new Date(e);return isNaN(t)?"Heure invalide":t.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})},w=(e,t)=>new Date(e,t+1,0).getDate(),S=e=>{const t=new Date;return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()};return l?(0,De.jsx)("div",{className:WG.availabilityContainer,children:(0,De.jsxs)("div",{className:WG.loadingSpinner,children:[(0,De.jsx)("div",{className:WG.spinner}),(0,De.jsx)("p",{children:"Chargement de vos disponibilit\xe9s..."}),(0,De.jsx)("small",{className:WG.loadingHint,children:"Veuillez patienter pendant que nous r\xe9cup\xe9rons vos cr\xe9neaux..."})]})}):(0,De.jsxs)("div",{className:WG.availabilityContainer,children:[(0,De.jsxs)("button",{className:WG.backButton,onClick:()=>{e("/professional/dashboard")},children:[(0,De.jsx)(FA,{})," Retour au tableau de bord"]}),(0,De.jsx)("h1",{className:WG.pageTitle,children:"Gestion des Disponibilit\xe9s"}),(0,De.jsx)("p",{className:WG.pageSubtitle,children:"D\xe9finissez vos cr\xe9neaux horaires pour permettre aux clients de prendre rendez-vous avec vous."}),(0,De.jsxs)("div",{className:WG.viewToggle,children:[(0,De.jsxs)("button",{className:"".concat(WG.viewButton," ").concat("list"===u?WG.activeView:""),onClick:()=>d("list"),children:[(0,De.jsx)(pP,{})," Vue Liste"]}),(0,De.jsxs)("button",{className:"".concat(WG.viewButton," ").concat("calendar"===u?WG.activeView:""),onClick:()=>d("calendar"),children:[(0,De.jsx)(HA,{})," Vue Calendrier"]})]}),a&&(0,De.jsxs)("div",{className:WG.errorMessage,children:[(0,De.jsx)(QA,{}),(0,De.jsx)("span",{children:a})]}),v&&(0,De.jsxs)("div",{className:WG.successMessage,children:[(0,De.jsx)(pP,{}),(0,De.jsx)("span",{children:v})]}),(0,De.jsxs)("div",{className:WG.contentWrapper,children:[(0,De.jsxs)("div",{className:WG.formSection,children:[(0,De.jsxs)("h2",{className:WG.formTitle,children:[(0,De.jsx)(fP,{}),f?"Modifier un cr\xe9neau":"Ajouter un cr\xe9neau"]}),(0,De.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),o("");try{if(!i.date||!i.startTime||!i.endTime)return void o("Veuillez remplir tous les champs");const e=new Date("".concat(i.date,"T").concat(i.startTime,":00")),t=new Date("".concat(i.date,"T").concat(i.endTime,":00"));if(isNaN(e))throw new Error("Date de d\xe9but invalide");if(isNaN(t))throw new Error("Date de fin invalide");if(t<=e)return void o("L'heure de fin doit \xeatre apr\xe8s l'heure de d\xe9but");if(f){const n=f._id||f.id;if(!n)return console.error("Impossible de modifier: ID manquant",f),void o("Impossible de modifier cette disponibilit\xe9: ID manquant");console.log("Suppression de la disponibilit\xe9 avec ID:",n),await Ti(n),await Mi({disponibilite:{debut:e.toISOString(),fin:t.toISOString()}}),m(null),x("Disponibilit\xe9 mise \xe0 jour avec succ\xe8s")}else{const n=await Mi({disponibilite:{debut:e.toISOString(),fin:t.toISOString()}});console.log("Nouvelle disponibilit\xe9 ajout\xe9e, r\xe9ponse:",n),x("Disponibilit\xe9 ajout\xe9e avec succ\xe8s")}await g(),s({date:"",startTime:"",endTime:""})}catch(a){var t,n;console.error("Erreur d\xe9taill\xe9e:",a),o((null===(t=a.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Une erreur est survenue")}},children:[(0,De.jsxs)("div",{className:WG.formGroup,children:[(0,De.jsxs)("label",{className:WG.formLabel,htmlFor:"date",children:[(0,De.jsx)(WA,{})," Date"]}),(0,De.jsx)("input",{type:"date",id:"date",className:WG.formControl,value:i.date,onChange:e=>s(He(He({},i),{},{date:e.target.value})),min:(new Date).toISOString().split("T")[0],required:!0})]}),(0,De.jsxs)("div",{className:WG.timeInputsContainer,children:[(0,De.jsxs)("div",{className:WG.formGroup,children:[(0,De.jsxs)("label",{className:WG.formLabel,htmlFor:"startTime",children:[(0,De.jsx)(mP,{})," Heure de d\xe9but"]}),(0,De.jsx)("input",{type:"time",id:"startTime",className:WG.formControl,value:i.startTime,onChange:e=>s(He(He({},i),{},{startTime:e.target.value})),required:!0})]}),(0,De.jsxs)("div",{className:WG.formGroup,children:[(0,De.jsxs)("label",{className:WG.formLabel,htmlFor:"endTime",children:[(0,De.jsx)(JA,{})," Heure de fin"]}),(0,De.jsx)("input",{type:"time",id:"endTime",className:WG.formControl,value:i.endTime,onChange:e=>s(He(He({},i),{},{endTime:e.target.value})),required:!0})]})]}),(0,De.jsxs)("div",{className:WG.formActions,children:[(0,De.jsxs)("button",{type:"submit",className:WG.submitButton,children:[f?(0,De.jsx)(iP,{}):(0,De.jsx)(sP,{}),f?"Mettre \xe0 jour":"Ajouter"]}),f&&(0,De.jsx)("button",{type:"button",className:WG.cancelButton,onClick:()=>{m(null),s({date:"",startTime:"",endTime:""})},children:"Annuler"})]})]})]}),(0,De.jsxs)("div",{className:WG.slotsSection,children:[(0,De.jsxs)("h2",{className:WG.slotsTitle,children:[(0,De.jsx)(pP,{}),"Mes cr\xe9neaux disponibles"]}),(0,De.jsx)("div",{className:WG.slotsList,children:0===t.length?(0,De.jsxs)("div",{className:WG.emptySlots,children:[(0,De.jsx)(fP,{}),(0,De.jsx)("p",{children:"Aucun cr\xe9neau disponible"}),(0,De.jsx)("span",{children:"Ajoutez votre premier cr\xe9neau pour commencer \xe0 recevoir des rendez-vous"})]}):t.map(((e,t)=>{const n=e._id||e.id;return(0,De.jsxs)("div",{className:WG.slotCard,children:[(0,De.jsxs)("div",{className:WG.slotDate,children:[(0,De.jsx)(WA,{}),b(e.debut)]}),(0,De.jsxs)("div",{className:WG.slotTime,children:[(0,De.jsx)(mP,{}),_(e.debut)," - ",_(e.fin)]}),!n&&(0,De.jsxs)("div",{className:WG.slotWarning,children:[(0,De.jsx)(eP,{}),(0,De.jsx)("span",{children:"ID manquant - Rechargez la page"})]}),(0,De.jsxs)("div",{className:WG.slotActions,children:[(0,De.jsxs)("button",{className:WG.editButton,onClick:()=>(e=>{if(!e||!e.debut||!e.fin)return void o("Impossible de modifier cette disponibilit\xe9: donn\xe9es incompl\xe8tes");const t=new Date(e.debut),n=new Date(e.fin);if(isNaN(t)||isNaN(n))return void o("Impossible de modifier cette disponibilit\xe9: dates invalides");e._id||e.id||console.warn("\xc9dition d'une disponibilit\xe9 sans ID:",e),m(e),s({date:t.toISOString().split("T")[0],startTime:t.toTimeString().slice(0,5),endTime:n.toTimeString().slice(0,5)});const i=document.querySelector(".".concat(WG.formSection));i&&i.scrollIntoView({behavior:"smooth"})})(e),children:[(0,De.jsx)(iP,{})," Modifier"]}),n&&(0,De.jsxs)("button",{className:WG.deleteButton,onClick:()=>(async e=>{const t=e._id||e.id;if(!t)return console.error("Impossible de supprimer: ID manquant",e),void o("Impossible de supprimer cette disponibilit\xe9: ID manquant");if(window.confirm("\xcates-vous s\xfbr de vouloir supprimer cette disponibilit\xe9 ?"))try{console.log("Suppression de la disponibilit\xe9 avec ID:",t),await Ti(t),await g(),x("Disponibilit\xe9 supprim\xe9e avec succ\xe8s")}catch(a){console.error("Erreur lors de la suppression:",a),o("Erreur lors de la suppression de la disponibilit\xe9")}})(e),children:[(0,De.jsx)(cP,{})," Supprimer"]})]})]},n||"slot-".concat(t,"-").concat(e.debut,"-").concat(e.fin))}))})]})]}),"calendar"===u&&(0,De.jsxs)("div",{className:WG.calendarView,children:[(0,De.jsxs)("h2",{className:WG.calendarTitle,children:[(0,De.jsx)(HA,{}),"Calendrier des disponibilit\xe9s"]}),(0,De.jsxs)("div",{className:WG.calendarNavigation,children:[(0,De.jsx)("button",{onClick:()=>{p(new Date(h.getFullYear(),h.getMonth()-1,1))},className:WG.calendarNavButton,children:"< Mois pr\xe9c\xe9dent"}),(0,De.jsx)("h3",{className:WG.calendarMonth,children:h.toLocaleDateString("fr-FR",{month:"long",year:"numeric"})}),(0,De.jsx)("button",{onClick:()=>{p(new Date(h.getFullYear(),h.getMonth()+1,1))},className:WG.calendarNavButton,children:"Mois suivant >"})]}),(0,De.jsx)("div",{className:WG.calendarHeader,children:["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"].map(((e,t)=>(0,De.jsx)("div",{className:WG.calendarDay,children:e},"weekday-".concat(t))))}),(0,De.jsx)("div",{className:WG.calendarGrid,children:(()=>{const e=h.getFullYear(),t=h.getMonth(),n=w(e,t),i=((e,t)=>new Date(e,t,1).getDay())(e,t),r=0===i?6:i-1,s=[],a=w(e,t-1);for(let l=r-1;l>=0;l--)s.push({day:a-l,currentMonth:!1,date:new Date(e,t-1,a-l)});for(let l=1;l<=n;l++)s.push({day:l,currentMonth:!0,date:new Date(e,t,l),isToday:S(new Date(e,t,l))});const o=42-s.length;for(let l=1;l<=o;l++)s.push({day:l,currentMonth:!1,date:new Date(e,t+1,l)});return s})().map(((e,n)=>{const r=(a=e.date,t.filter((e=>{const t=new Date(e.debut);return t.getDate()===a.getDate()&&t.getMonth()===a.getMonth()&&t.getFullYear()===a.getFullYear()})));var a;const o=r.length>0;return(0,De.jsxs)("div",{className:"\n                    ".concat(WG.calendarCell,"\n                    ").concat(e.currentMonth?"":WG.calendarCellOtherMonth,"\n                    ").concat(e.isToday?WG.calendarCellToday:"","\n                    ").concat(o?WG.calendarCellWithSlots:"","\n                  "),onClick:()=>e.currentMonth&&(e=>{s(He(He({},i),{},{date:e.toISOString().split("T")[0]}));const t=document.querySelector(".".concat(WG.formSection));t&&t.scrollIntoView({behavior:"smooth"})})(e.date),children:[(0,De.jsx)("div",{className:WG.calendarDate,children:e.day}),o&&(0,De.jsxs)("div",{className:WG.calendarSlots,children:[r.length," cr\xe9neau",r.length>1?"x":""]})]},"day-".concat(e.date.toISOString()))}))})]})]})},qG=Aw("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),XG=Aw("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),YG=Aw("Layers",[["polygon",{points:"12 2 2 7 12 12 22 7 12 2",key:"1b0ttc"}],["polyline",{points:"2 17 12 22 22 17",key:"imjtdl"}],["polyline",{points:"2 12 12 17 22 12",key:"5dexcv"}]]),JG=Aw("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),KG=Aw("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),ZG=Aw("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);MH.register(RH,kW,gW,IW,OW,KH,yW);const QG=()=>{var e,t,n,i,s,a,o,l,c;const[u,d]=(0,r.useState)({utilisateurs:0,professionnels:0,totalUtilisateurs:0,rendezVous:{total:0,confirmes:0,annules:0,pending:0}}),[h,p]=(0,r.useState)(!0),[f,m]=(0,r.useState)(null),[g,v]=(0,r.useState)([]),[y,x]=(0,r.useState)(!0),[b,_]=(0,r.useState)({users:{value:0,isUp:!0},professionals:{value:0,isUp:!0},appointments:{value:0,isUp:!0},confirmed:{value:0,isUp:!0},cancelled:{value:0,isUp:!1},pending:{value:0,isUp:!0}});(0,r.useEffect)((()=>{w(),S()}),[]);const w=async()=>{try{p(!0),m(null);const e=await Ni();console.log("Donn\xe9es statistiques re\xe7ues:",e.data);try{const t=await Ri();console.log("Donn\xe9es utilisateurs re\xe7ues:",t.data);let i=[];if(t.data&&Array.isArray(t.data.utilisateurs))i=t.data.utilisateurs;else{if(!t.data||!Array.isArray(t.data))throw console.error("Format de donn\xe9es inattendu:",t.data),new Error("Format de donn\xe9es inattendu");i=t.data}console.log("Liste compl\xe8te des utilisateurs:",i);const r=i.map((e=>e.role));console.log("Tous les r\xf4les pr\xe9sents:",r);const s=i.filter((e=>"PROF"===e.role)).length,a=i.filter((e=>"UTILISATEUR"===e.role)).length;console.log("Nombre d'utilisateurs avec r\xf4le UTILISATEUR:",a),console.log("Nombre d'utilisateurs avec r\xf4le PROF:",s),s+a!==i.length&&(console.warn("Attention: Certains utilisateurs ont des r\xf4les diff\xe9rents de PROF ou UTILISATEUR"),console.log("R\xf4les non comptabilis\xe9s:",i.filter((e=>"PROF"!==e.role&&"UTILISATEUR"!==e.role)).map((e=>"".concat(e._id,": ").concat(e.role)))));try{const e=await(async()=>{try{const e=await ki();console.log("Donn\xe9es rendez-vous brutes re\xe7ues:",e);let t=[];if(e.data&&Array.isArray(e.data.rendezVous))t=e.data.rendezVous;else{if(!e.data||!Array.isArray(e.data))throw console.error("Format de donn\xe9es rendez-vous inattendu:",e.data),new Error("Format de donn\xe9es rendez-vous inattendu");t=e.data}console.log("Liste compl\xe8te des rendez-vous:",t);const n=t.map((e=>e.status));console.log("Tous les statuts pr\xe9sents:",n);const i=t.filter((e=>"CONFIRME"===e.status)).length,r=t.filter((e=>"ANNULE"===e.status)).length,s=t.filter((e=>"PENDING"===e.status)).length,a=t.length;return console.log("Nombre de rendez-vous CONFIRME:",i),console.log("Nombre de rendez-vous ANNULE:",r),console.log("Nombre de rendez-vous PENDING:",s),console.log("Nombre total de rendez-vous:",a),i+r+s!==a&&(console.warn("Attention: Certains rendez-vous ont des statuts diff\xe9rents de CONFIRME, ANNULE ou PENDING"),console.log("Statuts non comptabilis\xe9s:",t.filter((e=>"CONFIRME"!==e.status&&"ANNULE"!==e.status&&"PENDING"!==e.status)).map((e=>"".concat(e._id,": ").concat(e.status))))),{total:a,confirmes:i,annules:r,pending:s}}catch(f){throw console.error("Erreur lors du chargement des rendez-vous:",f),f}})(),t={utilisateurs:a,professionnels:s,totalUtilisateurs:i.length,rendezVous:e};console.log("Statistiques corrig\xe9es:",t),d(t),M(t)}catch(n){console.error("Erreur lors de la r\xe9cup\xe9ration des rendez-vous:",n);const t=He(He({},e.data),{},{utilisateurs:a,professionnels:s,totalUtilisateurs:i.length});d(t),M(t)}}catch(i){console.error("Erreur lors de la r\xe9cup\xe9ration des utilisateurs:",i),d(e.data),M(e.data)}}catch(r){var e,t;console.error("Erreur lors du chargement des donn\xe9es:",r),m((null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Erreur lors du chargement des donn\xe9es")}finally{p(!1)}},S=async()=>{try{const e=await ki();let t=[];e.data&&Array.isArray(e.data.rendezVous)?t=e.data.rendezVous:e.data&&Array.isArray(e.data)&&(t=e.data);const n=await Ri();let i=[];n.data&&Array.isArray(n.data.utilisateurs)?i=n.data.utilisateurs:n.data&&Array.isArray(n.data)&&(i=n.data),t.sort(((e,t)=>new Date(t.createdAt)-new Date(e.createdAt))),i.length>0&&i[0].createdAt&&i.sort(((e,t)=>new Date(t.createdAt)-new Date(e.createdAt)));const r=t.slice(0,5).map((e=>{var t,n;let i,r,s;switch(e.status){case"CONFIRME":i="appointment",r="Rendez-vous confirm\xe9",s="Rendez-vous entre ".concat((null===(t=e.utilisateur)||void 0===t?void 0:t.prenom)||"Client"," et ").concat((null===(n=e.professionnel)||void 0===n?void 0:n.prenom)||"Professionnel");break;case"ANNULE":i="cancel",r="Rendez-vous annul\xe9",s="Rendez-vous annul\xe9 pour le motif: ".concat(e.motif||"Non sp\xe9cifi\xe9");break;case"PENDING":i="pending",r="Nouveau rendez-vous",s="Rendez-vous en attente pour le motif: ".concat(e.motif||"Non sp\xe9cifi\xe9");break;default:i="appointment",r="Rendez-vous",s="Rendez-vous cr\xe9\xe9"}return{id:e._id,type:i,title:r,description:s,time:E(new Date(e.createdAt||Date.now())),data:e}})),s=i.slice(0,3).map((e=>{const t="PROF"===e.role?"professional":"user",n="PROF"===e.role?"Nouveau professionnel inscrit":"Nouvel utilisateur inscrit",i="".concat(e.prenom||""," ").concat(e.nom||""," a cr\xe9\xe9 un compte");return{id:e._id,type:t,title:n,description:i,time:E(new Date(e.createdAt||Date.now()-864e5*Math.random())),data:e}})),a=[...r,...s].sort(((e,t)=>{var n,i;const r=null!==(n=e.data)&&void 0!==n&&n.createdAt?new Date(e.data.createdAt):new Date;return(null!==(i=t.data)&&void 0!==i&&i.createdAt?new Date(t.data.createdAt):new Date)-r})).slice(0,8);v(a)}catch(e){console.error("Erreur lors du chargement des activit\xe9s r\xe9centes:",e);v([{id:1,type:"user",title:"Activit\xe9 du syst\xe8me",description:"Impossible de charger les activit\xe9s r\xe9centes",time:"\xc0 l'instant"}])}},M=e=>{_({users:{value:Math.floor(10*Math.random())+1,isUp:Math.random()>.3},professionals:{value:Math.floor(8*Math.random())+1,isUp:Math.random()>.3},appointments:{value:Math.floor(15*Math.random())+5,isUp:Math.random()>.3},confirmed:{value:Math.floor(12*Math.random())+3,isUp:Math.random()>.3},cancelled:{value:Math.floor(5*Math.random())+1,isUp:Math.random()<.7},pending:{value:Math.floor(7*Math.random())+2,isUp:Math.random()>.5}})},E=e=>{const t=new Date-e,n=Math.floor(t/1e3),i=Math.floor(n/60),r=Math.floor(i/60),s=Math.floor(r/24);return s>0?"Il y a ".concat(s," jour").concat(s>1?"s":""):r>0?"Il y a ".concat(r," heure").concat(r>1?"s":""):i>0?"Il y a ".concat(i," minute").concat(i>1?"s":""):"\xc0 l'instant"},T=e=>{switch(e){case"user":return(0,De.jsx)(NA,{size:20});case"appointment":return(0,De.jsx)(Pw,{size:20});case"cancel":return(0,De.jsx)(qG,{size:20});case"professional":return(0,De.jsx)(TA,{size:20});case"pending":return(0,De.jsx)(Nw,{size:20});default:return(0,De.jsx)(XG,{size:20})}};if(h)return(0,De.jsxs)("div",{className:"loading",children:[(0,De.jsx)("div",{className:"loading-spinner"}),(0,De.jsx)("p",{children:"Chargement du tableau de bord..."})]});if(f)return(0,De.jsxs)("div",{className:"error",children:[(0,De.jsxs)("h3",{children:[(0,De.jsx)(qG,{size:24})," Erreur"]}),(0,De.jsx)("p",{children:f}),(0,De.jsx)("button",{onClick:w,className:"retry-button",children:"R\xe9essayer"})]});console.log("Statistiques finales utilis\xe9es pour le rendu:",u);const C=((null===u||void 0===u?void 0:u.utilisateurs)||0)+((null===u||void 0===u?void 0:u.professionnels)||0),A=C>0?Math.round(((null===u||void 0===u?void 0:u.utilisateurs)||0)/C*100):0,P=C>0?Math.round(((null===u||void 0===u?void 0:u.professionnels)||0)/C*100):0,N=(null===u||void 0===u||null===(e=u.rendezVous)||void 0===e?void 0:e.total)||0,k=N>0?Math.round(((null===u||void 0===u||null===(t=u.rendezVous)||void 0===t?void 0:t.confirmes)||0)/N*100):0,R=N>0?Math.round(((null===u||void 0===u||null===(n=u.rendezVous)||void 0===n?void 0:n.annules)||0)/N*100):0,I=N>0?Math.round(((null===u||void 0===u||null===(i=u.rendezVous)||void 0===i?void 0:i.pending)||0)/N*100):0;return(0,De.jsxs)("div",{className:"admin-dashboard",children:[(0,De.jsxs)("div",{className:"dashboard-header",children:[(0,De.jsx)("h1",{children:"Tableau de Bord Administrateur"}),(0,De.jsx)("p",{children:"G\xe9rez votre application et suivez les statistiques en temps r\xe9el. Visualisez les tendances et prenez des d\xe9cisions \xe9clair\xe9es."})]}),(0,De.jsxs)("div",{className:"quick-actions",children:[(0,De.jsxs)(Ie,{to:"/admin/users",className:"action-card",children:[(0,De.jsx)("div",{className:"action-icon",children:(0,De.jsx)(NA,{size:24})}),(0,De.jsx)("div",{className:"action-title",children:"G\xe9rer les Utilisateurs"}),(0,De.jsx)("div",{className:"action-description",children:"Voir et modifier les comptes utilisateurs"})]}),(0,De.jsxs)(Ie,{to:"/admin/professionals",className:"action-card",children:[(0,De.jsx)("div",{className:"action-icon",children:(0,De.jsx)(TA,{size:24})}),(0,De.jsx)("div",{className:"action-title",children:"G\xe9rer les Professionnels"}),(0,De.jsx)("div",{className:"action-description",children:"Administrer les comptes professionnels"})]}),(0,De.jsxs)(Ie,{to:"/admin/categories",className:"action-card",children:[(0,De.jsx)("div",{className:"action-icon",children:(0,De.jsx)(YG,{size:24})}),(0,De.jsx)("div",{className:"action-title",children:"G\xe9rer les Cat\xe9gories"}),(0,De.jsx)("div",{className:"action-description",children:"Administrer les cat\xe9gories de services"})]})]}),(0,De.jsx)("div",{className:"toggle-view-container",children:(0,De.jsx)("button",{className:"toggle-view-button ".concat(y?"active":""),onClick:()=>{console.log("Toggling stats view, current state:",y),x((e=>!e))},children:y?(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)(Iw,{size:18})," Masquer les statistiques"]}):(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)(Iw,{size:18})," Afficher les statistiques"]})})}),y&&(0,De.jsxs)("div",{className:"stats-grid",children:[(0,De.jsxs)("div",{className:"stat-card users",children:[(0,De.jsx)("div",{className:"stat-icon",children:(0,De.jsx)(NA,{size:24})}),(0,De.jsx)("div",{className:"stat-title",children:"Clients"}),(0,De.jsxs)("div",{className:"stat-number",children:[(null===u||void 0===u?void 0:u.utilisateurs)||0,(0,De.jsxs)("span",{children:["comptes (",A,"%)"]})]}),(0,De.jsxs)("div",{className:"stat-trend ".concat(b.users.isUp?"up":"down"),children:[b.users.isUp?(0,De.jsx)(JG,{size:16}):(0,De.jsx)(KG,{size:16}),b.users.value,"% ce mois"]})]}),(0,De.jsxs)("div",{className:"stat-card professionals",children:[(0,De.jsx)("div",{className:"stat-icon",children:(0,De.jsx)(TA,{size:24})}),(0,De.jsx)("div",{className:"stat-title",children:"Professionnels"}),(0,De.jsxs)("div",{className:"stat-number",children:[(null===u||void 0===u?void 0:u.professionnels)||0,(0,De.jsxs)("span",{children:["inscrits (",P,"%)"]})]}),(0,De.jsxs)("div",{className:"stat-trend ".concat(b.professionals.isUp?"up":"down"),children:[b.professionals.isUp?(0,De.jsx)(JG,{size:16}):(0,De.jsx)(KG,{size:16}),b.professionals.value,"% ce mois"]})]}),(0,De.jsxs)("div",{className:"stat-card appointments",children:[(0,De.jsx)("div",{className:"stat-icon",children:(0,De.jsx)(Pw,{size:24})}),(0,De.jsx)("div",{className:"stat-title",children:"Total Rendez-vous"}),(0,De.jsxs)("div",{className:"stat-number",children:[(null===u||void 0===u||null===(s=u.rendezVous)||void 0===s?void 0:s.total)||0,(0,De.jsx)("span",{children:"au total"})]}),(0,De.jsxs)("div",{className:"stat-trend ".concat(b.appointments.isUp?"up":"down"),children:[b.appointments.isUp?(0,De.jsx)(JG,{size:16}):(0,De.jsx)(KG,{size:16}),b.appointments.value,"% ce mois"]})]}),(0,De.jsxs)("div",{className:"stat-card confirmed",children:[(0,De.jsx)("div",{className:"stat-icon",children:(0,De.jsx)(CA,{size:24})}),(0,De.jsx)("div",{className:"stat-title",children:"Rendez-vous Confirm\xe9s"}),(0,De.jsxs)("div",{className:"stat-number",children:[(null===u||void 0===u||null===(a=u.rendezVous)||void 0===a?void 0:a.confirmes)||0,(0,De.jsxs)("span",{children:["confirm\xe9s (",k,"%)"]})]}),(0,De.jsxs)("div",{className:"stat-trend ".concat(b.confirmed.isUp?"up":"down"),children:[b.confirmed.isUp?(0,De.jsx)(JG,{size:16}):(0,De.jsx)(KG,{size:16}),b.confirmed.value,"% ce mois"]})]}),(0,De.jsxs)("div",{className:"stat-card cancelled",children:[(0,De.jsx)("div",{className:"stat-icon",children:(0,De.jsx)(qG,{size:24})}),(0,De.jsx)("div",{className:"stat-title",children:"Rendez-vous Annul\xe9s"}),(0,De.jsxs)("div",{className:"stat-number",children:[(null===u||void 0===u||null===(o=u.rendezVous)||void 0===o?void 0:o.annules)||0,(0,De.jsxs)("span",{children:["annul\xe9s (",R,"%)"]})]}),(0,De.jsxs)("div",{className:"stat-trend ".concat(b.cancelled.isUp?"up":"down"),children:[b.cancelled.isUp?(0,De.jsx)(JG,{size:16}):(0,De.jsx)(KG,{size:16}),b.cancelled.value,"% ce mois"]})]}),(0,De.jsxs)("div",{className:"stat-card pending",children:[(0,De.jsx)("div",{className:"stat-icon",children:(0,De.jsx)(Nw,{size:24})}),(0,De.jsx)("div",{className:"stat-title",children:"Rendez-vous En Attente"}),(0,De.jsxs)("div",{className:"stat-number",children:[(null===u||void 0===u||null===(l=u.rendezVous)||void 0===l?void 0:l.pending)||0,(0,De.jsxs)("span",{children:["en attente (",I,"%)"]})]}),(0,De.jsxs)("div",{className:"stat-trend ".concat(b.pending.isUp?"up":"down"),children:[b.pending.isUp?(0,De.jsx)(JG,{size:16}):(0,De.jsx)(KG,{size:16}),b.pending.value,"% ce mois"]})]})]}),(0,De.jsxs)("div",{className:"charts-section",children:[(0,De.jsxs)("div",{className:"chart-container",children:[(0,De.jsxs)("div",{className:"chart-header",children:[(0,De.jsx)("h3",{children:"R\xe9partition des Utilisateurs"}),(0,De.jsx)("div",{className:"chart-controls",children:(0,De.jsx)("button",{className:"chart-control-btn",onClick:w,children:(0,De.jsx)(ZG,{size:18})})})]}),(0,De.jsx)("div",{className:"chart-body",children:(null===u||void 0===u?void 0:u.utilisateurs)>0||(null===u||void 0===u?void 0:u.professionnels)>0?(0,De.jsx)(vG,{data:{labels:["Clients (UTILISATEUR)","Professionnels (PROF)"],datasets:[{data:[(null===u||void 0===u?void 0:u.utilisateurs)||0,(null===u||void 0===u?void 0:u.professionnels)||0],backgroundColor:["rgba(67, 97, 238, 0.8)","rgba(247, 37, 133, 0.8)"],borderColor:["rgba(67, 97, 238, 1)","rgba(247, 37, 133, 1)"],borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{boxWidth:12,padding:15,font:{size:12}}},title:{display:!0,text:"R\xe9partition des utilisateurs",font:{size:16},padding:{bottom:15}}}}}):(0,De.jsxs)("div",{className:"no-data-message",children:[(0,De.jsx)(NA,{size:40,color:"#6c757d"}),(0,De.jsx)("p",{children:"Aucun utilisateur \xe0 afficher"})]})})]}),(0,De.jsxs)("div",{className:"chart-container",children:[(0,De.jsxs)("div",{className:"chart-header",children:[(0,De.jsx)("h3",{children:"R\xe9partition des Rendez-vous"}),(0,De.jsx)("div",{className:"chart-controls",children:(0,De.jsx)("button",{className:"chart-control-btn",onClick:w,children:(0,De.jsx)(ZG,{size:18})})})]}),(0,De.jsx)("div",{className:"chart-body",children:(null===u||void 0===u||null===(c=u.rendezVous)||void 0===c?void 0:c.total)>0?(0,De.jsx)(vG,{data:(()=>{var e,t,n;return{labels:["Confirm\xe9s","Annul\xe9s","En attente"],datasets:[{data:[(null===u||void 0===u||null===(e=u.rendezVous)||void 0===e?void 0:e.confirmes)||0,(null===u||void 0===u||null===(t=u.rendezVous)||void 0===t?void 0:t.annules)||0,(null===u||void 0===u||null===(n=u.rendezVous)||void 0===n?void 0:n.pending)||0],backgroundColor:["rgba(76, 201, 240, 0.8)","rgba(230, 57, 70, 0.8)","rgba(248, 150, 30, 0.8)"],borderColor:["rgba(76, 201, 240, 1)","rgba(230, 57, 70, 1)","rgba(248, 150, 30, 1)"],borderWidth:1}]}})(),options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{boxWidth:12,padding:15,font:{size:12}}},title:{display:!0,text:"R\xe9partition des rendez-vous par statut",font:{size:16},padding:{bottom:15}}}}}):(0,De.jsxs)("div",{className:"no-data-message",children:[(0,De.jsx)(Pw,{size:40,color:"#6c757d"}),(0,De.jsx)("p",{children:"Aucun rendez-vous \xe0 afficher"})]})})]})]}),(0,De.jsxs)("div",{className:"recent-activity",children:[(0,De.jsxs)("h2",{children:[(0,De.jsx)(XG,{size:24}),"Activit\xe9 R\xe9cente"]}),(0,De.jsx)("div",{className:"activity-list",children:g.length>0?g.map((e=>(0,De.jsxs)("div",{className:"activity-item",children:[(0,De.jsxs)("div",{className:"activity-content",children:[(0,De.jsx)("div",{className:"activity-icon ".concat(e.type),children:T(e.type)}),(0,De.jsxs)("div",{className:"activity-details",children:[(0,De.jsx)("h4",{children:e.title}),(0,De.jsx)("p",{children:e.description})]})]}),(0,De.jsx)("div",{className:"activity-time",children:e.time})]},e.id))):(0,De.jsx)("div",{className:"no-activity",children:(0,De.jsx)("p",{children:"Aucune activit\xe9 r\xe9cente \xe0 afficher"})})})]}),(0,De.jsx)("div",{style:{textAlign:"center",marginBottom:"30px"},children:(0,De.jsxs)("button",{onClick:w,className:"refresh-button",children:[(0,De.jsx)(ZG,{size:18})," Actualiser les donn\xe9es"]})})]})},$G=()=>{const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)(""),[s,a]=(0,r.useState)(!1),[o,l]=(0,r.useState)(null),[c,u]=(0,r.useState)(!0),[d,h]=(0,r.useState)("table"),[p,f]=(0,r.useState)(null),[m,g]=(0,r.useState)(!1),[v,y]=(0,r.useState)(null),x=(0,r.useRef)(null),b={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyAvU9kEEeWjQ7IAqBYbGgC42AdkWLES81M",REACT_APP_FIREBASE_APP_ID:"1:572769350923:web:4583cdf7d3de12a6769e0e",REACT_APP_FIREBASE_AUTH_DOMAIN:"rdv-project-7ba0a.firebaseapp.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-2E561CDQNN",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"572769350923",REACT_APP_FIREBASE_PROJECT_ID:"rdv-project-7ba0a",REACT_APP_FIREBASE_STORAGE_BUCKET:"rdv-project-7ba0a.firebasestorage.app"}.REACT_APP_API_URL||"http://localhost:5000",_=e.filter((e=>{const t=(e.nom||"").toLowerCase().includes(n.toLowerCase())||(e.prenom||"").toLowerCase().includes(n.toLowerCase())||(e.email||"").toLowerCase().includes(n.toLowerCase()),i="UTILISATEUR"===e.role;return t&&i})),w={total:_.length,actifs:_.filter((e=>"ACTIF"===e.statut)).length,inactifs:_.filter((e=>"INACTIF"===e.statut)).length,suspendus:_.filter((e=>"SUSPENDU"===e.statut)).length},S=e=>e&&e.photo?e.photo.startsWith("data:image/")||e.photo.startsWith("http")?e.photo:"".concat(b).concat(e.photo.startsWith("/")?"":"/").concat(e.photo):null,M=e=>{var t,n;return e&&e.nom?"".concat((null===(t=e.prenom)||void 0===t?void 0:t[0])||"").concat((null===(n=e.nom)||void 0===n?void 0:n[0])||"").toUpperCase():"U"},E=(0,r.useCallback)((async()=>{try{u(!0);const e=await Ri({search:n,role:"UTILISATEUR"});t(e.data||[])}catch(Ib){console.error("Erreur:",Ib),l("Erreur lors du chargement des utilisateurs")}finally{u(!1)}}),[n]);(0,r.useEffect)((()=>{E()}),[E]),(0,r.useEffect)((()=>{x.current&&x.current.focus()}),[]);const T=async(e,n)=>{try{if(a(!0),l(null),!e||!n)throw new Error("Donn\xe9es manquantes");if(!["ACTIF","INACTIF","SUSPENDU"].includes(n))throw new Error("Statut invalide");t((t=>t.map((t=>t._id===e?He(He({},t),{},{statut:n,canAccess:"SUSPENDU"!==n,canLogin:"ACTIF"===n}):t)))),await Ii(e,{statut:n,action:"UPDATE_STATUS"}),await E(),P("Succ\xe8s","Statut mis \xe0 jour avec succ\xe8s","success")}catch(Ib){var i,r,s;console.error("Erreur d\xe9taill\xe9e:",null===(i=Ib.response)||void 0===i?void 0:i.data),l(Ib.message),await E(),P("Erreur","\xc9chec de la mise \xe0 jour: ".concat((null===(r=Ib.response)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.message)||Ib.message),"error")}finally{a(!1)}},C=e=>{y(e),g(!0)},A=e=>{f(p&&p._id===e._id?null:e)},P=(e,t,n)=>{alert("".concat(e,": ").concat(t))},N={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},k={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:100}}},R=e=>{switch(e){case"ACTIF":return"var(--success-color)";case"INACTIF":return"var(--warning-color)";case"SUSPENDU":return"var(--error-color)";default:return"var(--gray-color)"}};return(0,De.jsxs)("div",{className:"user-management-container",children:[(0,De.jsx)(JO.div,{className:"page-navigation",initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{duration:.5},children:(0,De.jsxs)(Ie,{to:"/admin/dashboard",className:"back-button",children:[(0,De.jsx)("i",{className:"back-icon",children:"\u2190"}),(0,De.jsx)("span",{children:"Retour au tableau de bord"})]})}),(0,De.jsxs)(JO.div,{className:"user-management-header",initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.2},children:[(0,De.jsx)("h1",{children:"Gestion des Utilisateurs"}),(0,De.jsx)("p",{children:"G\xe9rez les comptes utilisateurs, leurs statuts et leurs permissions"})]}),(0,De.jsxs)(JO.div,{className:"user-management-controls",initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.3},children:[(0,De.jsxs)("div",{className:"search-container",children:[(0,De.jsx)("i",{className:"search-icon",children:"\ud83d\udd0d"}),(0,De.jsx)("input",{ref:x,type:"text",placeholder:"Rechercher par nom ou email...",value:n,onChange:e=>i(e.target.value),className:"search-input"})]}),(0,De.jsxs)("div",{className:"view-toggle",children:[(0,De.jsx)("button",{className:"view-button ".concat("table"===d?"active":""),onClick:()=>h("table"),children:(0,De.jsx)("i",{className:"view-icon",children:"\ud83d\udccb"})}),(0,De.jsx)("button",{className:"view-button ".concat("cards"===d?"active":""),onClick:()=>h("cards"),children:(0,De.jsx)("i",{className:"view-icon",children:"\ud83d\udcc7"})})]})]}),(0,De.jsxs)(JO.div,{className:"stats-dashboard",initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.4},children:[(0,De.jsxs)("div",{className:"stat-card total",children:[(0,De.jsx)("div",{className:"stat-icon",children:"\ud83d\udc65"}),(0,De.jsxs)("div",{className:"stat-content",children:[(0,De.jsx)("div",{className:"stat-value",children:w.total}),(0,De.jsx)("div",{className:"stat-label",children:"Total"})]}),(0,De.jsx)("div",{className:"stat-progress",children:(0,De.jsx)("div",{className:"progress-bar",style:{width:"100%",backgroundColor:"var(--primary-color)"}})})]}),(0,De.jsxs)("div",{className:"stat-card active",children:[(0,De.jsx)("div",{className:"stat-icon",children:"\u2705"}),(0,De.jsxs)("div",{className:"stat-content",children:[(0,De.jsx)("div",{className:"stat-value",children:w.actifs}),(0,De.jsx)("div",{className:"stat-label",children:"Actifs"})]}),(0,De.jsx)("div",{className:"stat-progress",children:(0,De.jsx)("div",{className:"progress-bar",style:{width:"".concat(w.total?w.actifs/w.total*100:0,"%"),backgroundColor:"var(--success-color)"}})})]}),(0,De.jsxs)("div",{className:"stat-card inactive",children:[(0,De.jsx)("div",{className:"stat-icon",children:"\u26a0\ufe0f"}),(0,De.jsxs)("div",{className:"stat-content",children:[(0,De.jsx)("div",{className:"stat-value",children:w.inactifs}),(0,De.jsx)("div",{className:"stat-label",children:"Inactifs"})]}),(0,De.jsx)("div",{className:"stat-progress",children:(0,De.jsx)("div",{className:"progress-bar",style:{width:"".concat(w.total?w.inactifs/w.total*100:0,"%"),backgroundColor:"var(--warning-color)"}})})]}),(0,De.jsxs)("div",{className:"stat-card suspended",children:[(0,De.jsx)("div",{className:"stat-icon",children:"\ud83d\udeab"}),(0,De.jsxs)("div",{className:"stat-content",children:[(0,De.jsx)("div",{className:"stat-value",children:w.suspendus}),(0,De.jsx)("div",{className:"stat-label",children:"Suspendus"})]}),(0,De.jsx)("div",{className:"stat-progress",children:(0,De.jsx)("div",{className:"progress-bar",style:{width:"".concat(w.total?w.suspendus/w.total*100:0,"%"),backgroundColor:"var(--error-color)"}})})]})]}),o&&(0,De.jsxs)(JO.div,{className:"error-message",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:[(0,De.jsx)("i",{className:"error-icon",children:"\u26a0\ufe0f"}),(0,De.jsx)("span",{children:o}),(0,De.jsx)("button",{className:"close-error",onClick:()=>l(null),children:"\xd7"})]}),c?(0,De.jsxs)("div",{className:"loading-container",children:[(0,De.jsx)("div",{className:"loading-spinner"}),(0,De.jsx)(JO.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,repeat:1/0,repeatType:"reverse"},children:"Chargement des utilisateurs..."})]}):(0,De.jsx)(De.Fragment,{children:"table"===d?(0,De.jsx)(JO.div,{className:"users-table-container",variants:N,initial:"hidden",animate:"visible",children:(0,De.jsxs)("table",{className:"users-table",children:[(0,De.jsx)("thead",{children:(0,De.jsxs)("tr",{children:[(0,De.jsx)("th",{children:"Nom complet"}),(0,De.jsx)("th",{children:"Email"}),(0,De.jsx)("th",{children:"Statut"}),(0,De.jsx)("th",{children:"Actions"})]})}),(0,De.jsx)("tbody",{children:(0,De.jsx)($N,{children:_.length>0?_.map(((e,t)=>(0,De.jsxs)(JO.tr,{className:"user-row ".concat((e.statut||"").toLowerCase()),variants:k,initial:"hidden",animate:"visible",exit:{opacity:0,y:-10},transition:{delay:.05*t},whileHover:{scale:1.01,boxShadow:"0 5px 15px rgba(0,0,0,0.1)"},onClick:()=>A(e),children:[(0,De.jsxs)("td",{className:"user-name",children:[(0,De.jsx)("div",{className:"avatar",children:e.photo?(0,De.jsx)("img",{src:S(e),alt:"".concat(e.prenom," ").concat(e.nom),className:"user-photo",onLoad:()=>{console.log("Image charg\xe9e avec succ\xe8s:",S(e))},onError:t=>{var n;console.error("Erreur de chargement de l'image:",t),(n=S(e))&&(console.log("D\xe9bogage de l'URL d'image:",n),fetch(n,{method:"HEAD"}).then((e=>{console.log("Statut de l'image:",e.status,e.statusText),e.ok||console.error("L'image n'est pas accessible:",n)})).catch((e=>{console.error("Erreur lors de la v\xe9rification de l'image:",e)}))),t.target.onerror=null,t.target.style.display="none",t.target.parentNode.innerHTML=M(e)}}):M(e)}),(0,De.jsxs)("div",{className:"user-fullname",children:[(0,De.jsx)("span",{className:"user-lastname",children:e.nom||""})," ",(0,De.jsx)("span",{className:"user-firstname",children:e.prenom||""})]})]}),(0,De.jsx)("td",{className:"user-email",children:e.email||"-"}),(0,De.jsx)("td",{className:"user-status",children:(0,De.jsxs)("span",{className:"status-badge ".concat((e.statut||"").toLowerCase()),children:[e.statut||"INCONNU","INACTIF"===e.statut&&(0,De.jsx)("small",{children:" (Acc\xe8s limit\xe9)"}),"SUSPENDU"===e.statut&&(0,De.jsx)("small",{children:" (Acc\xe8s refus\xe9)"})]})}),(0,De.jsx)("td",{className:"user-actions",children:(0,De.jsxs)("div",{className:"action-container",children:[(0,De.jsxs)("select",{className:"status-select",value:e.statut||"",onChange:t=>T(e._id,t.target.value),disabled:s,children:[(0,De.jsx)("option",{value:"",children:"Modifier statut"}),(0,De.jsx)("option",{value:"ACTIF",children:"Actif"}),(0,De.jsx)("option",{value:"INACTIF",children:"Inactif"}),(0,De.jsx)("option",{value:"SUSPENDU",children:"Suspendu"})]}),(0,De.jsxs)("button",{onClick:t=>{t.stopPropagation(),C(e)},className:"delete-button",disabled:s,children:[(0,De.jsx)("i",{className:"delete-icon",children:"\ud83d\uddd1\ufe0f"}),(0,De.jsx)("span",{children:"Supprimer"})]})]})})]},e._id))):(0,De.jsx)(JO.tr,{className:"no-results",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:(0,De.jsx)("td",{colSpan:"4",children:(0,De.jsxs)("div",{className:"no-users-message",children:[(0,De.jsx)("i",{className:"info-icon",children:"\u2139\ufe0f"}),(0,De.jsx)("p",{children:"Aucun utilisateur trouv\xe9"})]})})})})})]})}):(0,De.jsx)(JO.div,{className:"users-cards-container",variants:N,initial:"hidden",animate:"visible",children:_.length>0?(0,De.jsx)("div",{className:"users-grid",children:(0,De.jsx)($N,{children:_.map(((e,t)=>(0,De.jsxs)(JO.div,{className:"user-card ".concat((e.statut||"").toLowerCase()," ").concat(p&&p._id===e._id?"selected":""),variants:k,initial:"hidden",animate:"visible",exit:{opacity:0,scale:.8},transition:{delay:.05*t},whileHover:{scale:1.03,boxShadow:"0 10px 25px rgba(0,0,0,0.15)"},onClick:()=>A(e),children:[(0,De.jsx)("div",{className:"card-status-indicator",style:{backgroundColor:R(e.statut)}}),(0,De.jsxs)("div",{className:"card-header",children:[(0,De.jsx)("div",{className:"card-avatar",children:e.photo?(0,De.jsx)("img",{src:S(e),alt:"".concat(e.prenom," ").concat(e.nom),className:"user-photo",onError:t=>{t.target.onerror=null,t.target.style.display="none",t.target.parentNode.innerHTML=M(e)}}):M(e)}),(0,De.jsxs)("div",{className:"card-user-info",children:[(0,De.jsxs)("h3",{className:"card-user-name",children:[e.prenom||""," ",e.nom||""]}),(0,De.jsx)("p",{className:"card-user-email",children:e.email||"-"})]})]}),(0,De.jsx)("div",{className:"card-status",children:(0,De.jsx)("span",{className:"status-badge ".concat((e.statut||"").toLowerCase()),children:e.statut||"INCONNU"})}),(0,De.jsxs)("div",{className:"card-actions",children:[(0,De.jsxs)("select",{className:"status-select",value:e.statut||"",onChange:t=>{t.stopPropagation(),T(e._id,t.target.value)},disabled:s,onClick:e=>e.stopPropagation(),children:[(0,De.jsx)("option",{value:"",children:"Modifier statut"}),(0,De.jsx)("option",{value:"ACTIF",children:"Actif"}),(0,De.jsx)("option",{value:"INACTIF",children:"Inactif"}),(0,De.jsx)("option",{value:"SUSPENDU",children:"Suspendu"})]}),(0,De.jsxs)("button",{onClick:t=>{t.stopPropagation(),C(e)},className:"delete-button",disabled:s,children:[(0,De.jsx)("i",{className:"delete-icon",children:"\ud83d\uddd1\ufe0f"}),(0,De.jsx)("span",{children:"Supprimer"})]})]})]},e._id)))})}):(0,De.jsxs)(JO.div,{className:"no-users-message",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[(0,De.jsx)("i",{className:"info-icon",children:"\u2139\ufe0f"}),(0,De.jsx)("p",{children:"Aucun utilisateur trouv\xe9"})]})})}),(0,De.jsx)($N,{children:m&&(0,De.jsx)(JO.div,{className:"modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,De.jsxs)(JO.div,{className:"confirm-modal",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{type:"spring",stiffness:300,damping:25},children:[(0,De.jsxs)("div",{className:"modal-header",children:[(0,De.jsx)("h3",{children:"Confirmer la suppression"}),(0,De.jsx)("button",{className:"close-modal",onClick:()=>g(!1),children:"\xd7"})]}),(0,De.jsxs)("div",{className:"modal-body",children:[(0,De.jsxs)("p",{children:["\xcates-vous s\xfbr de vouloir supprimer l'utilisateur ",(0,De.jsxs)("strong",{children:[null===v||void 0===v?void 0:v.prenom," ",null===v||void 0===v?void 0:v.nom]})," ?"]}),(0,De.jsx)("p",{className:"warning-text",children:"Cette action est irr\xe9versible."})]}),(0,De.jsxs)("div",{className:"modal-footer",children:[(0,De.jsx)("button",{className:"cancel-button",onClick:()=>g(!1),disabled:s,children:"Annuler"}),(0,De.jsx)("button",{className:"confirm-button",onClick:async()=>{if(v)try{a(!0),await Li(v._id),g(!1),y(null),await E(),P("Succ\xe8s","Utilisateur supprim\xe9 avec succ\xe8s","success")}catch(Ib){console.error("Erreur lors de la suppression:",Ib),P("Erreur","Erreur lors de la suppression de l'utilisateur","error")}finally{a(!1)}},disabled:s,children:s?"Suppression...":"Confirmer la suppression"})]})]})})}),(0,De.jsx)($N,{children:p&&(0,De.jsx)(JO.div,{className:"user-details-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>f(null),children:(0,De.jsxs)(JO.div,{className:"user-details-panel",initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",stiffness:300,damping:30},onClick:e=>e.stopPropagation(),children:[(0,De.jsxs)("div",{className:"details-header",children:[(0,De.jsx)("h2",{children:"D\xe9tails de l'utilisateur"}),(0,De.jsx)("button",{className:"close-details",onClick:()=>f(null),children:"\xd7"})]}),(0,De.jsxs)("div",{className:"user-profile-header",children:[(0,De.jsx)("div",{className:"large-avatar",children:p.photo?(0,De.jsx)("img",{src:S(p),alt:"".concat(p.prenom," ").concat(p.nom),className:"user-photo",onError:e=>{e.target.onerror=null,e.target.style.display="none",e.target.parentNode.innerHTML=M(p)}}):M(p)}),(0,De.jsxs)("h3",{children:[p.prenom," ",p.nom]}),(0,De.jsx)("span",{className:"status-badge ".concat((p.statut||"").toLowerCase()),children:p.statut||"INCONNU"})]}),(0,De.jsxs)("div",{className:"user-details-content",children:[(0,De.jsxs)("div",{className:"detail-item",children:[(0,De.jsx)("div",{className:"detail-label",children:"Email"}),(0,De.jsx)("div",{className:"detail-value",children:p.email||"-"})]}),(0,De.jsxs)("div",{className:"detail-item",children:[(0,De.jsx)("div",{className:"detail-label",children:"Date d'inscription"}),(0,De.jsx)("div",{className:"detail-value",children:p.dateCreation?new Date(p.dateCreation).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-"})]}),(0,De.jsxs)("div",{className:"detail-item",children:[(0,De.jsx)("div",{className:"detail-label",children:"Derni\xe8re connexion"}),(0,De.jsx)("div",{className:"detail-value",children:p.dernierConnexion?new Date(p.dernierConnexion).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Jamais connect\xe9"})]})]}),(0,De.jsxs)("div",{className:"user-details-actions",children:[(0,De.jsxs)("select",{className:"status-select",value:p.statut||"",onChange:e=>T(p._id,e.target.value),disabled:s,children:[(0,De.jsx)("option",{value:"",children:"Modifier statut"}),(0,De.jsx)("option",{value:"ACTIF",children:"Actif"}),(0,De.jsx)("option",{value:"INACTIF",children:"Inactif"}),(0,De.jsx)("option",{value:"SUSPENDU",children:"Suspendu"})]}),(0,De.jsxs)("button",{onClick:()=>C(p),className:"delete-button",disabled:s,children:[(0,De.jsx)("i",{className:"delete-icon",children:"\ud83d\uddd1\ufe0f"}),(0,De.jsx)("span",{children:"Supprimer"})]})]})]})})})]})},eq=e=>{const t=parseFloat(e);return t<20?"var(--success-color)":t<50?"var(--warning-color)":"var(--error-color)"},tq=()=>{const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)(null),[s,a]=(0,r.useState)({nom:"",description:"",tarif:"0"}),[o,l]=(0,r.useState)(!0),[c,u]=(0,r.useState)(null),[d,h]=(0,r.useState)({show:!1,message:"",type:""}),[p,f]=(0,r.useState)(""),[m,g]=(0,r.useState)("nom"),[v,y]=(0,r.useState)("asc"),[x,b]=(0,r.useState)("cards"),[_,w]=(0,r.useState)(!1),[S,M]=(0,r.useState)(!1),[E,T]=(0,r.useState)(0);(0,r.useEffect)((()=>{C()}),[]),(0,r.useEffect)((()=>{e.length>0&&T(e.length)}),[e]);const C=async()=>{l(!0);try{const e=await ji();e.data&&e.data.success&&Array.isArray(e.data.data)?t(e.data.data):(t([]),R("Format de donn\xe9es incorrect","error"))}catch(c){t([]),R("Erreur lors du chargement des cat\xe9gories","error")}finally{l(!1)}},A=async e=>{if(window.confirm("\xcates-vous s\xfbr de vouloir supprimer cette cat\xe9gorie ?"))try{await Fi(e),R("Cat\xe9gorie supprim\xe9e avec succ\xe8s!","success"),C()}catch(c){R("Erreur lors de la suppression","error")}},P=e=>{a({nom:e.nom||"",description:e.description||"",tarif:void 0!==e.tarif?e.tarif.toString():"0"}),i(e._id),w(!0)},N=e=>{const{name:t,value:n}=e.target;a((e=>He(He({},e),{},{[t]:n})))},k=()=>{a({nom:"",description:"",tarif:"0"}),i(null)},R=(e,t)=>{h({show:!0,message:e,type:t}),setTimeout((()=>{h({show:!1,message:"",type:""})}),3e3)},I=e=>{m===e?y("asc"===v?"desc":"asc"):(g(e),y("asc"))},L=e.filter((e=>e.nom.toLowerCase().includes(p.toLowerCase())||e.description&&e.description.toLowerCase().includes(p.toLowerCase()))).sort(((e,t)=>{let n=0;return"nom"===m?n=e.nom.localeCompare(t.nom):"tarif"===m&&(n=e.tarif-t.tarif),"asc"===v?n:-n})),j={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:100}}};return(0,De.jsxs)("div",{className:"category-management-container",children:[(0,De.jsx)($N,{children:d.show&&(0,De.jsx)(JO.div,{className:"notification-toast ".concat(d.type),initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},children:(0,De.jsxs)("div",{className:"notification-content",children:["success"===d.type?(0,De.jsx)(kG,{className:"notification-icon"}):(0,De.jsx)(MG,{className:"notification-icon"}),(0,De.jsx)("span",{children:d.message})]})})}),(0,De.jsx)("div",{className:"page-navigation",children:(0,De.jsxs)(Ie,{to:"/admin/dashboard",className:"back-button",children:[(0,De.jsx)(EG,{className:"back-icon"})," Retour au tableau de bord"]})}),(0,De.jsxs)("div",{className:"category-management-header",children:[(0,De.jsx)("h1",{children:"Gestion des Cat\xe9gories"}),(0,De.jsx)("p",{children:"G\xe9rez les cat\xe9gories de services disponibles sur la plateforme"})]}),(0,De.jsxs)("div",{className:"category-management-controls",children:[(0,De.jsxs)("div",{className:"search-container ".concat(S?"focused":""),children:[(0,De.jsx)(OG,{className:"search-icon"}),(0,De.jsx)(JO.input,{type:"text",placeholder:"Rechercher une cat\xe9gorie...",value:p,onChange:e=>f(e.target.value),onFocus:()=>M(!0),onBlur:()=>M(!1),className:"search-input",initial:{width:"100%"},animate:{width:S?"105%":"100%"},transition:{duration:.3}}),p&&(0,De.jsx)(JO.button,{className:"clear-search",initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},onClick:()=>f(""),children:"\xd7"})]}),(0,De.jsxs)("div",{className:"action-container",children:[(0,De.jsxs)("button",{className:"add-button",onClick:()=>{k(),w(!_)},children:[_?(0,De.jsx)(VG,{}):(0,De.jsx)(LG,{}),_?"Annuler":"Nouvelle cat\xe9gorie"]}),(0,De.jsxs)("div",{className:"view-buttons",children:[(0,De.jsx)("button",{className:"view-button ".concat("table"===x?"active":""),onClick:()=>b("table"),children:(0,De.jsx)("i",{className:"view-icon",children:"\ud83d\udccb"})}),(0,De.jsx)("button",{className:"view-button ".concat("cards"===x?"active":""),onClick:()=>b("cards"),children:(0,De.jsx)("i",{className:"view-icon",children:"\ud83d\udcc7"})})]})]})]}),(0,De.jsx)($N,{children:_&&(0,De.jsxs)(JO.div,{className:"category-form-container",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:[(0,De.jsx)("h2",{children:n?"Modifier la cat\xe9gorie":"Ajouter une nouvelle cat\xe9gorie"}),(0,De.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t=parseFloat(s.tarif);if(isNaN(t))return void R("Le tarif doit \xeatre un nombre valide","error");const i=He(He({},s),{},{tarif:t});try{n?(await zi(n,i),R("Cat\xe9gorie mise \xe0 jour avec succ\xe8s!","success")):(await Oi(i),R("Cat\xe9gorie ajout\xe9e avec succ\xe8s!","success")),k(),C(),w(!1)}catch(c){R("Erreur lors de la sauvegarde","error")}},className:"category-form",children:[(0,De.jsxs)("div",{className:"form-row",children:[(0,De.jsxs)("div",{className:"form-group",children:[(0,De.jsx)("label",{children:"Nom"}),(0,De.jsx)("input",{type:"text",name:"nom",value:s.nom,onChange:N,required:!0,placeholder:"Nom de la cat\xe9gorie"})]}),(0,De.jsxs)("div",{className:"form-group",children:[(0,De.jsx)("label",{children:"Description"}),(0,De.jsx)("textarea",{name:"description",value:s.description,onChange:N,rows:"2",placeholder:"Description de la cat\xe9gorie"})]}),(0,De.jsxs)("div",{className:"form-group",children:[(0,De.jsx)("label",{children:"Tarif (Ar / heure)"}),(0,De.jsxs)("div",{className:"input-with-icon",children:[(0,De.jsx)(AG,{className:"input-icon"}),(0,De.jsx)("input",{type:"number",name:"tarif",min:"0",step:"0.01",value:s.tarif,onChange:N,required:!0,placeholder:"0.00"})]})]})]}),(0,De.jsxs)("div",{className:"form-actions",children:[(0,De.jsx)("button",{type:"submit",className:"submit-button",children:n?(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)(DG,{className:"button-icon"})," Mettre \xe0 jour"]}):(0,De.jsxs)(De.Fragment,{children:[(0,De.jsx)(LG,{className:"button-icon"})," Ajouter"]})}),n&&(0,De.jsxs)("button",{type:"button",onClick:k,className:"cancel-button",children:[(0,De.jsx)(VG,{className:"button-icon"})," Annuler"]})]})]})]})}),o?(0,De.jsxs)("div",{className:"loading-container",children:[(0,De.jsx)("div",{className:"loading-spinner"}),(0,De.jsx)("p",{children:"Chargement des cat\xe9gories..."})]}):(0,De.jsx)(De.Fragment,{children:"table"===x?(0,De.jsx)("div",{className:"categories-table-container",children:(0,De.jsxs)("table",{className:"categories-table",children:[(0,De.jsx)("thead",{children:(0,De.jsxs)("tr",{children:[(0,De.jsxs)("th",{onClick:()=>I("nom"),className:"sortable-header",children:["Nom ","nom"===m&&(0,De.jsx)("span",{children:"asc"===v?"\u2191":"\u2193"})]}),(0,De.jsx)("th",{children:"Description"}),(0,De.jsxs)("th",{onClick:()=>I("tarif"),className:"sortable-header",children:["Tarif ","tarif"===m&&(0,De.jsx)("span",{children:"asc"===v?"\u2191":"\u2193"})]}),(0,De.jsx)("th",{children:"Actions"})]})}),(0,De.jsx)("tbody",{children:0===L.length?(0,De.jsx)("tr",{children:(0,De.jsx)("td",{colSpan:"4",className:"no-results",children:(0,De.jsxs)("div",{className:"no-categories-message",children:[(0,De.jsx)("i",{className:"info-icon",children:"\u2139\ufe0f"}),(0,De.jsx)("p",{children:"Aucune cat\xe9gorie trouv\xe9e"})]})})}):L.map((e=>(0,De.jsxs)("tr",{children:[(0,De.jsx)("td",{className:"category-name",children:e.nom}),(0,De.jsx)("td",{className:"category-description",children:e.description||"Aucune description"}),(0,De.jsxs)("td",{className:"category-tarif",children:[e.tarif," Ar / heure"]}),(0,De.jsxs)("td",{className:"category-actions",children:[(0,De.jsx)("button",{onClick:()=>P(e),className:"edit-button",title:"Modifier",children:(0,De.jsx)(PG,{className:"action-icon"})}),(0,De.jsx)("button",{onClick:()=>A(e._id),className:"delete-button",title:"Supprimer",children:(0,De.jsx)(FG,{className:"action-icon"})})]})]},e._id)))})]})}):(0,De.jsx)(JO.div,{className:"categories-cards-container",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{when:"beforeChildren",staggerChildren:.1}}},initial:"hidden",animate:"visible",children:(0,De.jsx)("div",{className:"categories-grid",children:(0,De.jsx)($N,{children:0===L.length?(0,De.jsxs)(JO.div,{className:"no-categories-message",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[(0,De.jsx)("i",{className:"info-icon",children:"\u2139\ufe0f"}),(0,De.jsx)("p",{children:"Aucune cat\xe9gorie trouv\xe9e"})]}):L.map(((e,t)=>(0,De.jsxs)(JO.div,{className:"category-card",variants:j,initial:"hidden",animate:"visible",exit:{opacity:0,scale:.8},transition:{delay:.05*t},whileHover:{y:-5},children:[(0,De.jsx)("div",{className:"card-status-indicator",style:{backgroundColor:eq(e.tarif)}}),(0,De.jsxs)("div",{className:"card-header",children:[(0,De.jsx)("div",{className:"card-avatar",children:e.nom.charAt(0)}),(0,De.jsxs)("div",{className:"card-category-info",children:[(0,De.jsx)("h3",{className:"card-category-name",children:e.nom}),(0,De.jsxs)("p",{className:"card-category-tarif",children:[e.tarif," Ar / heure"]})]})]}),(0,De.jsx)("div",{className:"card-description",children:(0,De.jsx)("p",{children:e.description||"Aucune description"})}),(0,De.jsxs)("div",{className:"card-actions",children:[(0,De.jsxs)("button",{onClick:()=>P(e),className:"card-edit-button",children:[(0,De.jsx)(PG,{className:"button-icon"})," Modifier"]}),(0,De.jsxs)("button",{onClick:()=>A(e._id),className:"card-delete-button",children:[(0,De.jsx)(FG,{className:"button-icon"})," Supprimer"]})]})]},e._id)))})})})})]})};MH.register(IW,OW,HH,BH,KH,yW,kW,gW);const nq=()=>{var e,t;const[n,i]=(0,r.useState)(null),[s,a]=(0,r.useState)("month"),o=(0,r.useCallback)((async()=>{try{const e=await Di();i(e.data)}catch(Ib){console.error("Erreur lors du chargement des statistiques:",Ib)}}),[]);(0,r.useEffect)((()=>{o()}),[o]);const l={labels:(null===n||void 0===n||null===(e=n.rendezVousParMois)||void 0===e?void 0:e.map((e=>e.mois)))||[],datasets:[{label:"Nombre de rendez-vous",data:(null===n||void 0===n||null===(t=n.rendezVousParMois)||void 0===t?void 0:t.map((e=>e.nombre)))||[],fill:!1,borderColor:"rgb(75, 192, 192)",tension:.1}]},c={labels:["Confirm\xe9s","Annul\xe9s"],datasets:[{data:[(null===n||void 0===n?void 0:n.tauxRendezVousConfirme)||0,100-((null===n||void 0===n?void 0:n.tauxRendezVousConfirme)||0)],backgroundColor:["#4CAF50","#f44336"]}]};return(0,De.jsxs)("div",{className:"statistics-container",children:[(0,De.jsx)("div",{className:"controls",children:(0,De.jsxs)("select",{value:s,onChange:e=>a(e.target.value),className:"period-select",children:[(0,De.jsx)("option",{value:"week",children:"Cette semaine"}),(0,De.jsx)("option",{value:"month",children:"Ce mois"}),(0,De.jsx)("option",{value:"year",children:"Cette ann\xe9e"})]})}),(0,De.jsxs)("div",{className:"stats-grid",children:[(0,De.jsxs)("div",{className:"stat-card",children:[(0,De.jsx)("h3",{children:"Rendez-vous totaux"}),(0,De.jsx)("p",{className:"stat-number",children:(null===n||void 0===n?void 0:n.nombreRendezVous)||0})]}),(0,De.jsxs)("div",{className:"stat-card",children:[(0,De.jsx)("h3",{children:"Taux de confirmation"}),(0,De.jsxs)("p",{className:"stat-number",children:[(null===n||void 0===n?void 0:n.tauxRendezVousConfirme)||0,"%"]})]})]}),(0,De.jsxs)("div",{className:"charts-container",children:[(0,De.jsxs)("div",{className:"chart",children:[(0,De.jsx)("h3",{children:"\xc9volution des rendez-vous"}),(0,De.jsx)(fG,{data:l})]}),(0,De.jsxs)("div",{className:"chart",children:[(0,De.jsx)("h3",{children:"Taux de confirmation"}),(0,De.jsx)(mG,{data:c})]})]})]})},iq=()=>{const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)(""),[s,a]=(0,r.useState)(!1),[o,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)("grid"),[d,h]=(0,r.useState)(!0),p=ne(),f=e=>e?e.startsWith("http")?e:"http://localhost:5000".concat(e):null,m=e.filter((e=>{const t=(e.nom||"").toLowerCase().includes(n.toLowerCase())||(e.email||"").toLowerCase().includes(n.toLowerCase()),i="PROF"===e.role;return t&&i})),g=(0,r.useCallback)((async()=>{try{h(!0);const e=await Ri({role:"PROF"});t(e.data||[])}catch(Ib){console.error("Erreur:",Ib),b.error("Erreur lors du chargement des utilisateurs")}finally{h(!1)}}),[]);(0,r.useEffect)((()=>{g()}),[g]);const v=async(e,n)=>{try{if(a(!0),!e||!n)throw new Error("Donn\xe9es manquantes");if(!["ACTIF","INACTIF","SUSPENDU"].includes(n))throw new Error("Statut invalide");t((t=>t.map((t=>t._id===e?He(He({},t),{},{statut:n}):t))));const i=await Ii(e,{statut:n});t((t=>t.map((t=>t._id===e?i.data:t)))),b.success("Statut mis \xe0 jour avec succ\xe8s")}catch(Ib){console.error("Erreur:",Ib),await g(),b.error("\xc9chec de la mise \xe0 jour: ".concat(Ib.message))}finally{a(!1)}},y=async e=>{if(window.confirm("\xcates-vous s\xfbr de vouloir supprimer cet utilisateur ?"))try{await Li(e),await g(),b.success("Utilisateur supprim\xe9 avec succ\xe8s")}catch(Ib){console.error("Erreur lors de la suppression:",Ib),b.error("Erreur lors de la suppression de l'utilisateur")}},x=e=>{switch(e){case"ACTIF":return(0,De.jsx)(TG,{className:"status-icon active"});case"INACTIF":return(0,De.jsx)(MG,{className:"status-icon inactive"});case"SUSPENDU":return(0,De.jsx)(BG,{className:"status-icon suspended"});default:return(0,De.jsx)(UG,{className:"status-icon"})}},b={success:e=>{console.log("Success:",e),alert(e)},error:e=>{console.error("Error:",e),alert(e)}};return(0,De.jsxs)(JO.div,{className:"admin-dashboard professional-management",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[(0,De.jsxs)("div",{className:"dashboard-header",children:[(0,De.jsxs)(JO.button,{className:"back-button",onClick:()=>p(-1),whileHover:{x:-5},whileTap:{scale:.95},children:[(0,De.jsx)(CG,{})," Retour"]}),(0,De.jsx)(JO.h1,{initial:{y:-20},animate:{y:0},transition:{delay:.2,type:"spring",stiffness:120},children:"Gestion des Professionnels"})]}),(0,De.jsxs)("div",{className:"management-controls",children:[(0,De.jsxs)("div",{className:"search-container ".concat(o?"focused":""),children:[(0,De.jsx)(OG,{className:"search-icon"}),(0,De.jsx)(JO.input,{type:"text",placeholder:"Rechercher un professionnel...",value:n,onChange:e=>i(e.target.value),onFocus:()=>l(!0),onBlur:()=>l(!1),className:"search-input",initial:{width:"100%"},animate:{width:o?"105%":"100%"},transition:{duration:.3}}),n&&(0,De.jsx)(JO.button,{className:"clear-search",initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},onClick:()=>i(""),children:"\xd7"})]}),(0,De.jsxs)("div",{className:"view-toggle",children:[(0,De.jsxs)("button",{className:"view-button ".concat("grid"===c?"active":""),onClick:()=>u("grid"),children:[(0,De.jsx)(NG,{className:"view-icon"})," \ud83d\udcc7"]}),(0,De.jsxs)("button",{className:"view-button ".concat("table"===c?"active":""),onClick:()=>u("table"),children:[(0,De.jsx)(RG,{className:"view-icon"})," \ud83d\udccb"]})]})]}),(0,De.jsxs)("div",{className:"dashboard-stats",children:[(0,De.jsxs)(JO.div,{className:"stat-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},whileHover:{y:-5},children:[(0,De.jsx)("div",{className:"stat-icon",children:(0,De.jsx)(UG,{})}),(0,De.jsxs)("div",{className:"stat-content",children:[(0,De.jsx)("h3",{children:"Total"}),(0,De.jsx)("p",{className:"stat-value",children:m.length})]})]}),(0,De.jsxs)(JO.div,{className:"stat-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},whileHover:{y:-5},children:[(0,De.jsx)("div",{className:"stat-icon active",children:(0,De.jsx)(TG,{})}),(0,De.jsxs)("div",{className:"stat-content",children:[(0,De.jsx)("h3",{children:"Actifs"}),(0,De.jsx)("p",{className:"stat-value",children:m.filter((e=>"ACTIF"===e.statut)).length})]})]}),(0,De.jsxs)(JO.div,{className:"stat-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},whileHover:{y:-5},children:[(0,De.jsx)("div",{className:"stat-icon inactive",children:(0,De.jsx)(MG,{})}),(0,De.jsxs)("div",{className:"stat-content",children:[(0,De.jsx)("h3",{children:"Inactifs"}),(0,De.jsx)("p",{className:"stat-value",children:m.filter((e=>"INACTIF"===e.statut)).length})]})]})]}),"grid"===c?(0,De.jsx)($N,{children:(0,De.jsx)(JO.div,{className:"professionals-grid",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2,duration:.5},children:d?(0,De.jsxs)("div",{className:"loading-container",children:[(0,De.jsx)(JO.div,{className:"loading-spinner",animate:{rotate:360},transition:{repeat:1/0,duration:1,ease:"linear"},children:(0,De.jsx)(jG,{size:30})}),(0,De.jsx)("p",{children:"Chargement des professionnels..."})]}):0===m.length?(0,De.jsxs)(JO.div,{className:"no-results",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},children:[(0,De.jsx)(UG,{size:48}),(0,De.jsx)("p",{children:"Aucun professionnel trouv\xe9"}),(0,De.jsxs)("button",{className:"refresh-button",onClick:g,children:[(0,De.jsx)(jG,{})," Actualiser"]})]}):m.map(((e,t)=>(0,De.jsxs)(JO.div,{className:"professional-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*Math.min(t,5),duration:.3},whileHover:{y:-5,boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},layout:!0,children:[(0,De.jsx)("div",{className:"card-banner"}),(0,De.jsxs)("div",{className:"professional-header",children:[(0,De.jsx)("div",{className:"professional-avatar",children:e.photo?(0,De.jsx)("img",{src:f(e.photo),alt:"".concat(e.nom||""," ").concat(e.prenom||""),onError:t=>{t.target.onerror=null,t.target.style.display="none",t.target.parentNode.innerHTML='<div class="avatar-initials">'.concat(e.nom?e.nom.charAt(0):"?","</div>")}}):(0,De.jsx)("div",{className:"avatar-initials",children:e.nom?e.nom.charAt(0):"?"})}),(0,De.jsxs)("div",{className:"professional-info",children:[(0,De.jsx)("h3",{children:(e.nom||"")+" "+(e.prenom||"")}),(0,De.jsxs)("div",{className:"professional-email",children:[(0,De.jsx)(IG,{className:"email-icon"}),(0,De.jsx)("p",{children:e.email||"-"})]}),(0,De.jsxs)("div",{className:"professional-status ".concat((e.statut||"").toLowerCase()),children:[x(e.statut),(0,De.jsx)("span",{children:e.statut||"INCONNU"})]})]})]}),(0,De.jsxs)("div",{className:"professional-details",children:[e.specialite&&(0,De.jsxs)("div",{className:"detail-item",children:[(0,De.jsx)("span",{className:"detail-label",children:"Sp\xe9cialit\xe9:"}),(0,De.jsx)("span",{className:"detail-value",children:e.specialite})]}),e.telephone&&(0,De.jsxs)("div",{className:"detail-item",children:[(0,De.jsx)("span",{className:"detail-label",children:"T\xe9l\xe9phone:"}),(0,De.jsx)("span",{className:"detail-value",children:e.telephone})]})]}),(0,De.jsxs)("div",{className:"professional-actions",children:[(0,De.jsx)("div",{className:"status-selector",children:(0,De.jsxs)("select",{value:e.statut||"",onChange:t=>v(e._id,t.target.value),disabled:s,className:"status-select ".concat((e.statut||"").toLowerCase()),children:[(0,De.jsx)("option",{value:"",children:"Statut"}),(0,De.jsx)("option",{value:"ACTIF",children:"Actif"}),(0,De.jsx)("option",{value:"INACTIF",children:"Inactif"}),(0,De.jsx)("option",{value:"SUSPENDU",children:"Suspendu"})]})}),(0,De.jsxs)(JO.button,{onClick:()=>y(e._id),className:"delete-button",disabled:s,whileHover:{scale:1.05},whileTap:{scale:.95},children:[(0,De.jsx)(zG,{})," Supprimer"]})]})]},e._id)))})}):(0,De.jsx)(JO.div,{className:"professionals-table-container",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2,duration:.5},children:d?(0,De.jsxs)("div",{className:"loading-container",children:[(0,De.jsx)(JO.div,{className:"loading-spinner",animate:{rotate:360},transition:{repeat:1/0,duration:1,ease:"linear"},children:(0,De.jsx)(jG,{size:30})}),(0,De.jsx)("p",{children:"Chargement des professionnels..."})]}):0===m.length?(0,De.jsxs)(JO.div,{className:"no-results",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},children:[(0,De.jsx)(UG,{size:48}),(0,De.jsx)("p",{children:"Aucun professionnel trouv\xe9"}),(0,De.jsxs)("button",{className:"refresh-button",onClick:g,children:[(0,De.jsx)(jG,{})," Actualiser"]})]}):(0,De.jsxs)("table",{className:"professionals-table",children:[(0,De.jsx)("thead",{children:(0,De.jsxs)("tr",{children:[(0,De.jsx)("th",{children:"Professionnel"}),(0,De.jsx)("th",{children:"Email"}),(0,De.jsx)("th",{children:"Statut"}),(0,De.jsx)("th",{children:"Actions"})]})}),(0,De.jsx)("tbody",{children:m.map(((e,t)=>(0,De.jsxs)(JO.tr,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.05*Math.min(t,10),duration:.2},whileHover:{backgroundColor:"rgba(74, 108, 247, 0.05)"},children:[(0,De.jsx)("td",{children:(0,De.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[(0,De.jsx)("div",{className:"table-avatar",children:e.photo?(0,De.jsx)("img",{src:f(e.photo),alt:"".concat(e.nom||""," ").concat(e.prenom||""),onError:t=>{t.target.onerror=null,t.target.style.display="none",t.target.parentNode.innerHTML='<div class="avatar-initials">'.concat(e.nom?e.nom.charAt(0):"?","</div>")}}):(0,De.jsx)("div",{className:"avatar-initials",children:e.nom?e.nom.charAt(0):"?"})}),(0,De.jsx)("span",{children:(e.nom||"")+" "+(e.prenom||"")})]})}),(0,De.jsx)("td",{children:e.email||"-"}),(0,De.jsx)("td",{children:(0,De.jsxs)("div",{className:"table-status ".concat((e.statut||"").toLowerCase()),children:[x(e.statut),(0,De.jsx)("span",{children:e.statut||"INCONNU"})]})}),(0,De.jsx)("td",{children:(0,De.jsxs)("div",{className:"table-actions",children:[(0,De.jsxs)("select",{value:e.statut||"",onChange:t=>v(e._id,t.target.value),disabled:s,className:"status-select ".concat((e.statut||"").toLowerCase()),style:{marginRight:"0.5rem"},children:[(0,De.jsx)("option",{value:"",children:"Statut"}),(0,De.jsx)("option",{value:"ACTIF",children:"Actif"}),(0,De.jsx)("option",{value:"INACTIF",children:"Inactif"}),(0,De.jsx)("option",{value:"SUSPENDU",children:"Suspendu"})]}),(0,De.jsx)("button",{className:"table-action-button delete",onClick:()=>y(e._id),disabled:s,children:(0,De.jsx)(zG,{})})]})})]},e._id)))})]})})]})},rq=()=>{var e;const{auth:t}=(0,r.useContext)(Oe),n=ee();if("/admin/login"===n.pathname)return(0,De.jsx)(_e,{});if(!t||!t.isAuthenticated||!t.user)return(0,De.jsx)(be,{to:"/login",state:{from:n},replace:!0});const i=(null===(e=t.user)||void 0===e?void 0:e.role)||"Utilisateur",s=n.pathname;if("Utilisateur"===i&&!s.startsWith("/user")||"PROF"===i&&!s.startsWith("/professional")||"ADMIN"===i&&!s.startsWith("/admin"))switch(i){case"PROF":return(0,De.jsx)(be,{to:"/professional/dashboard",replace:!0});case"ADMIN":return(0,De.jsx)(be,{to:"/admin/dashboard",replace:!0});default:return(0,De.jsx)(be,{to:"/user/dashboard",replace:!0})}return(0,De.jsx)(_e,{})};const sq=function(){return(0,De.jsx)(ze,{children:(0,De.jsx)(Ne,{children:(0,De.jsxs)(Me,{children:[(0,De.jsx)(we,{path:"/",element:(0,De.jsx)(Bw,{})}),(0,De.jsx)(we,{path:"/login",element:(0,De.jsx)(MA,{})}),(0,De.jsx)(we,{path:"/register",element:(0,De.jsx)(PA,{})}),(0,De.jsx)(we,{path:"/admin/login",element:(0,De.jsx)(kA,{})}),(0,De.jsxs)(we,{element:(0,De.jsx)(rq,{}),children:[(0,De.jsx)(we,{path:"/user/dashboard",element:(0,De.jsx)(VP,{})}),(0,De.jsx)(we,{path:"/user/profile",element:(0,De.jsx)(wN,{})}),(0,De.jsx)(we,{path:"/user/book-appointment",element:(0,De.jsx)(KO,{})})]}),(0,De.jsx)(we,{path:"/professional/:id",element:(0,De.jsx)(Vi,{})}),(0,De.jsxs)(we,{element:(0,De.jsx)(rq,{}),children:[(0,De.jsx)(we,{path:"/professional/dashboard",element:(0,De.jsx)(wG,{})}),(0,De.jsx)(we,{path:"/professional/profile",element:(0,De.jsx)(HG,{})}),(0,De.jsx)(we,{path:"/professional/availability",element:(0,De.jsx)(GG,{})})]}),(0,De.jsxs)(we,{element:(0,De.jsx)(rq,{}),children:[(0,De.jsx)(we,{path:"/admin/dashboard",element:(0,De.jsx)(QG,{})}),(0,De.jsx)(we,{path:"/admin/users",element:(0,De.jsx)($G,{})}),(0,De.jsx)(we,{path:"/admin/categories",element:(0,De.jsx)(tq,{})}),(0,De.jsx)(we,{path:"/admin/statistics",element:(0,De.jsx)(nq,{})}),(0,De.jsx)(we,{path:"/admin/professionals",element:(0,De.jsx)(iq,{})})]}),(0,De.jsx)(we,{path:"*",element:(0,De.jsx)(be,{to:"/"})})]})})})},aq=e=>{e&&e instanceof Function&&n.e(206).then(n.bind(n,206)).then((t=>{let{getCLS:n,getFID:i,getFCP:r,getLCP:s,getTTFB:a}=t;n(e),i(e),r(e),s(e),a(e)}))};a.createRoot(document.getElementById("root")).render((0,De.jsx)(r.StrictMode,{children:(0,De.jsx)(sq,{})})),aq()})()})();